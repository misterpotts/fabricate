/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "E:\\Projects\\Foundry Development\\dev-modules\\fabricate\\module\\scripts";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/scripts/module.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJwYWNrLXN0cmVhbS9ub2RlX21vZHVsZXMvbm9kZS1saWJzLWJyb3dzZXIvbW9jay9lbXB0eS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\n");

/***/ }),

/***/ "./src/scripts/Properties.ts":
/*!***********************************!*\
  !*** ./src/scripts/Properties.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\nconst Properties = {\r\n    module: {\r\n        name: 'fabricate',\r\n        label: 'Fabricate',\r\n        templates: {\r\n            recipeTab: 'modules/fabricate/templates/recipe-tab.html',\r\n            craftingTab: 'modules/fabricate/templates/crafting-tab.html',\r\n            craftingMessage: 'modules/fabricate/templates/chat-message.html'\r\n        }\r\n    },\r\n    types: {\r\n        recipe: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].RECIPE,\r\n        component: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT,\r\n        allowableItems: ['consumable', 'loot', 'scroll', 'trinket']\r\n    },\r\n    flagKeys: {\r\n        actor: {\r\n            selectedCraftingSystem: 'crafting.selectedSystemId',\r\n            selectedRecipe: 'crafting.selectedRecipeId',\r\n            hopperForSystem: (systemId) => `crafting.${systemId}.hopper`,\r\n            knownRecipesForSystem: (systemId) => `crafting.${systemId}.knownRecipes`,\r\n        },\r\n        item: {\r\n            identity: 'identity',\r\n            partId: 'identity.partId',\r\n            systemId: 'identity.systemId',\r\n            fabricateItemType: 'type',\r\n        }\r\n    },\r\n    settingsKeys: {\r\n        craftingSystem: {\r\n            enabled: (systemId) => `${systemId}.enabled`\r\n        }\r\n    }\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Properties);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9Qcm9wZXJ0aWVzLnRzPzkwMWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUF3RDtBQUV4RCxNQUFNLFVBQVUsR0FBRztJQUNmLE1BQU0sRUFBRTtRQUNKLElBQUksRUFBRSxXQUFXO1FBQ2pCLEtBQUssRUFBRSxXQUFXO1FBQ2xCLFNBQVMsRUFBRTtZQUNQLFNBQVMsRUFBRSw2Q0FBNkM7WUFDeEQsV0FBVyxFQUFFLCtDQUErQztZQUM1RCxlQUFlLEVBQUUsK0NBQStDO1NBQ25FO0tBQ0o7SUFDRCxLQUFLLEVBQUU7UUFDSCxNQUFNLEVBQUUsc0VBQWlCLENBQUMsTUFBTTtRQUNoQyxTQUFTLEVBQUUsc0VBQWlCLENBQUMsU0FBUztRQUN0QyxjQUFjLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUM7S0FDOUQ7SUFDRCxRQUFRLEVBQUU7UUFDTixLQUFLLEVBQUU7WUFDSCxzQkFBc0IsRUFBRSwyQkFBMkI7WUFDbkQsY0FBYyxFQUFFLDJCQUEyQjtZQUMzQyxlQUFlLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEVBQUUsQ0FBQyxZQUFZLFFBQVEsU0FBUztZQUNwRSxxQkFBcUIsRUFBRSxDQUFDLFFBQWdCLEVBQUUsRUFBRSxDQUFDLFlBQVksUUFBUSxlQUFlO1NBQ25GO1FBQ0QsSUFBSSxFQUFFO1lBQ0YsUUFBUSxFQUFFLFVBQVU7WUFDcEIsTUFBTSxFQUFFLGlCQUFpQjtZQUN6QixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLGlCQUFpQixFQUFFLE1BQU07U0FDNUI7S0FDSjtJQUNELFlBQVksRUFBRTtRQUNWLGNBQWMsRUFBRTtZQUNaLE9BQU8sRUFBRSxDQUFDLFFBQWdCLEVBQUUsRUFBRSxDQUFDLEdBQUcsUUFBUSxVQUFVO1NBQ3ZEO0tBQ0o7Q0FDSixDQUFDO0FBRWEseUVBQVUsRUFBQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL1Byb3BlcnRpZXMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcblxyXG5jb25zdCBQcm9wZXJ0aWVzID0ge1xyXG4gICAgbW9kdWxlOiB7XHJcbiAgICAgICAgbmFtZTogJ2ZhYnJpY2F0ZScsXHJcbiAgICAgICAgbGFiZWw6ICdGYWJyaWNhdGUnLFxyXG4gICAgICAgIHRlbXBsYXRlczoge1xyXG4gICAgICAgICAgICByZWNpcGVUYWI6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvcmVjaXBlLXRhYi5odG1sJyxcclxuICAgICAgICAgICAgY3JhZnRpbmdUYWI6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvY3JhZnRpbmctdGFiLmh0bWwnLFxyXG4gICAgICAgICAgICBjcmFmdGluZ01lc3NhZ2U6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvY2hhdC1tZXNzYWdlLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHR5cGVzOiB7XHJcbiAgICAgICAgcmVjaXBlOiBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEUsXHJcbiAgICAgICAgY29tcG9uZW50OiBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQsXHJcbiAgICAgICAgYWxsb3dhYmxlSXRlbXM6IFsnY29uc3VtYWJsZScsICdsb290JywgJ3Njcm9sbCcsICd0cmlua2V0J11cclxuICAgIH0sXHJcbiAgICBmbGFnS2V5czoge1xyXG4gICAgICAgIGFjdG9yOiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW06ICdjcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkJyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRSZWNpcGU6ICdjcmFmdGluZy5zZWxlY3RlZFJlY2lwZUlkJyxcclxuICAgICAgICAgICAgaG9wcGVyRm9yU3lzdGVtOiAoc3lzdGVtSWQ6IHN0cmluZykgPT4gYGNyYWZ0aW5nLiR7c3lzdGVtSWR9LmhvcHBlcmAsXHJcbiAgICAgICAgICAgIGtub3duUmVjaXBlc0ZvclN5c3RlbTogKHN5c3RlbUlkOiBzdHJpbmcpID0+IGBjcmFmdGluZy4ke3N5c3RlbUlkfS5rbm93blJlY2lwZXNgLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXRlbToge1xyXG4gICAgICAgICAgICBpZGVudGl0eTogJ2lkZW50aXR5JyxcclxuICAgICAgICAgICAgcGFydElkOiAnaWRlbnRpdHkucGFydElkJyxcclxuICAgICAgICAgICAgc3lzdGVtSWQ6ICdpZGVudGl0eS5zeXN0ZW1JZCcsXHJcbiAgICAgICAgICAgIGZhYnJpY2F0ZUl0ZW1UeXBlOiAndHlwZScsXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNldHRpbmdzS2V5czoge1xyXG4gICAgICAgIGNyYWZ0aW5nU3lzdGVtOiB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IChzeXN0ZW1JZDogc3RyaW5nKSA9PiBgJHtzeXN0ZW1JZH0uZW5hYmxlZGBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcm9wZXJ0aWVzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/Properties.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateApplication.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/application/FabricateApplication.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../registries/InventoryRegistry */ \"./src/scripts/registries/InventoryRegistry.ts\");\n/* harmony import */ var _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../registries/CraftingSystemRegistry */ \"./src/scripts/registries/CraftingSystemRegistry.ts\");\n\r\n\r\nclass FabricateApplication {\r\n    constructor() {\r\n        this._inventories = new _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__[\"InventoryRegistry\"]();\r\n        this._systems = new _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemRegistry\"]();\r\n    }\r\n    get inventories() {\r\n        return this._inventories;\r\n    }\r\n    get systems() {\r\n        return this._systems;\r\n    }\r\n}\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (new FabricateApplication());\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cz83NzE2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFrRTtBQUNVO0FBRTVFLE1BQU0sb0JBQW9CO0lBS3RCO1FBQ0ksSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtFQUFpQixFQUFFLENBQUM7UUFDNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLHlGQUFzQixFQUFFLENBQUM7SUFDakQsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7Q0FFSjtBQUVjLG1FQUFJLG9CQUFvQixFQUFFLEVBQUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW52ZW50b3J5UmVnaXN0cnl9IGZyb20gXCIuLi9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1SZWdpc3RyeX0gZnJvbSBcIi4uL3JlZ2lzdHJpZXMvQ3JhZnRpbmdTeXN0ZW1SZWdpc3RyeVwiO1xyXG5cclxuY2xhc3MgRmFicmljYXRlQXBwbGljYXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yaWVzOiBJbnZlbnRvcnlSZWdpc3RyeTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5faW52ZW50b3JpZXMgPSBuZXcgSW52ZW50b3J5UmVnaXN0cnkoKTtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1zID0gbmV3IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW52ZW50b3JpZXMoKTogSW52ZW50b3J5UmVnaXN0cnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZlbnRvcmllcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtcygpOiBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtcztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBGYWJyaWNhdGVBcHBsaWNhdGlvbigpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateApplication.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateLifecycle.ts":
/*!*******************************************************!*\
  !*** ./src/scripts/application/FabricateLifecycle.ts ***!
  \*******************************************************/
/*! exports provided: FabricateLifecycle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateLifecycle\", function() { return FabricateLifecycle; });\n/* harmony import */ var _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/ItemRecipeTab */ \"./src/scripts/interface/ItemRecipeTab.ts\");\n/* harmony import */ var _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interface/CraftingTab */ \"./src/scripts/interface/CraftingTab.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass FabricateLifecycle {\r\n    static init() {\r\n        this.registerHandlebarsHelperFunctions();\r\n        this.registerItemRecipeTab();\r\n        this.registerActorCraftingTab();\r\n        this.registerApplicationListeners();\r\n    }\r\n    static registerHandlebarsHelperFunctions() {\r\n        Handlebars.registerHelper('ifEquals', function (arg1, arg2, options) {\r\n            // @ts-ignore\r\n            return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n        });\r\n        const convertEssenceSlugToIconMarkup = (essenceSlug, systemId) => {\r\n            const system = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n            const essenceDefinition = system.getEssenceBySlug(essenceSlug);\r\n            if (essenceDefinition) {\r\n                return essenceDefinition.icon;\r\n            }\r\n            return essenceSlug;\r\n        };\r\n        Handlebars.registerHelper('essenceIcon', function (arg1, arg2) {\r\n            return convertEssenceSlugToIconMarkup(arg1, arg2);\r\n        });\r\n        // @ts-ignore\r\n        Handlebars.registerHelper('essenceIconSeries', function (arg1, arg2) {\r\n            return arg1.map((essence) => convertEssenceSlugToIconMarkup(essence, arg2)).join(', ');\r\n        });\r\n    }\r\n    static registerActorCraftingTab() {\r\n        Hooks.on('renderActorSheet5e', (sheetData, sheetHtml, eventData) => {\r\n            _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__[\"CraftingTab\"].bind(sheetData, sheetHtml, eventData);\r\n        });\r\n    }\r\n    static registerItemRecipeTab() {\r\n        Hooks.on('renderItemSheet5e', (sheetData, sheetHtml) => {\r\n            _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__[\"ItemRecipeTab\"].bind(sheetData, sheetHtml);\r\n        });\r\n    }\r\n    static registerApplicationListeners() {\r\n        Hooks.on('createOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('deleteOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('updateOwnedItem', (actor, item, update) => __awaiter(this, void 0, void 0, function* () {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                if (typeof update.data !== 'undefined') {\r\n                    yield inventory.updateQuantityFor(item);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    static registerCraftingSystemSettings(systemSpec) {\r\n        game.settings.register(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey), {\r\n            name: systemSpec.name,\r\n            hint: systemSpec.enableHint,\r\n            scope: \"world\",\r\n            type: Boolean,\r\n            default: true,\r\n            config: true,\r\n            onChange: (enabled) => { _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemSpec.compendiumPackKey).enabled = enabled; }\r\n        });\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVMaWZlY3ljbGUudHM/OTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDSjtBQUdkO0FBQ21CO0FBRzFELE1BQU0sa0JBQWtCO0lBRWIsTUFBTSxDQUFDLElBQUk7UUFDZCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsQ0FBQztRQUN6QyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsNEJBQTRCLEVBQUU7SUFDdkMsQ0FBQztJQUVPLE1BQU0sQ0FBQyxpQ0FBaUM7UUFFNUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsVUFBUyxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU87WUFDOUQsYUFBYTtZQUNiLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLDhCQUE4QixHQUFHLENBQUMsV0FBbUIsRUFBRSxRQUFnQixFQUFFLEVBQUU7WUFDN0UsTUFBTSxNQUFNLEdBQXVCLDZEQUFvQixDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RyxNQUFNLGlCQUFpQixHQUFzQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDbEYsSUFBSSxpQkFBaUIsRUFBRTtnQkFDbkIsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7YUFDakM7WUFDRCxPQUFPLFdBQVcsQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRixVQUFVLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxVQUFTLElBQUksRUFBRSxJQUFJO1lBQ3hELE9BQU8sOEJBQThCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsYUFBYTtRQUNiLFVBQVUsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLEVBQUUsVUFBUyxJQUFJLEVBQUUsSUFBSTtZQUM5RCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLDhCQUE4QixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuRyxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7SUFFTyxNQUFNLENBQUMsd0JBQXdCO1FBRW5DLEtBQUssQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxTQUFvQixFQUFFLFNBQWMsRUFBRSxTQUFjLEVBQUUsRUFBRTtZQUNwRixrRUFBVyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLE1BQU0sQ0FBQyxxQkFBcUI7UUFFaEMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLFNBQW9CLEVBQUUsU0FBYyxFQUFFLEVBQUU7WUFDbkUsc0VBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLE1BQU0sQ0FBQyw0QkFBNEI7UUFFdkMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLEtBQVUsRUFBRSxFQUFFO1lBQ3ZDLE1BQU0sU0FBUyxHQUFHLDZEQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BFLElBQUksU0FBUyxFQUFFO2dCQUNYLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzthQUN0QjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsS0FBSyxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLEtBQVUsRUFBRSxFQUFFO1lBQ3ZDLE1BQU0sU0FBUyxHQUFHLDZEQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BFLElBQUksU0FBUyxFQUFFO2dCQUNYLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzthQUN0QjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsS0FBSyxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFPLEtBQVUsRUFBRSxJQUFTLEVBQUUsTUFBVyxFQUFFLEVBQUU7WUFDckUsTUFBTSxTQUFTLEdBQWMsNkRBQW9CLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDL0UsSUFBSSxTQUFTLEVBQUU7Z0JBQ1gsSUFBSSxPQUFPLE1BQU0sQ0FBQyxJQUFJLEtBQUssV0FBVyxFQUFFO29CQUNwQyxNQUFNLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDM0M7YUFDSjtRQUNMLENBQUMsRUFBQyxDQUFDO0lBRVAsQ0FBQztJQUVNLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQyxVQUEyQztRQUNwRixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsbURBQVUsQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUN6SCxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUk7WUFDckIsSUFBSSxFQUFFLFVBQVUsQ0FBQyxVQUFVO1lBQzNCLEtBQUssRUFBRSxPQUFPO1lBQ2QsSUFBSSxFQUFFLE9BQU87WUFDYixPQUFPLEVBQUUsSUFBSTtZQUNiLE1BQU0sRUFBRSxJQUFJO1lBQ1osUUFBUSxFQUFFLENBQUMsT0FBZ0IsRUFBRSxFQUFFLEdBQUUsNkRBQW9CLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQ2hKLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjtBQUUwQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUxpZmVjeWNsZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SXRlbVJlY2lwZVRhYn0gZnJvbSBcIi4uL2ludGVyZmFjZS9JdGVtUmVjaXBlVGFiXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdUYWJ9IGZyb20gXCIuLi9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCBGYWJyaWNhdGVBcHBsaWNhdGlvbiBmcm9tIFwiLi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtLCBFc3NlbmNlRGVmaW5pdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuXHJcbmNsYXNzIEZhYnJpY2F0ZUxpZmVjeWNsZSB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3Rlckl0ZW1SZWNpcGVUYWIoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQWN0b3JDcmFmdGluZ1RhYigpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJBcHBsaWNhdGlvbkxpc3RlbmVycygpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCkge1xyXG5cclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkVxdWFscycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXR1cm4gKGFyZzEgPT0gYXJnMikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAgPSAoZXNzZW5jZVNsdWc6IHN0cmluZywgc3lzdGVtSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZWZpbml0aW9uOiBFc3NlbmNlRGVmaW5pdGlvbiA9IHN5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2VTbHVnKTtcclxuICAgICAgICAgICAgaWYgKGVzc2VuY2VEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXNzZW5jZURlZmluaXRpb24uaWNvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXNzZW5jZVNsdWc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZXNzZW5jZUljb24nLCBmdW5jdGlvbihhcmcxLCBhcmcyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAoYXJnMSwgYXJnMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlc3NlbmNlSWNvblNlcmllcycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZzEubWFwKChlc3NlbmNlOiBzdHJpbmcpID0+IGNvbnZlcnRFc3NlbmNlU2x1Z1RvSWNvbk1hcmt1cChlc3NlbmNlLCBhcmcyKSkuam9pbignLCAnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJBY3RvckNyYWZ0aW5nVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldDVlJywgKHNoZWV0RGF0YTogSXRlbVNoZWV0LCBzaGVldEh0bWw6IGFueSwgZXZlbnREYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgQ3JhZnRpbmdUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCwgZXZlbnREYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJJdGVtUmVjaXBlVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0NWUnLCAoc2hlZXREYXRhOiBJdGVtU2hlZXQsIHNoZWV0SHRtbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyQXBwbGljYXRpb25MaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgIEhvb2tzLm9uKCdjcmVhdGVPd25lZEl0ZW0nLCAoYWN0b3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnkudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgSG9va3Mub24oJ2RlbGV0ZU93bmVkSXRlbScsIChhY3RvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcihhY3Rvci5pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbnZlbnRvcnkpIHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBIb29rcy5vbigndXBkYXRlT3duZWRJdGVtJywgYXN5bmMgKGFjdG9yOiBhbnksIGl0ZW06IGFueSwgdXBkYXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5OiBJbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZS5kYXRhICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGludmVudG9yeS51cGRhdGVRdWFudGl0eUZvcihpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyQ3JhZnRpbmdTeXN0ZW1TZXR0aW5ncyhzeXN0ZW1TcGVjOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+KSB7XHJcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLnNldHRpbmdzS2V5cy5jcmFmdGluZ1N5c3RlbS5lbmFibGVkKHN5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXkpLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN5c3RlbVNwZWMubmFtZSxcclxuICAgICAgICAgICAgaGludDogc3lzdGVtU3BlYy5lbmFibGVIaW50LFxyXG4gICAgICAgICAgICBzY29wZTogXCJ3b3JsZFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoZW5hYmxlZDogYm9vbGVhbikgPT4ge0ZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1TcGVjLmNvbXBlbmRpdW1QYWNrS2V5KS5lbmFibGVkID0gZW5hYmxlZDsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateLifecycle.ts\n");

/***/ }),

/***/ "./src/scripts/core/AlchemicalEffect.ts":
/*!**********************************************!*\
  !*** ./src/scripts/core/AlchemicalEffect.ts ***!
  \**********************************************/
/*! exports provided: BaseAlchemicalEffect, AlchemicalEffectType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseAlchemicalEffect\", function() { return BaseAlchemicalEffect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemicalEffectType\", function() { return AlchemicalEffectType; });\nvar AlchemicalEffectType;\r\n(function (AlchemicalEffectType) {\r\n    AlchemicalEffectType[AlchemicalEffectType[\"MODIFIER\"] = 1] = \"MODIFIER\";\r\n    AlchemicalEffectType[AlchemicalEffectType[\"BASIC\"] = 0] = \"BASIC\";\r\n})(AlchemicalEffectType || (AlchemicalEffectType = {}));\r\nclass BaseAlchemicalEffect {\r\n    constructor(essenceCombination, description, type) {\r\n        this._essenceCombination = essenceCombination;\r\n        this._description = description;\r\n        this._type = type;\r\n    }\r\n    get essenceCombination() {\r\n        return this._essenceCombination;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHM/ODdkNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFLLG9CQUdKO0FBSEQsV0FBSyxvQkFBb0I7SUFDckIsdUVBQVk7SUFDWixpRUFBUztBQUNiLENBQUMsRUFISSxvQkFBb0IsS0FBcEIsb0JBQW9CLFFBR3hCO0FBU0QsTUFBZSxvQkFBb0I7SUFNL0IsWUFBc0Isa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxJQUEwQjtRQUMvRixJQUFJLENBQUMsbUJBQW1CLEdBQUcsa0JBQWtCLENBQUM7UUFDOUMsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUM7UUFDaEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksa0JBQWtCO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFb0UiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJlbnVtIEFsY2hlbWljYWxFZmZlY3RUeXBlIHtcclxuICAgIE1PRElGSUVSID0gMSxcclxuICAgIEJBU0lDID0gMCxcclxufVxyXG5cclxuaW50ZXJmYWNlIEFsY2hlbWljYWxFZmZlY3Q8VD4ge1xyXG4gICAgZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXTtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBBbGNoZW1pY2FsRWZmZWN0VHlwZTtcclxuICAgIGFwcGx5VG8oaXRlbURhdGE6IFQpOiBUO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDxUPiBpbXBsZW1lbnRzIEFsY2hlbWljYWxFZmZlY3Q8VD57XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3R5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlO1xyXG4gICAgYWJzdHJhY3QgYXBwbHlUbyhpdGVtRGF0YTogVCk6IFQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHR5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZUNvbWJpbmF0aW9uID0gZXNzZW5jZUNvbWJpbmF0aW9uO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VDb21iaW5hdGlvbigpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VDb21iaW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGUoKTogQWxjaGVtaWNhbEVmZmVjdFR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtBbGNoZW1pY2FsRWZmZWN0LCBCYXNlQWxjaGVtaWNhbEVmZmVjdCwgQWxjaGVtaWNhbEVmZmVjdFR5cGV9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/AlchemicalEffect.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingCheck.ts":
/*!*******************************************!*\
  !*** ./src/scripts/core/CraftingCheck.ts ***!
  \*******************************************/
/*! exports provided: CraftingCheck, CraftingCheck5e, CraftingCheckResult, Tool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingCheck\", function() { return CraftingCheck; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingCheck5e\", function() { return CraftingCheck5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingCheckResult\", function() { return CraftingCheckResult; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Tool\", function() { return Tool; });\n/* harmony import */ var _FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n\r\nclass CraftingCheckResult {\r\n    constructor(outcome, expression, result, successThreshold) {\r\n        this._outcome = outcome;\r\n        this._expression = expression;\r\n        this._result = result;\r\n        this._successThreshold = successThreshold;\r\n    }\r\n    get outcome() {\r\n        return this._outcome;\r\n    }\r\n    get expression() {\r\n        return this._expression;\r\n    }\r\n    get result() {\r\n        return this._result;\r\n    }\r\n    get successThreshold() {\r\n        return this._successThreshold;\r\n    }\r\n}\r\nclass Tool {\r\n    constructor(name, proficiencyLabel) {\r\n        this._name = name;\r\n        this._proficiencyLabel = proficiencyLabel;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get proficiencyLabel() {\r\n        return this._proficiencyLabel;\r\n    }\r\n}\r\nclass CraftingCheck {\r\n    constructor(exceedThreshold) {\r\n        this._exceedThreshold = exceedThreshold;\r\n    }\r\n    perform(actor, components) {\r\n        const rollTerm = this.constructRollTerm(this.getRollTermData(actor));\r\n        // @ts-ignore\r\n        const rolled = rollTerm.roll();\r\n        const successThreshold = this.getSuccessThreshold(components);\r\n        const outcome = this.compare(rolled.result, successThreshold, this._exceedThreshold);\r\n        return new CraftingCheckResult(outcome, rollTerm.expression, rolled.result, successThreshold);\r\n    }\r\n    compare(result, threshold, exceedThreshold) {\r\n        switch (exceedThreshold) {\r\n            case true:\r\n                return result > threshold ? _FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].SUCCESS : _FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].FAILURE;\r\n            case false:\r\n                return result >= threshold ? _FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].SUCCESS : _FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].FAILURE;\r\n        }\r\n    }\r\n    convertToExpression(...values) {\r\n        if (!values || values.length === 0) {\r\n            return [];\r\n        }\r\n        return values.map((value => `${Math.sign(value) < 1 ? '-' : '+'}${value}`));\r\n    }\r\n    /*\r\n    * This function exists solely for stubbing in test, as Sinon doesn't seem to want to stub the DiceTerm constructor\r\n    * in the gulp build, but will do it in the IDE :shrug: TODO - Look at whether or not Jest is less bad at this than\r\n    * Mocha/Sinon\r\n    * */\r\n    constructRollTerm(args) {\r\n        return new DiceTerm(args);\r\n    }\r\n}\r\nclass CraftingCheck5e extends CraftingCheck {\r\n    constructor(builder) {\r\n        super(false);\r\n        this._ability = builder.ability;\r\n        this._baseDC = builder.baseDC;\r\n        this._ingredientDCModifier = builder.ingredientDCModifier;\r\n        this._essenceDCModifier = builder.essenceDCModifier;\r\n        this._tool = builder.tool;\r\n    }\r\n    static builder() {\r\n        return new CraftingCheck5e.Builder();\r\n    }\r\n    getSuccessThreshold(components) {\r\n        const ingredientCountContributes = this.ingredientDCModifier && this.ingredientDCModifier > 0;\r\n        const essenceCountContributes = this.essenceDCModifier && this.essenceDCModifier > 0;\r\n        const dcModifier = components.map((component) => {\r\n            const essenceContribution = essenceCountContributes ? component.essences.length * this.essenceDCModifier : 0;\r\n            const ingredientContribution = ingredientCountContributes ? this.ingredientDCModifier : 0;\r\n            return ingredientContribution + essenceContribution;\r\n        })\r\n            .reduce((left, right) => left + right, 0);\r\n        return this.baseDC + dcModifier;\r\n    }\r\n    getRollTermData(actor) {\r\n        const modifiers = this.getModifiers(actor, this.ability, this.tool);\r\n        return { number: 1, faces: 20, modifiers: modifiers };\r\n    }\r\n    getModifiers(actor, ability, tool) {\r\n        const actorAbilityData = Object.entries(actor.data.data.abilities).find((abilityRecord) => abilityRecord[0] === ability);\r\n        if (!actorAbilityData || !actorAbilityData[1]) {\r\n            throw new Error(`No ability definition for '${ability}' was found on Actor ${actor.name}`);\r\n        }\r\n        const craftingAbility = actorAbilityData[1];\r\n        if (!tool) {\r\n            return this.convertToExpression(craftingAbility.mod);\r\n        }\r\n        const allToolProficiencies = actor.data.data.traits.toolProf.custom.split(',')\r\n            .map((customProficiency) => customProficiency.trim())\r\n            .concat(actor.data.data.traits.toolProf.value);\r\n        const toolProficiency = allToolProficiencies\r\n            .find((toolProficiency) => tool.proficiencyLabel.localeCompare(toolProficiency, undefined, { sensitivity: 'base' }) === 0);\r\n        if (!toolProficiency) {\r\n            return this.convertToExpression(craftingAbility.mod);\r\n        }\r\n        const ownedTool = actor.items\r\n            .find((item) => item.type === 'tool' && tool.name.localeCompare(item.name, undefined, { sensitivity: 'base' }) === 0);\r\n        if (!ownedTool) {\r\n            return this.convertToExpression(craftingAbility.mod);\r\n        }\r\n        return this.convertToExpression(craftingAbility.mod, actor.data.data.attributes.prof);\r\n    }\r\n    get ability() {\r\n        return this._ability;\r\n    }\r\n    get baseDC() {\r\n        return this._baseDC;\r\n    }\r\n    get ingredientDCModifier() {\r\n        return this._ingredientDCModifier;\r\n    }\r\n    get essenceDCModifier() {\r\n        return this._essenceDCModifier;\r\n    }\r\n    get tool() {\r\n        return this._tool;\r\n    }\r\n}\r\n(function (CraftingCheck5e) {\r\n    class Builder {\r\n        build() {\r\n            return new CraftingCheck5e(this);\r\n        }\r\n        withAbility(value) {\r\n            this.ability = value;\r\n            return this;\r\n        }\r\n        withBaseDC(value) {\r\n            this.baseDC = value;\r\n            return this;\r\n        }\r\n        withIngredientDCModifier(value) {\r\n            this.ingredientDCModifier = value;\r\n            return this;\r\n        }\r\n        withEssenceDCModifier(value) {\r\n            this.essenceDCModifier = value;\r\n            return this;\r\n        }\r\n        withTool(value) {\r\n            this.tool = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingCheck5e.Builder = Builder;\r\n})(CraftingCheck5e || (CraftingCheck5e = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nQ2hlY2sudHM/YWU4NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBaUQ7QUFVakQsTUFBTSxtQkFBbUI7SUFNckIsWUFBWSxPQUFvQixFQUFFLFVBQWtCLEVBQUUsTUFBYyxFQUFFLGdCQUF3QjtRQUMxRixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsZ0JBQWdCLENBQUM7SUFDOUMsQ0FBQztJQUdELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksZ0JBQWdCO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQ2xDLENBQUM7Q0FDSjtBQUVELE1BQU0sSUFBSTtJQUlOLFlBQVksSUFBWSxFQUFFLGdCQUF3QjtRQUM5QyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsZ0JBQWdCLENBQUM7SUFDOUMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxnQkFBZ0I7UUFDaEIsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUM7SUFDbEMsQ0FBQztDQUNKO0FBRUQsTUFBZSxhQUFhO0lBR3hCLFlBQXNCLGVBQXdCO1FBQzFDLElBQUksQ0FBQyxn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LGlCQUFpQixHQUFHLEtBQUssQ0FBQztZQUMvQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sUUFBUSxDQUFDLEtBQVc7WUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztLQUVKO0lBckNZLHVCQUFPLFVBcUNuQjtBQUVMLENBQUMsRUF6Q1MsZUFBZSxLQUFmLGVBQWUsUUF5Q3hCO0FBRWlFIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9DcmFmdGluZ0NoZWNrLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtPdXRjb21lVHlwZX0gZnJvbSBcIi4vRmFicmljYXRpb25PdXRjb21lXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcblxyXG5pbnRlcmZhY2UgRGljZVRlcm1Db25zdHJ1Y3RvckRhdGEge1xyXG4gICAgbnVtYmVyPzogbnVtYmVyO1xyXG4gICAgZmFjZXM/OiBudW1iZXI7XHJcbiAgICBtb2RpZmllcnM/OiBzdHJpbmdbXTtcclxuICAgIG9wdGlvbnM/OiBvYmplY3Q7XHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nQ2hlY2tSZXN1bHQge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3V0Y29tZTogT3V0Y29tZVR5cGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9leHByZXNzaW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZXN1bHQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N1Y2Nlc3NUaHJlc2hvbGQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvdXRjb21lOiBPdXRjb21lVHlwZSwgZXhwcmVzc2lvbjogc3RyaW5nLCByZXN1bHQ6IG51bWJlciwgc3VjY2Vzc1RocmVzaG9sZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fb3V0Y29tZSA9IG91dGNvbWU7XHJcbiAgICAgICAgdGhpcy5fZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0ID0gcmVzdWx0O1xyXG4gICAgICAgIHRoaXMuX3N1Y2Nlc3NUaHJlc2hvbGQgPSBzdWNjZXNzVGhyZXNob2xkO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXQgb3V0Y29tZSgpOiBPdXRjb21lVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX291dGNvbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGV4cHJlc3Npb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXhwcmVzc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVzdWx0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3VjY2Vzc1RocmVzaG9sZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdWNjZXNzVGhyZXNob2xkO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBUb29sIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Byb2ZpY2llbmN5TGFiZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHByb2ZpY2llbmN5TGFiZWw6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpY2llbmN5TGFiZWwgPSBwcm9maWNpZW5jeUxhYmVsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHByb2ZpY2llbmN5TGFiZWwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvZmljaWVuY3lMYWJlbDtcclxuICAgIH1cclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQ3JhZnRpbmdDaGVjazxUIGV4dGVuZHMgQWN0b3I+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2V4Y2VlZFRocmVzaG9sZDogYm9vbGVhbjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoZXhjZWVkVGhyZXNob2xkOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fZXhjZWVkVGhyZXNob2xkID0gZXhjZWVkVGhyZXNob2xkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwZXJmb3JtKGFjdG9yOiBULCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogQ3JhZnRpbmdDaGVja1Jlc3VsdCB7XHJcbiAgICAgICAgY29uc3Qgcm9sbFRlcm06IERpY2VUZXJtID0gdGhpcy5jb25zdHJ1Y3RSb2xsVGVybSh0aGlzLmdldFJvbGxUZXJtRGF0YShhY3RvcikpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCByb2xsZWQ6IHtyZXN1bHQ6IG51bWJlciwgYWN0aXZlOiBib29sZWFufSA9IHJvbGxUZXJtLnJvbGwoKTtcclxuICAgICAgICBjb25zdCBzdWNjZXNzVGhyZXNob2xkID0gdGhpcy5nZXRTdWNjZXNzVGhyZXNob2xkKGNvbXBvbmVudHMpO1xyXG4gICAgICAgIGNvbnN0IG91dGNvbWU6IE91dGNvbWVUeXBlID0gdGhpcy5jb21wYXJlKHJvbGxlZC5yZXN1bHQsc3VjY2Vzc1RocmVzaG9sZCwgdGhpcy5fZXhjZWVkVGhyZXNob2xkKTtcclxuICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nQ2hlY2tSZXN1bHQob3V0Y29tZSwgcm9sbFRlcm0uZXhwcmVzc2lvbiwgcm9sbGVkLnJlc3VsdCwgc3VjY2Vzc1RocmVzaG9sZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wYXJlKHJlc3VsdDogbnVtYmVyLCB0aHJlc2hvbGQ6IG51bWJlciwgZXhjZWVkVGhyZXNob2xkOiBib29sZWFuKTogT3V0Y29tZVR5cGUge1xyXG4gICAgICAgIHN3aXRjaCAoZXhjZWVkVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgdHJ1ZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgPiB0aHJlc2hvbGQgPyBPdXRjb21lVHlwZS5TVUNDRVNTIDogT3V0Y29tZVR5cGUuRkFJTFVSRTtcclxuICAgICAgICAgICAgY2FzZSBmYWxzZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgPj0gdGhyZXNob2xkID8gT3V0Y29tZVR5cGUuU1VDQ0VTUyA6IE91dGNvbWVUeXBlLkZBSUxVUkU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjb252ZXJ0VG9FeHByZXNzaW9uKC4uLnZhbHVlczogbnVtYmVyW10pOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZXMgfHwgdmFsdWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZXMubWFwKCh2YWx1ZSA9PiBgJHtNYXRoLnNpZ24odmFsdWUpIDwgMSA/ICctJyA6ICcrJ30ke3ZhbHVlfWApKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0U3VjY2Vzc1RocmVzaG9sZChjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogbnVtYmVyO1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRSb2xsVGVybURhdGEoYWN0b3I6IFQpOiBEaWNlVGVybUNvbnN0cnVjdG9yRGF0YTtcclxuXHJcbiAgICAvKlxyXG4gICAgKiBUaGlzIGZ1bmN0aW9uIGV4aXN0cyBzb2xlbHkgZm9yIHN0dWJiaW5nIGluIHRlc3QsIGFzIFNpbm9uIGRvZXNuJ3Qgc2VlbSB0byB3YW50IHRvIHN0dWIgdGhlIERpY2VUZXJtIGNvbnN0cnVjdG9yXHJcbiAgICAqIGluIHRoZSBndWxwIGJ1aWxkLCBidXQgd2lsbCBkbyBpdCBpbiB0aGUgSURFIDpzaHJ1ZzogVE9ETyAtIExvb2sgYXQgd2hldGhlciBvciBub3QgSmVzdCBpcyBsZXNzIGJhZCBhdCB0aGlzIHRoYW5cclxuICAgICogTW9jaGEvU2lub25cclxuICAgICogKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0Um9sbFRlcm0oYXJnczogRGljZVRlcm1Db25zdHJ1Y3RvckRhdGEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERpY2VUZXJtKGFyZ3MpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgQ3JhZnRpbmdDaGVjazVlIGV4dGVuZHMgQ3JhZnRpbmdDaGVjazxBY3RvcjVlPntcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FiaWxpdHk6IEFiaWxpdHlUeXBlNWU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9iYXNlREM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2luZ3JlZGllbnREQ01vZGlmaWVyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlRENNb2RpZmllcjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdG9vbDogVG9vbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBDcmFmdGluZ0NoZWNrNWUuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9hYmlsaXR5ID0gYnVpbGRlci5hYmlsaXR5O1xyXG4gICAgICAgIHRoaXMuX2Jhc2VEQyA9IGJ1aWxkZXIuYmFzZURDO1xyXG4gICAgICAgIHRoaXMuX2luZ3JlZGllbnREQ01vZGlmaWVyID0gYnVpbGRlci5pbmdyZWRpZW50RENNb2RpZmllcjtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlRENNb2RpZmllciA9IGJ1aWxkZXIuZXNzZW5jZURDTW9kaWZpZXI7XHJcbiAgICAgICAgdGhpcy5fdG9vbCA9IGJ1aWxkZXIudG9vbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKTpDcmFmdGluZ0NoZWNrNWUuQnVpbGRlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NoZWNrNWUuQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRTdWNjZXNzVGhyZXNob2xkKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10pOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGluZ3JlZGllbnRDb3VudENvbnRyaWJ1dGVzOiBib29sZWFuID0gdGhpcy5pbmdyZWRpZW50RENNb2RpZmllciAmJiB0aGlzLmluZ3JlZGllbnREQ01vZGlmaWVyID4gMDtcclxuICAgICAgICBjb25zdCBlc3NlbmNlQ291bnRDb250cmlidXRlczogYm9vbGVhbiA9IHRoaXMuZXNzZW5jZURDTW9kaWZpZXIgJiYgdGhpcy5lc3NlbmNlRENNb2RpZmllciA+IDA7XHJcbiAgICAgICAgY29uc3QgZGNNb2RpZmllciA9IGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3NlbmNlQ29udHJpYnV0aW9uOiBudW1iZXIgPSBlc3NlbmNlQ291bnRDb250cmlidXRlcyA/IGNvbXBvbmVudC5lc3NlbmNlcy5sZW5ndGggKiB0aGlzLmVzc2VuY2VEQ01vZGlmaWVyIDogMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZ3JlZGllbnRDb250cmlidXRpb246IG51bWJlciA9IGluZ3JlZGllbnRDb3VudENvbnRyaWJ1dGVzID8gdGhpcy5pbmdyZWRpZW50RENNb2RpZmllciA6IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5ncmVkaWVudENvbnRyaWJ1dGlvbiArIGVzc2VuY2VDb250cmlidXRpb247XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlcikgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlREMgKyBkY01vZGlmaWVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRSb2xsVGVybURhdGEoYWN0b3I6IEFjdG9yNWUpOiBEaWNlVGVybUNvbnN0cnVjdG9yRGF0YSB7XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzOiBzdHJpbmdbXSA9IHRoaXMuZ2V0TW9kaWZpZXJzKGFjdG9yLCB0aGlzLmFiaWxpdHksIHRoaXMudG9vbCk7XHJcbiAgICAgICAgcmV0dXJuIHtudW1iZXI6IDEsIGZhY2VzOiAyMCwgbW9kaWZpZXJzOiBtb2RpZmllcnN9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0TW9kaWZpZXJzKGFjdG9yOiBBY3RvcjVlLCBhYmlsaXR5OiBBYmlsaXR5VHlwZTVlLCB0b29sPzogVG9vbCk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCBhY3RvckFiaWxpdHlEYXRhOiBbc3RyaW5nLCBBYmlsaXR5RGVmaW5pdGlvbjVlXSA9IE9iamVjdC5lbnRyaWVzKGFjdG9yLmRhdGEuZGF0YS5hYmlsaXRpZXMpLmZpbmQoKGFiaWxpdHlSZWNvcmQ6IFtzdHJpbmcsIEFiaWxpdHlEZWZpbml0aW9uNWVdKSA9PiBhYmlsaXR5UmVjb3JkWzBdID09PSBhYmlsaXR5KTtcclxuICAgICAgICBpZiAoIWFjdG9yQWJpbGl0eURhdGEgfHwgIWFjdG9yQWJpbGl0eURhdGFbMV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBhYmlsaXR5IGRlZmluaXRpb24gZm9yICcke2FiaWxpdHl9JyB3YXMgZm91bmQgb24gQWN0b3IgJHthY3Rvci5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjcmFmdGluZ0FiaWxpdHk6IEFiaWxpdHlEZWZpbml0aW9uNWUgPSBhY3RvckFiaWxpdHlEYXRhWzFdO1xyXG4gICAgICAgIGlmICghdG9vbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VG9FeHByZXNzaW9uKGNyYWZ0aW5nQWJpbGl0eS5tb2QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxUb29sUHJvZmljaWVuY2llczogc3RyaW5nW10gPSBhY3Rvci5kYXRhLmRhdGEudHJhaXRzLnRvb2xQcm9mLmN1c3RvbS5zcGxpdCgnLCcpXHJcbiAgICAgICAgICAgIC5tYXAoKGN1c3RvbVByb2ZpY2llbmN5OiBzdHJpbmcpID0+IGN1c3RvbVByb2ZpY2llbmN5LnRyaW0oKSlcclxuICAgICAgICAgICAgLmNvbmNhdChhY3Rvci5kYXRhLmRhdGEudHJhaXRzLnRvb2xQcm9mLnZhbHVlKTtcclxuICAgICAgICBjb25zdCB0b29sUHJvZmljaWVuY3k6IHN0cmluZyA9IGFsbFRvb2xQcm9maWNpZW5jaWVzXHJcbiAgICAgICAgICAgIC5maW5kKCh0b29sUHJvZmljaWVuY3k6IHN0cmluZykgPT4gdG9vbC5wcm9maWNpZW5jeUxhYmVsLmxvY2FsZUNvbXBhcmUodG9vbFByb2ZpY2llbmN5LCB1bmRlZmluZWQsIHtzZW5zaXRpdml0eTogJ2Jhc2UnfSkgPT09IDApO1xyXG4gICAgICAgIGlmICghdG9vbFByb2ZpY2llbmN5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUb0V4cHJlc3Npb24oY3JhZnRpbmdBYmlsaXR5Lm1vZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG93bmVkVG9vbDogSXRlbTVlID0gYWN0b3IuaXRlbXNcclxuICAgICAgICAgICAgLmZpbmQoKGl0ZW06IEl0ZW01ZSkgPT4gaXRlbS50eXBlID09PSAndG9vbCcgJiYgdG9vbC5uYW1lLmxvY2FsZUNvbXBhcmUoaXRlbS5uYW1lLCB1bmRlZmluZWQsIHtzZW5zaXRpdml0eTogJ2Jhc2UnfSkgPT09IDApO1xyXG4gICAgICAgIGlmICghb3duZWRUb29sKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUb0V4cHJlc3Npb24oY3JhZnRpbmdBYmlsaXR5Lm1vZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUb0V4cHJlc3Npb24oY3JhZnRpbmdBYmlsaXR5Lm1vZCwgYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnV0ZXMucHJvZik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFiaWxpdHkoKTogQWJpbGl0eVR5cGU1ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FiaWxpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJhc2VEQygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9iYXNlREM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGluZ3JlZGllbnREQ01vZGlmaWVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZ3JlZGllbnREQ01vZGlmaWVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlc3NlbmNlRENNb2RpZmllcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlRENNb2RpZmllcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG9vbCgpOiBUb29sIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbDtcclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nQ2hlY2s1ZSB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgYWJpbGl0eTogQWJpbGl0eVR5cGU1ZTtcclxuICAgICAgICBwdWJsaWMgYmFzZURDOiBudW1iZXI7XHJcbiAgICAgICAgcHVibGljIGluZ3JlZGllbnREQ01vZGlmaWVyOiBudW1iZXI7XHJcbiAgICAgICAgcHVibGljIGVzc2VuY2VEQ01vZGlmaWVyOiBudW1iZXI7XHJcbiAgICAgICAgcHVibGljIHRvb2w6IFRvb2w7XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpOiBDcmFmdGluZ0NoZWNrNWUge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nQ2hlY2s1ZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWJpbGl0eSh2YWx1ZTogQWJpbGl0eVR5cGU1ZSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmFiaWxpdHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEJhc2VEQyh2YWx1ZTogbnVtYmVyKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZURDID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJbmdyZWRpZW50RENNb2RpZmllcih2YWx1ZTogbnVtYmVyKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ncmVkaWVudERDTW9kaWZpZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2VEQ01vZGlmaWVyKHZhbHVlOiBudW1iZXIpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlRENNb2RpZmllciA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoVG9vbCh2YWx1ZTogVG9vbCk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2wgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDaGVjaywgQ3JhZnRpbmdDaGVjazVlLCBDcmFmdGluZ0NoZWNrUmVzdWx0LCBUb29sfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingCheck.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingComponent.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/CraftingComponent.ts ***!
  \***********************************************/
/*! exports provided: CraftingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingComponent\", function() { return CraftingComponent; });\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass CraftingComponent extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._essences = builder.essences;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingComponent.Builder();\r\n    }\r\n    static fromFlags(fabricateFlags, name, imageUrl) {\r\n        if (fabricateFlags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Crafting Component from ${fabricateFlags.type} data. `);\r\n        }\r\n        return CraftingComponent.builder()\r\n            .withName(name)\r\n            .withSystemId(fabricateFlags.identity.systemId)\r\n            .withPartId(fabricateFlags.identity.partId)\r\n            .withEssences(fabricateFlags.component.essences)\r\n            .withImageUrl(imageUrl)\r\n            .build();\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && other.name === this.name\r\n            && other.imageUrl === this.imageUrl\r\n            && other.essences.length === this.essences.length\r\n            && other.essences.every((essence) => this.essences.includes(essence));\r\n    }\r\n    isValid() {\r\n        return (this.name != null && this.name.length > 0)\r\n            && (this.essences != null)\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (CraftingComponent) {\r\n    class Builder {\r\n        constructor() {\r\n            this.essences = [];\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new CraftingComponent(this);\r\n        }\r\n    }\r\n    CraftingComponent.Builder = Builder;\r\n})(CraftingComponent || (CraftingComponent = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50LnRzPzlhZjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUc7QUFDckQ7QUFFOUMsTUFBTSxpQkFBa0IsU0FBUSw0REFBYTtJQUd6QyxZQUFZLE9BQWtDO1FBQzFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUF1QyxFQUFFLElBQVksRUFBRSxRQUFnQjtRQUMzRixJQUFJLGNBQWMsQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsU0FBUyxFQUFFO1lBQ3JELE1BQU0sSUFBSSxLQUFLLENBQUMsdUVBQXVFLGNBQWMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ3hIO1FBQ0QsT0FBTyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7YUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQzthQUNkLFlBQVksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQzthQUM5QyxVQUFVLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7YUFDMUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO2FBQy9DLFlBQVksQ0FBQyxRQUFRLENBQUM7YUFDdEIsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUF3QjtRQUNsQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLEtBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7ZUFDeEIsS0FBSyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTtlQUNoQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU07ZUFDOUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDdEYsQ0FBQztJQUVNLE9BQU87UUFDVixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQzNDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUM7ZUFDdkIsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FFSjtBQUVELFdBQVUsaUJBQWlCO0lBQ3ZCLE1BQWEsT0FBTztRQUFwQjtZQUdXLGFBQVEsR0FBYSxFQUFFLENBQUM7UUF1Q25DLENBQUM7UUFsQ1UsUUFBUSxDQUFDLEtBQWE7WUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFhO1lBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxVQUFVLENBQUMsS0FBYTtZQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQWU7WUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFdBQVcsQ0FBQyxLQUFhO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxDQUFDO0tBRUo7SUExQ1kseUJBQU8sVUEwQ25CO0FBQ0wsQ0FBQyxFQTVDUyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBNEMxQjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdDb21wb25lbnQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBlbmRpdW1FbnRyeSwgRmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIENyYWZ0aW5nQ29tcG9uZW50IGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlczogc3RyaW5nW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogQ3JhZnRpbmdDb21wb25lbnQuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuc3lzdGVtSWQsIGJ1aWxkZXIucGFydElkLCBidWlsZGVyLmltYWdlVXJsLCBidWlsZGVyLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VzID0gYnVpbGRlci5lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NvbXBvbmVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tRmxhZ3MoZmFicmljYXRlRmxhZ3M6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhLCBuYW1lOiBzdHJpbmcsIGltYWdlVXJsOiBzdHJpbmcpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgaWYgKGZhYnJpY2F0ZUZsYWdzLnR5cGUgIT09IEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgYSBGYWJyaWNhdGUgQ3JhZnRpbmcgQ29tcG9uZW50IGZyb20gJHtmYWJyaWNhdGVGbGFncy50eXBlfSBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nQ29tcG9uZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLndpdGhTeXN0ZW1JZChmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZClcclxuICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkKVxyXG4gICAgICAgICAgICAud2l0aEVzc2VuY2VzKGZhYnJpY2F0ZUZsYWdzLmNvbXBvbmVudC5lc3NlbmNlcylcclxuICAgICAgICAgICAgLndpdGhJbWFnZVVybChpbWFnZVVybClcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVxdWFscyhvdGhlcjogQ3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoIW90aGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcmVzVHlwZShvdGhlcilcclxuICAgICAgICAgICAgJiYgb3RoZXIubmFtZSA9PT0gdGhpcy5uYW1lXHJcbiAgICAgICAgICAgICYmIG90aGVyLmltYWdlVXJsID09PSB0aGlzLmltYWdlVXJsXHJcbiAgICAgICAgICAgICYmIG90aGVyLmVzc2VuY2VzLmxlbmd0aCA9PT0gdGhpcy5lc3NlbmNlcy5sZW5ndGhcclxuICAgICAgICAgICAgJiYgb3RoZXIuZXNzZW5jZXMuZXZlcnkoKGVzc2VuY2U6IHN0cmluZykgPT4gdGhpcy5lc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgJiYgKHRoaXMuZXNzZW5jZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgJiYgc3VwZXIuaXNWYWxpZCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nQ29tcG9uZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgY29tcGVuZGl1bUVudHJ5ITogQ29tcGVuZGl1bUVudHJ5O1xyXG4gICAgICAgIHB1YmxpYyBlc3NlbmNlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgaW1hZ2VVcmw6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgc3lzdGVtSWQ6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFydElkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTmFtZSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhQYXJ0SWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRJZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IHN0cmluZ1tdKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2UodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingComponent.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystem.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/CraftingSystem.ts ***!
  \********************************************/
/*! exports provided: CraftingSystem, EssenceDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystem\", function() { return CraftingSystem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceDefinition\", function() { return EssenceDefinition; });\n/* harmony import */ var _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/CraftingChatMessage */ \"./src/scripts/interface/CraftingChatMessage.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _error_CraftingError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/CraftingError */ \"./src/scripts/error/CraftingError.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass EssenceDefinition {\r\n    constructor(name, description, iconCode) {\r\n        this._name = name;\r\n        this._slug = name.toLowerCase().replace(' ', '-');\r\n        this._description = description;\r\n        this._iconCode = iconCode;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get iconCode() {\r\n        return this._iconCode;\r\n    }\r\n    get icon() {\r\n        if (this.iconCode) {\r\n            return `<i class=\"fas fa-${this._iconCode}\" title=\"${this.description}\"></i>`;\r\n        }\r\n        return this.name;\r\n    }\r\n    get slug() {\r\n        return this._slug;\r\n    }\r\n}\r\nclass CraftingSystem {\r\n    constructor(builder) {\r\n        this._recipesById = new Map();\r\n        this._componentsById = new Map();\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._essencesBySlug = new Map();\r\n        this._name = builder.name;\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._fabricator = builder.fabricator;\r\n        this._recipesById = builder.recipes;\r\n        this._componentsById = builder.components;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._enabled = builder.enabled;\r\n        this._enableHint = builder.enableHint;\r\n        this._description = builder.description;\r\n        this._essences = builder.essences;\r\n        this._essencesBySlug = new Map(builder.essences.map((essence) => [essence.slug, essence]));\r\n        this._craftingCheck = builder.craftingCheck;\r\n        this._hasCraftingCheck = !!this._craftingCheck;\r\n    }\r\n    static builder() {\r\n        return new CraftingSystem.Builder();\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(value) {\r\n        this._enabled = value;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    getEssenceBySlug(slug) {\r\n        return this._essencesBySlug.get(slug);\r\n    }\r\n    get craftingCheck() {\r\n        return this._craftingCheck;\r\n    }\r\n    get hasCraftingCheck() {\r\n        return this._hasCraftingCheck;\r\n    }\r\n    get supportsAlchemy() {\r\n        return !!this._fabricator.alchemySpecification;\r\n    }\r\n    craft(actor, inventory, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let chatMessage;\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromRecipe(inventory, recipe);\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationOutcome(fabricationOutcome);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (error) {\r\n                this.handleCraftingError(error, actor);\r\n            }\r\n        });\r\n    }\r\n    craftWithComponents(actor, inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let chatMessage;\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromComponents(actor, inventory, components);\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationOutcome(fabricationOutcome);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (error) {\r\n                this.handleCraftingError(error, actor);\r\n            }\r\n        });\r\n    }\r\n    handleCraftingError(error, actor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let chatMessage;\r\n            if (error instanceof _error_CraftingError__WEBPACK_IMPORTED_MODULE_2__[\"CraftingError\"]) {\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationError(error);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n            }\r\n            else {\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromUnexpectedError(error);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                console.error(error);\r\n            }\r\n            ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n        });\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._recipesById.values());\r\n    }\r\n    get components() {\r\n        return Array.from(this._componentsById.values());\r\n    }\r\n    getComponentByPartId(entryId) {\r\n        return this._componentsById.get(entryId);\r\n    }\r\n    supports(gameSystem) {\r\n        if (!this._supportedGameSystems || this._supportedGameSystems.length == 0) {\r\n            return true;\r\n        }\r\n        return this._supportedGameSystems.indexOf(gameSystem) > -1;\r\n    }\r\n    getRecipeByPartId(partId) {\r\n        return this._recipesById.get(partId);\r\n    }\r\n}\r\n(function (CraftingSystem) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.recipes = new Map();\r\n            this.components = new Map();\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystem(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withRecipes(value) {\r\n            this.recipes = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipes.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponent(value) {\r\n            this.components.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponents(value) {\r\n            this.components = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n        withCraftingCheck(value) {\r\n            this.craftingCheck = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystem.Builder = Builder;\r\n})(CraftingSystem || (CraftingSystem = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtLnRzPzQ2ZGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBS3FFO0FBQzlCO0FBQ2M7QUFHckQsTUFBTSxpQkFBaUI7SUFPbkIsWUFBWSxJQUFZLEVBQUUsV0FBbUIsRUFBRSxRQUFpQjtRQUM1RCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixPQUFPLG9CQUFvQixJQUFJLENBQUMsU0FBUyxZQUFZLElBQUksQ0FBQyxXQUFXLFFBQVEsQ0FBQztTQUNqRjtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNyQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7Q0FDSjtBQUVELE1BQU0sY0FBYztJQWdCaEIsWUFBWSxPQUErQjtRQVoxQixpQkFBWSxHQUF3QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQzlDLG9CQUFlLEdBQW1DLElBQUksR0FBRyxFQUFFLENBQUM7UUFDNUQsMEJBQXFC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QUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxZQUFZLENBQUMsS0FBMEI7WUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELGlCQUFpQixDQUFDLEtBQWdDO1lBQzlDLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1lBQzNCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7S0FDSjtJQTVGWSxzQkFBTyxVQTRGbkI7QUFDTCxDQUFDLEVBL0ZTLGNBQWMsS0FBZCxjQUFjLFFBK0Z2QjtBQUUwQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW0udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0b3J9IGZyb20gXCIuL0ZhYnJpY2F0b3JcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuL1JlY2lwZVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25PdXRjb21lfSBmcm9tIFwiLi9GYWJyaWNhdGlvbk91dGNvbWVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NoYXRNZXNzYWdlfSBmcm9tIFwiLi4vaW50ZXJmYWNlL0NyYWZ0aW5nQ2hhdE1lc3NhZ2VcIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0Vycm9yfSBmcm9tIFwiLi4vZXJyb3IvQ3JhZnRpbmdFcnJvclwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ2hlY2t9IGZyb20gXCIuL0NyYWZ0aW5nQ2hlY2tcIjtcclxuXHJcbmNsYXNzIEVzc2VuY2VEZWZpbml0aW9uIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9uYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zbHVnOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaWNvbkNvZGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGljb25Db2RlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fc2x1ZyA9IG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcgJywgJy0nKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuX2ljb25Db2RlID0gaWNvbkNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGljb25Db2RlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ljb25Db2RlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGA8aSBjbGFzcz1cImZhcyBmYS0ke3RoaXMuX2ljb25Db2RlfVwiIHRpdGxlPVwiJHt0aGlzLmRlc2NyaXB0aW9ufVwiPjwvaT5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzbHVnKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NsdWc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nU3lzdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBlbmRpdW1QYWNrS2V5OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdG9yOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YSwgQWN0b3I+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVjaXBlc0J5SWQ6IE1hcDxzdHJpbmcsIFJlY2lwZT4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb25lbnRzQnlJZDogTWFwPHN0cmluZywgQ3JhZnRpbmdDb21wb25lbnQ+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVIaW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VzQnlTbHVnOiBNYXA8c3RyaW5nLCBFc3NlbmNlRGVmaW5pdGlvbj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jcmFmdGluZ0NoZWNrOiBDcmFmdGluZ0NoZWNrPEFjdG9yPjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2hhc0NyYWZ0aW5nQ2hlY2s6IGJvb2xlYW47XHJcblxyXG4gICAgcHJpdmF0ZSBfZW5hYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBDcmFmdGluZ1N5c3RlbS5CdWlsZGVyKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGJ1aWxkZXIubmFtZTtcclxuICAgICAgICB0aGlzLl9jb21wZW5kaXVtUGFja0tleSA9IGJ1aWxkZXIuY29tcGVuZGl1bVBhY2tLZXk7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRvciA9IGJ1aWxkZXIuZmFicmljYXRvcjtcclxuICAgICAgICB0aGlzLl9yZWNpcGVzQnlJZCA9IGJ1aWxkZXIucmVjaXBlcztcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRzQnlJZCA9IGJ1aWxkZXIuY29tcG9uZW50cztcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IGJ1aWxkZXIuc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGJ1aWxkZXIuZW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9lbmFibGVIaW50ID0gYnVpbGRlci5lbmFibGVIaW50O1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gYnVpbGRlci5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZXNCeVNsdWcgPSBuZXcgTWFwKGJ1aWxkZXIuZXNzZW5jZXMubWFwKChlc3NlbmNlOiBFc3NlbmNlRGVmaW5pdGlvbikgPT4gW2Vzc2VuY2Uuc2x1ZywgZXNzZW5jZV0pKTtcclxuICAgICAgICB0aGlzLl9jcmFmdGluZ0NoZWNrID0gYnVpbGRlci5jcmFmdGluZ0NoZWNrO1xyXG4gICAgICAgIHRoaXMuX2hhc0NyYWZ0aW5nQ2hlY2sgPSAhIXRoaXMuX2NyYWZ0aW5nQ2hlY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdTeXN0ZW0uQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVuYWJsZUhpbnQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlSGludDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VzKCk6IEVzc2VuY2VEZWZpbml0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRFc3NlbmNlQnlTbHVnKHNsdWc6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlc0J5U2x1Zy5nZXQoc2x1Zyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNyYWZ0aW5nQ2hlY2soKTogQ3JhZnRpbmdDaGVjazxBY3Rvci5EYXRhPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyYWZ0aW5nQ2hlY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhhc0NyYWZ0aW5nQ2hlY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NyYWZ0aW5nQ2hlY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN1cHBvcnRzQWxjaGVteSgpIHtcclxuICAgICAgICByZXR1cm4gISF0aGlzLl9mYWJyaWNhdG9yLmFsY2hlbXlTcGVjaWZpY2F0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjcmFmdChhY3RvcjogQWN0b3IsIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4sIHJlY2lwZTogUmVjaXBlKTogUHJvbWlzZTxGYWJyaWNhdGlvbk91dGNvbWU+IHtcclxuICAgICAgICBsZXQgY2hhdE1lc3NhZ2U6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhYnJpY2F0aW9uT3V0Y29tZTogRmFicmljYXRpb25PdXRjb21lID0gYXdhaXQgdGhpcy5mYWJyaWNhdG9yLmZhYnJpY2F0ZUZyb21SZWNpcGUoaW52ZW50b3J5LCByZWNpcGUpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBDcmFmdGluZ0NoYXRNZXNzYWdlID0gQ3JhZnRpbmdDaGF0TWVzc2FnZS5mcm9tRmFicmljYXRpb25PdXRjb21lKGZhYnJpY2F0aW9uT3V0Y29tZSk7XHJcbiAgICAgICAgICAgIGNoYXRNZXNzYWdlID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nTWVzc2FnZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7dXNlcjogZ2FtZS51c2VyLCBzcGVha2VyOiBhY3RvciwgY29udGVudDogY2hhdE1lc3NhZ2V9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhYnJpY2F0aW9uT3V0Y29tZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNyYWZ0aW5nRXJyb3IoZXJyb3IsIGFjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNyYWZ0V2l0aENvbXBvbmVudHMoYWN0b3I6IEFjdG9yPEFjdG9yLkRhdGEsIEl0ZW0+LCBpbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+LCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogUHJvbWlzZTxGYWJyaWNhdGlvbk91dGNvbWU+IHtcclxuICAgICAgICBsZXQgY2hhdE1lc3NhZ2U6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhYnJpY2F0aW9uT3V0Y29tZTogRmFicmljYXRpb25PdXRjb21lID0gYXdhaXQgdGhpcy5mYWJyaWNhdG9yLmZhYnJpY2F0ZUZyb21Db21wb25lbnRzKGFjdG9yLCBpbnZlbnRvcnksIGNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBDcmFmdGluZ0NoYXRNZXNzYWdlID0gQ3JhZnRpbmdDaGF0TWVzc2FnZS5mcm9tRmFicmljYXRpb25PdXRjb21lKGZhYnJpY2F0aW9uT3V0Y29tZSk7XHJcbiAgICAgICAgICAgIGNoYXRNZXNzYWdlID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nTWVzc2FnZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7dXNlcjogZ2FtZS51c2VyLCBzcGVha2VyOiBhY3RvciwgY29udGVudDogY2hhdE1lc3NhZ2V9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhYnJpY2F0aW9uT3V0Y29tZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNyYWZ0aW5nRXJyb3IoZXJyb3IsIGFjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDcmFmdGluZ0Vycm9yKGVycm9yOiBFcnJvciwgYWN0b3I6IEFjdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgbGV0IGNoYXRNZXNzYWdlOiBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDcmFmdGluZ0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IENyYWZ0aW5nQ2hhdE1lc3NhZ2UgPSBDcmFmdGluZ0NoYXRNZXNzYWdlLmZyb21GYWJyaWNhdGlvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgY2hhdE1lc3NhZ2UgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMuY3JhZnRpbmdNZXNzYWdlLCBtZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBDcmFmdGluZ0NoYXRNZXNzYWdlID0gQ3JhZnRpbmdDaGF0TWVzc2FnZS5mcm9tVW5leHBlY3RlZEVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgY2hhdE1lc3NhZ2UgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMuY3JhZnRpbmdNZXNzYWdlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7dXNlcjogZ2FtZS51c2VyLCBzcGVha2VyOiBhY3RvciwgY29udGVudDogY2hhdE1lc3NhZ2V9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcGVuZGl1bVBhY2tLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tcGVuZGl1bVBhY2tLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0b3IoKTogRmFicmljYXRvcjxJdGVtLkRhdGEsIEFjdG9yLkRhdGE+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3VwcG9ydGVkR2FtZVN5c3RlbXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVjaXBlcygpOiBSZWNpcGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcmVjaXBlc0J5SWQudmFsdWVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRzKCk6IENyYWZ0aW5nQ29tcG9uZW50W10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2NvbXBvbmVudHNCeUlkLnZhbHVlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29tcG9uZW50QnlQYXJ0SWQoZW50cnlJZDogc3RyaW5nKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzQnlJZC5nZXQoZW50cnlJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1cHBvcnRzKGdhbWVTeXN0ZW06IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgfHwgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcy5pbmRleE9mKGdhbWVTeXN0ZW0pID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkOiBzdHJpbmcpOiBSZWNpcGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNpcGVzQnlJZC5nZXQocGFydElkKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBDcmFmdGluZ1N5c3RlbSB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgY29tcGVuZGl1bVBhY2tLZXkhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGZhYnJpY2F0b3IhOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YSwgQWN0b3IuRGF0YT47XHJcbiAgICAgICAgcHVibGljIHN1cHBvcnRlZEdhbWVTeXN0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyByZWNpcGVzOiBNYXA8c3RyaW5nLCBSZWNpcGU+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHB1YmxpYyBjb21wb25lbnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ0NvbXBvbmVudD4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIGVuYWJsZUhpbnQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBlc3NlbmNlczogRXNzZW5jZURlZmluaXRpb25bXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyBjcmFmdGluZ0NoZWNrOiBDcmFmdGluZ0NoZWNrPEFjdG9yLkRhdGE+O1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKSA6IENyYWZ0aW5nU3lzdGVte1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhOYW1lKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhDb21wZW5kaXVtUGFja0tleSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGVuZGl1bVBhY2tLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEZhYnJpY2F0b3IodmFsdWU6IEZhYnJpY2F0b3I8SXRlbS5EYXRhLCBBY3Rvci5EYXRhPik6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmZhYnJpY2F0b3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW1zKHZhbHVlOiBzdHJpbmdbXSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZEdhbWVTeXN0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRHYW1lU3lzdGVtcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFJlY2lwZXModmFsdWU6IE1hcDxzdHJpbmcsIFJlY2lwZT4pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5yZWNpcGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhSZWNpcGUodmFsdWU6IFJlY2lwZSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2lwZXMuc2V0KHZhbHVlLnBhcnRJZCwgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcG9uZW50KHZhbHVlOiBDcmFmdGluZ0NvbXBvbmVudCk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMuc2V0KHZhbHVlLnBhcnRJZCwgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcG9uZW50cyh2YWx1ZTogTWFwPHN0cmluZywgQ3JhZnRpbmdDb21wb25lbnQ+KTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc0VuYWJsZWQodmFsdWU6IGJvb2xlYW4pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFbmFibGVIaW50KHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVIaW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhEZXNjcmlwdGlvbih2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2UodmFsdWU6IEVzc2VuY2VEZWZpbml0aW9uKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFc3NlbmNlcyh2YWx1ZTogRXNzZW5jZURlZmluaXRpb25bXSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aENyYWZ0aW5nQ2hlY2sodmFsdWU6IENyYWZ0aW5nQ2hlY2s8QWN0b3IuRGF0YT4pIHtcclxuICAgICAgICAgICAgdGhpcy5jcmFmdGluZ0NoZWNrID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbSwgRXNzZW5jZURlZmluaXRpb259OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystem.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemFactory.ts":
/*!***************************************************!*\
  !*** ./src/scripts/core/CraftingSystemFactory.ts ***!
  \***************************************************/
/*! exports provided: FileReadingCraftingSystemFactory, CompendiumImportingCraftingSystemFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FileReadingCraftingSystemFactory\", function() { return FileReadingCraftingSystemFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CompendiumImportingCraftingSystemFactory\", function() { return CompendiumImportingCraftingSystemFactory; });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _Recipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Recipe */ \"./src/scripts/core/Recipe.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification) {\r\n        this._systemSpecification = systemSpecification;\r\n    }\r\n    get systemSpecification() {\r\n        return this._systemSpecification;\r\n    }\r\n    make() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const basicSystemData = yield this.prepare();\r\n            const componentErrors = [];\r\n            basicSystemData.components.forEach((craftingComponent) => {\r\n                if (!craftingComponent.isValid()) {\r\n                    componentErrors.push(`Crafting Component ${craftingComponent.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (componentErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading Crafting Components: ${componentErrors}. `);\r\n            }\r\n            const componentDictionary = new Map(basicSystemData.components.map((component) => [component.partId, component]));\r\n            const recipeErrors = [];\r\n            const populatedRecipes = basicSystemData.recipes.map((recipe) => {\r\n                const populatedIngredients = recipe.ingredients.map((ingredient) => {\r\n                    const craftingComponent = componentDictionary.get(ingredient.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified an Ingredient that was not found in the Crafting System: ${ingredient.compendiumEntry}.`);\r\n                    }\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_4__[\"Ingredient\"].builder()\r\n                        .withComponent(craftingComponent)\r\n                        .withQuantity(ingredient.quantity)\r\n                        .isConsumed(ingredient.consumed)\r\n                        .build();\r\n                });\r\n                const populatedCraftingResults = recipe.results.map((result) => {\r\n                    const craftingComponent = componentDictionary.get(result.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified a Result that was not found in the Crafting System: ${result.compendiumEntry}.`);\r\n                    }\r\n                    return _FabricationAction__WEBPACK_IMPORTED_MODULE_5__[\"FabricationAction\"].builder()\r\n                        .withActionType(result.actionType)\r\n                        .withItemType(craftingComponent)\r\n                        .withQuantity(result.quantity)\r\n                        .withCustomItemData(result.customItemData)\r\n                        .build();\r\n                });\r\n                return _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].builder()\r\n                    .withName(recipe.name)\r\n                    .withPartId(recipe.partId)\r\n                    .withEssences(recipe.essences)\r\n                    .withSystemId(recipe.systemId)\r\n                    .withIngredients(populatedIngredients)\r\n                    .withResults(populatedCraftingResults)\r\n                    .build();\r\n            });\r\n            populatedRecipes.forEach((recipe) => {\r\n                if (!recipe.isValid()) {\r\n                    recipeErrors.push(`Recipe ${recipe.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (recipeErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading populating Recipes: ${recipeErrors}. `);\r\n            }\r\n            return _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystem\"].builder()\r\n                .withRecipes(new Map(populatedRecipes.map((recipe) => [recipe.partId, recipe])))\r\n                .withName(this.systemSpecification.name)\r\n                .withComponents(componentDictionary)\r\n                .withEssences(this.systemSpecification.essences)\r\n                .withEnableHint(this.systemSpecification.enableHint)\r\n                .withFabricator(this.systemSpecification.fabricator)\r\n                .withDescription(this.systemSpecification.description)\r\n                .withCompendiumPackKey(this.systemSpecification.compendiumPackKey)\r\n                .withSupportedGameSystems(this.systemSpecification.supportedGameSystems)\r\n                .build();\r\n        });\r\n    }\r\n}\r\nclass CompendiumImportingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let systemPack = game.packs.get(this.systemSpecification.compendiumPackKey);\r\n            let content = yield this.loadCompendiumContent(systemPack, 10);\r\n            const systemData = {\r\n                recipes: [],\r\n                components: []\r\n            };\r\n            content.forEach((item) => {\r\n                let itemConfig = item.data.flags.fabricate;\r\n                switch (itemConfig.type) {\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                        systemData.components.push(_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                        systemData.recipes.push(_Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    default:\r\n                        throw new Error(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Unable to load item ${item.id}. Could not determine Fabricate Entity Type. `);\r\n                }\r\n            });\r\n            return systemData;\r\n        });\r\n    }\r\n    /**\r\n     * Fallback awaiter for loading compendium content, as this was observed to be unreliable during development after the\r\n     * game 'ready' Hook was fired\r\n     *\r\n     * @param compendium The Compendium from which to reliably load the Content\r\n     * @param maxAttempts The maximum number of times to attempt loading Compendium Content\r\n     * */\r\n    loadCompendiumContent(compendium, maxAttempts) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let content = yield compendium.getContent();\r\n            let attempts = 0;\r\n            while ((!content || (content.length === 0)) && (attempts <= maxAttempts)) {\r\n                console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Waiting for content in Compendium Pack ${compendium.id} (Attempt ${attempts} of ${maxAttempts}. `);\r\n                yield this.wait(1000);\r\n                attempts++;\r\n                content = yield compendium.getContent();\r\n            }\r\n            return content;\r\n        });\r\n    }\r\n    /**\r\n     * Simple async awaiter delay function\r\n     *\r\n     * @param delay The number of millis to wait before resolving\r\n     * @return a promise that resolves once the delay period has elapsed\r\n     * */\r\n    wait(delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise(resolve => setTimeout(resolve, delay));\r\n        });\r\n    }\r\n}\r\nclass FileReadingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification, filePath) {\r\n        super(systemSpecification);\r\n        this._fileErrorsByLineNumber = new Map();\r\n        this._filePath = filePath;\r\n    }\r\n    get filePath() {\r\n        return this._filePath;\r\n    }\r\n    get fileErrorsByLineNumber() {\r\n        return this._fileErrorsByLineNumber;\r\n    }\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const lines = yield this.readFile(this.filePath);\r\n            return this.parseFileData(lines);\r\n        });\r\n    }\r\n    readFile(path) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const contents = yield fs__WEBPACK_IMPORTED_MODULE_0__[\"promises\"].readFile(path, 'utf-8');\r\n            return contents.split('\\n');\r\n        });\r\n    }\r\n    recordError(lineNumber, error) {\r\n        if (this._fileErrorsByLineNumber.has(lineNumber)) {\r\n            this._fileErrorsByLineNumber.get(lineNumber).push(error);\r\n        }\r\n        this._fileErrorsByLineNumber.set(lineNumber, [error]);\r\n    }\r\n    parseFileData(lines) {\r\n        const systemData = {\r\n            recipes: [],\r\n            components: []\r\n        };\r\n        lines.forEach((line, index) => {\r\n            const lineNumber = index + 1;\r\n            let json;\r\n            try {\r\n                json = JSON.parse(line);\r\n            }\r\n            catch (err) {\r\n                this.recordError(lineNumber, `Line is not valid JSON. `);\r\n                return;\r\n            }\r\n            if (!json.flags) {\r\n                this.recordError(lineNumber, `No flag data was present. `);\r\n                return;\r\n            }\r\n            const fabricateFlags = json.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate flags were set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate Item identity was set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity.partId || !fabricateFlags.identity.systemId) {\r\n                this.recordError(lineNumber, `An invalid Fabricate Item identity was set with Part ID '${fabricateFlags.identity.partId}' and System ID '${fabricateFlags.identity.systemId}' `);\r\n                return;\r\n            }\r\n            let fabricateItem;\r\n            switch (fabricateFlags.type) {\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                    if (!fabricateFlags.component) {\r\n                        this.recordError(lineNumber, `No Component definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const craftingComponent = _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = craftingComponent;\r\n                    systemData.components.push(craftingComponent);\r\n                    break;\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                    if (!fabricateFlags.recipe) {\r\n                        this.recordError(lineNumber, `No Recipe definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const recipe = _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = recipe;\r\n                    systemData.recipes.push(recipe);\r\n                    break;\r\n                default:\r\n                    this.recordError(lineNumber, `The Fabricate Item type ${fabricateFlags.type} was not \r\n                        recognized. Allowable values are COMPONENT or RECIPE`);\r\n                    return;\r\n            }\r\n            if (fabricateItem.partId !== json._id) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} part ID '${fabricateItem.partId}' did not match Compendium Entity ID '${json._id}. '`);\r\n            }\r\n            if (fabricateItem.name !== json.name) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} name '${fabricateItem.name}' did not match Compendium Entity name '${json.name}. '`);\r\n            }\r\n            if (fabricateItem.imageUrl !== json.img) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} image URL '${fabricateItem.imageUrl}' did not match Compendium Entity image URL '${json.img}. '`);\r\n            }\r\n        });\r\n        if (this.fileErrorsByLineNumber.size === 0) {\r\n            return systemData;\r\n        }\r\n        const lineErrorDetails = [];\r\n        this.fileErrorsByLineNumber.forEach((errors, line) => lineErrorDetails.push(`Line ${line}: ${errors.join(', ')} \\n`));\r\n        throw new Error(`Encountered ${this.fileErrorsByLineNumber.size} errors when processing file data for system ${this.systemSpecification.compendiumPackKey}. Errors: \\n ${lineErrorDetails}`);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtRmFjdG9yeS50cz9lN2YwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUV3QjtBQUVNO0FBQ3RCO0FBQ1E7QUFDYztBQUM0QjtBQUMzQztBQWF2QyxNQUFlLDZCQUE2QjtJQUd4QyxZQUFZLG1CQUFnRDtRQUN4RCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ25CLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ3JDLENBQUM7SUFFSyxJQUFJOztZQUNOLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdDLE1BQU0sZUFBZSxHQUFhLEVBQUUsQ0FBQztZQUNyQyxlQUFlLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGlCQUFvQyxFQUFFLEVBQUU7Z0JBQ3hFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDOUIsZUFBZSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsaUJBQWlCLENBQUMsZUFBZSxlQUFlLENBQUMsQ0FBQztpQkFDaEc7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUNILElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsbUNBQW1DLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLHFFQUFxRSxlQUFlLElBQUksQ0FBQyxDQUFDO2FBQzdLO1lBQ0QsTUFBTSxtQkFBbUIsR0FBbUMsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JLLE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQztZQUNsQyxNQUFNLGdCQUFnQixHQUFhLGVBQWUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBYyxFQUFFLEVBQUU7Z0JBQzlFLE1BQU0sb0JBQW9CLEdBQWlCLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsVUFBc0IsRUFBRSxFQUFFO29CQUN6RixNQUFNLGlCQUFpQixHQUFHLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3JFLElBQUksQ0FBQyxpQkFBaUIsRUFBRTt3QkFDcEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxVQUFVLE1BQU0sQ0FBQyxJQUFJLFlBQVksTUFBTSxDQUFDLE1BQU0sdUVBQXVFLFVBQVUsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO3FCQUN2SztvQkFDRCxPQUFPLHNEQUFVLENBQUMsT0FBTyxFQUFFO3lCQUN0QixhQUFhLENBQUMsaUJBQWlCLENBQUM7eUJBQ2hDLFlBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO3lCQUNqQyxVQUFVLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQzt5QkFDL0IsS0FBSyxFQUFFLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQyxDQUFDO2dCQUNILE1BQU0sd0JBQXdCLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFvQyxFQUFFLEVBQUU7b0JBQ3pGLE1BQU0saUJBQWlCLEdBQUcsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDakUsSUFBSSxDQUFDLGlCQUFpQixFQUFFO3dCQUNwQixNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsTUFBTSxDQUFDLElBQUksWUFBWSxNQUFNLENBQUMsTUFBTSxrRUFBa0UsTUFBTSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7cUJBQzlKO29CQUNELE9BQU8sb0VBQWlCLENBQUMsT0FBTyxFQUFFO3lCQUM3QixjQUFjLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQzt5QkFDakMsWUFBWSxDQUFDLGlCQUFpQixDQUFDO3lCQUMvQixZQUFZLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQzt5QkFDN0Isa0JBQWtCLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQzt5QkFDekMsS0FBSyxFQUFFLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQyxDQUFDO2dCQUNILE9BQU8sOENBQU0sQ0FBQyxPQUFPLEVBQUU7cUJBQ2xCLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO3FCQUNyQixVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztxQkFDekIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7cUJBQzdCLFlBQVksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO3FCQUM3QixlQUFlLENBQUMsb0JBQW9CLENBQUM7cUJBQ3JDLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQztxQkFDckMsS0FBSyxFQUFFLENBQUM7WUFDakIsQ0FBQyxDQUFDLENBQUM7WUFDSCxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFjLEVBQUUsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDbkIsWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLE1BQU0sQ0FBQyxlQUFlLGVBQWUsQ0FBQyxDQUFDO2lCQUN0RTtZQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyxtQ0FBbUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksb0VBQW9FLFlBQVksSUFBSSxDQUFDLENBQUM7YUFDeks7WUFDRCxPQUFPLDhEQUFjLENBQUMsT0FBTyxFQUFFO2lCQUMxQixXQUFXLENBQUMsSUFBSSxHQUFHLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBYyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUN2RixRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQztpQkFDdkMsY0FBYyxDQUFDLG1CQUFtQixDQUFDO2lCQUNuQyxZQUFZLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQztpQkFDL0MsY0FBYyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUM7aUJBQ25ELGNBQWMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsVUFBVSxDQUFDO2lCQUNuRCxlQUFlLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQztpQkFDckQscUJBQXFCLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDO2lCQUNqRSx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsb0JBQW9CLENBQUM7aUJBQ3ZFLEtBQUssRUFBRSxDQUFDO1FBQ2pCLENBQUM7S0FBQTtDQUlKO0FBRUQsTUFBTSx3Q0FBeUMsU0FBUSw2QkFBNkI7SUFFMUUsT0FBTzs7WUFDVCxJQUFJLFVBQVUsR0FBZSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUN4RixJQUFJLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDL0QsTUFBTSxVQUFVLEdBQW9CO2dCQUNoQyxPQUFPLEVBQUUsRUFBRTtnQkFDWCxVQUFVLEVBQUUsRUFBRTthQUNqQixDQUFDO1lBQ0YsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO2dCQUMxQixJQUFJLFVBQVUsR0FBNEIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO2dCQUNwRSxRQUFRLFVBQVUsQ0FBQyxJQUFJLEVBQUU7b0JBQ3JCLEtBQUssc0VBQWlCLENBQUMsU0FBUzt3QkFDNUIsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsb0VBQWlCLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUN6RixNQUFNO29CQUNWLEtBQUssc0VBQWlCLENBQUMsTUFBTTt3QkFDekIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsOENBQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7d0JBQzNFLE1BQU07b0JBQ1Y7d0JBQ0ksTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLG1EQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssMEJBQTBCLElBQUksQ0FBQyxFQUFFLCtDQUErQyxDQUFDLENBQUM7aUJBQ25JO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLFVBQVUsQ0FBQztRQUN0QixDQUFDO0tBQUE7SUFFRDs7Ozs7O1NBTUs7SUFDUyxxQkFBcUIsQ0FBQyxVQUFzQixFQUFFLFdBQW1COztZQUMzRSxJQUFJLE9BQU8sR0FBYSxNQUFNLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN0RCxJQUFJLFFBQVEsR0FBVyxDQUFDLENBQUM7WUFDekIsT0FBTyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLFdBQVcsQ0FBQyxFQUFFO2dCQUN0RSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyw2Q0FBNkMsVUFBVSxDQUFDLEVBQUUsYUFBYSxRQUFRLE9BQU8sV0FBVyxJQUFJLENBQUMsQ0FBQztnQkFDN0ksTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN0QixRQUFRLEVBQUUsQ0FBQztnQkFDWCxPQUFPLEdBQUcsTUFBTSxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7YUFDM0M7WUFDRCxPQUFPLE9BQU8sQ0FBQztRQUNuQixDQUFDO0tBQUE7SUFFRDs7Ozs7U0FLSztJQUNTLElBQUksQ0FBQyxLQUFhOztZQUM1QixPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzlELENBQUM7S0FBQTtDQUVKO0FBRUQsTUFBTSxnQ0FBaUMsU0FBUSw2QkFBNkI7SUFLeEUsWUFBWSxtQkFBZ0QsRUFBRSxRQUFnQjtRQUMxRSxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUhkLDRCQUF1QixHQUEwQixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBSXhFLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksc0JBQXNCO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDO0lBQ3hDLENBQUM7SUFFSyxPQUFPOztZQUNULE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDakQsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLENBQUM7S0FBQTtJQUVhLFFBQVEsQ0FBQyxJQUFZOztZQUMvQixNQUFNLFFBQVEsR0FBRyxNQUFNLDJDQUFXLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztZQUMzRCxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsQ0FBQztLQUFBO0lBRU8sV0FBVyxDQUFDLFVBQWtCLEVBQUUsS0FBYTtRQUNqRCxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDOUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDNUQ7UUFDRCxJQUFJLENBQUMsdUJBQXVCLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELGFBQWEsQ0FBQyxLQUFlO1FBQ3pCLE1BQU0sVUFBVSxHQUFvQjtZQUNoQyxPQUFPLEVBQUUsRUFBRTtZQUNYLFVBQVUsRUFBRSxFQUFFO1NBQ2pCLENBQUM7UUFDRixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxFQUFFO1lBQzFDLE1BQU0sVUFBVSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDN0IsSUFBSSxJQUFTLENBQUM7WUFDZCxJQUFJO2dCQUNBLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzNCO1lBQUMsT0FBTyxHQUFHLEVBQUU7Z0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztnQkFDekQsT0FBTzthQUNWO1lBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsNEJBQTRCLENBQUMsQ0FBQztnQkFDM0QsT0FBTzthQUNWO1lBQ0QsTUFBTSxjQUFjLEdBQTRCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQ3JFLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLDBEQUEwRCxDQUFDLENBQUM7Z0JBQ3pGLE9BQU87YUFDVjtZQUNELElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFO2dCQUMxQixJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxpRUFBaUUsQ0FBQyxDQUFDO2dCQUNoRyxPQUFPO2FBQ1Y7WUFDRCxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTtnQkFDdEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsNERBQTRELGNBQWMsQ0FBQyxRQUFRLENBQUMsTUFBTSxvQkFBb0IsY0FBYyxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDO2dCQUNqTCxPQUFPO2FBQ1Y7WUFDRCxJQUFJLGFBQTRCLENBQUM7WUFDakMsUUFBUSxjQUFjLENBQUMsSUFBSSxFQUFFO2dCQUN6QixLQUFLLHNFQUFpQixDQUFDLFNBQVM7b0JBQzVCLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFO3dCQUMzQixJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSx3Q0FBd0MsQ0FBQyxDQUFDO3dCQUN2RSxPQUFPO3FCQUNWO29CQUNELE1BQU0saUJBQWlCLEdBQXNCLG9FQUFpQixDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzlHLGFBQWEsR0FBRyxpQkFBaUIsQ0FBQztvQkFDbEMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztvQkFDOUMsTUFBTTtnQkFDVixLQUFLLHNFQUFpQixDQUFDLE1BQU07b0JBQ3pCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFO3dCQUN4QixJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxxQ0FBcUMsQ0FBQyxDQUFDO3dCQUNwRSxPQUFPO3FCQUNWO29CQUNELE1BQU0sTUFBTSxHQUFXLDhDQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDN0UsYUFBYSxHQUFHLE1BQU0sQ0FBQztvQkFDdkIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ2hDLE1BQU07Z0JBQ1Y7b0JBQ0ksSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsMkJBQTJCLGNBQWMsQ0FBQyxJQUFJOzZFQUNsQixDQUFDLENBQUM7b0JBQzNELE9BQU87YUFDZDtZQUNELElBQUksYUFBYSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNuQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxHQUFHLGNBQWMsQ0FBQyxJQUFJLGFBQWEsYUFBYSxDQUFDLE1BQU0seUNBQXlDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO2FBQy9JO1lBQ0QsSUFBSSxhQUFhLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLEdBQUcsY0FBYyxDQUFDLElBQUksVUFBVSxhQUFhLENBQUMsSUFBSSwyQ0FBMkMsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUM7YUFDN0k7WUFDRCxJQUFJLGFBQWEsQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDckMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsR0FBRyxjQUFjLENBQUMsSUFBSSxlQUFlLGFBQWEsQ0FBQyxRQUFRLGdEQUFnRCxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQzthQUMxSjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUN4QyxPQUFPLFVBQVUsQ0FBQztTQUNyQjtRQUNELE1BQU0sZ0JBQWdCLEdBQWEsRUFBRSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFnQixFQUFFLElBQVksRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDeEksTUFBTSxJQUFJLEtBQUssQ0FBQyxlQUFlLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLGdEQUFnRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLGdCQUFnQixnQkFBZ0IsRUFBRSxDQUFDLENBQUM7SUFDak0sQ0FBQztDQUVKO0FBRXlHIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9DcmFmdGluZ1N5c3RlbUZhY3RvcnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcydcclxuXHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi9DcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25cIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4vQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuL1JlY2lwZVwiO1xyXG5pbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuaW50ZXJmYWNlIENyYWZ0aW5nU3lzdGVtRmFjdG9yeSB7XHJcbiAgICBzeXN0ZW1TcGVjaWZpY2F0aW9uOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb247XHJcbiAgICBtYWtlKCk6IFByb21pc2U8Q3JhZnRpbmdTeXN0ZW0+O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQmFzaWNTeXN0ZW1EYXRhIHtcclxuICAgIHJlY2lwZXM6IFJlY2lwZVtdO1xyXG4gICAgY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RDcmFmdGluZ1N5c3RlbUZhY3RvcnkgaW1wbGVtZW50cyBDcmFmdGluZ1N5c3RlbUZhY3Rvcnkge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3lzdGVtU3BlY2lmaWNhdGlvbjogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3lzdGVtU3BlY2lmaWNhdGlvbjogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtU3BlY2lmaWNhdGlvbiA9IHN5c3RlbVNwZWNpZmljYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN5c3RlbVNwZWNpZmljYXRpb24oKTogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtU3BlY2lmaWNhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlKCk6IFByb21pc2U8Q3JhZnRpbmdTeXN0ZW0+IHtcclxuICAgICAgICBjb25zdCBiYXNpY1N5c3RlbURhdGEgPSBhd2FpdCB0aGlzLnByZXBhcmUoKTtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRFcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgYmFzaWNTeXN0ZW1EYXRhLmNvbXBvbmVudHMuZm9yRWFjaCgoY3JhZnRpbmdDb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY3JhZnRpbmdDb21wb25lbnQuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRFcnJvcnMucHVzaChgQ3JhZnRpbmcgQ29tcG9uZW50ICR7Y3JhZnRpbmdDb21wb25lbnQuY29tcGVuZGl1bUVudHJ5fSBpcyBpbnZhbGlkLiBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRFcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBidWlsZCBDcmFmdGluZyBTeXN0ZW0gJHt0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24ubmFtZX0uIFRoZXJlIHdlcmUgb25lIG9yIG1vcmUgaXNzdWVzIHdpdGggcmVhZGluZyBDcmFmdGluZyBDb21wb25lbnRzOiAke2NvbXBvbmVudEVycm9yc30uIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb21wb25lbnREaWN0aW9uYXJ5OiBNYXA8c3RyaW5nLCBDcmFmdGluZ0NvbXBvbmVudD4gPSBuZXcgTWFwKGJhc2ljU3lzdGVtRGF0YS5jb21wb25lbnRzLm1hcCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4gW2NvbXBvbmVudC5wYXJ0SWQsIGNvbXBvbmVudF0pKTtcclxuICAgICAgICBjb25zdCByZWNpcGVFcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgY29uc3QgcG9wdWxhdGVkUmVjaXBlczogUmVjaXBlW10gPSBiYXNpY1N5c3RlbURhdGEucmVjaXBlcy5tYXAoKHJlY2lwZTogUmVjaXBlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcHVsYXRlZEluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10gPSByZWNpcGUuaW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudCA9IGNvbXBvbmVudERpY3Rpb25hcnkuZ2V0KGluZ3JlZGllbnQucGFydElkKTtcclxuICAgICAgICAgICAgICAgIGlmICghY3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlY2lwZSAke3JlY2lwZS5uYW1lfSB3aXRoIElEICR7cmVjaXBlLnBhcnRJZH0gc3BlY2lmaWVkIGFuIEluZ3JlZGllbnQgdGhhdCB3YXMgbm90IGZvdW5kIGluIHRoZSBDcmFmdGluZyBTeXN0ZW06ICR7aW5ncmVkaWVudC5jb21wZW5kaXVtRW50cnl9LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEluZ3JlZGllbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhDb21wb25lbnQoY3JhZnRpbmdDb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eShpbmdyZWRpZW50LnF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5pc0NvbnN1bWVkKGluZ3JlZGllbnQuY29uc3VtZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBwb3B1bGF0ZWRDcmFmdGluZ1Jlc3VsdHMgPSByZWNpcGUucmVzdWx0cy5tYXAoKHJlc3VsdDogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnQgPSBjb21wb25lbnREaWN0aW9uYXJ5LmdldChyZXN1bHQucGFydElkKTtcclxuICAgICAgICAgICAgICAgIGlmICghY3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlY2lwZSAke3JlY2lwZS5uYW1lfSB3aXRoIElEICR7cmVjaXBlLnBhcnRJZH0gc3BlY2lmaWVkIGEgUmVzdWx0IHRoYXQgd2FzIG5vdCBmb3VuZCBpbiB0aGUgQ3JhZnRpbmcgU3lzdGVtOiAke3Jlc3VsdC5jb21wZW5kaXVtRW50cnl9LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShyZXN1bHQuYWN0aW9uVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aEl0ZW1UeXBlKGNyYWZ0aW5nQ29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkocmVzdWx0LnF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQ3VzdG9tSXRlbURhdGEocmVzdWx0LmN1c3RvbUl0ZW1EYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFJlY2lwZS5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoTmFtZShyZWNpcGUubmFtZSlcclxuICAgICAgICAgICAgICAgIC53aXRoUGFydElkKHJlY2lwZS5wYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aEVzc2VuY2VzKHJlY2lwZS5lc3NlbmNlcylcclxuICAgICAgICAgICAgICAgIC53aXRoU3lzdGVtSWQocmVjaXBlLnN5c3RlbUlkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhJbmdyZWRpZW50cyhwb3B1bGF0ZWRJbmdyZWRpZW50cylcclxuICAgICAgICAgICAgICAgIC53aXRoUmVzdWx0cyhwb3B1bGF0ZWRDcmFmdGluZ1Jlc3VsdHMpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwb3B1bGF0ZWRSZWNpcGVzLmZvckVhY2goKHJlY2lwZTogUmVjaXBlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcmVjaXBlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgcmVjaXBlRXJyb3JzLnB1c2goYFJlY2lwZSAke3JlY2lwZS5jb21wZW5kaXVtRW50cnl9IGlzIGludmFsaWQuIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJlY2lwZUVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGJ1aWxkIENyYWZ0aW5nIFN5c3RlbSAke3RoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5uYW1lfS4gVGhlcmUgd2VyZSBvbmUgb3IgbW9yZSBpc3N1ZXMgd2l0aCByZWFkaW5nIHBvcHVsYXRpbmcgUmVjaXBlczogJHtyZWNpcGVFcnJvcnN9LiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nU3lzdGVtLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aFJlY2lwZXMobmV3IE1hcChwb3B1bGF0ZWRSZWNpcGVzLm1hcCgocmVjaXBlOiBSZWNpcGUpID0+IFtyZWNpcGUucGFydElkLCByZWNpcGVdKSkpXHJcbiAgICAgICAgICAgIC53aXRoTmFtZSh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24ubmFtZSlcclxuICAgICAgICAgICAgLndpdGhDb21wb25lbnRzKGNvbXBvbmVudERpY3Rpb25hcnkpXHJcbiAgICAgICAgICAgIC53aXRoRXNzZW5jZXModGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmVzc2VuY2VzKVxyXG4gICAgICAgICAgICAud2l0aEVuYWJsZUhpbnQodGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmVuYWJsZUhpbnQpXHJcbiAgICAgICAgICAgIC53aXRoRmFicmljYXRvcih0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uZmFicmljYXRvcilcclxuICAgICAgICAgICAgLndpdGhEZXNjcmlwdGlvbih0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uZGVzY3JpcHRpb24pXHJcbiAgICAgICAgICAgIC53aXRoQ29tcGVuZGl1bVBhY2tLZXkodGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmNvbXBlbmRpdW1QYWNrS2V5KVxyXG4gICAgICAgICAgICAud2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW1zKHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5zdXBwb3J0ZWRHYW1lU3lzdGVtcylcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgcHJlcGFyZSgpOiBQcm9taXNlPEJhc2ljU3lzdGVtRGF0YT47XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5IGV4dGVuZHMgQWJzdHJhY3RDcmFmdGluZ1N5c3RlbUZhY3Rvcnkge1xyXG5cclxuICAgIGFzeW5jIHByZXBhcmUoKTogUHJvbWlzZTxCYXNpY1N5c3RlbURhdGE+IHtcclxuICAgICAgICBsZXQgc3lzdGVtUGFjazogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5jb21wZW5kaXVtUGFja0tleSk7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmxvYWRDb21wZW5kaXVtQ29udGVudChzeXN0ZW1QYWNrLCAxMCk7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtRGF0YTogQmFzaWNTeXN0ZW1EYXRhID0ge1xyXG4gICAgICAgICAgICByZWNpcGVzOiBbXSxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnRlbnQuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpdGVtQ29uZmlnOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW0uZGF0YS5mbGFncy5mYWJyaWNhdGU7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbUNvbmZpZy50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLmNvbXBvbmVudHMucHVzaChDcmFmdGluZ0NvbXBvbmVudC5mcm9tRmxhZ3MoaXRlbUNvbmZpZywgaXRlbS5uYW1lLCBpdGVtLmltZykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEU6XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtRGF0YS5yZWNpcGVzLnB1c2goUmVjaXBlLmZyb21GbGFncyhpdGVtQ29uZmlnLCBpdGVtLm5hbWUsIGl0ZW0uaW1nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBVbmFibGUgdG8gbG9hZCBpdGVtICR7aXRlbS5pZH0uIENvdWxkIG5vdCBkZXRlcm1pbmUgRmFicmljYXRlIEVudGl0eSBUeXBlLiBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzeXN0ZW1EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmFsbGJhY2sgYXdhaXRlciBmb3IgbG9hZGluZyBjb21wZW5kaXVtIGNvbnRlbnQsIGFzIHRoaXMgd2FzIG9ic2VydmVkIHRvIGJlIHVucmVsaWFibGUgZHVyaW5nIGRldmVsb3BtZW50IGFmdGVyIHRoZVxyXG4gICAgICogZ2FtZSAncmVhZHknIEhvb2sgd2FzIGZpcmVkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBlbmRpdW0gVGhlIENvbXBlbmRpdW0gZnJvbSB3aGljaCB0byByZWxpYWJseSBsb2FkIHRoZSBDb250ZW50XHJcbiAgICAgKiBAcGFyYW0gbWF4QXR0ZW1wdHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRvIGF0dGVtcHQgbG9hZGluZyBDb21wZW5kaXVtIENvbnRlbnRcclxuICAgICAqICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRDb21wZW5kaXVtQ29udGVudChjb21wZW5kaXVtOiBDb21wZW5kaXVtLCBtYXhBdHRlbXB0czogbnVtYmVyKTogUHJvbWlzZTxFbnRpdHlbXT4ge1xyXG4gICAgICAgIGxldCBjb250ZW50OiBFbnRpdHlbXSA9IGF3YWl0IGNvbXBlbmRpdW0uZ2V0Q29udGVudCgpO1xyXG4gICAgICAgIGxldCBhdHRlbXB0czogbnVtYmVyID0gMDtcclxuICAgICAgICB3aGlsZSAoKCFjb250ZW50IHx8IChjb250ZW50Lmxlbmd0aCA9PT0gMCkpICYmIChhdHRlbXB0cyA8PSBtYXhBdHRlbXB0cykpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7UHJvcGVydGllcy5tb2R1bGUubGFiZWx9IHwgV2FpdGluZyBmb3IgY29udGVudCBpbiBDb21wZW5kaXVtIFBhY2sgJHtjb21wZW5kaXVtLmlkfSAoQXR0ZW1wdCAke2F0dGVtcHRzfSBvZiAke21heEF0dGVtcHRzfS4gYCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud2FpdCgxMDAwKTtcclxuICAgICAgICAgICAgYXR0ZW1wdHMrKztcclxuICAgICAgICAgICAgY29udGVudCA9IGF3YWl0IGNvbXBlbmRpdW0uZ2V0Q29udGVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpbXBsZSBhc3luYyBhd2FpdGVyIGRlbGF5IGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlbGF5IFRoZSBudW1iZXIgb2YgbWlsbGlzIHRvIHdhaXQgYmVmb3JlIHJlc29sdmluZ1xyXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBkZWxheSBwZXJpb2QgaGFzIGVsYXBzZWRcclxuICAgICAqICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHdhaXQoZGVsYXk6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIEZpbGVSZWFkaW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5IGV4dGVuZHMgQWJzdHJhY3RDcmFmdGluZ1N5c3RlbUZhY3Rvcnkge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZpbGVQYXRoOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9maWxlRXJyb3JzQnlMaW5lTnVtYmVyOiBNYXA8bnVtYmVyLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3lzdGVtU3BlY2lmaWNhdGlvbjogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLCBmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoc3lzdGVtU3BlY2lmaWNhdGlvbik7XHJcbiAgICAgICAgdGhpcy5fZmlsZVBhdGggPSBmaWxlUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZmlsZVBhdGgoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZVBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZpbGVFcnJvcnNCeUxpbmVOdW1iZXIoKTogTWFwPG51bWJlciwgc3RyaW5nW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZUVycm9yc0J5TGluZU51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwcmVwYXJlKCk6IFByb21pc2U8QmFzaWNTeXN0ZW1EYXRhPiB7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKHRoaXMuZmlsZVBhdGgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlRmlsZURhdGEobGluZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmVhZEZpbGUocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUocGF0aCwgJ3V0Zi04Jyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRzLnNwbGl0KCdcXG4nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlY29yZEVycm9yKGxpbmVOdW1iZXI6IG51bWJlciwgZXJyb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyLmhhcyhsaW5lTnVtYmVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyLmdldChsaW5lTnVtYmVyKS5wdXNoKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZmlsZUVycm9yc0J5TGluZU51bWJlci5zZXQobGluZU51bWJlcixbZXJyb3JdKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUZpbGVEYXRhKGxpbmVzOiBzdHJpbmdbXSk6IEJhc2ljU3lzdGVtRGF0YSB7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtRGF0YTogQmFzaWNTeXN0ZW1EYXRhID0ge1xyXG4gICAgICAgICAgICByZWNpcGVzOiBbXSxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICBsZXQganNvbjogYW55O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UobGluZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgTGluZSBpcyBub3QgdmFsaWQgSlNPTi4gYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFqc29uLmZsYWdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBObyBmbGFnIGRhdGEgd2FzIHByZXNlbnQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGpzb24uZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBGbGFnIGRhdGEgd2FzIHByZXNlbnQsIGJ1dCBubyBGYWJyaWNhdGUgZmxhZ3Mgd2VyZSBzZXQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYEZsYWcgZGF0YSB3YXMgcHJlc2VudCwgYnV0IG5vIEZhYnJpY2F0ZSBJdGVtIGlkZW50aXR5IHdhcyBzZXQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkIHx8ICFmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgQW4gaW52YWxpZCBGYWJyaWNhdGUgSXRlbSBpZGVudGl0eSB3YXMgc2V0IHdpdGggUGFydCBJRCAnJHtmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5wYXJ0SWR9JyBhbmQgU3lzdGVtIElEICcke2ZhYnJpY2F0ZUZsYWdzLmlkZW50aXR5LnN5c3RlbUlkfScgYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGZhYnJpY2F0ZUl0ZW06IEZhYnJpY2F0ZUl0ZW07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZmFicmljYXRlRmxhZ3MudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWJyaWNhdGVGbGFncy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgTm8gQ29tcG9uZW50IGRlZmluaXRpb24gd2FzIHByb3ZpZGVkLiBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQgPSBDcmFmdGluZ0NvbXBvbmVudC5mcm9tRmxhZ3MoZmFicmljYXRlRmxhZ3MsIGpzb24ubmFtZSwganNvbi5pbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhYnJpY2F0ZUl0ZW0gPSBjcmFmdGluZ0NvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLmNvbXBvbmVudHMucHVzaChjcmFmdGluZ0NvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzLnJlY2lwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBObyBSZWNpcGUgZGVmaW5pdGlvbiB3YXMgcHJvdmlkZWQuIGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwZTogUmVjaXBlID0gUmVjaXBlLmZyb21GbGFncyhmYWJyaWNhdGVGbGFncywganNvbi5uYW1lLCBqc29uLmltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFicmljYXRlSXRlbSA9IHJlY2lwZTtcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLnJlY2lwZXMucHVzaChyZWNpcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBUaGUgRmFicmljYXRlIEl0ZW0gdHlwZSAke2ZhYnJpY2F0ZUZsYWdzLnR5cGV9IHdhcyBub3QgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZWQuIEFsbG93YWJsZSB2YWx1ZXMgYXJlIENPTVBPTkVOVCBvciBSRUNJUEVgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZhYnJpY2F0ZUl0ZW0ucGFydElkICE9PSBqc29uLl9pZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgJHtmYWJyaWNhdGVGbGFncy50eXBlfSBwYXJ0IElEICcke2ZhYnJpY2F0ZUl0ZW0ucGFydElkfScgZGlkIG5vdCBtYXRjaCBDb21wZW5kaXVtIEVudGl0eSBJRCAnJHtqc29uLl9pZH0uICdgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmFicmljYXRlSXRlbS5uYW1lICE9PSBqc29uLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYCR7ZmFicmljYXRlRmxhZ3MudHlwZX0gbmFtZSAnJHtmYWJyaWNhdGVJdGVtLm5hbWV9JyBkaWQgbm90IG1hdGNoIENvbXBlbmRpdW0gRW50aXR5IG5hbWUgJyR7anNvbi5uYW1lfS4gJ2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmYWJyaWNhdGVJdGVtLmltYWdlVXJsICE9PSBqc29uLmltZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgJHtmYWJyaWNhdGVGbGFncy50eXBlfSBpbWFnZSBVUkwgJyR7ZmFicmljYXRlSXRlbS5pbWFnZVVybH0nIGRpZCBub3QgbWF0Y2ggQ29tcGVuZGl1bSBFbnRpdHkgaW1hZ2UgVVJMICcke2pzb24uaW1nfS4gJ2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzeXN0ZW1EYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsaW5lRXJyb3JEZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5mb3JFYWNoKChlcnJvcnM6IHN0cmluZ1tdLCBsaW5lOiBudW1iZXIpID0+IGxpbmVFcnJvckRldGFpbHMucHVzaChgTGluZSAke2xpbmV9OiAke2Vycm9ycy5qb2luKCcsICcpfSBcXG5gKSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbmNvdW50ZXJlZCAke3RoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5zaXplfSBlcnJvcnMgd2hlbiBwcm9jZXNzaW5nIGZpbGUgZGF0YSBmb3Igc3lzdGVtICR7dGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmNvbXBlbmRpdW1QYWNrS2V5fS4gRXJyb3JzOiBcXG4gJHtsaW5lRXJyb3JEZXRhaWxzfWApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbUZhY3RvcnksIEZpbGVSZWFkaW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5LCBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemFactory.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemSpecification.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/core/CraftingSystemSpecification.ts ***!
  \*********************************************************/
/*! exports provided: CraftingSystemSpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemSpecification\", function() { return CraftingSystemSpecification; });\nclass CraftingSystemSpecification {\r\n    constructor(builder) {\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._name = builder.name;\r\n        this._description = builder.description;\r\n        this._enableHint = builder.enableHint;\r\n        this._enabled = builder.enabled;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._fabricator = builder.fabricator;\r\n        this._essences = builder.essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingSystemSpecification.Builder();\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n}\r\n(function (CraftingSystemSpecification) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystemSpecification(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystemSpecification.Builder = Builder;\r\n})(CraftingSystemSpecification || (CraftingSystemSpecification = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi50cz9mNTI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxNQUFNLDJCQUEyQjtJQVU3QixZQUFZLE9BQTRDO1FBSnZDLDBCQUFxQixHQUFhLEVBQUUsQ0FBQztRQUVyQyxjQUFTLEdBQXdCLEVBQUUsQ0FBQztRQUdqRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3BELElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNoQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSwyQkFBMkIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7Q0FFSjtBQUVELFdBQVUsMkJBQTJCO0lBRWpDLE1BQWEsT0FBTztRQUFwQjtZQU9XLHlCQUFvQixHQUFhLEVBQUUsQ0FBQztZQUVwQyxhQUFRLEdBQXdCLEVBQUUsQ0FBQztRQXdEOUMsQ0FBQztRQXREVSxLQUFLO1lBQ1IsT0FBTyxJQUFJLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFFTSxRQUFRLENBQUMsS0FBYTtZQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0scUJBQXFCLENBQUMsS0FBYTtZQUN0QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1lBQy9CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBbUM7WUFDckQsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7WUFDeEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLHdCQUF3QixDQUFDLEtBQWU7WUFDM0MsSUFBSSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sdUJBQXVCLENBQUMsS0FBYTtZQUN4QyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBYTtZQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUN4QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sU0FBUyxDQUFDLEtBQWM7WUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELGVBQWUsQ0FBQyxLQUFhO1lBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxXQUFXLENBQUMsS0FBd0I7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUEwQjtZQUMxQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBRUo7SUFqRVksbUNBQU8sVUFpRW5CO0FBRUwsQ0FBQyxFQXJFUywyQkFBMkIsS0FBM0IsMkJBQTJCLFFBcUVwQztBQUVtQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdG9yfSBmcm9tIFwiLi9GYWJyaWNhdG9yXCI7XHJcbmltcG9ydCB7RXNzZW5jZURlZmluaXRpb259IGZyb20gXCIuL0NyYWZ0aW5nU3lzdGVtXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcGVuZGl1bVBhY2tLZXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Rlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVIaW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdG9yOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YSwgQWN0b3I+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlcikge1xyXG4gICAgICAgIHRoaXMuX2NvbXBlbmRpdW1QYWNrS2V5ID0gYnVpbGRlci5jb21wZW5kaXVtUGFja0tleTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gYnVpbGRlci5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gYnVpbGRlci5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLl9lbmFibGVIaW50ID0gYnVpbGRlci5lbmFibGVIaW50O1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSBidWlsZGVyLmVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgPSBidWlsZGVyLnN1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2ZhYnJpY2F0b3IgPSBidWlsZGVyLmZhYnJpY2F0b3I7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZXMgPSBidWlsZGVyLmVzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcigpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wZW5kaXVtUGFja0tleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wZW5kaXVtUGFja0tleTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlSGludCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVIaW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXBwb3J0ZWRHYW1lU3lzdGVtcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmYWJyaWNhdG9yKCk6IEZhYnJpY2F0b3I8SXRlbS5EYXRhLCBBY3Rvcj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWJyaWNhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlc3NlbmNlcygpOiBFc3NlbmNlRGVmaW5pdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5uYW1lc3BhY2UgQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQnVpbGRlcntcclxuXHJcbiAgICAgICAgcHVibGljIGNvbXBlbmRpdW1QYWNrS2V5ITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBuYW1lITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBkZXNjcmlwdGlvbiE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZW5hYmxlSGludCE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZW5hYmxlZCE6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHN1cHBvcnRlZEdhbWVTeXN0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyBmYWJyaWNhdG9yITogRmFicmljYXRvcjxJdGVtLkRhdGEsIEFjdG9yPjtcclxuICAgICAgICBwdWJsaWMgZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCkgOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTmFtZSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcGVuZGl1bVBhY2tLZXkodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBlbmRpdW1QYWNrS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWJyaWNhdG9yKHZhbHVlOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YSwgQWN0b3I+KTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFicmljYXRvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3VwcG9ydGVkR2FtZVN5c3RlbXModmFsdWU6IHN0cmluZ1tdKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkR2FtZVN5c3RlbXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW0odmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZEdhbWVTeXN0ZW1zLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRW5hYmxlSGludCh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSGludCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc0VuYWJsZWQodmFsdWU6IGJvb2xlYW4pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aERlc2NyaXB0aW9uKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZSh2YWx1ZTogRXNzZW5jZURlZmluaXRpb24pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2VzKHZhbHVlOiBFc3NlbmNlRGVmaW5pdGlvbltdKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemSpecification.ts\n");

/***/ }),

/***/ "./src/scripts/core/EssenceCombiner.ts":
/*!*********************************************!*\
  !*** ./src/scripts/core/EssenceCombiner.ts ***!
  \*********************************************/
/*! exports provided: EssenceCombiner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceCombiner\", function() { return EssenceCombiner; });\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n/* harmony import */ var _error_AlchemyError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/AlchemyError */ \"./src/scripts/error/AlchemyError.ts\");\n\r\n\r\nclass EssenceCombiner {\r\n    constructor(builder) {\r\n        this._effectsByEssenceCombinationIdentity = new Map();\r\n        this._essenceIdentities = new Map();\r\n        this._maxComponents = builder.maxComponents;\r\n        this._maxEssences = builder.maxEssences;\r\n        this._effects = builder.effects;\r\n        this._essenceMatchSizes = this.effects.map((effect) => effect.essenceCombination.length)\r\n            .filter((count, index, essenceCounts) => essenceCounts.indexOf(count) === index);\r\n        const uniqueEssences = this.effects.map((effect) => effect.essenceCombination)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        this._essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssences);\r\n        this.effects.forEach((effect) => this._effectsByEssenceCombinationIdentity.set(_FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(effect.essenceCombination, this._essenceIdentities), effect));\r\n    }\r\n    static builder() {\r\n        return new EssenceCombiner.Builder();\r\n    }\r\n    get maxComponents() {\r\n        return this._maxComponents;\r\n    }\r\n    get maxEssences() {\r\n        return this._maxEssences;\r\n    }\r\n    get effects() {\r\n        return this._effects;\r\n    }\r\n    combine(components, baseItemData) {\r\n        this.validate(components);\r\n        const effects = this.determineAlchemicalEffectsForComponents(components);\r\n        if (!effects || effects.length === 0) {\r\n            throw new _error_AlchemyError__WEBPACK_IMPORTED_MODULE_1__[\"AlchemyError\"]('No Alchemical Effects were produced by mixing the provided Components. ', components, true);\r\n        }\r\n        const orderedEffects = this.orderAlchemicalEffects(effects);\r\n        return this.applyEffectsToBaseItem(orderedEffects, baseItemData);\r\n    }\r\n    validate(components) {\r\n        if ((this._maxComponents > 0) && (this._maxComponents < components.length)) {\r\n            throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxComponents} components. `);\r\n        }\r\n        if (this._maxEssences > 0) {\r\n            const essenceCount = components.map((component) => component.essences.length)\r\n                .reduce((left, right) => left + right, 0);\r\n            if (essenceCount > this._maxEssences) {\r\n                throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxEssences} essences. `);\r\n            }\r\n        }\r\n    }\r\n    applyEffectsToBaseItem(effects, baseItem) {\r\n        effects.forEach((effect) => effect.applyTo(baseItem));\r\n        return baseItem;\r\n    }\r\n    determineAlchemicalEffectsForComponents(components) {\r\n        if (components.length === 0 || this.effects.length === 0) {\r\n            return [];\r\n        }\r\n        return components.filter((component) => this._essenceMatchSizes.includes(component.essences.length))\r\n            .map((component) => {\r\n            const essenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, this._essenceIdentities);\r\n            return this._effectsByEssenceCombinationIdentity.get(essenceCombinationIdentity);\r\n        })\r\n            .filter((effect) => effect !== null && typeof effect !== 'undefined');\r\n    }\r\n    orderAlchemicalEffects(effects) {\r\n        return effects.sort((left, right) => {\r\n            return left.type.valueOf() - right.type.valueOf();\r\n        });\r\n    }\r\n}\r\n(function (EssenceCombiner) {\r\n    class Builder {\r\n        constructor() {\r\n            this.effects = [];\r\n        }\r\n        withMaxComponents(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withMaxEssences(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withAlchemicalEffect(value) {\r\n            this.effects.push(value);\r\n            return this;\r\n        }\r\n        withAlchemicalEffects(value) {\r\n            this.effects = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new EssenceCombiner(this);\r\n        }\r\n    }\r\n    EssenceCombiner.Builder = Builder;\r\n})(EssenceCombiner || (EssenceCombiner = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0Vzc2VuY2VDb21iaW5lci50cz8xOTQxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQXNEO0FBQ0g7QUFFbkQsTUFBTSxlQUFlO0lBU2pCLFlBQW1CLE9BQW1DO1FBSHJDLHlDQUFvQyxHQUFxQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ25GLHVCQUFrQixHQUF3QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBR2pFLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBRWhDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQTJCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUM7YUFDeEcsTUFBTSxDQUFDLENBQUMsS0FBYSxFQUFFLEtBQWEsRUFBRSxhQUF1QixFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBRS9HLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDO2FBQzlGLE1BQU0sQ0FBQyxDQUFDLElBQWMsRUFBRSxLQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDO2FBQ25FLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBZSxFQUFFLEtBQWEsRUFBRSxRQUFrQixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDM0csSUFBSSxDQUFDLGtCQUFrQixHQUFHLG9FQUFpQixDQUFDLHVCQUF1QixDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRXBGLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxDQUFDLEdBQUcsQ0FBQyxvRUFBaUIsQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNuTixDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGVBQWUsQ0FBQyxPQUFPLEVBQUssQ0FBQztJQUM1QyxDQUFDO0lBRUQsSUFBSSxhQUFhO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsT0FBTyxDQUFDLFVBQStCLEVBQUUsWUFBZTtRQUNwRCxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzFCLE1BQU0sT0FBTyxHQUEwQixJQUFJLENBQUMsdUNBQXVDLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEcsSUFBSSxDQUFDLE9BQU8sSUFBRyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNqQyxNQUFNLElBQUksZ0VBQVksQ0FBQyx5RUFBeUUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdkg7UUFDRCxNQUFNLGNBQWMsR0FBMEIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25GLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLGNBQWMsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRU8sUUFBUSxDQUFDLFVBQStCO1FBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDeEUsTUFBTSxJQUFJLEtBQUssQ0FBQyw4REFBOEQsSUFBSSxDQUFDLGNBQWMsZUFBZSxDQUFDLENBQUM7U0FDckg7UUFDRCxJQUFJLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxFQUFFO1lBQ3ZCLE1BQU0sWUFBWSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztpQkFDM0YsTUFBTSxDQUFDLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5RCxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFO2dCQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLDhEQUE4RCxJQUFJLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQzthQUNqSDtTQUNKO0lBQ0wsQ0FBQztJQUVPLHNCQUFzQixDQUFDLE9BQThCLEVBQUUsUUFBVztRQUN0RSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQzNFLE9BQU8sUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFFTyx1Q0FBdUMsQ0FBQyxVQUErQjtRQUMzRSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN0RCxPQUFPLEVBQUUsQ0FBQztTQUNiO1FBQ0QsT0FBTyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBNEIsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ2xILEdBQUcsQ0FBQyxDQUFDLFNBQTRCLEVBQUUsRUFBRTtZQUNsQyxNQUFNLDBCQUEwQixHQUFHLG9FQUFpQixDQUFDLDBCQUEwQixDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDN0gsT0FBTyxJQUFJLENBQUMsb0NBQW9DLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFDckYsQ0FBQyxDQUFDO2FBQ0QsTUFBTSxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsTUFBTSxLQUFLLElBQUksSUFBSSxPQUFPLE1BQU0sS0FBSSxXQUFXLENBQUMsQ0FBQztJQUNsRyxDQUFDO0lBRU8sc0JBQXNCLENBQUMsT0FBOEI7UUFDekQsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBeUIsRUFBRSxLQUEwQixFQUFFLEVBQUU7WUFDMUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7QUFFRCxXQUFVLGVBQWU7SUFFckIsTUFBYSxPQUFPO1FBQXBCO1lBSVcsWUFBTyxHQUEwQixFQUFFLENBQUM7UUEyQi9DLENBQUM7UUF4QlUsaUJBQWlCLENBQUMsS0FBYTtZQUNsQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUMzQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sZUFBZSxDQUFDLEtBQWE7WUFDaEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLG9CQUFvQixDQUFDLEtBQTBCO1lBQ2xELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxxQkFBcUIsQ0FBQyxLQUE0QjtZQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztLQUVKO0lBL0JZLHVCQUFPLFVBK0JuQjtBQUVMLENBQUMsRUFuQ1MsZUFBZSxLQUFmLGVBQWUsUUFtQ3hCO0FBRXVCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9Fc3NlbmNlQ29tYmluZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0FsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0gZnJvbSBcIi4vRmFicmljYXRpb25IZWxwZXJcIjtcclxuaW1wb3J0IHtBbGNoZW15RXJyb3J9IGZyb20gXCIuLi9lcnJvci9BbGNoZW15RXJyb3JcIjtcclxuXHJcbmNsYXNzIEVzc2VuY2VDb21iaW5lcjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhDb21wb25lbnRzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhFc3NlbmNlczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VNYXRjaFNpemVzOiBudW1iZXJbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5OiBNYXA8bnVtYmVyLCBBbGNoZW1pY2FsRWZmZWN0PFQ+PiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihidWlsZGVyOiBFc3NlbmNlQ29tYmluZXIuQnVpbGRlcjxUPikge1xyXG4gICAgICAgIHRoaXMuX21heENvbXBvbmVudHMgPSBidWlsZGVyLm1heENvbXBvbmVudHM7XHJcbiAgICAgICAgdGhpcy5fbWF4RXNzZW5jZXMgPSBidWlsZGVyLm1heEVzc2VuY2VzO1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdHMgPSBidWlsZGVyLmVmZmVjdHM7XHJcblxyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzID0gdGhpcy5lZmZlY3RzLm1hcCgoZWZmZWN0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiBlZmZlY3QuZXNzZW5jZUNvbWJpbmF0aW9uLmxlbmd0aClcclxuICAgICAgICAgICAgLmZpbHRlcigoY291bnQ6IG51bWJlciwgaW5kZXg6IG51bWJlciwgZXNzZW5jZUNvdW50czogbnVtYmVyW10pID0+IGVzc2VuY2VDb3VudHMuaW5kZXhPZihjb3VudCkgPT09IGluZGV4KTtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pcXVlRXNzZW5jZXMgPSB0aGlzLmVmZmVjdHMubWFwKChlZmZlY3Q6IEFsY2hlbWljYWxFZmZlY3Q8VD4pID0+IGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24pXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IHN0cmluZ1tdLCByaWdodDogc3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKChlc3NlbmNlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGVzc2VuY2VzOiBzdHJpbmdbXSkgPT4gZXNzZW5jZXMuaW5kZXhPZihlc3NlbmNlKSA9PT0gaW5kZXgpKTtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyA9IEZhYnJpY2F0aW9uSGVscGVyLmFzc2lnbkVzc2VuY2VJZGVudGl0aWVzKHVuaXF1ZUVzc2VuY2VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5lZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gdGhpcy5fZWZmZWN0c0J5RXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkuc2V0KEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24sIHRoaXMuX2Vzc2VuY2VJZGVudGl0aWVzKSwgZWZmZWN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyPFQgZXh0ZW5kcyBJdGVtLkRhdGE+KCk6IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heENvbXBvbmVudHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4Q29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF4RXNzZW5jZXMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4RXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVmZmVjdHMoKTogQWxjaGVtaWNhbEVmZmVjdDxUPltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWZmZWN0cztcclxuICAgIH1cclxuXHJcbiAgICBjb21iaW5lKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGJhc2VJdGVtRGF0YTogVCk6IFQge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50cyk7XHJcbiAgICAgICAgY29uc3QgZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdID0gdGhpcy5kZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50cyk7XHJcbiAgICAgICAgaWYgKCFlZmZlY3RzIHx8ZWZmZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFsY2hlbXlFcnJvcignTm8gQWxjaGVtaWNhbCBFZmZlY3RzIHdlcmUgcHJvZHVjZWQgYnkgbWl4aW5nIHRoZSBwcm92aWRlZCBDb21wb25lbnRzLiAnLCBjb21wb25lbnRzLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3JkZXJlZEVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSA9IHRoaXMub3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUVmZmVjdHNUb0Jhc2VJdGVtKG9yZGVyZWRFZmZlY3RzLCBiYXNlSXRlbURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGUoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSkge1xyXG4gICAgICAgIGlmICgodGhpcy5fbWF4Q29tcG9uZW50cyA+IDApICYmICh0aGlzLl9tYXhDb21wb25lbnRzIDwgY29tcG9uZW50cy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heENvbXBvbmVudHN9IGNvbXBvbmVudHMuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbWF4RXNzZW5jZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VDb3VudCA9IGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBjb21wb25lbnQuZXNzZW5jZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyKSA9PiBsZWZ0ICsgcmlnaHQsIDApO1xyXG4gICAgICAgICAgICBpZiAoZXNzZW5jZUNvdW50ID4gdGhpcy5fbWF4RXNzZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heEVzc2VuY2VzfSBlc3NlbmNlcy4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseUVmZmVjdHNUb0Jhc2VJdGVtKGVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSwgYmFzZUl0ZW06IFQpOiBUIHtcclxuICAgICAgICBlZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0LmFwcGx5VG8oYmFzZUl0ZW0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID09PSAwIHx8IHRoaXMuZWZmZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50cy5maWx0ZXIoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzLmluY2x1ZGVzKGNvbXBvbmVudC5lc3NlbmNlcy5sZW5ndGgpKVxyXG4gICAgICAgICAgICAubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSA9IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGNvbXBvbmVudC5lc3NlbmNlcywgdGhpcy5fZXNzZW5jZUlkZW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5LmdldChlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0ICE9PSBudWxsICYmIHR5cGVvZiBlZmZlY3QhPT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10pOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10ge1xyXG4gICAgICAgIHJldHVybiBlZmZlY3RzLnNvcnQoKGxlZnQ6IEFsY2hlbWljYWxFZmZlY3Q8VD4sIHJpZ2h0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUudmFsdWVPZigpIC0gcmlnaHQudHlwZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBFc3NlbmNlQ29tYmluZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyPFQgZXh0ZW5kcyBJdGVtLkRhdGE+IHtcclxuXHJcbiAgICAgICAgcHVibGljIG1heENvbXBvbmVudHM6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgbWF4RXNzZW5jZXM6IG51bWJlclxyXG4gICAgICAgIHB1YmxpYyBlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgYmFzZUl0ZW06IFQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4Q29tcG9uZW50cyh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4Q29tcG9uZW50cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4RXNzZW5jZXModmFsdWU6IG51bWJlcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLm1heENvbXBvbmVudHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFsY2hlbWljYWxFZmZlY3QodmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD4pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5lZmZlY3RzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWxjaGVtaWNhbEVmZmVjdHModmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVmZmVjdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRXNzZW5jZUNvbWJpbmVyPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFc3NlbmNlQ29tYmluZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7RXNzZW5jZUNvbWJpbmVyfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/EssenceCombiner.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricateItem.ts":
/*!*******************************************!*\
  !*** ./src/scripts/core/FabricateItem.ts ***!
  \*******************************************/
/*! exports provided: FabricateItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItem\", function() { return FabricateItem; });\nclass FabricateItem {\r\n    constructor(systemId, partId, imageUrl, name) {\r\n        this._systemId = systemId;\r\n        this._partId = partId;\r\n        this._imageUrl = imageUrl;\r\n        this._name = name;\r\n    }\r\n    get partId() {\r\n        return this._partId;\r\n    }\r\n    get systemId() {\r\n        return this._systemId;\r\n    }\r\n    get compendiumEntry() {\r\n        return `${this.systemId}.${this.partId}`;\r\n    }\r\n    get imageUrl() {\r\n        return this._imageUrl;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    sharesType(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.partId === other.partId\r\n            && this.systemId === other.systemId;\r\n    }\r\n    isValid() {\r\n        return this.partId && this.partId.length > 0\r\n            && this.systemId && this.systemId.length > 0\r\n            && this.imageUrl != null && this.imageUrl.length > 0\r\n            && this.name != null && this.name.length > 0;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHM/YzkxZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUEsTUFBZSxhQUFhO0lBTXhCLFlBQXNCLFFBQWdCLEVBQUUsTUFBYyxFQUFFLFFBQWdCLEVBQUUsSUFBWTtRQUNsRixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksZUFBZTtRQUNmLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7SUFDNUMsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxVQUFVLENBQUMsS0FBb0I7UUFDM0IsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNSLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxLQUFLLEtBQUssQ0FBQyxNQUFNO2VBQzVCLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUM1QyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ3JDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztlQUN6QyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ2pELElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0o7QUFFcUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhYnN0cmFjdCBjbGFzcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfc3lzdGVtSWQ6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfcGFydElkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbWFnZVVybDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihzeXN0ZW1JZDogc3RyaW5nLCBwYXJ0SWQ6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtSWQgPSBzeXN0ZW1JZDtcclxuICAgICAgICB0aGlzLl9wYXJ0SWQgPSBwYXJ0SWQ7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBpbWFnZVVybDtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFydElkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBlbmRpdW1FbnRyeSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLnN5c3RlbUlkfS4ke3RoaXMucGFydElkfWBcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW1hZ2VVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW1hZ2VVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzaGFyZXNUeXBlKG90aGVyOiBGYWJyaWNhdGVJdGVtKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRJZCA9PT0gb3RoZXIucGFydElkXHJcbiAgICAgICAgICAgICYmIHRoaXMuc3lzdGVtSWQgPT09IG90aGVyLnN5c3RlbUlkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydElkICYmIHRoaXMucGFydElkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5zeXN0ZW1JZCAmJiB0aGlzLnN5c3RlbUlkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5pbWFnZVVybCAhPSBudWxsICYmIHRoaXMuaW1hZ2VVcmwubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAmJiB0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGVJdGVtfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricateItem.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationAction.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationAction.ts ***!
  \***********************************************/
/*! exports provided: FabricationAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationAction\", function() { return FabricationAction; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\n\r\nclass FabricationAction extends _FabricateItem__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.itemType.systemId, builder.itemType.partId, builder.itemType.imageUrl, builder.itemType.name);\r\n        this._itemType = builder.itemType;\r\n        this._quantity = builder.quantity;\r\n        this._actionType = builder.actionType;\r\n        this._customItemData = builder.customItemData;\r\n    }\r\n    static builder() {\r\n        return new FabricationAction.Builder();\r\n    }\r\n    get itemType() {\r\n        return this._itemType;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get actionType() {\r\n        return this._actionType;\r\n    }\r\n    get customItemData() {\r\n        return this._customItemData;\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .withActionType(flags.action)\r\n            .withQuantity(flags.quantity)\r\n            .withItemType(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => FabricationAction.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && (this.actionType != null)\r\n            && (this.actionType == _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__[\"ActionType\"].ADD || this.actionType == _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__[\"ActionType\"].REMOVE)\r\n            && this.itemType.isValid()\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (FabricationAction) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationAction(this);\r\n        }\r\n        withItemType(value) {\r\n            this.itemType = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        withActionType(value) {\r\n            this.actionType = value;\r\n            return this;\r\n        }\r\n        withCustomItemData(value) {\r\n            this.customItemData = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationAction.Builder = Builder;\r\n})(FabricationAction || (FabricationAction = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uQWN0aW9uLnRzP2YzZDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUNrQjtBQUMxQjtBQUU5QyxNQUFNLGlCQUF1QyxTQUFRLDREQUFhO0lBTTlELFlBQVksT0FBcUM7UUFDN0MsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDO0lBQ2xELENBQUM7SUFFTSxNQUFNLENBQUMsT0FBTztRQUNqQixPQUFPLElBQUksaUJBQWlCLENBQUMsT0FBTyxFQUFLLENBQUM7SUFDOUMsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUNoQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBc0IsS0FBMkIsRUFBRSxRQUFnQjtRQUN0RixPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUs7YUFDbkIsY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7YUFDNUIsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDNUIsWUFBWSxDQUFDLG9FQUFpQixDQUFDLE9BQU8sRUFBRTthQUNwQyxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ3hCLEtBQUssRUFBRSxDQUFDO2FBQ1osS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQXNCLEtBQTZCLEVBQUUsUUFBZ0I7UUFDNUYsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUksUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDdkYsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7ZUFDNUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQztlQUN6QixDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksK0RBQVUsQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSwrREFBVSxDQUFDLE1BQU0sQ0FBQztlQUMzRSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtlQUN2QixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDM0IsQ0FBQztDQUNKO0FBRUQsV0FBVSxpQkFBaUI7SUFFdkIsTUFBYSxPQUFPO1FBT1QsS0FBSztZQUNSLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQW9CO1lBQ3BDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxZQUFZLENBQUMsS0FBYTtZQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sY0FBYyxDQUFDLEtBQWlCO1lBQ25DLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1lBQ3hCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxrQkFBa0IsQ0FBQyxLQUFRO1lBQ3ZCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBQzVCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7S0FFSjtJQS9CWSx5QkFBTyxVQStCbkI7QUFDTCxDQUFDLEVBbENTLGlCQUFpQixLQUFqQixpQkFBaUIsUUFrQzFCO0FBRXlCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9GYWJyaWNhdGlvbkFjdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7QWN0aW9uVHlwZSwgRmFicmljYXRlUmVzdWx0RmxhZ3N9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuY2xhc3MgRmFicmljYXRpb25BY3Rpb248VCBleHRlbmRzIEl0ZW0uRGF0YT4gZXh0ZW5kcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2l0ZW1UeXBlOiBGYWJyaWNhdGVJdGVtO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcXVhbnRpdHk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdGlvblR5cGU6IEFjdGlvblR5cGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jdXN0b21JdGVtRGF0YTogVDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBGYWJyaWNhdGlvbkFjdGlvbi5CdWlsZGVyPFQ+KSB7XHJcbiAgICAgICAgc3VwZXIoYnVpbGRlci5pdGVtVHlwZS5zeXN0ZW1JZCwgYnVpbGRlci5pdGVtVHlwZS5wYXJ0SWQsIGJ1aWxkZXIuaXRlbVR5cGUuaW1hZ2VVcmwsIGJ1aWxkZXIuaXRlbVR5cGUubmFtZSk7XHJcbiAgICAgICAgdGhpcy5faXRlbVR5cGUgPSBidWlsZGVyLml0ZW1UeXBlO1xyXG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gYnVpbGRlci5xdWFudGl0eTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25UeXBlID0gYnVpbGRlci5hY3Rpb25UeXBlO1xyXG4gICAgICAgIHRoaXMuX2N1c3RvbUl0ZW1EYXRhID0gYnVpbGRlci5jdXN0b21JdGVtRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXI8VCBleHRlbmRzIEl0ZW0uRGF0YT4oKTogRmFicmljYXRpb25BY3Rpb24uQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGYWJyaWNhdGlvbkFjdGlvbi5CdWlsZGVyPFQ+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGl0ZW1UeXBlKCk6IEZhYnJpY2F0ZUl0ZW0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGlvblR5cGUoKTogQWN0aW9uVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvblR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1c3RvbUl0ZW1EYXRhKCk6IEl0ZW0uRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUl0ZW1EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUZsYWdzPFQgZXh0ZW5kcyBJdGVtLkRhdGE+KGZsYWdzOiBGYWJyaWNhdGVSZXN1bHRGbGFncywgc3lzdGVtSWQ6IHN0cmluZyk6IEZhYnJpY2F0aW9uQWN0aW9uPFQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5idWlsZGVyPFQ+KClcclxuICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKGZsYWdzLmFjdGlvbilcclxuICAgICAgICAgICAgLndpdGhRdWFudGl0eShmbGFncy5xdWFudGl0eSlcclxuICAgICAgICAgICAgLndpdGhJdGVtVHlwZShDcmFmdGluZ0NvbXBvbmVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoc3lzdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aFBhcnRJZChmbGFncy5wYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBtYW55RnJvbUZsYWdzPFQgZXh0ZW5kcyBJdGVtLkRhdGE+KGZsYWdzOiBGYWJyaWNhdGVSZXN1bHRGbGFnc1tdLCBzeXN0ZW1JZDogc3RyaW5nKTogRmFicmljYXRpb25BY3Rpb248VD5bXSB7XHJcbiAgICAgICAgcmV0dXJuIGZsYWdzLm1hcCgoZmxhZ0RhdGEpID0+IEZhYnJpY2F0aW9uQWN0aW9uLmZyb21GbGFnczxUPihmbGFnRGF0YSwgc3lzdGVtSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5xdWFudGl0eSAhPSBudWxsICYmIHRoaXMucXVhbnRpdHkgPiAwKVxyXG4gICAgICAgICAgICAmJiAodGhpcy5hY3Rpb25UeXBlICE9IG51bGwpXHJcbiAgICAgICAgICAgICYmICh0aGlzLmFjdGlvblR5cGUgPT0gQWN0aW9uVHlwZS5BREQgfHwgdGhpcy5hY3Rpb25UeXBlID09IEFjdGlvblR5cGUuUkVNT1ZFKVxyXG4gICAgICAgICAgICAmJiB0aGlzLml0ZW1UeXBlLmlzVmFsaWQoKVxyXG4gICAgICAgICAgICAmJiBzdXBlci5pc1ZhbGlkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBGYWJyaWNhdGlvbkFjdGlvbiB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXI8VCBleHRlbmRzIEl0ZW0uRGF0YT4ge1xyXG5cclxuICAgICAgICBwdWJsaWMgaXRlbVR5cGUhOiBGYWJyaWNhdGVJdGVtO1xyXG4gICAgICAgIHB1YmxpYyBxdWFudGl0eSE6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgYWN0aW9uVHlwZSE6IEFjdGlvblR5cGU7XHJcbiAgICAgICAgcHVibGljIGN1c3RvbUl0ZW1EYXRhOiBUO1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRmFicmljYXRpb25BY3Rpb248VD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhYnJpY2F0aW9uQWN0aW9uKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJdGVtVHlwZSh2YWx1ZTogRmFicmljYXRlSXRlbSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1UeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhRdWFudGl0eSh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMucXVhbnRpdHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFjdGlvblR5cGUodmFsdWU6IEFjdGlvblR5cGUpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25UeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEN1c3RvbUl0ZW1EYXRhKHZhbHVlOiBUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tSXRlbURhdGEgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationAction.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationHelper.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationHelper.ts ***!
  \***********************************************/
/*! exports provided: FabricationHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationHelper\", function() { return FabricationHelper; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass FabricationHelper {\r\n    static asCraftingResults(components, action) {\r\n        const componentsById = new Map();\r\n        components.forEach((component) => {\r\n            const identicalComponents = componentsById.get(component.partId);\r\n            if (!identicalComponents) {\r\n                componentsById.set(component.partId, [component]);\r\n            }\r\n            else {\r\n                identicalComponents.push(component);\r\n            }\r\n        });\r\n        if (Object.keys(componentsById).length === components.length) {\r\n            return components.map((component) => {\r\n                return _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                    .withItemType(component)\r\n                    .withQuantity(1)\r\n                    .withActionType(action)\r\n                    .build();\r\n            });\r\n        }\r\n        const results = [];\r\n        componentsById.forEach((componentsOfType) => {\r\n            const craftingResult = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                .withItemType(componentsOfType[0])\r\n                .withQuantity(componentsOfType.length)\r\n                .withActionType(action)\r\n                .build();\r\n            results.push(craftingResult);\r\n        });\r\n        return results;\r\n    }\r\n    ;\r\n    static essenceCombinationIdentity(essences, essenceIdentities) {\r\n        return essences.map((essence) => {\r\n            if (!essenceIdentities.has(essence)) {\r\n                throw new Error(`No known essence is registered for the slug '${essence}'. Known essences are: ${Array.from(essenceIdentities.keys()).join(', ')}`);\r\n            }\r\n            return essenceIdentities.get(essence);\r\n        })\r\n            .reduce((left, right) => left * right);\r\n    }\r\n    static assignEssenceIdentities(essences) {\r\n        const uniqueEssences = essences.filter((essence, index, collection) => collection.indexOf(essence) === index);\r\n        const primes = this.generatePrimes(uniqueEssences.length);\r\n        const essenceIdentities = new Map();\r\n        uniqueEssences.forEach((value, index) => essenceIdentities.set(value, primes[index]));\r\n        return essenceIdentities;\r\n    }\r\n    static generatePrimes(quantity) {\r\n        if (quantity <= FabricationHelper.primes.length) {\r\n            return FabricationHelper.primes.slice(0, quantity);\r\n        }\r\n        let candidate = 98;\r\n        while (FabricationHelper.primes.length < quantity) {\r\n            if (FabricationHelper.primes.every((p) => candidate % p)) {\r\n                FabricationHelper.primes.push(candidate);\r\n            }\r\n            candidate++;\r\n        }\r\n        return FabricationHelper.primes;\r\n    }\r\n    static asComponentCombinations(availableIngredients, limit) {\r\n        const denormalizedComponents = [];\r\n        availableIngredients.forEach((ingredient) => {\r\n            const ceiling = ingredient.quantity < limit ? ingredient.quantity : limit;\r\n            for (let i = 0; i < ceiling; i++) {\r\n                denormalizedComponents.push(ingredient.component);\r\n            }\r\n        });\r\n        const combinations = [];\r\n        const iterations = Math.pow(2, denormalizedComponents.length);\r\n        for (let i = 0; i < iterations; i++) {\r\n            const combination = [];\r\n            for (let j = 0; j < denormalizedComponents.length; j++) {\r\n                if (i & Math.pow(2, j)) {\r\n                    combination.push(denormalizedComponents[j]);\r\n                }\r\n            }\r\n            if (combination.length > 0) {\r\n                combinations.push(combination);\r\n            }\r\n        }\r\n        return combinations.sort((left, right) => left.length - right.length);\r\n    }\r\n    static applyResults(actions, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const action of actions) {\r\n                switch (action.actionType) {\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__[\"ActionType\"].ADD:\r\n                        if (action.customItemData) {\r\n                            yield inventory.add(action.itemType, action.quantity, action.customItemData);\r\n                        }\r\n                        else {\r\n                            yield inventory.add(action.itemType, action.quantity);\r\n                        }\r\n                        break;\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_1__[\"ActionType\"].REMOVE:\r\n                        yield inventory.remove(action.itemType, action.quantity);\r\n                        break;\r\n                    default:\r\n                        throw new Error(`The Crafting Action Type ${action.actionType} is not supported. Allowable values are: ADD, REMOVE. `);\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n}\r\nFabricationHelper.primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97];\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uSGVscGVyLnRzPzQyZmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNzRDtBQUdKO0FBRWxELE1BQU0saUJBQWlCO0lBSVosTUFBTSxDQUFDLGlCQUFpQixDQUFDLFVBQStCLEVBQUUsTUFBa0I7UUFDL0UsTUFBTSxjQUFjLEdBQXFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDbkUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQTRCLEVBQUUsRUFBRTtZQUNoRCxNQUFNLG1CQUFtQixHQUF3QixjQUFjLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0RixJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQ3RCLGNBQWMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7YUFDckQ7aUJBQU07Z0JBQ0gsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3ZDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxLQUFLLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDMUQsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBNEIsRUFBRSxFQUFFO2dCQUNuRCxPQUFPLG9FQUFpQixDQUFDLE9BQU8sRUFBRTtxQkFDN0IsWUFBWSxDQUFDLFNBQVMsQ0FBQztxQkFDdkIsWUFBWSxDQUFDLENBQUMsQ0FBQztxQkFDZixjQUFjLENBQUMsTUFBTSxDQUFDO3FCQUN0QixLQUFLLEVBQUUsQ0FBQztZQUNqQixDQUFDLENBQUMsQ0FBQztTQUNOO1FBQ0QsTUFBTSxPQUFPLEdBQW1DLEVBQUUsQ0FBQztRQUNuRCxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsZ0JBQXFDLEVBQUUsRUFBRTtZQUM3RCxNQUFNLGNBQWMsR0FBRyxvRUFBaUIsQ0FBQyxPQUFPLEVBQUU7aUJBQzdDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDakMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQztpQkFDckMsY0FBYyxDQUFDLE1BQU0sQ0FBQztpQkFDdEIsS0FBSyxFQUFFLENBQUM7WUFDYixPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQUFBLENBQUM7SUFFSyxNQUFNLENBQUMsMEJBQTBCLENBQUMsUUFBa0IsRUFBRSxpQkFBc0M7UUFDL0YsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBZSxFQUFFLEVBQUU7WUFDcEMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxnREFBZ0QsT0FBTywwQkFBMEIsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDdko7WUFDRCxPQUFPLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQUM7YUFDRyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVNLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxRQUFrQjtRQUNwRCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBZSxFQUFFLEtBQWEsRUFBRSxVQUFvQixFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBQ3hJLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFELE1BQU0saUJBQWlCLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7UUFDekQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RixPQUFPLGlCQUFpQixDQUFDO0lBQzdCLENBQUM7SUFFTSxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQWdCO1FBQ3pDLElBQUksUUFBUSxJQUFJLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFDN0MsT0FBTyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUN0RDtRQUNELElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNuQixPQUFPLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsUUFBUSxFQUFFO1lBQy9DLElBQUksaUJBQWlCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUN0RCxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzVDO1lBQ0QsU0FBUyxFQUFFLENBQUM7U0FDZjtRQUNELE9BQU8saUJBQWlCLENBQUMsTUFBTSxDQUFDO0lBQ3BDLENBQUM7SUFFTSxNQUFNLENBQUMsdUJBQXVCLENBQUMsb0JBQWtDLEVBQUUsS0FBYTtRQUNuRixNQUFNLHNCQUFzQixHQUF3QixFQUFFLENBQUM7UUFDdkQsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBc0IsRUFBRSxFQUFFO1lBQ3BELE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDMUUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDOUIsc0JBQXNCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUNyRDtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxZQUFZLEdBQTBCLEVBQUUsQ0FBQztRQUMvQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU5RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLE1BQU0sV0FBVyxHQUF3QixFQUFFLENBQUM7WUFDNUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLHNCQUFzQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDcEQsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7b0JBQ3BCLFdBQVcsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDL0M7YUFDSjtZQUNELElBQUksV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3hCLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDbEM7U0FDSjtRQUNELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFTSxNQUFNLENBQU8sWUFBWSxDQUFDLE9BQXVDLEVBQUUsU0FBK0I7O1lBQ3JHLEtBQUssTUFBTSxNQUFNLElBQUksT0FBTyxFQUFFO2dCQUMxQixRQUFRLE1BQU0sQ0FBQyxVQUFVLEVBQUU7b0JBQ3ZCLEtBQUssK0RBQVUsQ0FBQyxHQUFHO3dCQUNmLElBQUksTUFBTSxDQUFDLGNBQWMsRUFBRTs0QkFDdkIsTUFBTSxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7eUJBQ2hGOzZCQUFNOzRCQUNILE1BQU0sU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQzt5QkFDekQ7d0JBQ0QsTUFBTTtvQkFDVixLQUFLLCtEQUFVLENBQUMsTUFBTTt3QkFDbEIsTUFBTSxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUN6RCxNQUFNO29CQUNWO3dCQUNJLE1BQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLE1BQU0sQ0FBQyxVQUFVLHdEQUF3RCxDQUFDLENBQUM7aUJBQzlIO2FBQ0o7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBQUE7O0FBNUd1Qix3QkFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFnSDVHIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9GYWJyaWNhdGlvbkhlbHBlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb259IGZyb20gXCIuL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5fSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtJbmdyZWRpZW50fSBmcm9tIFwiLi9JbmdyZWRpZW50XCI7XHJcbmltcG9ydCB7QWN0aW9uVHlwZX0gZnJvbSBcIi4uL2dhbWUvQ29tcGVuZGl1bURhdGFcIjtcclxuXHJcbmNsYXNzIEZhYnJpY2F0aW9uSGVscGVyIHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBwcmltZXMgPSBbMiwgMywgNSwgNywgMTEsIDEzLCAxNywgMTksIDIzLCAyOSwgMzEsIDM3LCA0MSwgNDMsIDQ3LCA1MywgNTksIDYxLCA2NywgNzEsIDczLCA3OSwgODMsIDg5LCA5N107XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc0NyYWZ0aW5nUmVzdWx0cyhjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdLCBhY3Rpb246IEFjdGlvblR5cGUpOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHNCeUlkOiBNYXA8c3RyaW5nLCBDcmFmdGluZ0NvbXBvbmVudFtdPiA9IG5ldyBNYXAoKTtcclxuICAgICAgICBjb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWRlbnRpY2FsQ29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSA9IGNvbXBvbmVudHNCeUlkLmdldChjb21wb25lbnQucGFydElkKTtcclxuICAgICAgICAgICAgaWYgKCFpZGVudGljYWxDb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzQnlJZC5zZXQoY29tcG9uZW50LnBhcnRJZCwgW2NvbXBvbmVudF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWRlbnRpY2FsQ29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29tcG9uZW50c0J5SWQpLmxlbmd0aCA9PT0gY29tcG9uZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhJdGVtVHlwZShjb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eSgxKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXN1bHRzOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10gPSBbXTtcclxuICAgICAgICBjb21wb25lbnRzQnlJZC5mb3JFYWNoKChjb21wb25lbnRzT2ZUeXBlOiBDcmFmdGluZ0NvbXBvbmVudFtdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nUmVzdWx0ID0gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEl0ZW1UeXBlKGNvbXBvbmVudHNPZlR5cGVbMF0pXHJcbiAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGNvbXBvbmVudHNPZlR5cGUubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKGFjdGlvbilcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goY3JhZnRpbmdSZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGVzc2VuY2VzOiBzdHJpbmdbXSwgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4pOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBlc3NlbmNlcy5tYXAoKGVzc2VuY2U6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWVzc2VuY2VJZGVudGl0aWVzLmhhcyhlc3NlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBrbm93biBlc3NlbmNlIGlzIHJlZ2lzdGVyZWQgZm9yIHRoZSBzbHVnICcke2Vzc2VuY2V9Jy4gS25vd24gZXNzZW5jZXMgYXJlOiAke0FycmF5LmZyb20oZXNzZW5jZUlkZW50aXRpZXMua2V5cygpKS5qb2luKCcsICcpfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlc3NlbmNlSWRlbnRpdGllcy5nZXQoZXNzZW5jZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdCwgcmlnaHQpID0+IGxlZnQgKiByaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3NpZ25Fc3NlbmNlSWRlbnRpdGllcyhlc3NlbmNlczogc3RyaW5nW10pOiBNYXA8c3RyaW5nLCBudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB1bmlxdWVFc3NlbmNlcyA9IGVzc2VuY2VzLmZpbHRlcigoZXNzZW5jZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiBzdHJpbmdbXSkgPT4gY29sbGVjdGlvbi5pbmRleE9mKGVzc2VuY2UpID09PSBpbmRleCk7XHJcbiAgICAgICAgY29uc3QgcHJpbWVzID0gdGhpcy5nZW5lcmF0ZVByaW1lcyh1bmlxdWVFc3NlbmNlcy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHVuaXF1ZUVzc2VuY2VzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gZXNzZW5jZUlkZW50aXRpZXMuc2V0KHZhbHVlLCBwcmltZXNbaW5kZXhdKSk7XHJcbiAgICAgICAgcmV0dXJuIGVzc2VuY2VJZGVudGl0aWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVQcmltZXMocXVhbnRpdHk6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICBpZiAocXVhbnRpdHkgPD0gRmFicmljYXRpb25IZWxwZXIucHJpbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25IZWxwZXIucHJpbWVzLnNsaWNlKDAsIHF1YW50aXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IDk4O1xyXG4gICAgICAgIHdoaWxlIChGYWJyaWNhdGlvbkhlbHBlci5wcmltZXMubGVuZ3RoIDwgcXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgaWYgKEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcy5ldmVyeSgocCkgPT4gY2FuZGlkYXRlICUgcCkpIHtcclxuICAgICAgICAgICAgICAgIEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcy5wdXNoKGNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FuZGlkYXRlKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkhlbHBlci5wcmltZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc0NvbXBvbmVudENvbWJpbmF0aW9ucyhhdmFpbGFibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdLCBsaW1pdDogbnVtYmVyKTogQ3JhZnRpbmdDb21wb25lbnRbXVtdIHtcclxuICAgICAgICBjb25zdCBkZW5vcm1hbGl6ZWRDb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdID0gW107XHJcbiAgICAgICAgYXZhaWxhYmxlSW5ncmVkaWVudHMuZm9yRWFjaCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjZWlsaW5nID0gaW5ncmVkaWVudC5xdWFudGl0eSA8IGxpbWl0ID8gaW5ncmVkaWVudC5xdWFudGl0eSA6IGxpbWl0O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlaWxpbmc7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGVub3JtYWxpemVkQ29tcG9uZW50cy5wdXNoKGluZ3JlZGllbnQuY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmF0aW9uczogQ3JhZnRpbmdDb21wb25lbnRbXVtdID0gW107XHJcbiAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IE1hdGgucG93KDIsIGRlbm9ybWFsaXplZENvbXBvbmVudHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50W10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkZW5vcm1hbGl6ZWRDb21wb25lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAmIE1hdGgucG93KDIsIGopKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tYmluYXRpb24ucHVzaChkZW5vcm1hbGl6ZWRDb21wb25lbnRzW2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tYmluYXRpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29tYmluYXRpb25zLnB1c2goY29tYmluYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21iaW5hdGlvbnMuc29ydCgobGVmdCwgcmlnaHQpID0+IGxlZnQubGVuZ3RoIC0gcmlnaHQubGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGFwcGx5UmVzdWx0cyhhY3Rpb25zOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10sIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uLmFjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZS5BREQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5jdXN0b21JdGVtRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnZlbnRvcnkuYWRkKGFjdGlvbi5pdGVtVHlwZSwgYWN0aW9uLnF1YW50aXR5LCBhY3Rpb24uY3VzdG9tSXRlbURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGludmVudG9yeS5hZGQoYWN0aW9uLml0ZW1UeXBlLCBhY3Rpb24ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgQWN0aW9uVHlwZS5SRU1PVkU6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW52ZW50b3J5LnJlbW92ZShhY3Rpb24uaXRlbVR5cGUsIGFjdGlvbi5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIENyYWZ0aW5nIEFjdGlvbiBUeXBlICR7YWN0aW9uLmFjdGlvblR5cGV9IGlzIG5vdCBzdXBwb3J0ZWQuIEFsbG93YWJsZSB2YWx1ZXMgYXJlOiBBREQsIFJFTU9WRS4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0aW9uSGVscGVyfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationHelper.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationOutcome.ts":
/*!************************************************!*\
  !*** ./src/scripts/core/FabricationOutcome.ts ***!
  \************************************************/
/*! exports provided: FabricationOutcome, OutcomeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationOutcome\", function() { return FabricationOutcome; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OutcomeType\", function() { return OutcomeType; });\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\nvar OutcomeType;\r\n(function (OutcomeType) {\r\n    OutcomeType[\"SUCCESS\"] = \"SUCCESS\";\r\n    OutcomeType[\"FAILURE\"] = \"FAILURE\";\r\n})(OutcomeType || (OutcomeType = {}));\r\nclass FabricationOutcome {\r\n    constructor(builder) {\r\n        this._type = builder.type;\r\n        this._recipe = builder.recipe;\r\n        this._actions = builder.actions;\r\n        this._failureDetails = builder.failureDetails;\r\n    }\r\n    static builder() {\r\n        return new FabricationOutcome.Builder();\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    get title() {\r\n        switch (this.type) {\r\n            case OutcomeType.SUCCESS:\r\n                return 'Crafting success ';\r\n            case OutcomeType.FAILURE:\r\n                return 'Crafting failure ';\r\n        }\r\n    }\r\n    get description() {\r\n        switch (this.type) {\r\n            case OutcomeType.SUCCESS:\r\n                if (this._recipe) {\r\n                    return `Successfully crafted \"${this._recipe.name}\". `;\r\n                }\r\n                else {\r\n                    return 'Your alchemical combination worked. ';\r\n                }\r\n            case OutcomeType.FAILURE:\r\n                if (this._recipe) {\r\n                    return `Failed to craft ${this._recipe.name}. `;\r\n                }\r\n                else {\r\n                    return 'Your alchemical combination failed to produce any results. ';\r\n                }\r\n        }\r\n    }\r\n    get failureDetails() {\r\n        return this._failureDetails;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n    get removedComponents() {\r\n        return this._actions.filter((action) => action.actionType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"ActionType\"].REMOVE)\r\n            .map((action) => `${action.quantity} ${action.itemType.name}`);\r\n    }\r\n    get addedItems() {\r\n        return this._actions.filter((action) => action.actionType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"ActionType\"].ADD);\r\n    }\r\n}\r\n(function (FabricationOutcome) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationOutcome(this);\r\n        }\r\n        withOutcomeType(value) {\r\n            this.type = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipe = value;\r\n            return this;\r\n        }\r\n        withActions(value) {\r\n            this.actions = value;\r\n            return this;\r\n        }\r\n        withFailureDetails(value) {\r\n            this.failureDetails = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationOutcome.Builder = Builder;\r\n})(FabricationOutcome || (FabricationOutcome = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZS50cz9jMDEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQWtEO0FBRWxELElBQUssV0FHSjtBQUhELFdBQUssV0FBVztJQUNaLGtDQUFtQjtJQUNuQixrQ0FBbUI7QUFDdkIsQ0FBQyxFQUhJLFdBQVcsS0FBWCxXQUFXLFFBR2Y7QUFFRCxNQUFNLGtCQUFrQjtJQU9wQixZQUFZLE9BQW1DO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDOUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQztJQUNsRCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVDLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNmLEtBQUssV0FBVyxDQUFDLE9BQU87Z0JBQ3BCLE9BQU8sbUJBQW1CLENBQUM7WUFDL0IsS0FBSyxXQUFXLENBQUMsT0FBTztnQkFDcEIsT0FBTyxtQkFBbUIsQ0FBQztTQUNsQztJQUNMLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZixLQUFLLFdBQVcsQ0FBQyxPQUFPO2dCQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQ2QsT0FBTyx5QkFBeUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQztpQkFDMUQ7cUJBQU07b0JBQ0gsT0FBTyxzQ0FBc0MsQ0FBQztpQkFDakQ7WUFDTCxLQUFLLFdBQVcsQ0FBQyxPQUFPO2dCQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQ2QsT0FBTyxtQkFBbUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQztpQkFDbkQ7cUJBQU07b0JBQ0gsT0FBTyw2REFBNkQsQ0FBQztpQkFDeEU7U0FDUjtJQUNMLENBQUM7SUFFRCxJQUFJLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQW9DLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEtBQUssK0RBQVUsQ0FBQyxNQUFNLENBQUM7YUFDekcsR0FBRyxDQUFDLENBQUMsTUFBb0MsRUFBRSxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUUsQ0FBQztJQUN0RyxDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQW9DLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEtBQUssK0RBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoSCxDQUFDO0NBRUo7QUFFRCxXQUFVLGtCQUFrQjtJQUV4QixNQUFhLE9BQU87UUFPVCxLQUFLO1lBQ1IsT0FBTyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hDLENBQUM7UUFFTSxlQUFlLENBQUMsS0FBa0I7WUFDckMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFVBQVUsQ0FBQyxLQUFhO1lBQzNCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxXQUFXLENBQUMsS0FBcUM7WUFDcEQsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGtCQUFrQixDQUFDLEtBQWE7WUFDbkMsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7WUFDNUIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztLQUNKO0lBOUJZLDBCQUFPLFVBOEJuQjtBQUVMLENBQUMsRUFsQ1Msa0JBQWtCLEtBQWxCLGtCQUFrQixRQWtDM0I7QUFFdUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmFicmljYXRpb25BY3Rpb259IGZyb20gXCIuL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi9SZWNpcGVcIjtcclxuaW1wb3J0IHtBY3Rpb25UeXBlfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5cclxuZW51bSBPdXRjb21lVHlwZSB7XHJcbiAgICBTVUNDRVNTID0gJ1NVQ0NFU1MnLFxyXG4gICAgRkFJTFVSRSA9ICdGQUlMVVJFJ1xyXG59XHJcblxyXG5jbGFzcyBGYWJyaWNhdGlvbk91dGNvbWUge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3R5cGU6IE91dGNvbWVUeXBlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVjaXBlOiBSZWNpcGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hY3Rpb25zOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWlsdXJlRGV0YWlsczogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IEZhYnJpY2F0aW9uT3V0Y29tZS5CdWlsZGVyKSB7XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IGJ1aWxkZXIudHlwZTtcclxuICAgICAgICB0aGlzLl9yZWNpcGUgPSBidWlsZGVyLnJlY2lwZTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zID0gYnVpbGRlci5hY3Rpb25zO1xyXG4gICAgICAgIHRoaXMuX2ZhaWx1cmVEZXRhaWxzID0gYnVpbGRlci5mYWlsdXJlRGV0YWlscztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKTogRmFicmljYXRpb25PdXRjb21lLkJ1aWxkZXIge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmFicmljYXRpb25PdXRjb21lLkJ1aWxkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdHlwZSgpOiBPdXRjb21lVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRpdGxlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBPdXRjb21lVHlwZS5TVUNDRVNTOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdDcmFmdGluZyBzdWNjZXNzICc7XHJcbiAgICAgICAgICAgIGNhc2UgT3V0Y29tZVR5cGUuRkFJTFVSRTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnQ3JhZnRpbmcgZmFpbHVyZSAnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIE91dGNvbWVUeXBlLlNVQ0NFU1M6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBTdWNjZXNzZnVsbHkgY3JhZnRlZCBcIiR7dGhpcy5fcmVjaXBlLm5hbWV9XCIuIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnWW91ciBhbGNoZW1pY2FsIGNvbWJpbmF0aW9uIHdvcmtlZC4gJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBPdXRjb21lVHlwZS5GQUlMVVJFOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlY2lwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGNyYWZ0ICR7dGhpcy5fcmVjaXBlLm5hbWV9LiBgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1lvdXIgYWxjaGVtaWNhbCBjb21iaW5hdGlvbiBmYWlsZWQgdG8gcHJvZHVjZSBhbnkgcmVzdWx0cy4gJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhaWx1cmVEZXRhaWxzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhaWx1cmVEZXRhaWxzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3Rpb25zKCk6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlbW92ZWRDb21wb25lbnRzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9ucy5maWx0ZXIoKGFjdGlvbjogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPikgPT4gYWN0aW9uLmFjdGlvblR5cGUgPT09IEFjdGlvblR5cGUuUkVNT1ZFKVxyXG4gICAgICAgICAgICAubWFwKChhY3Rpb246IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT4pID0+IGAke2FjdGlvbi5xdWFudGl0eX0gJHthY3Rpb24uaXRlbVR5cGUubmFtZX1gICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFkZGVkSXRlbXMoKTogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9ucy5maWx0ZXIoKGFjdGlvbjogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPikgPT4gYWN0aW9uLmFjdGlvblR5cGUgPT09IEFjdGlvblR5cGUuQUREKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBGYWJyaWNhdGlvbk91dGNvbWUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHR5cGU6IE91dGNvbWVUeXBlO1xyXG4gICAgICAgIHB1YmxpYyByZWNpcGU6IFJlY2lwZTtcclxuICAgICAgICBwdWJsaWMgYWN0aW9uczogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPltdO1xyXG4gICAgICAgIHB1YmxpYyBmYWlsdXJlRGV0YWlsczogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRmFicmljYXRpb25PdXRjb21lIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWJyaWNhdGlvbk91dGNvbWUodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aE91dGNvbWVUeXBlKHZhbHVlOiBPdXRjb21lVHlwZSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFJlY2lwZSh2YWx1ZTogUmVjaXBlKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjaXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhBY3Rpb25zKHZhbHVlOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWlsdXJlRGV0YWlscyh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZURldGFpbHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbk91dGNvbWUsIE91dGNvbWVUeXBlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationOutcome.ts\n");

/***/ }),

/***/ "./src/scripts/core/Fabricator.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Fabricator.ts ***!
  \****************************************/
/*! exports provided: Fabricator, AlchemySpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fabricator\", function() { return Fabricator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemySpecification\", function() { return AlchemySpecification; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n/* harmony import */ var _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _error_AlchemyError__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../error/AlchemyError */ \"./src/scripts/error/AlchemyError.ts\");\n/* harmony import */ var _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error/CraftingError */ \"./src/scripts/error/CraftingError.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar EssenceMatchType;\r\n(function (EssenceMatchType) {\r\n    EssenceMatchType[\"EXACT\"] = \"EXACT\";\r\n    EssenceMatchType[\"SUPERSET\"] = \"SUPERSET\";\r\n    EssenceMatchType[\"NONE\"] = \"NONE\";\r\n})(EssenceMatchType || (EssenceMatchType = {}));\r\nclass CraftingComponentCombination {\r\n    constructor(components, essenceIdentities) {\r\n        this._essenceIdentities = new Map();\r\n        this._components = [];\r\n        this._components = components;\r\n        this._essenceIdentities = essenceIdentities;\r\n        this._combinationIdentity = components.map((component) => _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, essenceIdentities))\r\n            .reduce((left, right) => left * right, 1);\r\n    }\r\n    get components() {\r\n        return this._components;\r\n    }\r\n    get combinationIdentity() {\r\n        return this._combinationIdentity;\r\n    }\r\n    essenceMatchType(requiredEssences) {\r\n        const requiredEssenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(requiredEssences, this._essenceIdentities);\r\n        if (requiredEssenceCombinationIdentity === this._combinationIdentity) {\r\n            return EssenceMatchType.EXACT;\r\n        }\r\n        if (requiredEssenceCombinationIdentity > this._combinationIdentity) {\r\n            return EssenceMatchType.NONE;\r\n        }\r\n        const testResult = this._combinationIdentity % requiredEssenceCombinationIdentity;\r\n        if (testResult === 0) {\r\n            return EssenceMatchType.SUPERSET;\r\n        }\r\n        return EssenceMatchType.NONE;\r\n    }\r\n}\r\nclass AlchemySpecification {\r\n    constructor(essenceCombiner, baseComponent) {\r\n        if (!essenceCombiner || !baseComponent) {\r\n            throw new Error('Alchemy Specifications require an Essence Combiner and a Base Crafting Component. ');\r\n        }\r\n        this._essenceCombiner = essenceCombiner;\r\n        this._baseComponent = baseComponent;\r\n    }\r\n    get essenceCombiner() {\r\n        return this._essenceCombiner;\r\n    }\r\n    get baseComponent() {\r\n        return this._baseComponent;\r\n    }\r\n    getBaseItemData() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._baseItemData) {\r\n                return this._baseItemData;\r\n            }\r\n            const compendium = game.packs.get(this.baseComponent.systemId);\r\n            // @ts-ignore\r\n            const entity = yield compendium.getEntity(this.baseComponent.partId);\r\n            this._baseItemData = entity.data.data;\r\n            return this._baseItemData;\r\n        });\r\n    }\r\n}\r\nclass Fabricator {\r\n    constructor(builder) {\r\n        this._alchemySpecification = builder.alchemySpecification;\r\n        this._craftingCheck = builder.craftingCheck;\r\n    }\r\n    static builder() {\r\n        return new Fabricator.Builder();\r\n    }\r\n    get alchemySpecification() {\r\n        return this._alchemySpecification;\r\n    }\r\n    get craftingCheck() {\r\n        return this._craftingCheck;\r\n    }\r\n    fabricateFromComponents(actor, inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._alchemySpecification) {\r\n                throw new Error(`No Alchemy Specification has been provided for this system. You may only craft from Recipes. `);\r\n            }\r\n            if (this._craftingCheck) {\r\n                const craftingCheckResult = this.craftingCheck.perform(actor, components);\r\n                switch (craftingCheckResult.outcome) {\r\n                    case _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS:\r\n                        break;\r\n                    case _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].FAILURE:\r\n                        return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                            .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].FAILURE)\r\n                            .withFailureDetails(`Rolled a ${craftingCheckResult.result}, needed a ${craftingCheckResult.successThreshold}`)\r\n                            .withActions([])\r\n                            .build();\r\n                }\r\n            }\r\n            const removeSuppliedComponents = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(components, _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"ActionType\"].REMOVE);\r\n            try {\r\n                const baseItemData = yield this._alchemySpecification.getBaseItemData();\r\n                const alchemicallyModifiedItemData = this._alchemySpecification.essenceCombiner.combine(components, duplicate(baseItemData));\r\n                const resultantComponentType = this._alchemySpecification.baseComponent;\r\n                const addComponent = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                    .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"ActionType\"].ADD)\r\n                    .withQuantity(1)\r\n                    .withCustomItemData(alchemicallyModifiedItemData)\r\n                    .withItemType(resultantComponentType)\r\n                    .build();\r\n                const actions = removeSuppliedComponents.concat(addComponent);\r\n                yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(actions, inventory);\r\n                return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                    .withActions(actions)\r\n                    .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS)\r\n                    .build();\r\n            }\r\n            catch (error) {\r\n                if (error instanceof _error_AlchemyError__WEBPACK_IMPORTED_MODULE_4__[\"AlchemyError\"]) {\r\n                    const alchemyError = error;\r\n                    const actions = [];\r\n                    if (alchemyError.componentsConsumed) {\r\n                        // @ts-ignore\r\n                        actions.push(...removeSuppliedComponents);\r\n                        yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(removeSuppliedComponents, inventory);\r\n                    }\r\n                    return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                        .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].FAILURE)\r\n                        .withFailureDetails(alchemyError.message)\r\n                        .withActions(actions)\r\n                        .build();\r\n                }\r\n                throw error;\r\n            }\r\n        });\r\n    }\r\n    // todo - add actor as arg and crafting check\r\n    fabricateFromRecipe(inventory, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ownedComponents = inventory.components.filter((record) => record.fabricateItem.systemId === recipe.systemId);\r\n            const input = [];\r\n            const namedIngredientsByPartId = new Map();\r\n            if (recipe.ingredients && recipe.ingredients.length > 0) {\r\n                recipe.ingredients.forEach((ingredient) => {\r\n                    namedIngredientsByPartId.set(ingredient.partId, ingredient);\r\n                    if (ingredient.consumed) {\r\n                        input.push(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                            .withQuantity(ingredient.quantity)\r\n                            .withItemType(ingredient.component)\r\n                            .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"ActionType\"].REMOVE)\r\n                            .build());\r\n                    }\r\n                });\r\n            }\r\n            if (recipe.essences && recipe.essences.length > 0) {\r\n                const availableIngredients = ownedComponents.map((componentRecord) => {\r\n                    if (namedIngredientsByPartId.has(componentRecord.fabricateItem.partId)) {\r\n                        const namedIngredient = namedIngredientsByPartId.get(componentRecord.fabricateItem.partId);\r\n                        const availableQuantityForEssenceExtraction = componentRecord.totalQuantity > namedIngredient.quantity ? componentRecord.totalQuantity - namedIngredient.quantity : 0;\r\n                        return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                            .isConsumed(namedIngredient.consumed)\r\n                            .withComponent(componentRecord.fabricateItem)\r\n                            .withQuantity(availableQuantityForEssenceExtraction)\r\n                            .build();\r\n                    }\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                        .isConsumed(true)\r\n                        .withComponent(componentRecord.fabricateItem)\r\n                        .withQuantity(componentRecord.totalQuantity)\r\n                        .build();\r\n                });\r\n                if (!this.isCraftableFromEssencesInIngredients(recipe, availableIngredients)) {\r\n                    throw new _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__[\"CraftingError\"](`You don't have enough ingredients available to craft ${recipe.name}. Go shopping, try foraging or even just asking your GM nicely. `, false);\r\n                }\r\n                const craftingComponentCombinations = this.analyzeCombinationsForEssences(availableIngredients, recipe.essences);\r\n                const selectedCombination = this.selectBestCombinationFrom(recipe, craftingComponentCombinations);\r\n                if (!selectedCombination || selectedCombination.length === 0) {\r\n                    throw new _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__[\"CraftingError\"](`You don't have enough ingredients available to craft ${recipe.name}. Go shopping, try foraging or even just asking your GM nicely. `, false);\r\n                }\r\n                const consumedComponents = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(selectedCombination, _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"ActionType\"].REMOVE);\r\n                // @ts-ignore\r\n                input.push(...consumedComponents);\r\n            }\r\n            const output = recipe.results;\r\n            const actions = output.concat(input);\r\n            yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(actions, inventory);\r\n            return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                .withRecipe(recipe)\r\n                .withActions(actions)\r\n                .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS)\r\n                .build();\r\n        });\r\n    }\r\n    analyzeCombinationsForEssences(availableIngredients, requiredEssences) {\r\n        const usableIngredients = availableIngredients.filter((ingredient) => ingredient.component.essences.filter((essence) => requiredEssences.includes(essence)).length > 0);\r\n        const uniqueEssencesInUsableComponents = usableIngredients.map((ingredient) => ingredient.component.essences)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        const essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssencesInUsableComponents);\r\n        return _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asComponentCombinations(usableIngredients, requiredEssences.length)\r\n            .map((combination) => {\r\n            return new CraftingComponentCombination(combination, essenceIdentities);\r\n        });\r\n    }\r\n    selectBestCombinationFrom(recipe, combinations) {\r\n        const exactMatches = [];\r\n        const supersets = [];\r\n        combinations.forEach((combination) => {\r\n            const essenceMatchType = combination.essenceMatchType(recipe.essences);\r\n            switch (essenceMatchType) {\r\n                case EssenceMatchType.EXACT:\r\n                    exactMatches.push(combination);\r\n                    break;\r\n                case EssenceMatchType.SUPERSET:\r\n                    supersets.push(combination);\r\n                    break;\r\n            }\r\n        });\r\n        const selectFewestComponents = (combinations) => {\r\n            return combinations.sort((left, right) => left.components.length - right.components.length)\r\n                .find(() => true)\r\n                .components;\r\n        };\r\n        if (exactMatches.length === 0 && supersets.length === 0) {\r\n            return [];\r\n        }\r\n        return exactMatches.length > 0 ? selectFewestComponents(exactMatches) : selectFewestComponents(supersets);\r\n    }\r\n    filterCraftableRecipesFor(craftingComponents, recipes) {\r\n        return recipes.filter((recipe) => this.isCraftableFromEssencesInComponents(recipe, craftingComponents));\r\n    }\r\n    isCraftableFromEssencesInComponents(recipe, components) {\r\n        const essences = components.map((component) => component.essences)\r\n            .reduce((left, right) => left.concat(right), []);\r\n        return essences.every((essence) => recipe.essences.includes(essence)\r\n            && (essences.filter((essence) => essence === essence).length >= recipe.essences.filter((essence) => essence === essence).length));\r\n    }\r\n    isCraftableFromEssencesInIngredients(recipe, ingredients) {\r\n        const essenceCount = ingredients.filter((ingredient) => ingredient.component.essences.some((essence) => recipe.essences.includes(essence)))\r\n            .map((ingredient) => new Map(ingredient.component.essences.map((essence) => [essence, ingredient.quantity])))\r\n            .reduce((left, right) => {\r\n            const allEssenceKeys = Array.from(left.keys()).concat(Array.from(right.keys()))\r\n                .filter(((essence, index, mergedKeys) => mergedKeys.indexOf(essence) === index));\r\n            const merged = new Map();\r\n            allEssenceKeys.forEach((essence) => {\r\n                const leftCount = left.has(essence) ? left.get(essence) : 0;\r\n                const rightCount = right.has(essence) ? right.get(essence) : 0;\r\n                merged.set(essence, leftCount + rightCount);\r\n            });\r\n            return merged;\r\n        }, new Map());\r\n        for (let i = 0; i < recipe.essences.length; i++) {\r\n            const essence = recipe.essences[i];\r\n            if (!essenceCount.has(essence)) {\r\n                return false;\r\n            }\r\n            const count = essenceCount.get(essence);\r\n            if (count <= 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n(function (Fabricator) {\r\n    class Builder {\r\n        build() {\r\n            return new Fabricator(this);\r\n        }\r\n        withAlchemySpecification(value) {\r\n            this.alchemySpecification = value;\r\n            return this;\r\n        }\r\n        withCraftingCheck(value) {\r\n            this.craftingCheck = value;\r\n            return this;\r\n        }\r\n    }\r\n    Fabricator.Builder = Builder;\r\n})(Fabricator || (Fabricator = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0b3IudHM/Zjk1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3NEO0FBRUE7QUFFZTtBQUc3QjtBQUNXO0FBQ0U7QUFFSDtBQUVsRCxJQUFLLGdCQUlKO0FBSkQsV0FBSyxnQkFBZ0I7SUFDakIsbUNBQWU7SUFDZix5Q0FBcUI7SUFDckIsaUNBQWE7QUFDakIsQ0FBQyxFQUpJLGdCQUFnQixLQUFoQixnQkFBZ0IsUUFJcEI7QUFFRCxNQUFNLDRCQUE0QjtJQU05QixZQUFZLFVBQStCLEVBQUUsaUJBQXNDO1FBSmxFLHVCQUFrQixHQUF3QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ3BELGdCQUFXLEdBQXdCLEVBQUUsQ0FBQztRQUluRCxJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsaUJBQWlCLENBQUM7UUFDNUMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxvRUFBaUIsQ0FBQywwQkFBMEIsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLENBQUM7YUFDNUosTUFBTSxDQUFDLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7SUFFRCxJQUFJLG1CQUFtQjtRQUNuQixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztJQUNyQyxDQUFDO0lBRU0sZ0JBQWdCLENBQUMsZ0JBQTBCO1FBQzlDLE1BQU0sa0NBQWtDLEdBQUcsb0VBQWlCLENBQUMsMEJBQTBCLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGtC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RyxVQUFVLENBQUMsQ0FBQztZQUNoRCxDQUFDLENBQUMsQ0FBQztZQUNILE9BQU8sTUFBTSxDQUFDO1FBQ2xCLENBQUMsRUFBRSxJQUFJLEdBQUcsRUFBa0IsQ0FBQyxDQUFDO1FBQ2xDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxNQUFNLE9BQU8sR0FBVyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUM1QixPQUFPLEtBQUssQ0FBQzthQUNoQjtZQUNELE1BQU0sS0FBSyxHQUFXLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDaEQsSUFBSSxLQUFLLElBQUksQ0FBQyxFQUFFO2dCQUNaLE9BQU8sS0FBSyxDQUFDO2FBQ2hCO1NBQ0o7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBRUo7QUFFRCxXQUFVLFVBQVU7SUFFaEIsTUFBYSxPQUFPO1FBS1QsS0FBSztZQUNSLE9BQU8sSUFBSSxVQUFVLENBQU8sSUFBSSxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVNLHdCQUF3QixDQUFDLEtBQThCO1lBQzFELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUM7WUFDbEMsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGlCQUFpQixDQUFDLEtBQXVCO1lBQzVDLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1lBQzNCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7S0FFSjtJQW5CWSxrQkFBTyxVQW1CbkI7QUFFTCxDQUFDLEVBdkJTLFVBQVUsS0FBVixVQUFVLFFBdUJuQjtBQUV5QyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvRmFicmljYXRvci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi9SZWNpcGVcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4vQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0gZnJvbSBcIi4vRmFicmljYXRpb25IZWxwZXJcIjtcclxuaW1wb3J0IHtFc3NlbmNlQ29tYmluZXJ9IGZyb20gXCIuL0Vzc2VuY2VDb21iaW5lclwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uT3V0Y29tZSwgT3V0Y29tZVR5cGV9IGZyb20gXCIuL0ZhYnJpY2F0aW9uT3V0Y29tZVwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7SW52ZW50b3J5UmVjb3JkfSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlSZWNvcmRcIjtcclxuaW1wb3J0IHtJbmdyZWRpZW50fSBmcm9tIFwiLi9JbmdyZWRpZW50XCI7XHJcbmltcG9ydCB7QWxjaGVteUVycm9yfSBmcm9tIFwiLi4vZXJyb3IvQWxjaGVteUVycm9yXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdFcnJvcn0gZnJvbSBcIi4uL2Vycm9yL0NyYWZ0aW5nRXJyb3JcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NoZWNrLCBDcmFmdGluZ0NoZWNrUmVzdWx0fSBmcm9tIFwiLi9DcmFmdGluZ0NoZWNrXCI7XHJcbmltcG9ydCB7QWN0aW9uVHlwZX0gZnJvbSBcIi4uL2dhbWUvQ29tcGVuZGl1bURhdGFcIjtcclxuXHJcbmVudW0gRXNzZW5jZU1hdGNoVHlwZSB7XHJcbiAgICBFWEFDVCA9ICdFWEFDVCcsXHJcbiAgICBTVVBFUlNFVCA9ICdTVVBFUlNFVCcsXHJcbiAgICBOT05FID0gJ05PTkUnXHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tYmluYXRpb25JZGVudGl0eTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGVzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+KSB7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZUlkZW50aXRpZXMgPSBlc3NlbmNlSWRlbnRpdGllcztcclxuICAgICAgICB0aGlzLl9jb21iaW5hdGlvbklkZW50aXR5ID0gY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGNvbXBvbmVudC5lc3NlbmNlcywgZXNzZW5jZUlkZW50aXRpZXMpKVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIpID0+IGxlZnQgKiByaWdodCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudHMoKTogQ3JhZnRpbmdDb21wb25lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbWJpbmF0aW9uSWRlbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXNzZW5jZU1hdGNoVHlwZShyZXF1aXJlZEVzc2VuY2VzOiBzdHJpbmdbXSk6IEVzc2VuY2VNYXRjaFR5cGUge1xyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkgPSBGYWJyaWNhdGlvbkhlbHBlci5lc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eShyZXF1aXJlZEVzc2VuY2VzLCB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyk7XHJcbiAgICAgICAgaWYgKHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkgPT09IHRoaXMuX2NvbWJpbmF0aW9uSWRlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVzc2VuY2VNYXRjaFR5cGUuRVhBQ1Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1aXJlZEVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5ID4gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gRXNzZW5jZU1hdGNoVHlwZS5OT05FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eSAlIHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHk7XHJcbiAgICAgICAgaWYgKHRlc3RSZXN1bHQgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVzc2VuY2VNYXRjaFR5cGUuU1VQRVJTRVQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBFc3NlbmNlTWF0Y2hUeXBlLk5PTkU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBbGNoZW15U3BlY2lmaWNhdGlvbjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlQ29tYmluZXI6IEVzc2VuY2VDb21iaW5lcjxUPjtcclxuICAgIHByaXZhdGUgX2Jhc2VJdGVtRGF0YTogVDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jhc2VDb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5lcjogRXNzZW5jZUNvbWJpbmVyPFQ+LCBiYXNlQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgIGlmICghZXNzZW5jZUNvbWJpbmVyIHx8ICFiYXNlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQWxjaGVteSBTcGVjaWZpY2F0aW9ucyByZXF1aXJlIGFuIEVzc2VuY2UgQ29tYmluZXIgYW5kIGEgQmFzZSBDcmFmdGluZyBDb21wb25lbnQuICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lc3NlbmNlQ29tYmluZXIgPSBlc3NlbmNlQ29tYmluZXI7XHJcbiAgICAgICAgdGhpcy5fYmFzZUNvbXBvbmVudCA9IGJhc2VDb21wb25lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VDb21iaW5lcigpOiBFc3NlbmNlQ29tYmluZXI8VD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlQ29tYmluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJhc2VDb21wb25lbnQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9iYXNlQ29tcG9uZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEJhc2VJdGVtRGF0YSgpOiBQcm9taXNlPFQ+IHtcclxuICAgICAgICBpZiAodGhpcy5fYmFzZUl0ZW1EYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlSXRlbURhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldCh0aGlzLmJhc2VDb21wb25lbnQuc3lzdGVtSWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBlbnRpdHk6IEVudGl0eTxUPiA9IGF3YWl0IGNvbXBlbmRpdW0uZ2V0RW50aXR5KHRoaXMuYmFzZUNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIHRoaXMuX2Jhc2VJdGVtRGF0YSA9IGVudGl0eS5kYXRhLmRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VJdGVtRGF0YTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRmFicmljYXRvcjxJIGV4dGVuZHMgSXRlbS5EYXRhLCBBIGV4dGVuZHMgQWN0b3I+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FsY2hlbXlTcGVjaWZpY2F0aW9uOiBBbGNoZW15U3BlY2lmaWNhdGlvbjxJPjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NyYWZ0aW5nQ2hlY2s6IENyYWZ0aW5nQ2hlY2s8QT47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogRmFicmljYXRvci5CdWlsZGVyPEksIEE+KSB7XHJcbiAgICAgICAgdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24gPSBidWlsZGVyLmFsY2hlbXlTcGVjaWZpY2F0aW9uO1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nQ2hlY2sgPSBidWlsZGVyLmNyYWZ0aW5nQ2hlY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyPEkgZXh0ZW5kcyBJdGVtLkRhdGEsIEEgZXh0ZW5kcyBBY3Rvcj4oKTogRmFicmljYXRvci5CdWlsZGVyPEksIEE+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEZhYnJpY2F0b3IuQnVpbGRlcjxJLCBBPigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbGNoZW15U3BlY2lmaWNhdGlvbigpOiBBbGNoZW15U3BlY2lmaWNhdGlvbjxJPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjcmFmdGluZ0NoZWNrKCk6IENyYWZ0aW5nQ2hlY2s8QT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmFmdGluZ0NoZWNrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBmYWJyaWNhdGVGcm9tQ29tcG9uZW50cyhhY3RvcjogQWN0b3I8QT4sIGludmVudG9yeTogSW52ZW50b3J5PEk+LCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogUHJvbWlzZTxGYWJyaWNhdGlvbk91dGNvbWU+IHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gQWxjaGVteSBTcGVjaWZpY2F0aW9uIGhhcyBiZWVuIHByb3ZpZGVkIGZvciB0aGlzIHN5c3RlbS4gWW91IG1heSBvbmx5IGNyYWZ0IGZyb20gUmVjaXBlcy4gYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3JhZnRpbmdDaGVjaykge1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NoZWNrUmVzdWx0OiBDcmFmdGluZ0NoZWNrUmVzdWx0ID0gdGhpcy5jcmFmdGluZ0NoZWNrLnBlcmZvcm0oYWN0b3IsIGNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNyYWZ0aW5nQ2hlY2tSZXN1bHQub3V0Y29tZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBPdXRjb21lVHlwZS5TVUNDRVNTOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgT3V0Y29tZVR5cGUuRkFJTFVSRTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25PdXRjb21lLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aE91dGNvbWVUeXBlKE91dGNvbWVUeXBlLkZBSUxVUkUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoRmFpbHVyZURldGFpbHMoYFJvbGxlZCBhICR7Y3JhZnRpbmdDaGVja1Jlc3VsdC5yZXN1bHR9LCBuZWVkZWQgYSAke2NyYWZ0aW5nQ2hlY2tSZXN1bHQuc3VjY2Vzc1RocmVzaG9sZH1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aEFjdGlvbnMoW10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZW1vdmVTdXBwbGllZENvbXBvbmVudHM6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSA9IEZhYnJpY2F0aW9uSGVscGVyLmFzQ3JhZnRpbmdSZXN1bHRzKGNvbXBvbmVudHMsIEFjdGlvblR5cGUuUkVNT1ZFKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYmFzZUl0ZW1EYXRhOiBJID0gYXdhaXQgdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24uZ2V0QmFzZUl0ZW1EYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsY2hlbWljYWxseU1vZGlmaWVkSXRlbURhdGE6IEkgPSB0aGlzLl9hbGNoZW15U3BlY2lmaWNhdGlvbi5lc3NlbmNlQ29tYmluZXIuY29tYmluZShjb21wb25lbnRzLCBkdXBsaWNhdGUoYmFzZUl0ZW1EYXRhKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFudENvbXBvbmVudFR5cGU6IENyYWZ0aW5nQ29tcG9uZW50ID0gdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24uYmFzZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgY29uc3QgYWRkQ29tcG9uZW50OiBGYWJyaWNhdGlvbkFjdGlvbjxJPiA9IEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXI8ST4oKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEFjdGlvblR5cGUuQUREKVxyXG4gICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eSgxKVxyXG4gICAgICAgICAgICAgICAgLndpdGhDdXN0b21JdGVtRGF0YShhbGNoZW1pY2FsbHlNb2RpZmllZEl0ZW1EYXRhKVxyXG4gICAgICAgICAgICAgICAgLndpdGhJdGVtVHlwZShyZXN1bHRhbnRDb21wb25lbnRUeXBlKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSA9IHJlbW92ZVN1cHBsaWVkQ29tcG9uZW50cy5jb25jYXQoYWRkQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgYXdhaXQgRmFicmljYXRpb25IZWxwZXIuYXBwbHlSZXN1bHRzKGFjdGlvbnMsIGludmVudG9yeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWJyaWNhdGlvbk91dGNvbWUuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdGlvbnMoYWN0aW9ucylcclxuICAgICAgICAgICAgICAgIC53aXRoT3V0Y29tZVR5cGUoT3V0Y29tZVR5cGUuU1VDQ0VTUylcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQWxjaGVteUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbGNoZW15RXJyb3I6IEFsY2hlbXlFcnJvciA9IDxBbGNoZW15RXJyb3I+ZXJyb3I7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zOiBGYWJyaWNhdGlvbkFjdGlvbjxJPltdID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxjaGVteUVycm9yLmNvbXBvbmVudHNDb25zdW1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLnB1c2goLi4ucmVtb3ZlU3VwcGxpZWRDb21wb25lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBGYWJyaWNhdGlvbkhlbHBlci5hcHBseVJlc3VsdHMocmVtb3ZlU3VwcGxpZWRDb21wb25lbnRzLCBpbnZlbnRvcnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uT3V0Y29tZS5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAud2l0aE91dGNvbWVUeXBlKE91dGNvbWVUeXBlLkZBSUxVUkUpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhGYWlsdXJlRGV0YWlscyhhbGNoZW15RXJyb3IubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aEFjdGlvbnMoYWN0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdG9kbyAtIGFkZCBhY3RvciBhcyBhcmcgYW5kIGNyYWZ0aW5nIGNoZWNrXHJcbiAgICBwdWJsaWMgYXN5bmMgZmFicmljYXRlRnJvbVJlY2lwZShpbnZlbnRvcnk6IEludmVudG9yeTxJPiwgcmVjaXBlOiBSZWNpcGUpOiBQcm9taXNlPEZhYnJpY2F0aW9uT3V0Y29tZT4ge1xyXG4gICAgICAgIGNvbnN0IG93bmVkQ29tcG9uZW50czogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50LCBJdGVtPltdID0gaW52ZW50b3J5LmNvbXBvbmVudHMuZmlsdGVyKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudCwgSXRlbT4pID0+IHJlY29yZC5mYWJyaWNhdGVJdGVtLnN5c3RlbUlkID09PSByZWNpcGUuc3lzdGVtSWQpO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dDogRmFicmljYXRpb25BY3Rpb248ST5bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG5hbWVkSW5ncmVkaWVudHNCeVBhcnRJZDogTWFwPHN0cmluZywgSW5ncmVkaWVudD4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgaWYgKHJlY2lwZS5pbmdyZWRpZW50cyAmJiByZWNpcGUuaW5ncmVkaWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZWNpcGUuaW5ncmVkaWVudHMuZm9yRWFjaCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmFtZWRJbmdyZWRpZW50c0J5UGFydElkLnNldChpbmdyZWRpZW50LnBhcnRJZCwgaW5ncmVkaWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5ncmVkaWVudC5jb25zdW1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2goRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcjxJPigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoaW5ncmVkaWVudC5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhJdGVtVHlwZShpbmdyZWRpZW50LmNvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEFjdGlvblR5cGUuUkVNT1ZFKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlY2lwZS5lc3NlbmNlcyAmJiByZWNpcGUuZXNzZW5jZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBhdmFpbGFibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdID0gb3duZWRDb21wb25lbnRzLm1hcCgoY29tcG9uZW50UmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQsIEl0ZW0+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZWRJbmdyZWRpZW50c0J5UGFydElkLmhhcyhjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbS5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZWRJbmdyZWRpZW50OiBJbmdyZWRpZW50ID0gbmFtZWRJbmdyZWRpZW50c0J5UGFydElkLmdldChjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5Rm9yRXNzZW5jZUV4dHJhY3Rpb246IG51bWJlciA9IGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5ID4gbmFtZWRJbmdyZWRpZW50LnF1YW50aXR5ID8gY29tcG9uZW50UmVjb3JkLnRvdGFsUXVhbnRpdHkgLSBuYW1lZEluZ3JlZGllbnQucXVhbnRpdHkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbmdyZWRpZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaXNDb25zdW1lZChuYW1lZEluZ3JlZGllbnQuY29uc3VtZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoQ29tcG9uZW50KGNvbXBvbmVudFJlY29yZC5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGF2YWlsYWJsZVF1YW50aXR5Rm9yRXNzZW5jZUV4dHJhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEluZ3JlZGllbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLmlzQ29uc3VtZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ3JhZnRhYmxlRnJvbUVzc2VuY2VzSW5JbmdyZWRpZW50cyhyZWNpcGUsIGF2YWlsYWJsZUluZ3JlZGllbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENyYWZ0aW5nRXJyb3IoYFlvdSBkb24ndCBoYXZlIGVub3VnaCBpbmdyZWRpZW50cyBhdmFpbGFibGUgdG8gY3JhZnQgJHtyZWNpcGUubmFtZX0uIEdvIHNob3BwaW5nLCB0cnkgZm9yYWdpbmcgb3IgZXZlbiBqdXN0IGFza2luZyB5b3VyIEdNIG5pY2VseS4gYCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25zID0gdGhpcy5hbmFseXplQ29tYmluYXRpb25zRm9yRXNzZW5jZXMoYXZhaWxhYmxlSW5ncmVkaWVudHMsIHJlY2lwZS5lc3NlbmNlcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50W10gPSB0aGlzLnNlbGVjdEJlc3RDb21iaW5hdGlvbkZyb20ocmVjaXBlLCBjcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDb21iaW5hdGlvbiB8fCBzZWxlY3RlZENvbWJpbmF0aW9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENyYWZ0aW5nRXJyb3IoYFlvdSBkb24ndCBoYXZlIGVub3VnaCBpbmdyZWRpZW50cyBhdmFpbGFibGUgdG8gY3JhZnQgJHtyZWNpcGUubmFtZX0uIEdvIHNob3BwaW5nLCB0cnkgZm9yYWdpbmcgb3IgZXZlbiBqdXN0IGFza2luZyB5b3VyIEdNIG5pY2VseS4gYCwgZmFsc2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29uc3VtZWRDb21wb25lbnRzID0gRmFicmljYXRpb25IZWxwZXIuYXNDcmFmdGluZ1Jlc3VsdHMoc2VsZWN0ZWRDb21iaW5hdGlvbiwgQWN0aW9uVHlwZS5SRU1PVkUpO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGlucHV0LnB1c2goLi4uY29uc3VtZWRDb21wb25lbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG91dHB1dDogRmFicmljYXRpb25BY3Rpb248ST5bXSA9IHJlY2lwZS5yZXN1bHRzO1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uPEk+W10gPSBvdXRwdXQuY29uY2F0KGlucHV0KTtcclxuXHJcbiAgICAgICAgYXdhaXQgRmFicmljYXRpb25IZWxwZXIuYXBwbHlSZXN1bHRzKGFjdGlvbnMsIGludmVudG9yeSk7XHJcbiAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uT3V0Y29tZS5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhSZWNpcGUocmVjaXBlKVxyXG4gICAgICAgICAgICAud2l0aEFjdGlvbnMoYWN0aW9ucylcclxuICAgICAgICAgICAgLndpdGhPdXRjb21lVHlwZShPdXRjb21lVHlwZS5TVUNDRVNTKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFuYWx5emVDb21iaW5hdGlvbnNGb3JFc3NlbmNlcyhhdmFpbGFibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdLCByZXF1aXJlZEVzc2VuY2VzOiBzdHJpbmdbXSk6IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25bXSB7XHJcbiAgICAgICAgY29uc3QgdXNhYmxlSW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSA9IGF2YWlsYWJsZUluZ3JlZGllbnRzLmZpbHRlcigoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4gaW5ncmVkaWVudC5jb21wb25lbnQuZXNzZW5jZXMuZmlsdGVyKChlc3NlbmNlOiBzdHJpbmcpID0+IHJlcXVpcmVkRXNzZW5jZXMuaW5jbHVkZXMoZXNzZW5jZSkpLmxlbmd0aCA+IDApO1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUVzc2VuY2VzSW5Vc2FibGVDb21wb25lbnRzOiBzdHJpbmdbXSA9IHVzYWJsZUluZ3JlZGllbnRzLm1hcCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4gaW5ncmVkaWVudC5jb21wb25lbnQuZXNzZW5jZXMpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IHN0cmluZ1tdLHJpZ2h0OnN0cmluZ1tdKSA9PiBsZWZ0LmNvbmNhdChyaWdodCksIFtdKVxyXG4gICAgICAgICAgICAuZmlsdGVyKCgoZXNzZW5jZSwgaW5kZXgsIGVzc2VuY2VzKSA9PiBlc3NlbmNlcy5pbmRleE9mKGVzc2VuY2UpID09PSBpbmRleCkpO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gRmFicmljYXRpb25IZWxwZXIuYXNzaWduRXNzZW5jZUlkZW50aXRpZXModW5pcXVlRXNzZW5jZXNJblVzYWJsZUNvbXBvbmVudHMpO1xyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkhlbHBlci5hc0NvbXBvbmVudENvbWJpbmF0aW9ucyh1c2FibGVJbmdyZWRpZW50cywgcmVxdWlyZWRFc3NlbmNlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIC5tYXAoKGNvbWJpbmF0aW9uOiBDcmFmdGluZ0NvbXBvbmVudFtdKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbihjb21iaW5hdGlvbiwgZXNzZW5jZUlkZW50aXRpZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0QmVzdENvbWJpbmF0aW9uRnJvbShyZWNpcGU6IFJlY2lwZSwgY29tYmluYXRpb25zOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uW10pOiBDcmFmdGluZ0NvbXBvbmVudFtdIHtcclxuICAgICAgICBjb25zdCBleGFjdE1hdGNoZXM6IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHN1cGVyc2V0czogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdID0gW107XHJcbiAgICAgICAgY29tYmluYXRpb25zLmZvckVhY2goKGNvbWJpbmF0aW9uOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VNYXRjaFR5cGU6IEVzc2VuY2VNYXRjaFR5cGUgPSBjb21iaW5hdGlvbi5lc3NlbmNlTWF0Y2hUeXBlKHJlY2lwZS5lc3NlbmNlcyk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXNzZW5jZU1hdGNoVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFc3NlbmNlTWF0Y2hUeXBlLkVYQUNUOlxyXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0TWF0Y2hlcy5wdXNoKGNvbWJpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRXNzZW5jZU1hdGNoVHlwZS5TVVBFUlNFVDpcclxuICAgICAgICAgICAgICAgICAgICBzdXBlcnNldHMucHVzaChjb21iaW5hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzZWxlY3RGZXdlc3RDb21wb25lbnRzID0gKGNvbWJpbmF0aW9uczogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21iaW5hdGlvbnMuc29ydCgobGVmdCwgcmlnaHQpID0+IGxlZnQuY29tcG9uZW50cy5sZW5ndGggLSByaWdodC5jb21wb25lbnRzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIC5maW5kKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY29tcG9uZW50cztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChleGFjdE1hdGNoZXMubGVuZ3RoID09PSAwICYmIHN1cGVyc2V0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXhhY3RNYXRjaGVzLmxlbmd0aCA+IDAgPyBzZWxlY3RGZXdlc3RDb21wb25lbnRzKGV4YWN0TWF0Y2hlcykgOiBzZWxlY3RGZXdlc3RDb21wb25lbnRzKHN1cGVyc2V0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZpbHRlckNyYWZ0YWJsZVJlY2lwZXNGb3IoY3JhZnRpbmdDb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdLCByZWNpcGVzOiBSZWNpcGVbXSkge1xyXG4gICAgICAgIHJldHVybiByZWNpcGVzLmZpbHRlcigocmVjaXBlOiBSZWNpcGUpID0+IHRoaXMuaXNDcmFmdGFibGVGcm9tRXNzZW5jZXNJbkNvbXBvbmVudHMocmVjaXBlLCBjcmFmdGluZ0NvbXBvbmVudHMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQ3JhZnRhYmxlRnJvbUVzc2VuY2VzSW5Db21wb25lbnRzKHJlY2lwZTogUmVjaXBlLCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZXMgPSBjb21wb25lbnRzLm1hcCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4gY29tcG9uZW50LmVzc2VuY2VzKVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBzdHJpbmdbXSwgcmlnaHQ6IHN0cmluZ1tdKSA9PiBsZWZ0LmNvbmNhdChyaWdodCksIFtdKTtcclxuICAgICAgICByZXR1cm4gZXNzZW5jZXMuZXZlcnkoKGVzc2VuY2U6IHN0cmluZykgPT4gcmVjaXBlLmVzc2VuY2VzLmluY2x1ZGVzKGVzc2VuY2UpXHJcbiAgICAgICAgICAgICYmICAoZXNzZW5jZXMuZmlsdGVyKChlc3NlbmNlOnN0cmluZykgPT4gZXNzZW5jZSA9PT0gZXNzZW5jZSkubGVuZ3RoID49IHJlY2lwZS5lc3NlbmNlcy5maWx0ZXIoKGVzc2VuY2U6c3RyaW5nKSA9PiBlc3NlbmNlID09PSBlc3NlbmNlKS5sZW5ndGgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQ3JhZnRhYmxlRnJvbUVzc2VuY2VzSW5JbmdyZWRpZW50cyhyZWNpcGU6IFJlY2lwZSwgaW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VDb3VudDogTWFwPHN0cmluZywgbnVtYmVyPiA9IGluZ3JlZGllbnRzLmZpbHRlcigoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4gaW5ncmVkaWVudC5jb21wb25lbnQuZXNzZW5jZXMuc29tZSgoZXNzZW5jZTogc3RyaW5nKSA9PiByZWNpcGUuZXNzZW5jZXMuaW5jbHVkZXMoZXNzZW5jZSkpKVxyXG4gICAgICAgICAgICAubWFwKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBuZXcgTWFwKGluZ3JlZGllbnQuY29tcG9uZW50LmVzc2VuY2VzLm1hcCgoZXNzZW5jZTogc3RyaW5nKSA9PiBbZXNzZW5jZSwgaW5ncmVkaWVudC5xdWFudGl0eV0pKSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogTWFwPHN0cmluZywgbnVtYmVyPiwgcmlnaHQ6IE1hcDxzdHJpbmcsIG51bWJlcj4pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbEVzc2VuY2VLZXlzOiBzdHJpbmdbXSA9IEFycmF5LmZyb20obGVmdC5rZXlzKCkpLmNvbmNhdChBcnJheS5mcm9tKHJpZ2h0LmtleXMoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoKGVzc2VuY2U6IHN0cmluZywgaW5kZXg6IG51bWJlciwgbWVyZ2VkS2V5czogc3RyaW5nW10pID0+IG1lcmdlZEtleXMuaW5kZXhPZihlc3NlbmNlKSA9PT0gaW5kZXgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZDogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcclxuICAgICAgICAgICAgICAgIGFsbEVzc2VuY2VLZXlzLmZvckVhY2goKGVzc2VuY2U6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRDb3VudDogbnVtYmVyID0gbGVmdC5oYXMoZXNzZW5jZSkgPyBsZWZ0LmdldChlc3NlbmNlKSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRDb3VudDogbnVtYmVyID0gcmlnaHQuaGFzKGVzc2VuY2UpID8gcmlnaHQuZ2V0KGVzc2VuY2UpIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWQuc2V0KGVzc2VuY2UsIGxlZnRDb3VudCArIHJpZ2h0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVyZ2VkO1xyXG4gICAgICAgICAgICB9LCBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY2lwZS5lc3NlbmNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlc3NlbmNlOiBzdHJpbmcgPSByZWNpcGUuZXNzZW5jZXNbaV07XHJcbiAgICAgICAgICAgIGlmICghZXNzZW5jZUNvdW50Lmhhcyhlc3NlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50OiBudW1iZXIgPSBlc3NlbmNlQ291bnQuZ2V0KGVzc2VuY2UpO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubmFtZXNwYWNlIEZhYnJpY2F0b3Ige1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyPEkgZXh0ZW5kcyBJdGVtLkRhdGEsIEEgZXh0ZW5kcyBBY3Rvcj4ge1xyXG5cclxuICAgICAgICBwdWJsaWMgYWxjaGVteVNwZWNpZmljYXRpb246IEFsY2hlbXlTcGVjaWZpY2F0aW9uPEk+O1xyXG4gICAgICAgIHB1YmxpYyBjcmFmdGluZ0NoZWNrOiBDcmFmdGluZ0NoZWNrPEE+O1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRmFicmljYXRvcjxJLCBBPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFicmljYXRvcjxJLCBBPih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWxjaGVteVNwZWNpZmljYXRpb24odmFsdWU6IEFsY2hlbXlTcGVjaWZpY2F0aW9uPEk+KTogQnVpbGRlcjxJLCBBPiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxjaGVteVNwZWNpZmljYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENyYWZ0aW5nQ2hlY2sodmFsdWU6IENyYWZ0aW5nQ2hlY2s8QT4pOiBCdWlsZGVyPEksIEE+IHtcclxuICAgICAgICAgICAgdGhpcy5jcmFmdGluZ0NoZWNrID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0b3IsIEFsY2hlbXlTcGVjaWZpY2F0aW9ufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/Fabricator.ts\n");

/***/ }),

/***/ "./src/scripts/core/GameSystemType.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/GameSystemType.ts ***!
  \********************************************/
/*! exports provided: GameSystemType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameSystemType\", function() { return GameSystemType; });\nvar GameSystemType;\r\n(function (GameSystemType) {\r\n    GameSystemType[\"DND5E\"] = \"dnd5e\";\r\n})(GameSystemType || (GameSystemType = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzPzdkODciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLElBQVksY0FFWDtBQUZELFdBQVksY0FBYztJQUN0QixpQ0FBZTtBQUNuQixDQUFDLEVBRlcsY0FBYyxLQUFkLGNBQWMsUUFFekIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gR2FtZVN5c3RlbVR5cGUge1xyXG4gICAgRE5ENUUgPSAnZG5kNWUnXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/GameSystemType.ts\n");

/***/ }),

/***/ "./src/scripts/core/Ingredient.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Ingredient.ts ***!
  \****************************************/
/*! exports provided: Ingredient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ingredient\", function() { return Ingredient; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass Ingredient extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.component.systemId, builder.component.partId, builder.component.imageUrl, builder.component.name);\r\n        this._component = builder.component;\r\n        this._quantity = builder.quantity;\r\n        this._consumed = builder.consumed;\r\n    }\r\n    static builder() {\r\n        return new Ingredient.Builder();\r\n    }\r\n    get component() {\r\n        return this._component;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get consumed() {\r\n        return this._consumed;\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && (this.quantity === other.quantity)\r\n            && (this.consumed === other.consumed);\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .isConsumed(flags.consumed)\r\n            .withQuantity(flags.quantity)\r\n            .withComponent(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => Ingredient.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && this.component.isValid();\r\n    }\r\n}\r\n(function (Ingredient) {\r\n    class Builder {\r\n        withComponent(value) {\r\n            this.component = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        isConsumed(value) {\r\n            this.consumed = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new Ingredient(this);\r\n        }\r\n    }\r\n    Ingredient.Builder = Builder;\r\n})(Ingredient || (Ingredient = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0luZ3JlZGllbnQudHM/N2JjNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUVSO0FBRTlDLE1BQU0sVUFBVyxTQUFRLDREQUFhO0lBS2xDLFlBQVksT0FBMkI7UUFDbkMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEgsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFpQjtRQUMzQixJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDO2VBQ2xDLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBK0IsRUFBRSxRQUFnQjtRQUNyRSxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUU7YUFDaEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDMUIsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDNUIsYUFBYSxDQUFDLG9FQUFpQixDQUFDLE9BQU8sRUFBRTthQUNyQyxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ3hCLEtBQUssRUFBRSxDQUFDO2FBQ1osS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBaUMsRUFBRSxRQUFnQjtRQUMzRSxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBRyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7ZUFDL0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0NBQ0o7QUFFRCxXQUFVLFVBQVU7SUFDaEIsTUFBYSxPQUFPO1FBS1QsYUFBYSxDQUFDLEtBQXdCO1lBQ3pDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxZQUFZLENBQUMsS0FBYTtZQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sVUFBVSxDQUFDLEtBQWM7WUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLEtBQUs7WUFDUixPQUFPLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLENBQUM7S0FDSjtJQXZCWSxrQkFBTyxVQXVCbkI7QUFDTCxDQUFDLEVBekJTLFVBQVUsS0FBVixVQUFVLFFBeUJuQjtBQUVxQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvSW5ncmVkaWVudC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRlSW5ncmVkaWVudEZsYWdzfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIEluZ3JlZGllbnQgZXh0ZW5kcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9xdWFudGl0eTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29uc3VtZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogSW5ncmVkaWVudC5CdWlsZGVyKSB7XHJcbiAgICAgICAgc3VwZXIoYnVpbGRlci5jb21wb25lbnQuc3lzdGVtSWQsIGJ1aWxkZXIuY29tcG9uZW50LnBhcnRJZCwgYnVpbGRlci5jb21wb25lbnQuaW1hZ2VVcmwsIGJ1aWxkZXIuY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudCA9IGJ1aWxkZXIuY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gYnVpbGRlci5xdWFudGl0eTtcclxuICAgICAgICB0aGlzLl9jb25zdW1lZCA9IGJ1aWxkZXIuY29uc3VtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5ncmVkaWVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudCgpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnN1bWVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25zdW1lZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiBJbmdyZWRpZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYXJlc1R5cGUob3RoZXIpXHJcbiAgICAgICAgICAgICYmICh0aGlzLnF1YW50aXR5ID09PSBvdGhlci5xdWFudGl0eSlcclxuICAgICAgICAgICAgJiYgKHRoaXMuY29uc3VtZWQgPT09IG90aGVyLmNvbnN1bWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlSW5ncmVkaWVudEZsYWdzLCBzeXN0ZW1JZDogc3RyaW5nKTogSW5ncmVkaWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC5pc0NvbnN1bWVkKGZsYWdzLmNvbnN1bWVkKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGZsYWdzLnF1YW50aXR5KVxyXG4gICAgICAgICAgICAud2l0aENvbXBvbmVudChDcmFmdGluZ0NvbXBvbmVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoc3lzdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aFBhcnRJZChmbGFncy5wYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBtYW55RnJvbUZsYWdzKGZsYWdzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSwgc3lzdGVtSWQ6IHN0cmluZyk6IEluZ3JlZGllbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGZsYWdzLm1hcCgoZmxhZ0RhdGEpID0+IEluZ3JlZGllbnQuZnJvbUZsYWdzKGZsYWdEYXRhLCBzeXN0ZW1JZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnF1YW50aXR5IT0gbnVsbCAmJiB0aGlzLnF1YW50aXR5ID4gMClcclxuICAgICAgICAmJiB0aGlzLmNvbXBvbmVudC5pc1ZhbGlkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbmdyZWRpZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgY29tcG9uZW50ITogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgcHVibGljIHF1YW50aXR5ITogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdW1lZCE6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcG9uZW50KHZhbHVlOiBDcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLnF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGlzQ29uc3VtZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zdW1lZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmdyZWRpZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgSW5ncmVkaWVudCB9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/Ingredient.ts\n");

/***/ }),

/***/ "./src/scripts/core/Recipe.ts":
/*!************************************!*\
  !*** ./src/scripts/core/Recipe.ts ***!
  \************************************/
/*! exports provided: Recipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Recipe\", function() { return Recipe; });\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\n\r\n\r\nclass Recipe extends _FabricateItem__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._ingredients = builder.ingredients;\r\n        this._essences = builder.essences;\r\n        this._results = builder.results;\r\n    }\r\n    static fromFlags(flags, name, imageUrl) {\r\n        if (flags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Recipe from ${flags.type} data. `);\r\n        }\r\n        return Recipe.builder()\r\n            .withName(name)\r\n            .withImageUrl(imageUrl)\r\n            .withPartId(flags.identity.partId)\r\n            .withEssences(flags.recipe.essences)\r\n            .withSystemId(flags.identity.systemId)\r\n            .withResults(_FabricationAction__WEBPACK_IMPORTED_MODULE_1__[\"FabricationAction\"].manyFromFlags(flags.recipe.results, flags.identity.systemId))\r\n            .withIngredients(_Ingredient__WEBPACK_IMPORTED_MODULE_0__[\"Ingredient\"].manyFromFlags(flags.recipe.ingredients, flags.identity.systemId))\r\n            .build();\r\n    }\r\n    get ingredients() {\r\n        return this._ingredients;\r\n    }\r\n    get results() {\r\n        return this._results;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new Recipe.Builder();\r\n    }\r\n    isValid() {\r\n        const nameValid = this.name != null && this.name.length > 0;\r\n        const idValid = this.partId && this.systemId;\r\n        let ingredientsValid = true;\r\n        this.ingredients.forEach((ingredient) => {\r\n            if (!ingredient.isValid()) {\r\n                ingredientsValid = false;\r\n            }\r\n        });\r\n        let resultsValid = true;\r\n        this.results.forEach((result) => {\r\n            if (!result.isValid()) {\r\n                resultsValid = false;\r\n            }\r\n        });\r\n        const essencesValid = this.essences !== null;\r\n        const hasInputSpecified = this.essences.length > 0 || this.ingredients.length > 0;\r\n        return nameValid && idValid && ingredientsValid && resultsValid && essencesValid && hasInputSpecified;\r\n    }\r\n}\r\n(function (Recipe) {\r\n    class Builder {\r\n        constructor() {\r\n            this.ingredients = [];\r\n            this.essences = [];\r\n            this.results = [];\r\n        }\r\n        build() {\r\n            return new Recipe(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withIngredient(value) {\r\n            this.ingredients.push(value);\r\n            return this;\r\n        }\r\n        withIngredients(value) {\r\n            this.ingredients.push(...value);\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(values) {\r\n            this.essences.push(...values);\r\n            return this;\r\n        }\r\n        withResult(value) {\r\n            this.results.push(value);\r\n            return this;\r\n        }\r\n        withResults(value) {\r\n            this.results = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n    }\r\n    Recipe.Builder = Builder;\r\n})(Recipe || (Recipe = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL1JlY2lwZS50cz81N2VkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF3QztBQUNjO0FBQzRCO0FBQ3BDO0FBRTlDLE1BQU0sTUFBTyxTQUFRLDREQUFhO0lBSzlCLFlBQVksT0FBdUI7UUFDL0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUNwQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUE4QixFQUFFLElBQVksRUFBRSxRQUFnQjtRQUNsRixJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsTUFBTSxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsMkRBQTJELEtBQUssQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ25HO1FBQ0QsT0FBTyxNQUFNLENBQUMsT0FBTyxFQUFFO2FBQ2xCLFFBQVEsQ0FBQyxJQUFJLENBQUM7YUFDZCxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQzthQUNqQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7YUFDbkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2FBQ3JDLFdBQVcsQ0FBQyxvRUFBaUIsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVB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SUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUM5QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQW1DO1lBQzFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxXQUFXLENBQUMsS0FBcUM7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELFlBQVksQ0FBQyxLQUFhO1lBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQWE7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLO1lBQ25CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUs7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztLQUVKO0lBaEVZLGNBQU8sVUFnRW5CO0FBQ0wsQ0FBQyxFQW5FUyxNQUFNLEtBQU4sTUFBTSxRQW1FZjtBQUVlIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9SZWNpcGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuY2xhc3MgUmVjaXBlIGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbmdyZWRpZW50czogSW5ncmVkaWVudFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVzdWx0czogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPltdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IFJlY2lwZS5CdWlsZGVyKSB7XHJcbiAgICAgICAgc3VwZXIoYnVpbGRlci5zeXN0ZW1JZCwgYnVpbGRlci5wYXJ0SWQsIGJ1aWxkZXIuaW1hZ2VVcmwsIGJ1aWxkZXIubmFtZSk7XHJcbiAgICAgICAgdGhpcy5faW5ncmVkaWVudHMgPSBidWlsZGVyLmluZ3JlZGllbnRzO1xyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VzID0gYnVpbGRlci5lc3NlbmNlcztcclxuICAgICAgICB0aGlzLl9yZXN1bHRzID0gYnVpbGRlci5yZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUZsYWdzKGZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgbmFtZTogc3RyaW5nLCBpbWFnZVVybDogc3RyaW5nKTogUmVjaXBlIHtcclxuICAgICAgICBpZiAoZmxhZ3MudHlwZSAhPT0gRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgYXR0ZW1wdGluZyB0byBpbnN0YW50aWF0ZSBhIEZhYnJpY2F0ZSBSZWNpcGUgZnJvbSAke2ZsYWdzLnR5cGV9IGRhdGEuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmVjaXBlLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLndpdGhJbWFnZVVybChpbWFnZVVybClcclxuICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmxhZ3MuaWRlbnRpdHkucGFydElkKVxyXG4gICAgICAgICAgICAud2l0aEVzc2VuY2VzKGZsYWdzLnJlY2lwZS5lc3NlbmNlcylcclxuICAgICAgICAgICAgLndpdGhTeXN0ZW1JZChmbGFncy5pZGVudGl0eS5zeXN0ZW1JZClcclxuICAgICAgICAgICAgLndpdGhSZXN1bHRzKEZhYnJpY2F0aW9uQWN0aW9uLm1hbnlGcm9tRmxhZ3MoZmxhZ3MucmVjaXBlLnJlc3VsdHMsIGZsYWdzLmlkZW50aXR5LnN5c3RlbUlkKSlcclxuICAgICAgICAgICAgLndpdGhJbmdyZWRpZW50cyhJbmdyZWRpZW50Lm1hbnlGcm9tRmxhZ3MoZmxhZ3MucmVjaXBlLmluZ3JlZGllbnRzLCBmbGFncy5pZGVudGl0eS5zeXN0ZW1JZCkpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbmdyZWRpZW50cygpOiBJbmdyZWRpZW50W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbmdyZWRpZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVzdWx0cygpOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlc3NlbmNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlY2lwZS5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBuYW1lVmFsaWQgPSB0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMDtcclxuICAgICAgICBjb25zdCBpZFZhbGlkID0gdGhpcy5wYXJ0SWQgJiYgdGhpcy5zeXN0ZW1JZDtcclxuICAgICAgICBsZXQgaW5ncmVkaWVudHNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pbmdyZWRpZW50cy5mb3JFYWNoKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaW5ncmVkaWVudC5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIGluZ3JlZGllbnRzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCByZXN1bHRzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVzdWx0cy5mb3JFYWNoKChyZXN1bHQ6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT4pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VzVmFsaWQ6IGJvb2xlYW4gPSB0aGlzLmVzc2VuY2VzICE9PSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGhhc0lucHV0U3BlY2lmaWVkOiBib29sZWFuID0gdGhpcy5lc3NlbmNlcy5sZW5ndGggPiAwIHx8IHRoaXMuaW5ncmVkaWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICByZXR1cm4gbmFtZVZhbGlkICYmIGlkVmFsaWQgJiYgaW5ncmVkaWVudHNWYWxpZCAmJiByZXN1bHRzVmFsaWQgJiYgZXNzZW5jZXNWYWxpZCAmJiBoYXNJbnB1dFNwZWNpZmllZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBSZWNpcGUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZXNzZW5jZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgcHVibGljIHJlc3VsdHM6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyBuYW1lITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBzeXN0ZW1JZCE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFydElkITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBpbWFnZVVybDogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVjaXBlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aE5hbWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoSW5ncmVkaWVudCh2YWx1ZTogSW5ncmVkaWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbmdyZWRpZW50cyh2YWx1ZTogSW5ncmVkaWVudFtdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5ncmVkaWVudHMucHVzaCguLi52YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEVzc2VuY2UodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEVzc2VuY2VzKHZhbHVlczogc3RyaW5nW10pIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcy5wdXNoKC4uLnZhbHVlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aFJlc3VsdCh2YWx1ZTogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPikge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aFJlc3VsdHModmFsdWU6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoUGFydElkKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0SWQgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1JlY2lwZX07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/Recipe.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/AlchemicalEffect5E.ts":
/*!*************************************************!*\
  !*** ./src/scripts/dnd5e/AlchemicalEffect5E.ts ***!
  \*************************************************/
/*! exports provided: Damage5e, Condition5e, AoeExtension5e, SavingThrowModifier5e, DiceMultiplier5e */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Damage5e\", function() { return Damage5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Condition5e\", function() { return Condition5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AoeExtension5e\", function() { return AoeExtension5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SavingThrowModifier5e\", function() { return SavingThrowModifier5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DiceMultiplier5e\", function() { return DiceMultiplier5e; });\n/* harmony import */ var _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AlchemicalEffect */ \"./src/scripts/core/AlchemicalEffect.ts\");\n\r\nclass BaseAlchemicalEffect5e extends _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"BaseAlchemicalEffect\"] {\r\n    constructor(essenceCombination, description, type) {\r\n        super(essenceCombination, description, type);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e.description.value += `<p>${this.description}</p>`;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Damage5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, damage) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._damage = damage;\r\n    }\r\n    get damage() {\r\n        return this._damage;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts.push([this._damage.expression, this._damage.type]);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Condition5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass AoeExtension5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, aoeExtension) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._aoeExtension = aoeExtension;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        if (itemData5e.target.units !== this._aoeExtension.units) {\r\n            throw new Error(`You may not mix units in Alchemical Effects AoE Extensions. Found ${itemData5e.target.units}, expected ${this._aoeExtension.units}`);\r\n        }\r\n        itemData5e.target.value += this._aoeExtension.value;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass SavingThrowModifier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, savingThrowModifier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._savingThrowModifier = savingThrowModifier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.save.dc += this._savingThrowModifier;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass DiceMultiplier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, diceMultiplier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].MODIFIER);\r\n        this._diceMultiplier = diceMultiplier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts = itemData5e.damage.parts\r\n            .map((damagePart) => {\r\n            // @ts-ignore\r\n            const parsed = DiceTerm.fromExpression(damagePart[0]);\r\n            parsed.number = parsed.number * this._diceMultiplier;\r\n            return [parsed.expression, damagePart[1]];\r\n        });\r\n        return itemData5e;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9BbGNoZW1pY2FsRWZmZWN0NUUudHM/MjRkYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFvRjtBQVlwRixNQUFlLHNCQUF1QixTQUFRLDJFQUFnQztJQUUxRSxZQUFzQixrQkFBNEIsRUFBRSxXQUFtQixFQUFFLElBQTBCO1FBQy9GLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxNQUFNLElBQUksQ0FBQyxXQUFXLE1BQU0sQ0FBQztRQUM3RCxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBQ0o7QUFFRCxNQUFNLFFBQVMsU0FBUSxzQkFBc0I7SUFHekMsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLE1BQWM7UUFDekUsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxPQUFPLENBQUMsVUFBc0I7UUFDMUIsVUFBVSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdkMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzNFLE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0sV0FBWSxTQUFRLHNCQUFzQjtJQUU1QyxZQUFZLGtCQUE0QixFQUFFLFdBQW1CO1FBQ3pELEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFRCxNQUFNLGNBQWUsU0FBUSxzQkFBc0I7SUFHL0MsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLFlBQTBCO1FBQ3JGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7SUFDdEMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFO1lBQ3RELE1BQU0sSUFBSSxLQUFLLENBQUMscUVBQXFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUN6SjtRQUNELFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1FBQ3BELE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0scUJBQXNCLFNBQVEsc0JBQXNCO0lBR3RELFlBQVksa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxtQkFBMkI7UUFDdEYsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFDaEQsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBRUQsTUFBTSxnQkFBaUIsU0FBUSxzQkFBc0I7SUFHakQsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLGNBQXNCO1FBQ2pGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLENBQUM7SUFDMUMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDNUMsR0FBRyxDQUFDLENBQUMsVUFBa0MsRUFBRSxFQUFFO1lBQ3hDLGFBQWE7WUFDYixNQUFNLE1BQU0sR0FBYSxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQ3JELE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBSXNGIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZG5kNWUvQWxjaGVtaWNhbEVmZmVjdDVFLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBbGNoZW1pY2FsRWZmZWN0VHlwZSwgQmFzZUFsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuLi9jb3JlL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuXHJcbmludGVyZmFjZSBBb2VFeHRlbnNpb24ge1xyXG4gICAgdW5pdHM6IFRhcmdldFVuaXRUeXBlNWU7XHJcbiAgICB2YWx1ZTogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRGFtYWdlIHtcclxuICAgIGV4cHJlc3Npb246IHN0cmluZztcclxuICAgIHR5cGU6IERhbWFnZVR5cGU1ZTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0PEl0ZW1EYXRhNWU+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgdHlwZTogQWxjaGVtaWNhbEVmZmVjdFR5cGUpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlLmRlc2NyaXB0aW9uLnZhbHVlICs9IGA8cD4ke3RoaXMuZGVzY3JpcHRpb259PC9wPmA7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERhbWFnZTVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kYW1hZ2U6IERhbWFnZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkYW1hZ2U6IERhbWFnZSkge1xyXG4gICAgICAgIHN1cGVyKGVzc2VuY2VDb21iaW5hdGlvbiwgZGVzY3JpcHRpb24sIEFsY2hlbWljYWxFZmZlY3RUeXBlLkJBU0lDKTtcclxuICAgICAgICB0aGlzLl9kYW1hZ2UgPSBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRhbWFnZSgpOiBEYW1hZ2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5kYW1hZ2UucGFydHMucHVzaChbdGhpcy5fZGFtYWdlLmV4cHJlc3Npb24sIHRoaXMuX2RhbWFnZS50eXBlXSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb25kaXRpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBb2VFeHRlbnNpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb24pIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fYW9lRXh0ZW5zaW9uID0gYW9lRXh0ZW5zaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5VG8oaXRlbURhdGE1ZTogSXRlbURhdGE1ZSk6IEl0ZW1EYXRhNWUge1xyXG4gICAgICAgIGl0ZW1EYXRhNWUgPSBzdXBlci5hcHBseVRvKGl0ZW1EYXRhNWUpO1xyXG4gICAgICAgIGlmIChpdGVtRGF0YTVlLnRhcmdldC51bml0cyAhPT0gdGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG1heSBub3QgbWl4IHVuaXRzIGluIEFsY2hlbWljYWwgRWZmZWN0cyBBb0UgRXh0ZW5zaW9ucy4gRm91bmQgJHtpdGVtRGF0YTVlLnRhcmdldC51bml0c30sIGV4cGVjdGVkICR7dGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpdGVtRGF0YTVlLnRhcmdldC52YWx1ZSArPSB0aGlzLl9hb2VFeHRlbnNpb24udmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTYXZpbmdUaHJvd01vZGlmaWVyNWUgZXh0ZW5kcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDVlIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NhdmluZ1Rocm93TW9kaWZpZXI6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBzYXZpbmdUaHJvd01vZGlmaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fc2F2aW5nVGhyb3dNb2RpZmllciA9IHNhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5zYXZlLmRjICs9IHRoaXMuX3NhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBEaWNlTXVsdGlwbGllcjVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kaWNlTXVsdGlwbGllcjogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRpY2VNdWx0aXBsaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5NT0RJRklFUik7XHJcbiAgICAgICAgdGhpcy5fZGljZU11bHRpcGxpZXIgPSBkaWNlTXVsdGlwbGllcjtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlID0gc3VwZXIuYXBwbHlUbyhpdGVtRGF0YTVlKTtcclxuICAgICAgICBpdGVtRGF0YTVlLmRhbWFnZS5wYXJ0cyA9IGl0ZW1EYXRhNWUuZGFtYWdlLnBhcnRzXHJcbiAgICAgICAgICAgIC5tYXAoKGRhbWFnZVBhcnQ6IFtzdHJpbmcsIERhbWFnZVR5cGU1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZDogRGljZVRlcm0gPSBEaWNlVGVybS5mcm9tRXhwcmVzc2lvbihkYW1hZ2VQYXJ0WzBdKTtcclxuICAgICAgICAgICAgICAgIHBhcnNlZC5udW1iZXIgPSBwYXJzZWQubnVtYmVyICogdGhpcy5fZGljZU11bHRpcGxpZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3BhcnNlZC5leHByZXNzaW9uLCBkYW1hZ2VQYXJ0WzFdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCB7RGFtYWdlNWUsIENvbmRpdGlvbjVlLCBBb2VFeHRlbnNpb241ZSwgU2F2aW5nVGhyb3dNb2RpZmllcjVlLCBEaWNlTXVsdGlwbGllcjVlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/AlchemicalEffect5E.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/Inventory5E.ts":
/*!******************************************!*\
  !*** ./src/scripts/dnd5e/Inventory5E.ts ***!
  \******************************************/
/*! exports provided: Inventory5E */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Inventory5E\", function() { return Inventory5E; });\n/* harmony import */ var _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CraftingInventory */ \"./src/scripts/game/CraftingInventory.ts\");\n/* harmony import */ var _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/InventoryRecord */ \"./src/scripts/game/InventoryRecord.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Inventory5E extends _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__[\"CraftingInventory\"] {\r\n    constructor(actor) {\r\n        super(actor);\r\n        this._partDirectory = new Map();\r\n        this._supportedGameSystems = [_core_GameSystemType__WEBPACK_IMPORTED_MODULE_5__[\"GameSystemType\"].DND5E];\r\n        this.index();\r\n    }\r\n    index() {\r\n        if (!this._actor) {\r\n            throw new Error(`No Actor was set for this Inventory to index`);\r\n        }\r\n        const items = Array.from(this._actor.items.values());\r\n        this._partDirectory.clear();\r\n        const candidateItems = items.filter(this.shouldIndex(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].types.allowableItems));\r\n        const uniqueComponentTypes = candidateItems.map((item) => item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId))\r\n            .filter((partId, index, partIds) => partIds.indexOf(partId) === index);\r\n        uniqueComponentTypes.forEach((partId) => {\r\n            const inventoryRecord = candidateItems.filter((candidateItem) => candidateItem.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId) === partId)\r\n                .map((item) => {\r\n                const fabricateItemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n                return _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withItem(item)\r\n                    .withActor(this.actor)\r\n                    .withTotalQuantity(item.data.data.quantity)\r\n                    .withFabricateItemType(fabricateItemType)\r\n                    .withFabricateItem(this.lookUp(item))\r\n                    .build();\r\n            })\r\n                .reduce((left, right) => left.combineWith(right));\r\n            this._partDirectory.set(partId, inventoryRecord);\r\n        });\r\n    }\r\n    shouldIndex(allowableItems) {\r\n        return (item) => {\r\n            if (allowableItems.indexOf(item.type) < 0) {\r\n                return false;\r\n            }\r\n            const type = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n            if (!type) {\r\n                return false;\r\n            }\r\n            return type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT || type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE;\r\n        };\r\n    }\r\n    add(fabricateItem, amountToAdd = 1, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (customData) {\r\n                return this.addCustomItem(fabricateItem, amountToAdd, customData);\r\n            }\r\n            if (!this._partDirectory.has(fabricateItem.partId)) {\r\n                return this.addNewRecord(fabricateItem, amountToAdd);\r\n            }\r\n            else {\r\n                const existingRecord = this._partDirectory.get(fabricateItem.partId);\r\n                return this.updateExistingRecord(fabricateItem, existingRecord, amountToAdd);\r\n            }\r\n        });\r\n    }\r\n    addNewRecord(fabricateItem, amountToAdd) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const compendium = game.packs.get(fabricateItem.systemId);\r\n            const item = yield compendium.getEntity(fabricateItem.partId);\r\n            item.data.data.quantity = amountToAdd;\r\n            const createdItemData = yield this._actor.createEmbeddedEntity('OwnedItem', item);\r\n            const createdItem = this._actor.getOwnedItem(createdItemData._id);\r\n            const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                .withActor(this._actor)\r\n                .withItem(createdItem)\r\n                .withTotalQuantity(createdItem.data.data.quantity)\r\n                .withFabricateItem(fabricateItem)\r\n                .withFabricateItemType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT) // Todo - this prevents the addNewRecord method from supporting recipes. It doesn't need to yet, but it probably should\r\n                .build();\r\n            this._partDirectory.set(fabricateItem.partId, inventoryRecord);\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(fabricateItem)\r\n                .withQuantity(amountToAdd)\r\n                .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"ActionType\"].ADD)\r\n                .build();\r\n        });\r\n    }\r\n    updateExistingRecord(fabricateItem, record, amountToAdd) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            record.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n            const itemToModify = record.itemsOfType[0];\r\n            const updatedQuantityForItem = itemToModify.data.data.quantity + amountToAdd;\r\n            // @ts-ignore\r\n            const updatedItem = yield this.actor.updateEmbeddedEntity('OwnedItem', { _id: itemToModify._id, data: { quantity: updatedQuantityForItem } });\r\n            record.totalQuantity = record.totalQuantity + amountToAdd;\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(fabricateItem)\r\n                .withQuantity(amountToAdd)\r\n                .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"ActionType\"].ADD)\r\n                .build();\r\n        });\r\n    }\r\n    addCustomItem(fabricateItem, amountToAdd, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const compendium = game.packs.get(fabricateItem.systemId);\r\n            const compendiumBaseItem = yield compendium.getEntity(fabricateItem.partId);\r\n            const baseItemData = duplicate(compendiumBaseItem.data);\r\n            mergeObject(baseItemData.data, customData);\r\n            const createdItemData = yield this._actor.createEmbeddedEntity('OwnedItem', baseItemData);\r\n            const createdItem = this._actor.getOwnedItem(createdItemData._id);\r\n            const existingRecord = this._partDirectory.get(fabricateItem.partId);\r\n            if (existingRecord) {\r\n                existingRecord.totalQuantity = existingRecord.totalQuantity + amountToAdd;\r\n                return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                    .withItemType(fabricateItem)\r\n                    .withQuantity(amountToAdd)\r\n                    .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"ActionType\"].ADD)\r\n                    .build();\r\n            }\r\n            else {\r\n                const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withActor(this._actor)\r\n                    .withItem(createdItem)\r\n                    .withTotalQuantity(createdItem.data.data.quantity)\r\n                    .withFabricateItem(_core_CraftingComponent__WEBPACK_IMPORTED_MODULE_4__[\"CraftingComponent\"].fromFlags(compendiumBaseItem.data.flags.fabricate, createdItem.data.name, createdItem.img))\r\n                    .build();\r\n                this._partDirectory.set(fabricateItem.partId, inventoryRecord);\r\n                return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                    .withItemType(fabricateItem)\r\n                    .withQuantity(amountToAdd)\r\n                    .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"ActionType\"].ADD)\r\n                    .build();\r\n            }\r\n        });\r\n    }\r\n    get contents() {\r\n        const recipes = this.recipes;\r\n        const components = this.components;\r\n        return recipes.concat(components);\r\n    }\r\n    remove(component, amountToRemove = 1) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.containsPart(component.partId, amountToRemove)) {\r\n                throw new Error(`Cannot remove ${amountToRemove} ${component.name} from Inventory for Actor ${this.actorId} - \r\n                there is not enough of the component in their inventory! `);\r\n            }\r\n            const recordForType = this._partDirectory.get(component.partId);\r\n            recordForType.itemsOfType = recordForType.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n            let removed = 0;\r\n            let currentItemIndex = 0;\r\n            const modifiedItems = [];\r\n            while (removed < amountToRemove) {\r\n                const thisItem = recordForType.itemsOfType[currentItemIndex];\r\n                modifiedItems.push(thisItem);\r\n                const remaining = amountToRemove - removed;\r\n                if (remaining < thisItem.data.data.quantity) {\r\n                    const updatedQuantity = thisItem.data.data.quantity - remaining;\r\n                    // @ts-ignore\r\n                    yield this.actor.updateEmbeddedEntity('OwnedItem', {\r\n                        _id: thisItem.id,\r\n                        data: { quantity: updatedQuantity }\r\n                    });\r\n                    recordForType.totalQuantity = updatedQuantity;\r\n                    removed += amountToRemove;\r\n                }\r\n                else {\r\n                    const amountRemoved = thisItem.data.data.quantity;\r\n                    // @ts-ignore\r\n                    yield this.actor.deleteEmbeddedEntity('OwnedItem', thisItem.id);\r\n                    removed += amountRemoved;\r\n                    recordForType.totalQuantity = recordForType.totalQuantity - amountRemoved;\r\n                }\r\n                currentItemIndex++;\r\n            }\r\n            const remainingItems = recordForType.itemsOfType.filter((item) => item.data.data.quantity > 0);\r\n            recordForType.itemsOfType = remainingItems;\r\n            if (remainingItems.length === 0) {\r\n                this._partDirectory.delete(component.partId);\r\n            }\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(component)\r\n                .withQuantity(amountToRemove)\r\n                .withActionType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"ActionType\"].REMOVE)\r\n                .build();\r\n        });\r\n    }\r\n    updateQuantityFor(itemData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!itemData) {\r\n                throw new Error('Unable to update Inventory quantity for null Item. ');\r\n            }\r\n            const fabricateFlags = itemData.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                return false; // Not a Fabricate Item\r\n            }\r\n            const partId = fabricateFlags.identity.partId;\r\n            if (!partId) {\r\n                throw new Error(`Unable to update Inventory quantity for Item ${itemData._id} with no Fabricate Part ID set in flag data. `);\r\n            }\r\n            let inventoryRecordForType = this._partDirectory.get(partId);\r\n            if (!inventoryRecordForType) {\r\n                yield this.update();\r\n                return true;\r\n            }\r\n            if (inventoryRecordForType.itemsOfType.length === 1) {\r\n                inventoryRecordForType.totalQuantity = itemData.data.quantity;\r\n                return true;\r\n            }\r\n            const totalExcludingChanged = inventoryRecordForType.itemsOfType.filter((managedItem) => managedItem.id !== itemData._id)\r\n                .map((managedItem) => managedItem.data.data.quantity)\r\n                .reduce((left, right) => left + right, 0);\r\n            inventoryRecordForType.totalQuantity = totalExcludingChanged + itemData.data.quantity;\r\n            return true;\r\n        });\r\n    }\r\n    update() {\r\n        this.index();\r\n    }\r\n    get components() {\r\n        return Array.from(this._partDirectory.values())\r\n            .filter((record) => record.fabricateItemType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT);\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._partDirectory.values())\r\n            .filter((record) => record.fabricateItemType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9JbnZlbnRvcnk1RS50cz9iMzcxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNKO0FBQ2pCO0FBQ3VEO0FBQ2xDO0FBQ047QUFHTTtBQUU1RCxNQUFNLFdBQVksU0FBUSx5RUFBd0M7SUFHOUQsWUFBWSxLQUFVO1FBQ2xCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUhBLG1CQUFjLEdBQXdELElBQUksR0FBRyxFQUFFLENBQUM7UUFJN0YsSUFBSSxDQUFDLHFCQUFxQixHQUFHLENBQUMsbUVBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVPLEtBQUs7UUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsOENBQThDLENBQUMsQ0FBQztTQUNuRTtRQUNELE1BQU0sS0FBSyxHQUFRLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRTVCLE1BQU0sY0FBYyxHQUFhLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxtREFBVSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQ2pHLE1BQU0sb0JBQW9CLEdBQWEsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsbURBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzdJLE1BQU0sQ0FBQyxDQUFDLE1BQWMsRUFBRSxLQUFhLEVB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QUMsTUFBOEMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLGlCQUFpQixLQUFLLHNFQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNILENBQUM7Q0FDSjtBQUVtQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2RuZDVlL0ludmVudG9yeTVFLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDcmFmdGluZ0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvQ3JhZnRpbmdJbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnlSZWNvcmR9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVJlY29yZFwiO1xyXG5pbXBvcnQgUHJvcGVydGllcyBmcm9tIFwiLi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQge0FjdGlvblR5cGUsIEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhLCBGYWJyaWNhdGVJdGVtVHlwZX0gZnJvbSBcIi4uL2dhbWUvQ29tcGVuZGl1bURhdGFcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtHYW1lU3lzdGVtVHlwZX0gZnJvbSBcIi4uL2NvcmUvR2FtZVN5c3RlbVR5cGVcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRpb25BY3Rpb25cIjtcclxuXHJcbmNsYXNzIEludmVudG9yeTVFIGV4dGVuZHMgQ3JhZnRpbmdJbnZlbnRvcnk8SXRlbS5EYXRhPEl0ZW1EYXRhNWU+PiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9wYXJ0RGlyZWN0b3J5OiBNYXA8c3RyaW5nLCBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbSwgSXRlbTVlPj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWN0b3I6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKGFjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IFtHYW1lU3lzdGVtVHlwZS5ETkQ1RV07XHJcbiAgICAgICAgdGhpcy5pbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5kZXgoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9hY3Rvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIEFjdG9yIHdhcyBzZXQgZm9yIHRoaXMgSW52ZW50b3J5IHRvIGluZGV4YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGl0ZW1zOiBhbnkgPSBBcnJheS5mcm9tKHRoaXMuX2FjdG9yLml0ZW1zLnZhbHVlcygpKTtcclxuICAgICAgICB0aGlzLl9wYXJ0RGlyZWN0b3J5LmNsZWFyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZUl0ZW1zOiBJdGVtNWVbXSA9IGl0ZW1zLmZpbHRlcih0aGlzLnNob3VsZEluZGV4KFByb3BlcnRpZXMudHlwZXMuYWxsb3dhYmxlSXRlbXMpKTtcclxuICAgICAgICBjb25zdCB1bmlxdWVDb21wb25lbnRUeXBlczogc3RyaW5nW10gPSBjYW5kaWRhdGVJdGVtcy5tYXAoKGl0ZW06IEl0ZW01ZSkgPT4gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5wYXJ0SWQpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChwYXJ0SWQ6IHN0cmluZywgaW5kZXg6IG51bWJlciwgcGFydElkczogc3RyaW5nW10pID0+IHBhcnRJZHMuaW5kZXhPZihwYXJ0SWQpID09PSBpbmRleCk7XHJcblxyXG4gICAgICAgIHVuaXF1ZUNvbXBvbmVudFR5cGVzLmZvckVhY2goKHBhcnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0sIEl0ZW01ZT4gPSBjYW5kaWRhdGVJdGVtcy5maWx0ZXIoKGNhbmRpZGF0ZUl0ZW06IEl0ZW01ZSkgPT4gY2FuZGlkYXRlSXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5wYXJ0SWQpID09PSBwYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtOiBJdGVtNWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWJyaWNhdGVJdGVtVHlwZSA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uZmFicmljYXRlSXRlbVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnZlbnRvcnlSZWNvcmQuYnVpbGRlcjxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhJdGVtKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoQWN0b3IodGhpcy5hY3RvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhUb3RhbFF1YW50aXR5KGl0ZW0uZGF0YS5kYXRhLnF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKGZhYnJpY2F0ZUl0ZW1UeXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0odGhpcy5sb29rVXAoaXRlbSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+LCByaWdodDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0sIEl0ZW01ZT4pID0+IGxlZnQuY29tYmluZVdpdGgocmlnaHQpKTtcclxuICAgICAgICAgICAgdGhpcy5fcGFydERpcmVjdG9yeS5zZXQocGFydElkLCBpbnZlbnRvcnlSZWNvcmQpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRJbmRleChhbGxvd2FibGVJdGVtczogc3RyaW5nW10pIHtcclxuICAgICAgICByZXR1cm4gKGl0ZW06IEl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGFsbG93YWJsZUl0ZW1zLmluZGV4T2YoaXRlbS50eXBlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5mYWJyaWNhdGVJdGVtVHlwZSk7XHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQgfHwgdHlwZSA9PT0gRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWRkKGZhYnJpY2F0ZUl0ZW06IEZhYnJpY2F0ZUl0ZW0sIGFtb3VudFRvQWRkOiBudW1iZXIgPSAxLCBjdXN0b21EYXRhPzogSXRlbS5EYXRhPEl0ZW1EYXRhNWU+KTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgaWYgKGN1c3RvbURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ3VzdG9tSXRlbShmYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZCwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fcGFydERpcmVjdG9yeS5oYXMoZmFicmljYXRlSXRlbS5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE5ld1JlY29yZChmYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+ID0gdGhpcy5fcGFydERpcmVjdG9yeS5nZXQoZmFicmljYXRlSXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVFeGlzdGluZ1JlY29yZChmYWJyaWNhdGVJdGVtLCBleGlzdGluZ1JlY29yZCwgYW1vdW50VG9BZGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZE5ld1JlY29yZChmYWJyaWNhdGVJdGVtOiBGYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZDogbnVtYmVyKTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bTogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KGZhYnJpY2F0ZUl0ZW0uc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW06IEVudGl0eTxJdGVtRGF0YTVlPiA9IDxFbnRpdHk8SXRlbURhdGE1ZT4+IGF3YWl0IGNvbXBlbmRpdW0uZ2V0RW50aXR5KGZhYnJpY2F0ZUl0ZW0ucGFydElkKTtcclxuICAgICAgICBpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSA9IGFtb3VudFRvQWRkO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRJdGVtRGF0YTogRW50aXR5LkRhdGE8SXRlbURhdGE1ZT4gPSBhd2FpdCB0aGlzLl9hY3Rvci5jcmVhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywgaXRlbSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZEl0ZW06IEl0ZW01ZSA9IHRoaXMuX2FjdG9yLmdldE93bmVkSXRlbShjcmVhdGVkSXRlbURhdGEuX2lkKTtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+ID0gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8RmFicmljYXRlSXRlbSwgSXRlbTVlPigpXHJcbiAgICAgICAgICAgIC53aXRoQWN0b3IodGhpcy5fYWN0b3IpXHJcbiAgICAgICAgICAgIC53aXRoSXRlbShjcmVhdGVkSXRlbSlcclxuICAgICAgICAgICAgLndpdGhUb3RhbFF1YW50aXR5KGNyZWF0ZWRJdGVtLmRhdGEuZGF0YS5xdWFudGl0eSlcclxuICAgICAgICAgICAgLndpdGhGYWJyaWNhdGVJdGVtKGZhYnJpY2F0ZUl0ZW0pXHJcbiAgICAgICAgICAgIC53aXRoRmFicmljYXRlSXRlbVR5cGUoRmFicmljYXRlSXRlbVR5cGUuQ09NUE9ORU5UKS8vIFRvZG8gLSB0aGlzIHByZXZlbnRzIHRoZSBhZGROZXdSZWNvcmQgbWV0aG9kIGZyb20gc3VwcG9ydGluZyByZWNpcGVzLiBJdCBkb2Vzbid0IG5lZWQgdG8geWV0LCBidXQgaXQgcHJvYmFibHkgc2hvdWxkXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIHRoaXMuX3BhcnREaXJlY3Rvcnkuc2V0KGZhYnJpY2F0ZUl0ZW0ucGFydElkLCBpbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkFjdGlvbi5idWlsZGVyPEl0ZW0uRGF0YTxJdGVtRGF0YTVlPj4oKVxyXG4gICAgICAgICAgICAud2l0aEl0ZW1UeXBlKGZhYnJpY2F0ZUl0ZW0pXHJcbiAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoYW1vdW50VG9BZGQpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShBY3Rpb25UeXBlLkFERClcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVFeGlzdGluZ1JlY29yZChmYWJyaWNhdGVJdGVtOiBGYWJyaWNhdGVJdGVtLCByZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+LCBhbW91bnRUb0FkZDogbnVtYmVyKTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgcmVjb3JkLml0ZW1zT2ZUeXBlLnNvcnQoKGxlZnQ6IEl0ZW08SXRlbURhdGE1ZT4sIHJpZ2h0OiBJdGVtPEl0ZW1EYXRhNWU+KSA9PiBsZWZ0LmRhdGEuZGF0YS5xdWFudGl0eSAtIHJpZ2h0LmRhdGEuZGF0YS5xdWFudGl0eSk7XHJcbiAgICAgICAgY29uc3QgaXRlbVRvTW9kaWZ5OiBJdGVtPEl0ZW1EYXRhNWU+ID0gcmVjb3JkLml0ZW1zT2ZUeXBlWzBdO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRRdWFudGl0eUZvckl0ZW0gPSBpdGVtVG9Nb2RpZnkuZGF0YS5kYXRhLnF1YW50aXR5ICsgYW1vdW50VG9BZGQ7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBJdGVtPEl0ZW1EYXRhNWU+ID0gYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywge19pZDogaXRlbVRvTW9kaWZ5Ll9pZCwgZGF0YToge3F1YW50aXR5OiB1cGRhdGVkUXVhbnRpdHlGb3JJdGVtfX0pO1xyXG4gICAgICAgIHJlY29yZC50b3RhbFF1YW50aXR5ID0gcmVjb3JkLnRvdGFsUXVhbnRpdHkgKyBhbW91bnRUb0FkZDtcclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+KClcclxuICAgICAgICAgICAgLndpdGhJdGVtVHlwZShmYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGFtb3VudFRvQWRkKVxyXG4gICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkQ3VzdG9tSXRlbShmYWJyaWNhdGVJdGVtOiBGYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZDogbnVtYmVyLCBjdXN0b21EYXRhOiBJdGVtRGF0YTVlKTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bTogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KGZhYnJpY2F0ZUl0ZW0uc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW1CYXNlSXRlbTogRW50aXR5PEl0ZW1EYXRhNWU+ID0gPEVudGl0eTxJdGVtRGF0YTVlPj4gYXdhaXQgY29tcGVuZGl1bS5nZXRFbnRpdHkoZmFicmljYXRlSXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgIGNvbnN0IGJhc2VJdGVtRGF0YTogRW50aXR5LkRhdGE8SXRlbURhdGE1ZT4gPSBkdXBsaWNhdGUoY29tcGVuZGl1bUJhc2VJdGVtLmRhdGEpO1xyXG4gICAgICAgIG1lcmdlT2JqZWN0KGJhc2VJdGVtRGF0YS5kYXRhLCBjdXN0b21EYXRhKTtcclxuICAgICAgICBjb25zdCBjcmVhdGVkSXRlbURhdGE6IEVudGl0eS5EYXRhPEl0ZW1EYXRhNWU+ID0gYXdhaXQgdGhpcy5fYWN0b3IuY3JlYXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIGJhc2VJdGVtRGF0YSk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZEl0ZW06IEl0ZW01ZSA9IHRoaXMuX2FjdG9yLmdldE93bmVkSXRlbShjcmVhdGVkSXRlbURhdGEuX2lkKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1JlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0sIEl0ZW01ZT4gPSB0aGlzLl9wYXJ0RGlyZWN0b3J5LmdldChmYWJyaWNhdGVJdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nUmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nUmVjb3JkLnRvdGFsUXVhbnRpdHkgPSBleGlzdGluZ1JlY29yZC50b3RhbFF1YW50aXR5ICsgYW1vdW50VG9BZGQ7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkFjdGlvbi5idWlsZGVyPEl0ZW0uRGF0YTxJdGVtRGF0YTVlPj4oKVxyXG4gICAgICAgICAgICAgICAgLndpdGhJdGVtVHlwZShmYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eShhbW91bnRUb0FkZClcclxuICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShBY3Rpb25UeXBlLkFERClcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50LCBJdGVtNWU+ID0gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8Q3JhZnRpbmdDb21wb25lbnQsIEl0ZW01ZT4oKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rvcih0aGlzLl9hY3RvcilcclxuICAgICAgICAgICAgICAgIC53aXRoSXRlbShjcmVhdGVkSXRlbSlcclxuICAgICAgICAgICAgICAgIC53aXRoVG90YWxRdWFudGl0eShjcmVhdGVkSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0oQ3JhZnRpbmdDb21wb25lbnQuZnJvbUZsYWdzKGNvbXBlbmRpdW1CYXNlSXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZSwgY3JlYXRlZEl0ZW0uZGF0YS5uYW1lLCBjcmVhdGVkSXRlbS5pbWcpKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnREaXJlY3Rvcnkuc2V0KGZhYnJpY2F0ZUl0ZW0ucGFydElkLCBpbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+KClcclxuICAgICAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoZmFicmljYXRlSXRlbSlcclxuICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoYW1vdW50VG9BZGQpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRlbnRzKCk6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+W10ge1xyXG4gICAgICAgIGNvbnN0IHJlY2lwZXM6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+W10gPSB0aGlzLnJlY2lwZXM7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50czogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0sIEl0ZW01ZT5bXSA9IHRoaXMuY29tcG9uZW50cztcclxuICAgICAgICByZXR1cm4gcmVjaXBlcy5jb25jYXQoY29tcG9uZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVtb3ZlKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQsIGFtb3VudFRvUmVtb3ZlOiBudW1iZXIgPSAxKTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zUGFydChjb21wb25lbnQucGFydElkLCBhbW91bnRUb1JlbW92ZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVtb3ZlICR7YW1vdW50VG9SZW1vdmV9ICR7Y29tcG9uZW50Lm5hbWV9IGZyb20gSW52ZW50b3J5IGZvciBBY3RvciAke3RoaXMuYWN0b3JJZH0gLSBcclxuICAgICAgICAgICAgICAgIHRoZXJlIGlzIG5vdCBlbm91Z2ggb2YgdGhlIGNvbXBvbmVudCBpbiB0aGVpciBpbnZlbnRvcnkhIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZWNvcmRGb3JUeXBlOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbSwgSXRlbTVlPiA9IHRoaXMuX3BhcnREaXJlY3RvcnkuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUgPSByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlLnNvcnQoKGxlZnQ6IEl0ZW08SXRlbURhdGE1ZT4sIHJpZ2h0OiBJdGVtPEl0ZW1EYXRhNWU+KSA9PiBsZWZ0LmRhdGEuZGF0YS5xdWFudGl0eSAtIHJpZ2h0LmRhdGEuZGF0YS5xdWFudGl0eSk7XHJcbiAgICAgICAgbGV0IHJlbW92ZWQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRJdGVtSW5kZXggPSAwO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVkSXRlbXM6IEl0ZW01ZVtdID0gW107XHJcbiAgICAgICAgd2hpbGUgKHJlbW92ZWQgPCBhbW91bnRUb1JlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0aGlzSXRlbTogYW55ID0gcmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZVtjdXJyZW50SXRlbUluZGV4XTtcclxuICAgICAgICAgICAgbW9kaWZpZWRJdGVtcy5wdXNoKHRoaXNJdGVtKTtcclxuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gYW1vdW50VG9SZW1vdmUgLSByZW1vdmVkO1xyXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nIDwgdGhpc0l0ZW0uZGF0YS5kYXRhLnF1YW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkUXVhbnRpdHkgPSB0aGlzSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkgLSByZW1haW5pbmc7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRW50aXR5KCdPd25lZEl0ZW0nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2lkOiB0aGlzSXRlbS5pZCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7cXVhbnRpdHk6IHVwZGF0ZWRRdWFudGl0eX1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gdXBkYXRlZFF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZCArPSBhbW91bnRUb1JlbW92ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFJlbW92ZWQ6IG51bWJlciA9IHRoaXNJdGVtLmRhdGEuZGF0YS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIHRoaXNJdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWQgKz0gYW1vdW50UmVtb3ZlZDtcclxuICAgICAgICAgICAgICAgIHJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSA9IHJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSAtIGFtb3VudFJlbW92ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudEl0ZW1JbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZW1haW5pbmdJdGVtczogSXRlbTVlW10gPSByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSA+IDApO1xyXG4gICAgICAgIHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUgPSByZW1haW5pbmdJdGVtcztcclxuICAgICAgICBpZiAocmVtYWluaW5nSXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnREaXJlY3RvcnkuZGVsZXRlKGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+KClcclxuICAgICAgICAgICAgLndpdGhJdGVtVHlwZShjb21wb25lbnQpXHJcbiAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoYW1vdW50VG9SZW1vdmUpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShBY3Rpb25UeXBlLlJFTU9WRSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZVF1YW50aXR5Rm9yKGl0ZW1EYXRhOiBJdGVtLkRhdGE8SXRlbURhdGE1ZT4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAoIWl0ZW1EYXRhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHVwZGF0ZSBJbnZlbnRvcnkgcXVhbnRpdHkgZm9yIG51bGwgSXRlbS4gJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW1EYXRhLmZsYWdzLmZhYnJpY2F0ZTtcclxuICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IGEgRmFicmljYXRlIEl0ZW1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5wYXJ0SWQ7XHJcbiAgICAgICAgaWYgKCFwYXJ0SWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gdXBkYXRlIEludmVudG9yeSBxdWFudGl0eSBmb3IgSXRlbSAke2l0ZW1EYXRhLl9pZH0gd2l0aCBubyBGYWJyaWNhdGUgUGFydCBJRCBzZXQgaW4gZmxhZyBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGludmVudG9yeVJlY29yZEZvclR5cGU6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+ID0gdGhpcy5fcGFydERpcmVjdG9yeS5nZXQocGFydElkKTtcclxuICAgICAgICBpZiAoIWludmVudG9yeVJlY29yZEZvclR5cGUpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbnZlbnRvcnlSZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBpbnZlbnRvcnlSZWNvcmRGb3JUeXBlLnRvdGFsUXVhbnRpdHkgPSBpdGVtRGF0YS5kYXRhLnF1YW50aXR5O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG90YWxFeGNsdWRpbmdDaGFuZ2VkID0gaW52ZW50b3J5UmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZS5maWx0ZXIoKG1hbmFnZWRJdGVtOiBJdGVtPEl0ZW1EYXRhNWU+KSA9PiBtYW5hZ2VkSXRlbS5pZCAhPT0gaXRlbURhdGEuX2lkKVxyXG4gICAgICAgICAgICAubWFwKChtYW5hZ2VkSXRlbTogYW55KSA9PiBtYW5hZ2VkSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0ICsgcmlnaHQsIDApO1xyXG4gICAgICAgIGludmVudG9yeVJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSA9IHRvdGFsRXhjbHVkaW5nQ2hhbmdlZCArIGl0ZW1EYXRhLmRhdGEucXVhbnRpdHk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5kZXgoKVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRzKCk6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudCwgSXRlbTVlPltdIHtcclxuICAgICAgICByZXR1cm4gPEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudCwgSXRlbTVlPltdPkFycmF5LmZyb20odGhpcy5fcGFydERpcmVjdG9yeS52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcigocmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbSwgSXRlbTVlPikgPT4gcmVjb3JkLmZhYnJpY2F0ZUl0ZW1UeXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZWNpcGVzKCk6IEludmVudG9yeVJlY29yZDxSZWNpcGUsIEl0ZW01ZT5bXSB7XHJcbiAgICAgICAgcmV0dXJuIDxJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlLCBJdGVtNWU+W10+QXJyYXkuZnJvbSh0aGlzLl9wYXJ0RGlyZWN0b3J5LnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtLCBJdGVtNWU+KSA9PiByZWNvcmQuZmFicmljYXRlSXRlbVR5cGUgPT09IEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7SW52ZW50b3J5NUV9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/Inventory5E.ts\n");

/***/ }),

/***/ "./src/scripts/error/AlchemyError.ts":
/*!*******************************************!*\
  !*** ./src/scripts/error/AlchemyError.ts ***!
  \*******************************************/
/*! exports provided: AlchemyError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemyError\", function() { return AlchemyError; });\n/* harmony import */ var _CraftingError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingError */ \"./src/scripts/error/CraftingError.ts\");\n\r\nclass AlchemyError extends _CraftingError__WEBPACK_IMPORTED_MODULE_0__[\"CraftingError\"] {\r\n    constructor(message, componentMix, componentsConsumed) {\r\n        super(message, componentsConsumed);\r\n        this._componentMix = componentMix;\r\n    }\r\n    get componentMix() {\r\n        return this._componentMix;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lcnJvci9BbGNoZW15RXJyb3IudHM/MDAxYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBOEM7QUFHOUMsTUFBTSxZQUFhLFNBQVEsNERBQWE7SUFJcEMsWUFBWSxPQUFlLEVBQUUsWUFBaUMsRUFBRSxrQkFBMkI7UUFDdkYsS0FBSyxDQUFDLE9BQU8sRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFlBQVk7UUFDWixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUIsQ0FBQztDQUVKO0FBRW9CIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZXJyb3IvQWxjaGVteUVycm9yLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDcmFmdGluZ0Vycm9yfSBmcm9tIFwiLi9DcmFmdGluZ0Vycm9yXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcblxyXG5jbGFzcyBBbGNoZW15RXJyb3IgZXh0ZW5kcyBDcmFmdGluZ0Vycm9yIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb25lbnRNaXg6IENyYWZ0aW5nQ29tcG9uZW50W107XHJcblxyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb21wb25lbnRNaXg6IENyYWZ0aW5nQ29tcG9uZW50W10sIGNvbXBvbmVudHNDb25zdW1lZDogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIGNvbXBvbmVudHNDb25zdW1lZCk7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50TWl4ID0gY29tcG9uZW50TWl4O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRNaXgoKTogQ3JhZnRpbmdDb21wb25lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudE1peDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7QWxjaGVteUVycm9yfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/error/AlchemyError.ts\n");

/***/ }),

/***/ "./src/scripts/error/CraftingError.ts":
/*!********************************************!*\
  !*** ./src/scripts/error/CraftingError.ts ***!
  \********************************************/
/*! exports provided: CraftingError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingError\", function() { return CraftingError; });\nclass CraftingError extends Error {\r\n    constructor(message, componentsConsumed) {\r\n        super(message);\r\n        this._componentsConsumed = componentsConsumed;\r\n    }\r\n    get componentsConsumed() {\r\n        return this._componentsConsumed;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lcnJvci9DcmFmdGluZ0Vycm9yLnRzP2Y5YTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLE1BQU0sYUFBYyxTQUFRLEtBQUs7SUFJN0IsWUFBWSxPQUFlLEVBQUUsa0JBQTJCO1FBQ3BELEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxrQkFBa0IsQ0FBQztJQUNsRCxDQUFDO0lBRUQsSUFBSSxrQkFBa0I7UUFDbEIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDcEMsQ0FBQztDQUVKO0FBRXFCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZXJyb3IvQ3JhZnRpbmdFcnJvci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENyYWZ0aW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50c0NvbnN1bWVkOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29tcG9uZW50c0NvbnN1bWVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c0NvbnN1bWVkID0gY29tcG9uZW50c0NvbnN1bWVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRzQ29uc3VtZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNDb25zdW1lZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdFcnJvcn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/error/CraftingError.ts\n");

/***/ }),

/***/ "./src/scripts/game/CompendiumData.ts":
/*!********************************************!*\
  !*** ./src/scripts/game/CompendiumData.ts ***!
  \********************************************/
/*! exports provided: FabricateItemType, ActionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItemType\", function() { return FabricateItemType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ActionType\", function() { return ActionType; });\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"ADD\"] = \"ADD\";\r\n    ActionType[\"REMOVE\"] = \"REMOVE\";\r\n})(ActionType || (ActionType = {}));\r\nvar FabricateItemType;\r\n(function (FabricateItemType) {\r\n    FabricateItemType[\"RECIPE\"] = \"RECIPE\";\r\n    FabricateItemType[\"COMPONENT\"] = \"COMPONENT\";\r\n})(FabricateItemType || (FabricateItemType = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NvbXBlbmRpdW1EYXRhLnRzPzBlMTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUEsSUFBSyxVQUdKO0FBSEQsV0FBSyxVQUFVO0lBQ1gseUJBQVc7SUFDWCwrQkFBaUI7QUFDckIsQ0FBQyxFQUhJLFVBQVUsS0FBVixVQUFVLFFBR2Q7QUFFRCxJQUFLLGlCQUdKO0FBSEQsV0FBSyxpQkFBaUI7SUFDbEIsc0NBQWlCO0lBQ2pCLDRDQUF1QjtBQUMzQixDQUFDLEVBSEksaUJBQWlCLEtBQWpCLGlCQUFpQixRQUdyQjtBQWtDd0oiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9nYW1lL0NvbXBlbmRpdW1EYXRhLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZW51bSBBY3Rpb25UeXBlIHtcclxuICAgIEFERCA9ICdBREQnLFxyXG4gICAgUkVNT1ZFID0gJ1JFTU9WRSdcclxufVxyXG5cclxuZW51bSBGYWJyaWNhdGVJdGVtVHlwZSB7XHJcbiAgICBSRUNJUEUgPSAnUkVDSVBFJyxcclxuICAgIENPTVBPTkVOVCA9ICdDT01QT05FTlQnXHJcbn1cclxuXHJcbmludGVyZmFjZSBDb21wZW5kaXVtRW50cnkge1xyXG4gICAgc3lzdGVtSWQ6IHN0cmluZztcclxuICAgIHBhcnRJZDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmFicmljYXRlQ29tcG9uZW50RmxhZ3Mge1xyXG4gICAgZXNzZW5jZXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmFicmljYXRlSW5ncmVkaWVudEZsYWdzIHtcclxuICAgIHF1YW50aXR5OiBudW1iZXIsXHJcbiAgICBjb25zdW1lZDogYm9vbGVhbixcclxuICAgIHBhcnRJZDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmFicmljYXRlUmVzdWx0RmxhZ3Mge1xyXG4gICAgYWN0aW9uOiBBY3Rpb25UeXBlLFxyXG4gICAgcGFydElkOiBzdHJpbmcsXHJcbiAgICBxdWFudGl0eTogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSB7XHJcbiAgICB0eXBlOiBGYWJyaWNhdGVJdGVtVHlwZTtcclxuICAgIGlkZW50aXR5OiBDb21wZW5kaXVtRW50cnk7XHJcbiAgICByZWNpcGU/OiB7XHJcbiAgICAgICAgZXNzZW5jZXM6IHN0cmluZ1tdLFxyXG4gICAgICAgIGluZ3JlZGllbnRzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSxcclxuICAgICAgICByZXN1bHRzOiBGYWJyaWNhdGVSZXN1bHRGbGFnc1tdXHJcbiAgICB9O1xyXG4gICAgY29tcG9uZW50PzogRmFicmljYXRlQ29tcG9uZW50RmxhZ3M7XHJcbn1cclxuXHJcbmV4cG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlLCBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3MsIEZhYnJpY2F0ZVJlc3VsdEZsYWdzLCBGYWJyaWNhdGVDb21wb25lbnRGbGFncywgQ29tcGVuZGl1bUVudHJ5LCBBY3Rpb25UeXBlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/CompendiumData.ts\n");

/***/ }),

/***/ "./src/scripts/game/CraftingInventory.ts":
/*!***********************************************!*\
  !*** ./src/scripts/game/CraftingInventory.ts ***!
  \***********************************************/
/*! exports provided: CraftingInventory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingInventory\", function() { return CraftingInventory; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\n/* harmony import */ var _CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\n\r\n\r\nclass CraftingInventory {\r\n    constructor(actor) {\r\n        this._actor = actor;\r\n        this._supportedGameSystems = [];\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get actorId() {\r\n        return this._actor.id;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get size() {\r\n        return this.contents.length;\r\n    }\r\n    get componentCount() {\r\n        return this.components.map((componentRecord) => componentRecord.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n    }\r\n    supportsGameSystem(gameSystem) {\r\n        return this._supportedGameSystems.some((supported) => supported === gameSystem);\r\n    }\r\n    containsIngredient(ingredient) {\r\n        const quantity = this.components.filter((candidate) => candidate.fabricateItem.sharesType(ingredient))\r\n            .map((candidate) => candidate.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n        return ingredient.quantity <= quantity;\r\n    }\r\n    containsPart(partId, quantity = 1) {\r\n        const match = this.contents.find((itemRecord) => itemRecord.fabricateItem.partId === partId);\r\n        return match ? match.totalQuantity >= quantity : false;\r\n    }\r\n    containsAll(components) {\r\n        const componentCountById = new Map();\r\n        components.forEach((component) => {\r\n            if (componentCountById.has(component.partId)) {\r\n                const currentCount = componentCountById.get(component.partId);\r\n                componentCountById.set(component.partId, currentCount + 1);\r\n            }\r\n            else {\r\n                componentCountById.set(component.partId, 1);\r\n            }\r\n        });\r\n        componentCountById.forEach((amountRequired, partId) => {\r\n            const inventoryRecordForType = this.components.find((record) => record.fabricateItem.partId === partId);\r\n            if (!inventoryRecordForType || inventoryRecordForType.totalQuantity < amountRequired) {\r\n                return false;\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    hasAllIngredientsFor(recipe) {\r\n        return this.hasAllNamedIngredients(recipe) && this.hasAllEssences(recipe);\r\n    }\r\n    hasAllEssences(recipe) {\r\n        const outstandingEssencesByType = new Map();\r\n        if (!recipe.essences || recipe.essences.length === 0) {\r\n            return true;\r\n        }\r\n        recipe.essences.forEach((essence) => {\r\n            if (outstandingEssencesByType.has(essence)) {\r\n                outstandingEssencesByType.set(essence, outstandingEssencesByType.get(essence) + 1);\r\n            }\r\n            else {\r\n                outstandingEssencesByType.set(essence, 1);\r\n            }\r\n        });\r\n        for (let i = 0; i < this.components.length; i++) {\r\n            const thisRecord = this.components[i];\r\n            if (thisRecord.fabricateItem.essences) {\r\n                thisRecord.fabricateItem.essences.forEach((essence) => {\r\n                    if (outstandingEssencesByType.has(essence)) {\r\n                        const remaining = outstandingEssencesByType.get(essence);\r\n                        const contribution = thisRecord.totalQuantity;\r\n                        if (remaining <= contribution) {\r\n                            outstandingEssencesByType.delete(essence);\r\n                        }\r\n                        else {\r\n                            outstandingEssencesByType.set(essence, remaining - contribution);\r\n                        }\r\n                    }\r\n                });\r\n                if (outstandingEssencesByType.size === 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    hasAllNamedIngredients(recipe) {\r\n        const ingredientsByType = new Map();\r\n        let failedToFind = false;\r\n        let duplicatedIngredient = false;\r\n        recipe.ingredients.forEach((ingredient) => {\r\n            const present = this.containsIngredient(ingredient);\r\n            if (!present) {\r\n                failedToFind = true;\r\n                return;\r\n            }\r\n            const occurrences = ingredientsByType.get(ingredient.component.partId) + 1;\r\n            ingredientsByType.set(ingredient.component.partId, occurrences);\r\n            if (occurrences > 1) {\r\n                duplicatedIngredient = true;\r\n            }\r\n        });\r\n        if (duplicatedIngredient) {\r\n            throw new Error(`One or more ingredients were duplicated in a call to CraftingInventory.containsMany(ingredients: Ingredient[]). \r\n            Recipe[name='${recipe.name}',id='${recipe.partId}'] seems to be mis-configured! Recipes should be specified as \r\n            Ingredient[Mud, 2], not [Ingredient[Mud, 1], Ingredient[Mud 1]]. `);\r\n        }\r\n        return !failedToFind;\r\n    }\r\n    getOwningCraftingSystemForItem(item) {\r\n        const systemId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.systemId);\r\n        const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n        if (!craftingSystem) {\r\n            throw new Error(`Unable to look up crafting System '${systemId}' when indexing Item '${item._id}'. `);\r\n        }\r\n        return craftingSystem;\r\n    }\r\n    lookUp(item) {\r\n        const craftingSystem = this.getOwningCraftingSystemForItem(item);\r\n        const itemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.fabricateItemType);\r\n        const partId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.partId);\r\n        switch (itemType) {\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE:\r\n                const recipe = craftingSystem.getRecipeByPartId(partId);\r\n                if (recipe) {\r\n                    return recipe;\r\n                }\r\n                throw new Error(`Unable to look up Recipe with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].COMPONENT:\r\n                const craftingComponent = craftingSystem.getComponentByPartId(partId);\r\n                if (craftingComponent) {\r\n                    return craftingComponent;\r\n                }\r\n                throw new Error(`Unable to look up Crafting Component with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            default:\r\n                throw new Error(`Unrecognized Fabricate Item Type of '${itemType}' for Item '${item._id}'. \r\n                    The allowable values are 'COMPONENT' and 'RECIPE'. `);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5LnRzP2Q3N2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF1QztBQUNnQztBQUNwQjtBQUluRCxNQUFlLGlCQUFpQjtJQUs1QixZQUFzQixLQUFZO1FBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxvQkFBb0I7UUFDcEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQVFELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxlQUFtRCxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDO2FBQzdHLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVNLGtCQUFrQixDQUFDLFVBQTBCO1FBQ2hELE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLFNBQXlCLEVBQUUsRUFBRSxDQUFDLFNBQVMsS0FBSyxVQUFVLENBQUMsQ0FBQztJQUNwRyxDQUFDO0lBRUQsa0JBQWtCLENBQUMsVUFBc0I7UUFDckMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVB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cy9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4vSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4uL2NvcmUvSW5ncmVkaWVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4uL2NvcmUvUmVjaXBlXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRlSXRlbVwiO1xyXG5pbXBvcnQgUHJvcGVydGllcyBmcm9tIFwiLi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb259IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBDcmFmdGluZ0ludmVudG9yeTxUIGV4dGVuZHMgSXRlbS5EYXRhPiBpbXBsZW1lbnRzIEludmVudG9yeTxUPiB7XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9hY3RvcjogYW55O1xyXG4gICAgcHJvdGVjdGVkIF9zdXBwb3J0ZWRHYW1lU3lzdGVtczogR2FtZVN5c3RlbVR5cGVbXTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoYWN0b3I6IEFjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvcjtcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcigpOiBBY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcklkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXBwb3J0ZWRHYW1lU3lzdGVtcygpOiBHYW1lU3lzdGVtVHlwZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0IGNvbnRlbnRzKCk6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPltdO1xyXG5cclxuICAgIGFic3RyYWN0IGdldCBjb21wb25lbnRzKCk6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD5bXTtcclxuXHJcbiAgICBhYnN0cmFjdCBnZXQgcmVjaXBlcygpOiBJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlPltdO1xyXG5cclxuICAgIGdldCBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMubWFwKChjb21wb25lbnRSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VwcG9ydHNHYW1lU3lzdGVtKGdhbWVTeXN0ZW06IEdhbWVTeXN0ZW1UeXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zLnNvbWUoKHN1cHBvcnRlZDogR2FtZVN5c3RlbVR5cGUpID0+IHN1cHBvcnRlZCA9PT0gZ2FtZVN5c3RlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnNJbmdyZWRpZW50KGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBxdWFudGl0eSA9IHRoaXMuY29tcG9uZW50cy5maWx0ZXIoKGNhbmRpZGF0ZTogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PikgPT4gY2FuZGlkYXRlLmZhYnJpY2F0ZUl0ZW0uc2hhcmVzVHlwZShpbmdyZWRpZW50KSlcclxuICAgICAgICAgICAgLm1hcCgoY2FuZGlkYXRlOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4pID0+IGNhbmRpZGF0ZS50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgICAgICByZXR1cm4gaW5ncmVkaWVudC5xdWFudGl0eSA8PSBxdWFudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluc1BhcnQocGFydElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIgPSAxKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmNvbnRlbnRzLmZpbmQoKGl0ZW1SZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPikgPT4gaXRlbVJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCA9PT0gcGFydElkKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaC50b3RhbFF1YW50aXR5ID49IHF1YW50aXR5IDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnNBbGwoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudENvdW50QnlJZDogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgY29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRDb3VudEJ5SWQuaGFzKGNvbXBvbmVudC5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSBjb21wb25lbnRDb3VudEJ5SWQuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50Q291bnRCeUlkLnNldChjb21wb25lbnQucGFydElkLCBjdXJyZW50Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudENvdW50QnlJZC5zZXQoY29tcG9uZW50LnBhcnRJZCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb21wb25lbnRDb3VudEJ5SWQuZm9yRWFjaCgoYW1vdW50UmVxdWlyZWQ6IG51bWJlciwgcGFydElkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5UmVjb3JkRm9yVHlwZSA9IHRoaXMuY29tcG9uZW50cy5maW5kKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCA9PT0gcGFydElkKTtcclxuICAgICAgICAgICAgaWYgKCFpbnZlbnRvcnlSZWNvcmRGb3JUeXBlIHx8IGludmVudG9yeVJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSA8IGFtb3VudFJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNBbGxJbmdyZWRpZW50c0ZvcihyZWNpcGU6IFJlY2lwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc0FsbE5hbWVkSW5ncmVkaWVudHMocmVjaXBlKSAmJiB0aGlzLmhhc0FsbEVzc2VuY2VzKHJlY2lwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYXNBbGxFc3NlbmNlcyhyZWNpcGU6IFJlY2lwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGU6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgIGlmICghcmVjaXBlLmVzc2VuY2VzIHx8IHJlY2lwZS5lc3NlbmNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlY2lwZS5lc3NlbmNlcy5mb3JFYWNoKChlc3NlbmNlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLnNldChlc3NlbmNlLCBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLmdldChlc3NlbmNlKSArIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5zZXQoZXNzZW5jZSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0aGlzUmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+ID0gdGhpcy5jb21wb25lbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodGhpc1JlY29yZC5mYWJyaWNhdGVJdGVtLmVzc2VuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzUmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMuZm9yRWFjaCgoZXNzZW5jZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZzogbnVtYmVyID0gb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5nZXQoZXNzZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvbiA9IHRoaXNSZWNvcmQudG90YWxRdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSBjb250cmlidXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuZGVsZXRlKGVzc2VuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5zZXQoZXNzZW5jZSwgcmVtYWluaW5nIC0gY29udHJpYnV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc0FsbE5hbWVkSW5ncmVkaWVudHMocmVjaXBlOiBSZWNpcGUpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBpbmdyZWRpZW50c0J5VHlwZSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgbGV0IGZhaWxlZFRvRmluZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkdXBsaWNhdGVkSW5ncmVkaWVudDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy5mb3JFYWNoKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXNlbnQ6IGJvb2xlYW4gPSB0aGlzLmNvbnRhaW5zSW5ncmVkaWVudChpbmdyZWRpZW50KTtcclxuICAgICAgICAgICAgaWYgKCFwcmVzZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsZWRUb0ZpbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG9jY3VycmVuY2VzID0gaW5ncmVkaWVudHNCeVR5cGUuZ2V0KGluZ3JlZGllbnQuY29tcG9uZW50LnBhcnRJZCkgKyAxO1xyXG4gICAgICAgICAgICBpbmdyZWRpZW50c0J5VHlwZS5zZXQoaW5ncmVkaWVudC5jb21wb25lbnQucGFydElkLCBvY2N1cnJlbmNlcyk7XHJcbiAgICAgICAgICAgIGlmIChvY2N1cnJlbmNlcyA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZWRJbmdyZWRpZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChkdXBsaWNhdGVkSW5ncmVkaWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9uZSBvciBtb3JlIGluZ3JlZGllbnRzIHdlcmUgZHVwbGljYXRlZCBpbiBhIGNhbGwgdG8gQ3JhZnRpbmdJbnZlbnRvcnkuY29udGFpbnNNYW55KGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10pLiBcclxuICAgICAgICAgICAgUmVjaXBlW25hbWU9JyR7cmVjaXBlLm5hbWV9JyxpZD0nJHtyZWNpcGUucGFydElkfSddIHNlZW1zIHRvIGJlIG1pcy1jb25maWd1cmVkISBSZWNpcGVzIHNob3VsZCBiZSBzcGVjaWZpZWQgYXMgXHJcbiAgICAgICAgICAgIEluZ3JlZGllbnRbTXVkLCAyXSwgbm90IFtJbmdyZWRpZW50W011ZCwgMV0sIEluZ3JlZGllbnRbTXVkIDFdXS4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAhZmFpbGVkVG9GaW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRPd25pbmdDcmFmdGluZ1N5c3RlbUZvckl0ZW0oaXRlbTogSXRlbSk6IENyYWZ0aW5nU3lzdGVtIHtcclxuICAgICAgICBjb25zdCBzeXN0ZW1JZCA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KHN5c3RlbUlkKTtcclxuICAgICAgICBpZiAoIWNyYWZ0aW5nU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvb2sgdXAgY3JhZnRpbmcgU3lzdGVtICcke3N5c3RlbUlkfScgd2hlbiBpbmRleGluZyBJdGVtICcke2l0ZW0uX2lkfScuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JhZnRpbmdTeXN0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvb2tVcChpdGVtOiBJdGVtKTogRmFicmljYXRlSXRlbSB7XHJcbiAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtID0gdGhpcy5nZXRPd25pbmdDcmFmdGluZ1N5c3RlbUZvckl0ZW0oaXRlbSk7XHJcbiAgICAgICAgY29uc3QgaXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5mYWJyaWNhdGVJdGVtVHlwZSk7XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBpdGVtLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5pdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgc3dpdGNoIChpdGVtVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwZTogUmVjaXBlID0gY3JhZnRpbmdTeXN0ZW0uZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWNpcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjaXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9vayB1cCBSZWNpcGUgd2l0aCBQYXJ0IElEICcke3BhcnRJZH0nIGZyb20gQ3JhZnRpbmcgU3lzdGVtIFxyXG4gICAgICAgICAgICAgICAgICAgICcke2NyYWZ0aW5nU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fS4gJ2ApO1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCA9IGNyYWZ0aW5nU3lzdGVtLmdldENvbXBvbmVudEJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb29rIHVwIENyYWZ0aW5nIENvbXBvbmVudCB3aXRoIFBhcnQgSUQgJyR7cGFydElkfScgZnJvbSBDcmFmdGluZyBTeXN0ZW0gXHJcbiAgICAgICAgICAgICAgICAgICAgJyR7Y3JhZnRpbmdTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXl9LiAnYCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBGYWJyaWNhdGUgSXRlbSBUeXBlIG9mICcke2l0ZW1UeXBlfScgZm9yIEl0ZW0gJyR7aXRlbS5faWR9Jy4gXHJcbiAgICAgICAgICAgICAgICAgICAgVGhlIGFsbG93YWJsZSB2YWx1ZXMgYXJlICdDT01QT05FTlQnIGFuZCAnUkVDSVBFJy4gYClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHJlbW92ZShpdGVtOiBGYWJyaWNhdGVJdGVtLCBxdWFudGl0eT86IG51bWJlcik6IFByb21pc2U8RmFicmljYXRpb25BY3Rpb248VD4+O1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhZGQoaXRlbTogRmFicmljYXRlSXRlbSwgcXVhbnRpdHk/OiBudW1iZXIsIGN1c3RvbURhdGE/OiBhbnkpOiBQcm9taXNlPEZhYnJpY2F0aW9uQWN0aW9uPFQ+PjtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgdXBkYXRlKCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHVwZGF0ZVF1YW50aXR5Rm9yKGl0ZW06IGFueSk6IFByb21pc2U8Ym9vbGVhbj47XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nSW52ZW50b3J5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/CraftingInventory.ts\n");

/***/ }),

/***/ "./src/scripts/game/InventoryRecord.ts":
/*!*********************************************!*\
  !*** ./src/scripts/game/InventoryRecord.ts ***!
  \*********************************************/
/*! exports provided: InventoryRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRecord\", function() { return InventoryRecord; });\n// todo - inventory records don't care about the inner workings of the fabricate items they describe and nor does the inventory.\r\n//  Push the first generic parameter down to the property as 'Fabricate' and rework Fabricate items to stop storing components in duplicate\r\nclass InventoryRecord {\r\n    constructor(builder) {\r\n        this._actor = builder.actor;\r\n        this._itemsOfType = builder.itemsOfType;\r\n        this._totalQuantity = builder.totalQuantity;\r\n        this._fabricateItem = builder.fabricateItem;\r\n        this._fabricateItemType = builder.fabricateItemType;\r\n    }\r\n    static builder() {\r\n        return new InventoryRecord.Builder();\r\n    }\r\n    combineWith(other) {\r\n        if (!this.fabricateItem.sharesType(other.fabricateItem)) {\r\n            throw new Error(`Unable to combine Inventory Records for different Fabricate Item types: ${this.fabricateItem.partId} | ${other.fabricateItem.partId}`);\r\n        }\r\n        if (this.actor.id !== other.actor.id) {\r\n            throw new Error(`Unable to combine inventory records from different Actors: ${this.actor.id} | ${other.actor.id}`);\r\n        }\r\n        return InventoryRecord.builder()\r\n            .withFabricateItem(this.fabricateItem)\r\n            .withFabricateItemType(this.fabricateItemType)\r\n            .withActor(this.actor)\r\n            .withItems(this.itemsOfType)\r\n            .withItems(other.itemsOfType)\r\n            .withTotalQuantity(this.totalQuantity + other.totalQuantity)\r\n            .build();\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get itemsOfType() {\r\n        return this._itemsOfType;\r\n    }\r\n    set itemsOfType(value) {\r\n        this._itemsOfType = value;\r\n    }\r\n    get totalQuantity() {\r\n        return this._totalQuantity;\r\n    }\r\n    set totalQuantity(value) {\r\n        this._totalQuantity = value;\r\n    }\r\n    get fabricateItem() {\r\n        return this._fabricateItem;\r\n    }\r\n    get fabricateItemType() {\r\n        return this._fabricateItemType;\r\n    }\r\n}\r\n(function (InventoryRecord) {\r\n    class Builder {\r\n        constructor() {\r\n            this.itemsOfType = [];\r\n        }\r\n        withActor(value) {\r\n            this.actor = value;\r\n            return this;\r\n        }\r\n        withItem(value) {\r\n            this.itemsOfType.push(value);\r\n            return this;\r\n        }\r\n        withItems(value) {\r\n            this.itemsOfType.push(...value);\r\n            return this;\r\n        }\r\n        withFabricateItem(value) {\r\n            this.fabricateItem = value;\r\n            return this;\r\n        }\r\n        withTotalQuantity(value) {\r\n            this.totalQuantity = value;\r\n            return this;\r\n        }\r\n        withFabricateItemType(value) {\r\n            this.fabricateItemType = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new InventoryRecord(this);\r\n        }\r\n    }\r\n    InventoryRecord.Builder = Builder;\r\n})(InventoryRecord || (InventoryRecord = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0ludmVudG9yeVJlY29yZC50cz9lZDA1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxnSUFBZ0k7QUFDaEksMklBQTJJO0FBQzNJLE1BQU0sZUFBZTtJQU9qQixZQUFZLE9BQXNDO1FBQzlDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQzVDLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0lBQ3hELENBQUM7SUFFTSxNQUFNLENBQUMsT0FBTztRQUNqQixPQUFPLElBQUksZUFBZSxDQUFDLE9BQU8sRUFBUSxDQUFDO0lBQy9DLENBQUM7SUFFTSxXQUFXLENBQUMsS0FBNEI7UUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUNyRCxNQUFNLElBQUksS0FBSyxDQUFDLDJFQUEyRSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sTUFBTSxLQUFLLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7U0FDM0o7UUFDRCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFO1lBQ2xDLE1BQU0sSUFBSSxLQUFLLENBQUMsOERBQThELElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztTQUN0SDtRQUNELE9BQU8sZUFBZSxDQUFDLE9BQU8sRUFBUTthQUNqQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDO2FBQ3JDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQzthQUM3QyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQzthQUMzQixTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQzthQUM1QixpQkFBaUIsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7YUFDM0QsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFdBQVcsQ0FBQyxLQUFVO1FBQ3RCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQUksYUFBYSxDQUFDLEtBQWE7UUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksYUFBYTtRQUNiLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztDQUNKO0FBRUQsV0FBVSxlQUFlO0lBQ3JCLE1BQWEsT0FBTztRQUFwQjtZQUVXLGdCQUFXLEdBQVEsRUFBRSxDQUFDO1FBdUNqQyxDQUFDO1FBbENVLFNBQVMsQ0FBQyxLQUFZO1lBQ3pCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ25CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxRQUFRLENBQUMsS0FBUTtZQUNwQixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM3QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sU0FBUyxDQUFDLEtBQVU7WUFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztZQUNoQyxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0saUJBQWlCLENBQUMsS0FBUTtZQUM3QixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUMzQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0saUJBQWlCLENBQUMsS0FBYTtZQUNsQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUMzQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0scUJBQXFCLENBQUMsS0FBd0I7WUFDakQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztZQUMvQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztLQUVKO0lBekNZLHVCQUFPLFVBeUNuQjtBQUNMLENBQUMsRUEzQ1MsZUFBZSxLQUFmLGVBQWUsUUEyQ3hCO0FBRXVCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZ2FtZS9JbnZlbnRvcnlSZWNvcmQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbi8vIHRvZG8gLSBpbnZlbnRvcnkgcmVjb3JkcyBkb24ndCBjYXJlIGFib3V0IHRoZSBpbm5lciB3b3JraW5ncyBvZiB0aGUgZmFicmljYXRlIGl0ZW1zIHRoZXkgZGVzY3JpYmUgYW5kIG5vciBkb2VzIHRoZSBpbnZlbnRvcnkuXHJcbi8vICBQdXNoIHRoZSBmaXJzdCBnZW5lcmljIHBhcmFtZXRlciBkb3duIHRvIHRoZSBwcm9wZXJ0eSBhcyAnRmFicmljYXRlJyBhbmQgcmV3b3JrIEZhYnJpY2F0ZSBpdGVtcyB0byBzdG9wIHN0b3JpbmcgY29tcG9uZW50cyBpbiBkdXBsaWNhdGVcclxuY2xhc3MgSW52ZW50b3J5UmVjb3JkPEYgZXh0ZW5kcyBGYWJyaWNhdGVJdGVtLCBJIGV4dGVuZHMgSXRlbT4ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYWN0b3I6IEFjdG9yO1xyXG4gICAgcHJpdmF0ZSBfaXRlbXNPZlR5cGU6IElbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZhYnJpY2F0ZUl0ZW06IEY7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdGVJdGVtVHlwZTogRmFicmljYXRlSXRlbVR5cGU7XHJcbiAgICBwcml2YXRlIF90b3RhbFF1YW50aXR5OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8RiwgST4pIHtcclxuICAgICAgICB0aGlzLl9hY3RvciA9IGJ1aWxkZXIuYWN0b3I7XHJcbiAgICAgICAgdGhpcy5faXRlbXNPZlR5cGUgPSBidWlsZGVyLml0ZW1zT2ZUeXBlO1xyXG4gICAgICAgIHRoaXMuX3RvdGFsUXVhbnRpdHkgPSBidWlsZGVyLnRvdGFsUXVhbnRpdHk7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRlSXRlbSA9IGJ1aWxkZXIuZmFicmljYXRlSXRlbTtcclxuICAgICAgICB0aGlzLl9mYWJyaWNhdGVJdGVtVHlwZSA9IGJ1aWxkZXIuZmFicmljYXRlSXRlbVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyPEYgZXh0ZW5kcyBGYWJyaWNhdGVJdGVtLCBJIGV4dGVuZHMgSXRlbT4oKTogSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8RiwgST4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29tYmluZVdpdGgob3RoZXI6IEludmVudG9yeVJlY29yZDxGLCBJPik6IEludmVudG9yeVJlY29yZDxGLCBJPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZhYnJpY2F0ZUl0ZW0uc2hhcmVzVHlwZShvdGhlci5mYWJyaWNhdGVJdGVtKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb21iaW5lIEludmVudG9yeSBSZWNvcmRzIGZvciBkaWZmZXJlbnQgRmFicmljYXRlIEl0ZW0gdHlwZXM6ICR7dGhpcy5mYWJyaWNhdGVJdGVtLnBhcnRJZH0gfCAke290aGVyLmZhYnJpY2F0ZUl0ZW0ucGFydElkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rvci5pZCAhPT0gb3RoZXIuYWN0b3IuaWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29tYmluZSBpbnZlbnRvcnkgcmVjb3JkcyBmcm9tIGRpZmZlcmVudCBBY3RvcnM6ICR7dGhpcy5hY3Rvci5pZH0gfCAke290aGVyLmFjdG9yLmlkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8RiwgST4oKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0odGhpcy5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKHRoaXMuZmFicmljYXRlSXRlbVR5cGUpXHJcbiAgICAgICAgICAgIC53aXRoQWN0b3IodGhpcy5hY3RvcilcclxuICAgICAgICAgICAgLndpdGhJdGVtcyh0aGlzLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aEl0ZW1zKG90aGVyLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aFRvdGFsUXVhbnRpdHkodGhpcy50b3RhbFF1YW50aXR5ICsgb3RoZXIudG90YWxRdWFudGl0eSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdG9yKCk6IEFjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGl0ZW1zT2ZUeXBlKCk6IElbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zT2ZUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpdGVtc09mVHlwZSh2YWx1ZTogSVtdKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXNPZlR5cGUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG90YWxRdWFudGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbFF1YW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0b3RhbFF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl90b3RhbFF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW0oKTogRiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhYnJpY2F0ZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW1UeXBlKCk6IEZhYnJpY2F0ZUl0ZW1UeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRlSXRlbVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbnZlbnRvcnlSZWNvcmQge1xyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXI8RiBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0sIEkgZXh0ZW5kcyBJdGVtPiB7XHJcbiAgICAgICAgcHVibGljIGFjdG9yITogQWN0b3I7XHJcbiAgICAgICAgcHVibGljIGl0ZW1zT2ZUeXBlOiBJW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRlSXRlbSE6IEY7XHJcbiAgICAgICAgcHVibGljIHRvdGFsUXVhbnRpdHkhOiBudW1iZXI7XHJcbiAgICAgICAgcHVibGljIGZhYnJpY2F0ZUl0ZW1UeXBlOiBGYWJyaWNhdGVJdGVtVHlwZTtcclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhBY3Rvcih2YWx1ZTogQWN0b3IpOiBCdWlsZGVyPEYsIEk+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3RvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoSXRlbSh2YWx1ZTogSSk6IEJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zT2ZUeXBlLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoSXRlbXModmFsdWU6IElbXSk6IEJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zT2ZUeXBlLnB1c2goLi4udmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRmFicmljYXRlSXRlbSh2YWx1ZTogRik6IEJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgICAgICB0aGlzLmZhYnJpY2F0ZUl0ZW0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFRvdGFsUXVhbnRpdHkodmFsdWU6IG51bWJlcik6IEJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsUXVhbnRpdHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKHZhbHVlOiBGYWJyaWNhdGVJdGVtVHlwZSk6IEJ1aWxkZXI8RiwgST4ge1xyXG4gICAgICAgICAgICB0aGlzLmZhYnJpY2F0ZUl0ZW1UeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCk6IEludmVudG9yeVJlY29yZDxGLCBJPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5UmVjb3JkKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7SW52ZW50b3J5UmVjb3JkfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/InventoryRecord.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingChatMessage.ts":
/*!******************************************************!*\
  !*** ./src/scripts/interface/CraftingChatMessage.ts ***!
  \******************************************************/
/*! exports provided: CraftingChatMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingChatMessage\", function() { return CraftingChatMessage; });\n/* harmony import */ var _core_FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n\r\nclass CraftingChatMessage {\r\n    constructor(cardTitle, cardContent, cardFooterParts, addedItems, cardImageUrl, cardImageTitle) {\r\n        this._cardTitle = cardTitle;\r\n        this._cardContent = cardContent;\r\n        this._addedItems = addedItems;\r\n        this._cardFooterParts = cardFooterParts;\r\n        this._cardImageUrl = cardImageUrl;\r\n        this._cardImageTitle = cardImageTitle;\r\n    }\r\n    static fromFabricationError(error) {\r\n        return new CraftingChatMessage('Crafting error', error.message, [], [], CraftingChatMessage._craftingFailureIconUrl, 'Crafting ');\r\n    }\r\n    static fromUnexpectedError(error) {\r\n        return new CraftingChatMessage('Something went wrong', error.message, [], [], CraftingChatMessage._unexpectedErrorIconUrl, 'Oops!');\r\n    }\r\n    static fromFabricationOutcome(outcome) {\r\n        const footerParts = outcome.removedComponents && outcome.removedComponents.length > 0 ? ['Removed:'].concat(outcome.removedComponents) : ['No components were removed'];\r\n        const cardImageUrl = outcome.type === _core_FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].SUCCESS ? CraftingChatMessage.randomCardImageUrl : CraftingChatMessage._craftingFailureIconUrl;\r\n        return new CraftingChatMessage(outcome.title, outcome.failureDetails, footerParts, outcome.addedItems, cardImageUrl);\r\n    }\r\n    get cardImageUrl() {\r\n        return this._cardImageUrl;\r\n    }\r\n    static get randomCardImageUrl() {\r\n        const selectedImageIndex = Math.floor(Math.random() * CraftingChatMessage._defaultImages.length);\r\n        return CraftingChatMessage._defaultImages[selectedImageIndex];\r\n    }\r\n    get cardImageTitle() {\r\n        if (this._cardImageTitle) {\r\n            return this._cardImageTitle;\r\n        }\r\n        return 'Fabricate Crafting';\r\n    }\r\n    get cardTitle() {\r\n        return this._cardTitle;\r\n    }\r\n    get footerParts() {\r\n        return this._cardFooterParts;\r\n    }\r\n    get description() {\r\n        return this._cardContent;\r\n    }\r\n    get results() {\r\n        return this._addedItems;\r\n    }\r\n    get hasResults() {\r\n        return this._addedItems && this._addedItems.length > 0;\r\n    }\r\n}\r\nCraftingChatMessage._unexpectedErrorIconUrl = 'modules/fabricate/assets/caution.svg';\r\nCraftingChatMessage._craftingFailureIconUrl = 'modules/fabricate/assets/fabricate-error.png';\r\nCraftingChatMessage._fabricateFireIconUrl = 'modules/fabricate/assets/fabricate-fire.png';\r\nCraftingChatMessage._fabricateEarthIconUrl = 'modules/fabricate/assets/fabricate-earth.png';\r\nCraftingChatMessage._fabricateWaterIconUrl = 'modules/fabricate/assets/fabricate-water.png';\r\nCraftingChatMessage._fabricateAirIconUrl = 'modules/fabricate/assets/fabricate-air.png';\r\nCraftingChatMessage._defaultImages = [\r\n    CraftingChatMessage._fabricateFireIconUrl,\r\n    CraftingChatMessage._fabricateEarthIconUrl,\r\n    CraftingChatMessage._fabricateWaterIconUrl,\r\n    CraftingChatMessage._fabricateAirIconUrl\r\n];\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdDaGF0TWVzc2FnZS50cz83N2M3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUEyRTtBQUkzRSxNQUFNLG1CQUFtQjtJQXNCckIsWUFBWSxTQUFpQixFQUNqQixXQUFtQixFQUNuQixlQUF5QixFQUN6QixVQUEyQyxFQUMzQyxZQUFxQixFQUNyQixjQUF1QjtRQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztRQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQztRQUNoQyxJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZUFBZSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDO0lBQzFDLENBQUM7SUFFTSxNQUFNLENBQUMsb0JBQW9CLENBQUMsS0FBb0I7UUFDbkQsT0FBTyxJQUFJLG1CQUFtQixDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyx1QkFBdUIsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN0SSxDQUFDO0lBRUQsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQVk7UUFDbkMsT0FBTyxJQUFJLG1CQUFtQixDQUFDLHNCQUFzQixFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyx1QkFBdUIsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4SSxDQUFDO0lBRU0sTUFBTSxDQUFDLHNCQUFzQixDQUFDLE9BQTJCO1FBQzVELE1BQU0sV0FBVyxHQUFhLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxPQUFPLENBQUMsaUJBQWlCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQztRQUNsTCxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsSUFBSSxLQUFLLG9FQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsdUJBQXVCLENBQUM7UUFDakosT0FBTyxJQUFJLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLGNBQWMsRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN6SCxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFFRCxNQUFNLEtBQUssa0JBQWtCO1FBQ3pCLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsbUJBQW1CLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pHLE9BQU8sbUJBQW1CLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN0QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7U0FDL0I7UUFDRCxPQUFPLG9CQUFvQixDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxVQUFVO0lBQzFCLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLE9BQU87UUFDUCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDM0QsQ0FBQzs7QUFsRnVCLDJDQUF1QixHQUFHLHNDQUFzQyxDQUFDO0FBQ2pFLDJDQUF1QixHQUFHLDhDQUE4QyxDQUFDO0FBQ3pFLHlDQUFxQixHQUFHLDZDQUE2QyxDQUFDO0FBQ3RFLDBDQUFzQixHQUFHLDhDQUE4QyxDQUFDO0FBQ3hFLDBDQUFzQixHQUFHLDhDQUE4QyxDQUFDO0FBQ3hFLHdDQUFvQixHQUFHLDRDQUE0QyxDQUFDO0FBQ3BFLGtDQUFjLEdBQWE7SUFDL0MsbUJBQW1CLENBQUMscUJBQXFCO0lBQ3pDLG1CQUFtQixDQUFDLHNCQUFzQjtJQUMxQyxtQkFBbUIsQ0FBQyxzQkFBc0I7SUFDMUMsbUJBQW1CLENBQUMsb0JBQW9CO0NBQzNDLENBQUM7QUEyRXNCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvaW50ZXJmYWNlL0NyYWZ0aW5nQ2hhdE1lc3NhZ2UudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0aW9uT3V0Y29tZSwgT3V0Y29tZVR5cGV9IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9ufSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGlvbkFjdGlvblwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nRXJyb3J9IGZyb20gXCIuLi9lcnJvci9DcmFmdGluZ0Vycm9yXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ0NoYXRNZXNzYWdlIHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfdW5leHBlY3RlZEVycm9ySWNvblVybCA9ICdtb2R1bGVzL2ZhYnJpY2F0ZS9hc3NldHMvY2F1dGlvbi5zdmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2NyYWZ0aW5nRmFpbHVyZUljb25VcmwgPSAnbW9kdWxlcy9mYWJyaWNhdGUvYXNzZXRzL2ZhYnJpY2F0ZS1lcnJvci5wbmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2ZhYnJpY2F0ZUZpcmVJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtZmlyZS5wbmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2ZhYnJpY2F0ZUVhcnRoSWNvblVybCA9ICdtb2R1bGVzL2ZhYnJpY2F0ZS9hc3NldHMvZmFicmljYXRlLWVhcnRoLnBuZyc7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfZmFicmljYXRlV2F0ZXJJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtd2F0ZXIucG5nJztcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9mYWJyaWNhdGVBaXJJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtYWlyLnBuZyc7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfZGVmYXVsdEltYWdlczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fZmFicmljYXRlRmlyZUljb25VcmwsXHJcbiAgICAgICAgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fZmFicmljYXRlRWFydGhJY29uVXJsLFxyXG4gICAgICAgIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX2ZhYnJpY2F0ZVdhdGVySWNvblVybCxcclxuICAgICAgICBDcmFmdGluZ0NoYXRNZXNzYWdlLl9mYWJyaWNhdGVBaXJJY29uVXJsXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRUaXRsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2FyZENvbnRlbnQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRGb290ZXJQYXJ0czogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hZGRlZEl0ZW1zOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jYXJkSW1hZ2VVcmw6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRJbWFnZVRpdGxlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2FyZFRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBjYXJkQ29udGVudDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgY2FyZEZvb3RlclBhcnRzOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgICAgIGFkZGVkSXRlbXM/OiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10sXHJcbiAgICAgICAgICAgICAgICBjYXJkSW1hZ2VVcmw/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBjYXJkSW1hZ2VUaXRsZT86IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUaXRsZSA9IGNhcmRUaXRsZTtcclxuICAgICAgICB0aGlzLl9jYXJkQ29udGVudCA9IGNhcmRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2FkZGVkSXRlbXMgPSBhZGRlZEl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2NhcmRGb290ZXJQYXJ0cyA9IGNhcmRGb290ZXJQYXJ0cztcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2VVcmwgPSBjYXJkSW1hZ2VVcmw7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlVGl0bGUgPSBjYXJkSW1hZ2VUaXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GYWJyaWNhdGlvbkVycm9yKGVycm9yOiBDcmFmdGluZ0Vycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NoYXRNZXNzYWdlKCdDcmFmdGluZyBlcnJvcicsIGVycm9yLm1lc3NhZ2UsIFtdLCBbXSwgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fY3JhZnRpbmdGYWlsdXJlSWNvblVybCwgJ0NyYWZ0aW5nICcpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tVW5leHBlY3RlZEVycm9yKGVycm9yOiBFcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdDaGF0TWVzc2FnZSgnU29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnJvci5tZXNzYWdlLCBbXSwgW10sIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX3VuZXhwZWN0ZWRFcnJvckljb25VcmwsICdPb3BzIScpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUZhYnJpY2F0aW9uT3V0Y29tZShvdXRjb21lOiBGYWJyaWNhdGlvbk91dGNvbWUpOiBDcmFmdGluZ0NoYXRNZXNzYWdlIHtcclxuICAgICAgICBjb25zdCBmb290ZXJQYXJ0czogc3RyaW5nW10gPSBvdXRjb21lLnJlbW92ZWRDb21wb25lbnRzICYmIG91dGNvbWUucmVtb3ZlZENvbXBvbmVudHMubGVuZ3RoID4gMCA/IFsnUmVtb3ZlZDonXS5jb25jYXQob3V0Y29tZS5yZW1vdmVkQ29tcG9uZW50cykgOiBbJ05vIGNvbXBvbmVudHMgd2VyZSByZW1vdmVkJ107XHJcbiAgICAgICAgY29uc3QgY2FyZEltYWdlVXJsID0gb3V0Y29tZS50eXBlID09PSBPdXRjb21lVHlwZS5TVUNDRVNTID8gQ3JhZnRpbmdDaGF0TWVzc2FnZS5yYW5kb21DYXJkSW1hZ2VVcmwgOiBDcmFmdGluZ0NoYXRNZXNzYWdlLl9jcmFmdGluZ0ZhaWx1cmVJY29uVXJsO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdDaGF0TWVzc2FnZShvdXRjb21lLnRpdGxlLCBvdXRjb21lLmZhaWx1cmVEZXRhaWxzLCBmb290ZXJQYXJ0cywgb3V0Y29tZS5hZGRlZEl0ZW1zLCBjYXJkSW1hZ2VVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjYXJkSW1hZ2VVcmwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZVVybDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IHJhbmRvbUNhcmRJbWFnZVVybCgpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZEltYWdlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDcmFmdGluZ0NoYXRNZXNzYWdlLl9kZWZhdWx0SW1hZ2VzLmxlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX2RlZmF1bHRJbWFnZXNbc2VsZWN0ZWRJbWFnZUluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FyZEltYWdlVGl0bGUoKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FyZEltYWdlVGl0bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZVRpdGxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ0ZhYnJpY2F0ZSBDcmFmdGluZyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNhcmRUaXRsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkVGl0bGVcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9vdGVyUGFydHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRGb290ZXJQYXJ0cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZXN1bHRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRlZEl0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNSZXN1bHRzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRlZEl0ZW1zICYmIHRoaXMuX2FkZGVkSXRlbXMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDaGF0TWVzc2FnZX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingChatMessage.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTab.ts":
/*!**********************************************!*\
  !*** ./src/scripts/interface/CraftingTab.ts ***!
  \**********************************************/
/*! exports provided: CraftingTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTab\", function() { return CraftingTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dnd5e/Inventory5E */ \"./src/scripts/dnd5e/Inventory5E.ts\");\n/* harmony import */ var _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingTabData */ \"./src/scripts/interface/CraftingTabData.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass CraftingTab {\r\n    constructor(actorApplication, actor) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = actorApplication;\r\n        this._actor = actor;\r\n        let inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n        if (inventory) {\r\n            this._inventory = inventory;\r\n        }\r\n        else {\r\n            inventory = new _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__[\"Inventory5E\"](actor);\r\n            _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.addFor(actor.id, inventory);\r\n            this._inventory = inventory;\r\n        }\r\n    }\r\n    static bind(actorApplication, sheetHtml, eventData) {\r\n        // @ts-ignore\r\n        const actor = game.actors.get(eventData.actor._id);\r\n        if (!game.user.isGM || !actor.owner) {\r\n            return;\r\n        }\r\n        let tab = CraftingTab.tabs.get(actorApplication.id);\r\n        if (!tab) {\r\n            tab = new CraftingTab(actorApplication, actor);\r\n            CraftingTab.tabs.set(actorApplication.id, tab);\r\n        }\r\n        tab.init(sheetHtml);\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToCharacterSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const craftingTabDTO = new _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__[\"CraftingTabData\"](_application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getAllSystems(), this._inventory, this._actor);\r\n            yield craftingTabDTO.init();\r\n            let template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.craftingTab, craftingTabDTO);\r\n            let element = this._sheetHtml.find('.crafting-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-crafting').append(template);\r\n            }\r\n            this.handleActorSheetEvents(craftingTabDTO);\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(CraftingTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToCharacterSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($('<a class=\"item fabricate-crafting\" data-tab=\"fabricate-crafting\">Crafting</a>'));\r\n        $(sheetHtml.find(`.sheet-body`)).append($('<div class=\"tab fabricate-crafting\" data-group=\"primary\" data-tab=\"fabricate-crafting\"></div>'));\r\n    }\r\n    handleActorSheetEvents(craftingTabDTO) {\r\n        this._sheetHtml.find('.add-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            if (!hopperContentsForSystem) {\r\n                hopperContentsForSystem = [];\r\n            }\r\n            const component = hopperContentsForSystem.find((item) => item.entryId === componentId);\r\n            if (!component) {\r\n                const component = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId).getComponentByPartId(componentId);\r\n                hopperContentsForSystem.push({ name: component.name, quantity: 1, imageUrl: component.imageUrl, entryId: component.partId });\r\n            }\r\n            else {\r\n                component.quantity = component.quantity + 1;\r\n            }\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, hopperContentsForSystem);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.remove-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            const matchingRecord = hopperContentsForSystem.find((recordData) => recordData.entryId === componentId);\r\n            matchingRecord.quantity = matchingRecord.quantity - 1;\r\n            const nonZeroRecords = hopperContentsForSystem.filter((recordData) => recordData.quantity > 0);\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, nonZeroRecords);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.clear-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.craft-from-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            const hopperContents = craftingTabDTO.inventory.preparedComponents;\r\n            if (!hopperContents || hopperContents.length === 0) {\r\n                return;\r\n            }\r\n            console.log(`Craft for system ${craftingSystemId} with ${hopperContents.length} components`);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId);\r\n            const craftingComponents = hopperContents.map((hopperItem) => craftingSystem.getComponentByPartId(hopperItem.entryId));\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            yield craftingSystem.craftWithComponents(this._actor, _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id), craftingComponents);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedSystem\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const systemIdToActivate = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, systemIdToActivate);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedRecipe\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const selectedRecipeId = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe, selectedRecipeId);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.actor-recipe-crafting').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const recipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByPartId(recipeId);\r\n            const recipe = craftingSystem.getRecipeByPartId(recipeId);\r\n            const inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id);\r\n            yield craftingSystem.craft(this._actor, inventory, recipe);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-crafting[data-tab=\"${CraftingTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nCraftingTab.tabs = new Map();\r\nCraftingTab.tabKey = 'fabricate-crafting';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWIudHM/YzFlZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFFVTtBQUNDO0FBSXFCO0FBRXZFLE1BQU0sV0FBVztJQXdCYixZQUFZLGdCQUFxQixFQUFFLEtBQXdCO1FBbEJuRCxxQkFBZ0IsR0FBWSxLQUFLLENBQUM7UUFtQnRDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQztRQUMxQyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLFNBQVMsR0FBRyx5RUFBb0IsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsRSxJQUFJLFNBQVMsRUFBRTtZQUNYLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1NBQy9CO2FBQU07WUFDSCxTQUFTLEdBQUcsSUFBSSw4REFBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLHlFQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztTQUMvQjtJQUNMLENBQUM7SUF6Qk0sTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBcUIsRUFBRSxTQUFzQixFQUFFLFNBQWM7UUFDNUUsYUFBYTtRQUNiLE1BQU0sS0FBSyxHQUFzQixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUc7WUFDbEMsT0FBTztTQUNWO1FBQ0QsSUFBSSxHQUFHLEdBQWdCLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGdC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aUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRCxNQUFNLFNBQVMsR0FBRyx5RUFBb0IsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUUsTUFBTSxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFDN0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLENBQUMsRUFBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLGFBQWE7UUFDakIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hILENBQUM7O0FBNUt1QixnQkFBSSxHQUE2QixJQUFJLEdBQUcsRUFBRSxDQUFDO0FBT3BELGtCQUFNLEdBQVcsb0JBQW9CLENBQUM7QUF3S3JDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvaW50ZXJmYWNlL0NyYWZ0aW5nVGFiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeTVFfSBmcm9tIFwiLi4vZG5kNWUvSW52ZW50b3J5NUVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1RhYkRhdGF9IGZyb20gXCIuL0NyYWZ0aW5nVGFiRGF0YVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZERhdGF9IGZyb20gXCIuL0ludGVyZmFjZURhdGFUeXBlc1wiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1RhYiB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB0YWJzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1RhYj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hlZXRBcHBsaWNhdGlvbjogYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hlZXRIdG1sOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+O1xyXG4gICAgcHJpdmF0ZSBfc3VwcHJlc3NlZEluTmF2OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hY3RvcjogQWN0b3I8QWN0b3IuRGF0YT47XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0YWJLZXk6IHN0cmluZyA9ICdmYWJyaWNhdGUtY3JhZnRpbmcnO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYmluZChhY3RvckFwcGxpY2F0aW9uOiBhbnksIHNoZWV0SHRtbDogSFRNTEVsZW1lbnQsIGV2ZW50RGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGFjdG9yOiBBY3RvcjxBY3Rvci5EYXRhPiA9IGdhbWUuYWN0b3JzLmdldChldmVudERhdGEuYWN0b3IuX2lkKTtcclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNIHx8ICFhY3Rvci5vd25lciApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGFiOiBDcmFmdGluZ1RhYiA9IENyYWZ0aW5nVGFiLnRhYnMuZ2V0KGFjdG9yQXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgIGlmICghdGFiKSB7XHJcbiAgICAgICAgICAgIHRhYiA9IG5ldyBDcmFmdGluZ1RhYihhY3RvckFwcGxpY2F0aW9uLCBhY3Rvcik7XHJcbiAgICAgICAgICAgIENyYWZ0aW5nVGFiLnRhYnMuc2V0KGFjdG9yQXBwbGljYXRpb24uaWQsIHRhYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhYi5pbml0KHNoZWV0SHRtbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWN0b3JBcHBsaWNhdGlvbjogYW55LCBhY3RvcjogQWN0b3I8QWN0b3IuRGF0YT4pIHtcclxuICAgICAgICB0aGlzLl9zaGVldEFwcGxpY2F0aW9uID0gYWN0b3JBcHBsaWNhdGlvbjtcclxuICAgICAgICB0aGlzLl9hY3RvciA9IGFjdG9yO1xyXG4gICAgICAgIGxldCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgIGlmIChpbnZlbnRvcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gaW52ZW50b3J5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeSA9IG5ldyBJbnZlbnRvcnk1RShhY3Rvcik7XHJcbiAgICAgICAgICAgIEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmFkZEZvcihhY3Rvci5pZCwgaW52ZW50b3J5KTtcclxuICAgICAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gaW52ZW50b3J5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXQoc2hlZXRIdG1sOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwgPSBzaGVldEh0bWw7XHJcbiAgICAgICAgdGhpcy5hZGRUYWJUb0NoYXJhY3RlclNoZWV0KHNoZWV0SHRtbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlcigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBjcmFmdGluZ1RhYkRUTyA9IG5ldyBDcmFmdGluZ1RhYkRhdGEoRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRBbGxTeXN0ZW1zKCksIHRoaXMuX2ludmVudG9yeSwgdGhpcy5fYWN0b3IpO1xyXG4gICAgICAgIGF3YWl0IGNyYWZ0aW5nVGFiRFRPLmluaXQoKTtcclxuICAgICAgICBsZXQgdGVtcGxhdGU6IEhUTUxFbGVtZW50ID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nVGFiLCBjcmFmdGluZ1RhYkRUTyk7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNyYWZ0aW5nLXRhYi1jb250ZW50Jyk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy50YWIuZmFicmljYXRlLWNyYWZ0aW5nJykuYXBwZW5kKHRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQWN0b3JTaGVldEV2ZW50cyhjcmFmdGluZ1RhYkRUTyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zdXBwcmVzc2VkSW5OYXYgJiYgIXRoaXMuaXNBY3RpdmVJbk5hdigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NoZWV0QXBwbGljYXRpb24uX3RhYnNbMF0uYWN0aXZhdGUoQ3JhZnRpbmdUYWIudGFiS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFRhYlRvQ2hhcmFjdGVyU2hlZXQoc2hlZXRIdG1sOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0YWJzID0gc2hlZXRIdG1sLmZpbmQoYC50YWJzW2RhdGEtZ3JvdXA9XCJwcmltYXJ5XCJdYCk7XHJcbiAgICAgICAgdGFicy5hcHBlbmQoJChcclxuICAgICAgICAgICAgJzxhIGNsYXNzPVwiaXRlbSBmYWJyaWNhdGUtY3JhZnRpbmdcIiBkYXRhLXRhYj1cImZhYnJpY2F0ZS1jcmFmdGluZ1wiPkNyYWZ0aW5nPC9hPidcclxuICAgICAgICApKTtcclxuXHJcbiAgICAgICAgJChzaGVldEh0bWwuZmluZChgLnNoZWV0LWJvZHlgKSkuYXBwZW5kKCQoXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGFiIGZhYnJpY2F0ZS1jcmFmdGluZ1wiIGRhdGEtZ3JvdXA9XCJwcmltYXJ5XCIgZGF0YS10YWI9XCJmYWJyaWNhdGUtY3JhZnRpbmdcIj48L2Rpdj4nXHJcbiAgICAgICAgKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVBY3RvclNoZWV0RXZlbnRzKGNyYWZ0aW5nVGFiRFRPOiBDcmFmdGluZ1RhYkRhdGEpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5hZGQtY3JhZnRpbmctY29tcG9uZW50JykuY2xpY2soYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtSWQ6IHN0cmluZyA9IGNyYWZ0aW5nVGFiRFRPLmNyYWZ0aW5nLnNlbGVjdGVkU3lzdGVtSWQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW06IEludmVudG9yeVJlY29yZERhdGFbXSA9IHRoaXMuX2FjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCk7XHJcbiAgICAgICAgICAgIGlmICghaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0uZmluZCgoaXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gaXRlbS5lbnRyeUlkID09PSBjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICghY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50ID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KGNyYWZ0aW5nU3lzdGVtSWQpLmdldENvbXBvbmVudEJ5UGFydElkKGNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgICAgIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtLnB1c2goe25hbWU6IGNvbXBvbmVudC5uYW1lLCBxdWFudGl0eTogMSwgaW1hZ2VVcmw6IGNvbXBvbmVudC5pbWFnZVVybCwgZW50cnlJZDogY29tcG9uZW50LnBhcnRJZH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucXVhbnRpdHkgPSBjb21wb25lbnQucXVhbnRpdHkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmAsIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCcucmVtb3ZlLWNyYWZ0aW5nLWNvbXBvbmVudCcpLmNsaWNrKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudC1pZCcpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUlkOiBzdHJpbmcgPSBjcmFmdGluZ1RhYkRUTy5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhW10gPSB0aGlzLl9hY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmApO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtLmZpbmQoKHJlY29yZERhdGE6IEludmVudG9yeVJlY29yZERhdGEpID0+IHJlY29yZERhdGEuZW50cnlJZCA9PT0gY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICBtYXRjaGluZ1JlY29yZC5xdWFudGl0eSA9IG1hdGNoaW5nUmVjb3JkLnF1YW50aXR5IC0gMTtcclxuICAgICAgICAgICAgY29uc3Qgbm9uWmVyb1JlY29yZHMgPSBob3BwZXJDb250ZW50c0ZvclN5c3RlbS5maWx0ZXIoKHJlY29yZERhdGE6IEludmVudG9yeVJlY29yZERhdGEpID0+IHJlY29yZERhdGEucXVhbnRpdHkgPiAwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCwgbm9uWmVyb1JlY29yZHMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5jbGVhci1jb21wb25lbnRzLmNyYWZ0LWJ1dHRvbicpLmNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW1JZDogc3RyaW5nID0gY3JhZnRpbmdUYWJEVE8uY3JhZnRpbmcuc2VsZWN0ZWRTeXN0ZW1JZDtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYWN0b3IudW5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5jcmFmdC1mcm9tLWNvbXBvbmVudHMuY3JhZnQtYnV0dG9uJykuY2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUlkOiBzdHJpbmcgPSBjcmFmdGluZ1RhYkRUTy5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkO1xyXG4gICAgICAgICAgICBjb25zdCBob3BwZXJDb250ZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdID0gY3JhZnRpbmdUYWJEVE8uaW52ZW50b3J5LnByZXBhcmVkQ29tcG9uZW50cztcclxuXHJcbiAgICAgICAgICAgIGlmICghaG9wcGVyQ29udGVudHMgfHwgaG9wcGVyQ29udGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmFmdCBmb3Igc3lzdGVtICR7Y3JhZnRpbmdTeXN0ZW1JZH0gd2l0aCAke2hvcHBlckNvbnRlbnRzLmxlbmd0aH0gY29tcG9uZW50c2ApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KGNyYWZ0aW5nU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudHMgPSBob3BwZXJDb250ZW50cy5tYXAoKGhvcHBlckl0ZW06IEludmVudG9yeVJlY29yZERhdGEpID0+IGNyYWZ0aW5nU3lzdGVtLmdldENvbXBvbmVudEJ5UGFydElkKGhvcHBlckl0ZW0uZW50cnlJZCkpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYWN0b3IudW5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmApO1xyXG4gICAgICAgICAgICBhd2FpdCBjcmFmdGluZ1N5c3RlbS5jcmFmdFdpdGhDb21wb25lbnRzKHRoaXMuX2FjdG9yLCBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IodGhpcy5fYWN0b3IuaWQpLCBjcmFmdGluZ0NvbXBvbmVudHMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJ3NlbGVjdFtuYW1lPVwiZmFicmljYXRlLmNyYWZ0aW5nLnNlbGVjdGVkU3lzdGVtXCJdJykuY2hhbmdlKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbUlkVG9BY3RpdmF0ZTogc3RyaW5nID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSwgc3lzdGVtSWRUb0FjdGl2YXRlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCdzZWxlY3RbbmFtZT1cImZhYnJpY2F0ZS5jcmFmdGluZy5zZWxlY3RlZFJlY2lwZVwiXScpLmNoYW5nZShhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFJlY2lwZUlkOiBzdHJpbmcgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZFJlY2lwZSwgc2VsZWN0ZWRSZWNpcGVJZCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmFjdG9yLXJlY2lwZS1jcmFmdGluZycpLmNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVjaXBlSWQgPSBhd2FpdCB0aGlzLl9hY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRSZWNpcGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW0gPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldFN5c3RlbUJ5UGFydElkKHJlY2lwZUlkKTtcclxuICAgICAgICAgICAgY29uc3QgcmVjaXBlID0gY3JhZnRpbmdTeXN0ZW0uZ2V0UmVjaXBlQnlQYXJ0SWQocmVjaXBlSWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IodGhpcy5fYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBhd2FpdCBjcmFmdGluZ1N5c3RlbS5jcmFmdCh0aGlzLl9hY3RvciwgaW52ZW50b3J5LCByZWNpcGUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQWN0aXZlSW5OYXYoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICQodGhpcy5fc2hlZXRIdG1sKS5maW5kKGBhLmZhYnJpY2F0ZS1jcmFmdGluZ1tkYXRhLXRhYj1cIiR7Q3JhZnRpbmdUYWIudGFiS2V5fVwiXWApLmhhc0NsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1RhYn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTab.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTabData.ts":
/*!**************************************************!*\
  !*** ./src/scripts/interface/CraftingTabData.ts ***!
  \**************************************************/
/*! exports provided: CraftingTabData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTabData\", function() { return CraftingTabData; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass CraftingTabData {\r\n    constructor(craftingSystems, inventory, actor) {\r\n        this._craftingSystems = craftingSystems;\r\n        this._inventory = inventory;\r\n        this._actor = actor;\r\n    }\r\n    get crafting() {\r\n        return this._craftingSystemData;\r\n    }\r\n    get recipeCrafting() {\r\n        return this._recipeData;\r\n    }\r\n    get inventory() {\r\n        return this._inventoryContents;\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._craftingSystemData = yield this.prepareCraftingSystemData(this._craftingSystems, this._actor);\r\n            if (this._craftingSystemData.hasEnabledSystems) {\r\n                const selectedCraftingSystem = this._craftingSystems.find((system) => system.compendiumPackKey === this._craftingSystemData.selectedSystemId);\r\n                this._recipeData = yield this.prepareRecipeDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n                this._inventoryContents = this.prepareInventoryDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n            }\r\n        });\r\n    }\r\n    prepareCraftingSystemData(craftingSystems, actor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let enabledSystems = 0;\r\n            const craftingSystemsInfo = [];\r\n            const storedSystemId = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem);\r\n            craftingSystems.forEach((system) => {\r\n                if (system.enabled) {\r\n                    enabledSystems++;\r\n                }\r\n                craftingSystemsInfo.push({\r\n                    disabled: !system.enabled,\r\n                    compendiumPackKey: system.compendiumPackKey,\r\n                    name: system.name,\r\n                    selected: system.compendiumPackKey === storedSystemId\r\n                });\r\n            });\r\n            const hasEnabledSystems = enabledSystems > 0;\r\n            if (storedSystemId) {\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: storedSystemId\r\n                };\r\n            }\r\n            else if (hasEnabledSystems) {\r\n                const firstEnabledSystem = craftingSystemsInfo.find((systemInfo) => !systemInfo.disabled);\r\n                firstEnabledSystem.selected = true;\r\n                yield actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, firstEnabledSystem.compendiumPackKey);\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: firstEnabledSystem.compendiumPackKey\r\n                };\r\n            }\r\n        });\r\n    }\r\n    prepareRecipeDataForSystem(craftingSystem, actor, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const storedKnownRecipes = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.knownRecipesForSystem(craftingSystem.compendiumPackKey));\r\n            const knownRecipes = storedKnownRecipes ? storedKnownRecipes : [];\r\n            const enabledRecipes = new Map();\r\n            const disabledRecipes = [];\r\n            craftingSystem.recipes.forEach((recipe) => {\r\n                const isKnown = knownRecipes.includes(recipe.partId);\r\n                const isOwned = inventory.containsPart(recipe.partId);\r\n                const isCraftable = (isKnown || isOwned) ? inventory.hasAllIngredientsFor(recipe) : false;\r\n                if (isCraftable) {\r\n                    enabledRecipes.set(recipe.partId, {\r\n                        name: recipe.name,\r\n                        partId: recipe.partId,\r\n                        known: isKnown,\r\n                        owned: isOwned,\r\n                        craftable: isCraftable,\r\n                        selected: false\r\n                    });\r\n                }\r\n                else {\r\n                    disabledRecipes.push({\r\n                        name: recipe.name,\r\n                        partId: recipe.partId,\r\n                        known: isKnown,\r\n                        owned: isOwned,\r\n                        craftable: isCraftable,\r\n                        selected: false\r\n                    });\r\n                }\r\n            });\r\n            const storedRecipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            if (enabledRecipes.has(storedRecipeId)) {\r\n                enabledRecipes.get(storedRecipeId).selected = true;\r\n                return {\r\n                    recipes: Array.from(enabledRecipes.values()).concat(disabledRecipes),\r\n                    hasCraftableRecipe: true\r\n                };\r\n            }\r\n            else {\r\n                // await this._actor.unsetFlag(Properties.module.name, Properties.flagKeys.actor.selectedRecipe);\r\n                if (enabledRecipes.size === 0) {\r\n                    return {\r\n                        recipes: disabledRecipes,\r\n                        hasCraftableRecipe: false\r\n                    };\r\n                }\r\n                const craftableRecipes = Array.from(enabledRecipes.values());\r\n                const defaultRecipe = craftableRecipes[0];\r\n                defaultRecipe.selected = true;\r\n                //await this._actor.setFlag(Properties.module.name, Properties.flagKeys.actor.selectedRecipe, defaultRecipe.partId);\r\n                return {\r\n                    recipes: craftableRecipes.concat(disabledRecipes),\r\n                    hasCraftableRecipe: true\r\n                };\r\n            }\r\n        });\r\n    }\r\n    prepareInventoryDataForSystem(craftingSystem, actor, inventory) {\r\n        const inventoryContents = {\r\n            ownedComponents: [],\r\n            preparedComponents: []\r\n        };\r\n        inventory.components.filter((inventoryRecord) => (inventoryRecord.fabricateItem.systemId === craftingSystem.compendiumPackKey)\r\n            && (inventoryRecord.fabricateItem.essences && inventoryRecord.fabricateItem.essences.length > 0))\r\n            .forEach((inventoryRecord) => {\r\n            inventoryContents.ownedComponents.push({\r\n                name: inventoryRecord.fabricateItem.name,\r\n                entryId: inventoryRecord.fabricateItem.partId,\r\n                quantity: inventoryRecord.totalQuantity,\r\n                imageUrl: inventoryRecord.fabricateItem.imageUrl\r\n            });\r\n        });\r\n        const savedHopperContents = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.hopperForSystem(craftingSystem.compendiumPackKey));\r\n        if (savedHopperContents) {\r\n            inventoryContents.preparedComponents = savedHopperContents;\r\n            savedHopperContents.forEach((hopperItem) => {\r\n                const inventoryItem = inventoryContents.ownedComponents.find((inventoryItem) => inventoryItem.entryId === hopperItem.entryId);\r\n                if (inventoryItem) {\r\n                    inventoryItem.quantity = inventoryItem.quantity - hopperItem.quantity;\r\n                }\r\n            });\r\n            inventoryContents.ownedComponents = inventoryContents.ownedComponents.filter((inventoryItem) => inventoryItem.quantity > 0);\r\n        }\r\n        return inventoryContents;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJEYXRhLnRzPzIxMDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSXVDO0FBZXZDLE1BQU0sZUFBZTtJQVVqQixZQUFZLGVBQWlDLEVBQUUsU0FBK0IsRUFBRSxLQUFZO1FBQ3hGLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFDeEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ25DLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVLLElBQUk7O1lBQ04sSUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFcEcsSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUU7Z0JBQzVDLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQXNCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsS0FBSyxJQUFJLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFFOUosSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxzQkFBc0IsRUFBRSxJQUFJ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YWNlL0NyYWZ0aW5nVGFiRGF0YS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5fSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7XHJcbiAgICBDcmFmdGluZ1N5c3RlbURhdGEsXHJcbiAgICBDcmFmdGluZ1N5c3RlbUluZm8sXHJcbiAgICBJbnZlbnRvcnlSZWNvcmREYXRhLFxyXG4gICAgUmVjaXBlQ3JhZnRpbmdEYXRhLFxyXG4gICAgUmVjaXBlRGF0YVxyXG59IGZyb20gXCIuL0ludGVyZmFjZURhdGFUeXBlc1wiO1xyXG5cclxuaW50ZXJmYWNlIEludmVudG9yeUNvbnRlbnRzIHtcclxuICAgIG93bmVkQ29tcG9uZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdO1xyXG4gICAgcHJlcGFyZWRDb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmREYXRhW107XHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nVGFiRGF0YSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY3JhZnRpbmdTeXN0ZW1zOiBDcmFmdGluZ1N5c3RlbVtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaW52ZW50b3J5OiBJbnZlbnRvcnk8SXRlbS5EYXRhPjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdG9yOiBBY3RvcjtcclxuXHJcbiAgICBwcml2YXRlIF9jcmFmdGluZ1N5c3RlbURhdGE6IENyYWZ0aW5nU3lzdGVtRGF0YTtcclxuICAgIHByaXZhdGUgX3JlY2lwZURhdGE6IFJlY2lwZUNyYWZ0aW5nRGF0YTtcclxuICAgIHByaXZhdGUgX2ludmVudG9yeUNvbnRlbnRzOiBJbnZlbnRvcnlDb250ZW50cztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjcmFmdGluZ1N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtW10sIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4sIGFjdG9yOiBBY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtcyA9IGNyYWZ0aW5nU3lzdGVtcztcclxuICAgICAgICB0aGlzLl9pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3JhZnRpbmcoKTogQ3JhZnRpbmdTeXN0ZW1EYXRhIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZWNpcGVDcmFmdGluZygpOiBSZWNpcGVDcmFmdGluZ0RhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNpcGVEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbnZlbnRvcnkoKTogSW52ZW50b3J5Q29udGVudHMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZlbnRvcnlDb250ZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0b3IoKTogQWN0b3Ige1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtRGF0YSA9IGF3YWl0IHRoaXMucHJlcGFyZUNyYWZ0aW5nU3lzdGVtRGF0YSh0aGlzLl9jcmFmdGluZ1N5c3RlbXMsIHRoaXMuX2FjdG9yKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NyYWZ0aW5nU3lzdGVtRGF0YS5oYXNFbmFibGVkU3lzdGVtcykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENyYWZ0aW5nU3lzdGVtID0gdGhpcy5fY3JhZnRpbmdTeXN0ZW1zLmZpbmQoKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0pID0+IHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSA9PT0gdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhLnNlbGVjdGVkU3lzdGVtSWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVjaXBlRGF0YSA9IGF3YWl0IHRoaXMucHJlcGFyZVJlY2lwZURhdGFGb3JTeXN0ZW0oc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSwgdGhpcy5fYWN0b3IsIHRoaXMuX2ludmVudG9yeSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbnZlbnRvcnlDb250ZW50cyA9IHRoaXMucHJlcGFyZUludmVudG9yeURhdGFGb3JTeXN0ZW0oc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSx0aGlzLl9hY3RvciwgdGhpcy5faW52ZW50b3J5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcHJlcGFyZUNyYWZ0aW5nU3lzdGVtRGF0YShjcmFmdGluZ1N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtW10sIGFjdG9yOiBBY3Rvcik6IFByb21pc2U8Q3JhZnRpbmdTeXN0ZW1EYXRhPiB7XHJcbiAgICAgICAgbGV0IGVuYWJsZWRTeXN0ZW1zOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtc0luZm86IENyYWZ0aW5nU3lzdGVtSW5mb1tdID0gW107XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkU3lzdGVtSWQgPSBhY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSk7XHJcbiAgICAgICAgY3JhZnRpbmdTeXN0ZW1zLmZvckVhY2goKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHN5c3RlbS5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkU3lzdGVtcysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNyYWZ0aW5nU3lzdGVtc0luZm8ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogIXN5c3RlbS5lbmFibGVkLFxyXG4gICAgICAgICAgICAgICAgY29tcGVuZGl1bVBhY2tLZXk6IHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN5c3RlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSA9PT0gc3RvcmVkU3lzdGVtSWRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBoYXNFbmFibGVkU3lzdGVtczogYm9vbGVhbiA9IGVuYWJsZWRTeXN0ZW1zID4gMDtcclxuICAgICAgICBpZiAoc3RvcmVkU3lzdGVtSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbXM6IGNyYWZ0aW5nU3lzdGVtc0luZm8sXHJcbiAgICAgICAgICAgICAgICBoYXNFbmFibGVkU3lzdGVtczogaGFzRW5hYmxlZFN5c3RlbXMsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFN5c3RlbUlkOiBzdG9yZWRTeXN0ZW1JZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChoYXNFbmFibGVkU3lzdGVtcykge1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdEVuYWJsZWRTeXN0ZW0gPSBjcmFmdGluZ1N5c3RlbXNJbmZvLmZpbmQoKHN5c3RlbUluZm86IENyYWZ0aW5nU3lzdGVtSW5mbykgPT4gIXN5c3RlbUluZm8uZGlzYWJsZWQpO1xyXG4gICAgICAgICAgICBmaXJzdEVuYWJsZWRTeXN0ZW0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSwgZmlyc3RFbmFibGVkU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbXM6IGNyYWZ0aW5nU3lzdGVtc0luZm8sXHJcbiAgICAgICAgICAgICAgICBoYXNFbmFibGVkU3lzdGVtczogaGFzRW5hYmxlZFN5c3RlbXMsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFN5c3RlbUlkOiBmaXJzdEVuYWJsZWRTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwcmVwYXJlUmVjaXBlRGF0YUZvclN5c3RlbShjcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW0sIGFjdG9yOiBBY3RvciwgaW52ZW50b3J5OiBJbnZlbnRvcnk8SXRlbS5EYXRhPik6IFByb21pc2U8UmVjaXBlQ3JhZnRpbmdEYXRhPiB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkS25vd25SZWNpcGVzOiBzdHJpbmdbXSA9IGFjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5rbm93blJlY2lwZXNGb3JTeXN0ZW0oY3JhZnRpbmdTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXkpKTtcclxuICAgICAgICBjb25zdCBrbm93blJlY2lwZXM6IHN0cmluZ1tdID0gc3RvcmVkS25vd25SZWNpcGVzID8gc3RvcmVkS25vd25SZWNpcGVzIDogW107XHJcbiAgICAgICAgY29uc3QgZW5hYmxlZFJlY2lwZXM6IE1hcDxzdHJpbmcsIFJlY2lwZURhdGE+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbnN0IGRpc2FibGVkUmVjaXBlczogUmVjaXBlRGF0YVtdID0gW107XHJcbiAgICAgICAgY3JhZnRpbmdTeXN0ZW0ucmVjaXBlcy5mb3JFYWNoKChyZWNpcGU6IFJlY2lwZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0tub3duOiBib29sZWFuID0ga25vd25SZWNpcGVzLmluY2x1ZGVzKHJlY2lwZS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc093bmVkOiBib29sZWFuID0gaW52ZW50b3J5LmNvbnRhaW5zUGFydChyZWNpcGUucGFydElkKTtcclxuICAgICAgICAgICAgY29uc3QgaXNDcmFmdGFibGU6IGJvb2xlYW4gPSAoaXNLbm93biB8fCBpc093bmVkKSA/IGludmVudG9yeS5oYXNBbGxJbmdyZWRpZW50c0ZvcihyZWNpcGUpIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChpc0NyYWZ0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZFJlY2lwZXMuc2V0KHJlY2lwZS5wYXJ0SWQsIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByZWNpcGUubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0SWQ6IHJlY2lwZS5wYXJ0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAga25vd246IGlzS25vd24sXHJcbiAgICAgICAgICAgICAgICAgICAgb3duZWQ6IGlzT3duZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JhZnRhYmxlOiBpc0NyYWZ0YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRSZWNpcGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY2lwZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRJZDogcmVjaXBlLnBhcnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBrbm93bjogaXNLbm93bixcclxuICAgICAgICAgICAgICAgICAgICBvd25lZDogaXNPd25lZCxcclxuICAgICAgICAgICAgICAgICAgICBjcmFmdGFibGU6IGlzQ3JhZnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdG9yZWRSZWNpcGVJZDogc3RyaW5nID0gYXdhaXQgdGhpcy5fYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkUmVjaXBlKTtcclxuICAgICAgICBpZiAoZW5hYmxlZFJlY2lwZXMuaGFzKHN0b3JlZFJlY2lwZUlkKSkge1xyXG4gICAgICAgICAgICBlbmFibGVkUmVjaXBlcy5nZXQoc3RvcmVkUmVjaXBlSWQpLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlY2lwZXM6IEFycmF5LmZyb20oZW5hYmxlZFJlY2lwZXMudmFsdWVzKCkpLmNvbmNhdChkaXNhYmxlZFJlY2lwZXMpLFxyXG4gICAgICAgICAgICAgICAgaGFzQ3JhZnRhYmxlUmVjaXBlOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBhd2FpdCB0aGlzLl9hY3Rvci51bnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZFJlY2lwZSk7XHJcbiAgICAgICAgICAgIGlmIChlbmFibGVkUmVjaXBlcy5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2lwZXM6IGRpc2FibGVkUmVjaXBlcyxcclxuICAgICAgICAgICAgICAgICAgICBoYXNDcmFmdGFibGVSZWNpcGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY3JhZnRhYmxlUmVjaXBlczogUmVjaXBlRGF0YVtdID0gQXJyYXkuZnJvbShlbmFibGVkUmVjaXBlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRSZWNpcGU6IFJlY2lwZURhdGEgPSBjcmFmdGFibGVSZWNpcGVzWzBdO1xyXG4gICAgICAgICAgICBkZWZhdWx0UmVjaXBlLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy9hd2FpdCB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRSZWNpcGUsIGRlZmF1bHRSZWNpcGUucGFydElkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlY2lwZXM6IGNyYWZ0YWJsZVJlY2lwZXMuY29uY2F0KGRpc2FibGVkUmVjaXBlcyksXHJcbiAgICAgICAgICAgICAgICBoYXNDcmFmdGFibGVSZWNpcGU6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcmVwYXJlSW52ZW50b3J5RGF0YUZvclN5c3RlbShjcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW0sIGFjdG9yOiBBY3RvciwgaW52ZW50b3J5OiBJbnZlbnRvcnk8SXRlbS5EYXRhPik6IEludmVudG9yeUNvbnRlbnRzIHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlDb250ZW50czogSW52ZW50b3J5Q29udGVudHMgPSB7XHJcbiAgICAgICAgICAgIG93bmVkQ29tcG9uZW50czogW10sXHJcbiAgICAgICAgICAgIHByZXBhcmVkQ29tcG9uZW50czogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgaW52ZW50b3J5LmNvbXBvbmVudHMuZmlsdGVyKChpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IChpbnZlbnRvcnlSZWNvcmQuZmFicmljYXRlSXRlbS5zeXN0ZW1JZCA9PT0gY3JhZnRpbmdTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXkpXHJcbiAgICAgICAgICAgICAgICAmJiAoaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMgJiYgaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMubGVuZ3RoID4gMCkpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKChpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnZlbnRvcnlSZWNvcmQuZmFicmljYXRlSXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5SWQ6IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogaW52ZW50b3J5UmVjb3JkLnRvdGFsUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmw6IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLmltYWdlVXJsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRIb3BwZXJDb250ZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdID0gYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLmhvcHBlckZvclN5c3RlbShjcmFmdGluZ1N5c3RlbS5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgICAgIGlmIChzYXZlZEhvcHBlckNvbnRlbnRzKSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLnByZXBhcmVkQ29tcG9uZW50cyA9IHNhdmVkSG9wcGVyQ29udGVudHM7XHJcbiAgICAgICAgICAgIHNhdmVkSG9wcGVyQ29udGVudHMuZm9yRWFjaCgoaG9wcGVySXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5SXRlbSA9IGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5maW5kKChpbnZlbnRvcnlJdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhKSA9PiBpbnZlbnRvcnlJdGVtLmVudHJ5SWQgPT09IGhvcHBlckl0ZW0uZW50cnlJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludmVudG9yeUl0ZW0ucXVhbnRpdHkgPSBpbnZlbnRvcnlJdGVtLnF1YW50aXR5IC0gaG9wcGVySXRlbS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cyA9IGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5maWx0ZXIoKGludmVudG9yeUl0ZW06IEludmVudG9yeVJlY29yZERhdGEpID0+IGludmVudG9yeUl0ZW0ucXVhbnRpdHkgPiAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGludmVudG9yeUNvbnRlbnRzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nVGFiRGF0YX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTabData.ts\n");

/***/ }),

/***/ "./src/scripts/interface/ItemRecipeTab.ts":
/*!************************************************!*\
  !*** ./src/scripts/interface/ItemRecipeTab.ts ***!
  \************************************************/
/*! exports provided: ItemRecipeTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemRecipeTab\", function() { return ItemRecipeTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass ItemRecipeTab {\r\n    constructor(itemApplication) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = itemApplication;\r\n        this._item = itemApplication.item;\r\n        if (this._item.isOwned) {\r\n            this._owned = true;\r\n            const actorId = this._item.actor.id;\r\n            this._actor = game.actors.get(actorId);\r\n            this._inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inventories.getFor(this._actor.id);\r\n        }\r\n        else {\r\n            this._owned = false;\r\n        }\r\n        const partId = itemApplication.item.data.flags.fabricate.identity.partId;\r\n        this._craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByPartId(partId);\r\n        this._recipe = this._craftingSystem.getRecipeByPartId(partId);\r\n    }\r\n    static bind(itemApplication, sheetHtml) {\r\n        if (!itemApplication.item.data.flags.fabricate) {\r\n            return;\r\n        }\r\n        const fabricateFlags = itemApplication.item.data.flags.fabricate;\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.recipe) {\r\n            let tab = ItemRecipeTab.tabs.get(itemApplication.id);\r\n            if (!tab) {\r\n                tab = new ItemRecipeTab(itemApplication);\r\n                ItemRecipeTab.tabs.set(itemApplication.id, tab);\r\n            }\r\n            tab.init(sheetHtml);\r\n        }\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.component && fabricateFlags.component.essences && fabricateFlags.component.essences.length > 0) {\r\n            const essences = fabricateFlags.component.essences;\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(fabricateFlags.identity.systemId);\r\n            const essenceDescription = essences.map((essence) => craftingSystem.getEssenceBySlug(essence).icon)\r\n                .join(', ');\r\n            sheetHtml.find('ol.properties-list').append($(`<li>${essenceDescription}</li>`));\r\n        }\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToItemSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const isCraftable = this._owned ? this._inventory.hasAllIngredientsFor(this._recipe) : false;\r\n            const template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.recipeTab, { recipe: this._recipe, item: this._item, system: this._craftingSystem, isCraftable: isCraftable });\r\n            const element = this._sheetHtml.find('.recipe-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-recipe').append(template);\r\n            }\r\n            this.handleItemSheetEvents();\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(ItemRecipeTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToItemSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($(`<a class=\"item fabricate-recipe\" data-tab=\"${ItemRecipeTab.tabKey}\">Recipe</a>`));\r\n        $(sheetHtml.find(`.sheet-body`)).append($(`<div class=\"tab fabricate-recipe\" data-group=\"primary\" data-tab=\"${ItemRecipeTab.tabKey}\"></div>`));\r\n    }\r\n    handleItemSheetEvents() {\r\n        this._sheetHtml.find('.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            yield this._craftingSystem.craft(this._actor, this._inventory, this._recipe);\r\n            this._suppressedInNav = true;\r\n            yield this.render();\r\n        }));\r\n        this._sheetHtml.find('.open-compendium-item').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const partId = event.currentTarget.getAttribute('data-part-id');\r\n            const systemId = event.currentTarget.getAttribute('data-system-id');\r\n            const compendium = game.packs.get(systemId);\r\n            const entity = yield compendium.getEntity(partId);\r\n            if (!game.user.isGM && entity.permission === 0) {\r\n                console.warn('You are attempting to view the details of a Crafting Component that you have no ' +\r\n                    'access to. Ask your GM oran administrator to grant you access to the items in the compendium for ' +\r\n                    'the Crafting System \"' + this._craftingSystem.name + '\"');\r\n            }\r\n            entity.sheet.render(true);\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-recipe[data-tab=\"${ItemRecipeTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nItemRecipeTab.tabs = new Map();\r\nItemRecipeTab.tabKey = 'fabricate-recipe';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvSXRlbVJlY2lwZVRhYi50cz8wY2I3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFHZ0M7QUFJdkUsTUFBTSxhQUFhO0lBcUNmLFlBQVksZUFBb0I7UUF6QnhCLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQTBCdEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGVBQWUsQ0FBQztRQUN6QyxJQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUM7UUFDbEMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtZQUNwQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixNQUFNLE9BQU8sR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDNUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxJQUFJLENBQUMsVUFBVSxHQUFHLHlFQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUM3RTthQUFNO1lBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7U0FDdkI7UUFDRCxNQUFNLE1BQU0sR0FBVyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDakYsSUFBSSxDQUFDLGVBQWUsR0FBRyx5RUFBb0IsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFwQ00sTUFBTSxDQUFDLElB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RyxLQUFLLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNoRSxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3BFLE1BQU0sVUFBVSxHQUFlLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sTUFBTSxHQUFXLE1BQU0sVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLFVBQVUsS0FBSyxDQUFDLEVBQUU7Z0JBQzVDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0ZBQWtGO29CQUMzRixtR0FBbUc7b0JBQ25HLHVCQUF1QixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2FBQ2xFO1lBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxFQUFDLENBQUM7SUFFUCxDQUFDO0lBRU8sYUFBYTtRQUNqQixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxhQUFhLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEgsQ0FBQzs7QUFoSHVCLGtCQUFJLEdBQStCLElBQUksR0FBRyxFQUFFLENBQUM7QUFZdEQsb0JBQU0sR0FBVyxrQkFBa0IsQ0FBQztBQXVHakMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvSXRlbVJlY2lwZVRhYi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi4vY29yZS9SZWNpcGVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1N5c3RlbX0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuLi9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGF9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcblxyXG5jbGFzcyBJdGVtUmVjaXBlVGFiIHtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHRhYnM6IE1hcDxzdHJpbmcsIEl0ZW1SZWNpcGVUYWI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHByaXZhdGUgX3NoZWV0QXBwbGljYXRpb246IGFueTtcclxuICAgIHByaXZhdGUgX3NoZWV0SHRtbDogYW55O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaXRlbTogYW55O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3duZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWNpcGU6IFJlY2lwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NyYWZ0aW5nU3lzdGVtOiBDcmFmdGluZ1N5c3RlbTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT47XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5ICBfYWN0b3I6IEFjdG9yO1xyXG4gICAgcHJpdmF0ZSBfc3VwcHJlc3NlZEluTmF2OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0YWJLZXk6IHN0cmluZyA9ICdmYWJyaWNhdGUtcmVjaXBlJztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJpbmQoaXRlbUFwcGxpY2F0aW9uOiBhbnksIHNoZWV0SHRtbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpdGVtQXBwbGljYXRpb24uaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW1BcHBsaWNhdGlvbi5pdGVtLmRhdGEuZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLnJlY2lwZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFiOiBJdGVtUmVjaXBlVGFiID0gSXRlbVJlY2lwZVRhYi50YWJzLmdldChpdGVtQXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYikge1xyXG4gICAgICAgICAgICAgICAgdGFiID0gbmV3IEl0ZW1SZWNpcGVUYWIoaXRlbUFwcGxpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIudGFicy5zZXQoaXRlbUFwcGxpY2F0aW9uLmlkLCB0YWIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhYi5pbml0KHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLmNvbXBvbmVudCAmJiBmYWJyaWNhdGVGbGFncy5jb21wb25lbnQuZXNzZW5jZXMgJiYgZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXNzZW5jZXM6IHN0cmluZ1tdID0gZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZXNjcmlwdGlvbiA9IGVzc2VuY2VzLm1hcCgoZXNzZW5jZTogc3RyaW5nKSA9PiBjcmFmdGluZ1N5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2UpLmljb24pXHJcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKTtcclxuICAgICAgICAgICAgc2hlZXRIdG1sLmZpbmQoJ29sLnByb3BlcnRpZXMtbGlzdCcpLmFwcGVuZCgkKGA8bGk+JHtlc3NlbmNlRGVzY3JpcHRpb259PC9saT5gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1BcHBsaWNhdGlvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fc2hlZXRBcHBsaWNhdGlvbiA9IGl0ZW1BcHBsaWNhdGlvbjtcclxuICAgICAgICB0aGlzLl9pdGVtID0gaXRlbUFwcGxpY2F0aW9uLml0ZW07XHJcbiAgICAgICAgaWYgKHRoaXMuX2l0ZW0uaXNPd25lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vd25lZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdG9ySWQ6IHN0cmluZyA9IHRoaXMuX2l0ZW0uYWN0b3IuaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IodGhpcy5fYWN0b3IuaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcnRJZDogc3RyaW5nID0gaXRlbUFwcGxpY2F0aW9uLml0ZW0uZGF0YS5mbGFncy5mYWJyaWNhdGUuaWRlbnRpdHkucGFydElkO1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeVBhcnRJZChwYXJ0SWQpO1xyXG4gICAgICAgIHRoaXMuX3JlY2lwZSA9IHRoaXMuX2NyYWZ0aW5nU3lzdGVtLmdldFJlY2lwZUJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0KHNoZWV0SHRtbDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sID0gc2hlZXRIdG1sO1xyXG4gICAgICAgIHRoaXMuYWRkVGFiVG9JdGVtU2hlZXQoc2hlZXRIdG1sKTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGlzQ3JhZnRhYmxlID0gdGhpcy5fb3duZWQgPyB0aGlzLl9pbnZlbnRvcnkuaGFzQWxsSW5ncmVkaWVudHNGb3IodGhpcy5fcmVjaXBlKSA6IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlOiBIVE1MRWxlbWVudCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFByb3BlcnRpZXMubW9kdWxlLnRlbXBsYXRlcy5yZWNpcGVUYWIsIHtyZWNpcGU6IHRoaXMuX3JlY2lwZSwgaXRlbTogdGhpcy5faXRlbSwgc3lzdGVtOiB0aGlzLl9jcmFmdGluZ1N5c3RlbSwgaXNDcmFmdGFibGU6IGlzQ3JhZnRhYmxlfSk7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3NoZWV0SHRtbC5maW5kKCcucmVjaXBlLXRhYi1jb250ZW50Jyk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy50YWIuZmFicmljYXRlLXJlY2lwZScpLmFwcGVuZCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZUl0ZW1TaGVldEV2ZW50cygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc3VwcHJlc3NlZEluTmF2ICYmICF0aGlzLmlzQWN0aXZlSW5OYXYoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaGVldEFwcGxpY2F0aW9uLl90YWJzWzBdLmFjdGl2YXRlKEl0ZW1SZWNpcGVUYWIudGFiS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVGFiVG9JdGVtU2hlZXQoc2hlZXRIdG1sOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0YWJzID0gc2hlZXRIdG1sLmZpbmQoYC50YWJzW2RhdGEtZ3JvdXA9XCJwcmltYXJ5XCJdYCk7XHJcbiAgICAgICAgdGFicy5hcHBlbmQoJChcclxuICAgICAgICAgICAgYDxhIGNsYXNzPVwiaXRlbSBmYWJyaWNhdGUtcmVjaXBlXCIgZGF0YS10YWI9XCIke0l0ZW1SZWNpcGVUYWIudGFiS2V5fVwiPlJlY2lwZTwvYT5gXHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICQoc2hlZXRIdG1sLmZpbmQoYC5zaGVldC1ib2R5YCkpLmFwcGVuZCgkKFxyXG4gICAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhYiBmYWJyaWNhdGUtcmVjaXBlXCIgZGF0YS1ncm91cD1cInByaW1hcnlcIiBkYXRhLXRhYj1cIiR7SXRlbVJlY2lwZVRhYi50YWJLZXl9XCI+PC9kaXY+YFxyXG4gICAgICAgICkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlSXRlbVNoZWV0RXZlbnRzKCk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNyYWZ0LWJ1dHRvbicpLmNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fY3JhZnRpbmdTeXN0ZW0uY3JhZnQodGhpcy5fYWN0b3IsIHRoaXMuX2ludmVudG9yeSwgdGhpcy5fcmVjaXBlKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5vcGVuLWNvbXBlbmRpdW0taXRlbScpLmNsaWNrKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcnQtaWQnKTtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zeXN0ZW0taWQnKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcGVuZGl1bTogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KHN5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5OiBFbnRpdHkgPSBhd2FpdCBjb21wZW5kaXVtLmdldEVudGl0eShwYXJ0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIGVudGl0eS5wZXJtaXNzaW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB2aWV3IHRoZSBkZXRhaWxzIG9mIGEgQ3JhZnRpbmcgQ29tcG9uZW50IHRoYXQgeW91IGhhdmUgbm8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FjY2VzcyB0by4gQXNrIHlvdXIgR00gb3JhbiBhZG1pbmlzdHJhdG9yIHRvIGdyYW50IHlvdSBhY2Nlc3MgdG8gdGhlIGl0ZW1zIGluIHRoZSBjb21wZW5kaXVtIGZvciAnICtcclxuICAgICAgICAgICAgICAgICAgICAndGhlIENyYWZ0aW5nIFN5c3RlbSBcIicgKyB0aGlzLl9jcmFmdGluZ1N5c3RlbS5uYW1lICsgJ1wiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50aXR5LnNoZWV0LnJlbmRlcih0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0FjdGl2ZUluTmF2KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMuX3NoZWV0SHRtbCkuZmluZChgYS5mYWJyaWNhdGUtcmVjaXBlW2RhdGEtdGFiPVwiJHtJdGVtUmVjaXBlVGFiLnRhYktleX1cIl1gKS5oYXNDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7SXRlbVJlY2lwZVRhYn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/ItemRecipeTab.ts\n");

/***/ }),

/***/ "./src/scripts/module.ts":
/*!*******************************!*\
  !*** ./src/scripts/module.ts ***!
  \*******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./application/FabricateLifecycle */ \"./src/scripts/application/FabricateLifecycle.ts\");\n/* harmony import */ var _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/CraftingSystemFactory */ \"./src/scripts/core/CraftingSystemFactory.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nHooks.once('ready', loadCraftingSystems);\r\nHooks.once('ready', () => {\r\n    _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].init();\r\n});\r\n/**\r\n * Loads all Crafting Systems with a System Specification declared with the Crafting System Registry.\r\n * */\r\nfunction loadCraftingSystems() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const systemSpecifications = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.systemSpecifications;\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpecifications.length} crafting systems. `);\r\n        systemSpecifications.forEach(_application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].registerCraftingSystemSettings);\r\n        systemSpecifications.forEach(loadCraftingSystem);\r\n        const systemNames = systemSpecifications.map((systemSpec) => systemSpec.name);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpecifications.length} crafting systems: ${systemNames.join(', ')} `);\r\n    });\r\n}\r\n/**\r\n * Loads a single Crafting System from a System Specification, which must include a Compendium Pack Key. Item data from\r\n * the Compendium Pack is used to load the Recipes and Crafting Components into the system from the compendium. The\r\n * Fabricator, supported systems and name provided in the spec are all preserved.\r\n *\r\n * @param systemSpec `CraftingSystemSpecification` that determines how a system behaves and which compendium pack content\r\n * for the system should be loaded from.\r\n * */\r\nfunction loadCraftingSystem(systemSpec) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpec.name} from Compendium pack ${systemSpec.compendiumPackKey}. `);\r\n        if (systemSpec.supportedGameSystems.indexOf(game.system.id) < 0) {\r\n            console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | ${systemSpec.name} does not support ${game.system.id}! `);\r\n            return;\r\n        }\r\n        const craftingSystemFactory = new _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__[\"CompendiumImportingCraftingSystemFactory\"](systemSpec);\r\n        const craftingSystem = yield craftingSystemFactory.make();\r\n        craftingSystem.enabled = game.settings.get(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey));\r\n        _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.register(craftingSystem);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpec.name}. `);\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tb2R1bGUudHM/NTk0MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzQztBQUM4QjtBQUV5QztBQUN2QztBQUd0RSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3pDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtJQUNyQixrRkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQztBQUVIOztLQUVLO0FBQ0wsU0FBZSxtQkFBbUI7O1FBQzlCLE1BQU0sb0JBQW9CLEdBQUcseUVBQW9CLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQy9FLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGNBQWMsb0JBQW9CLENBQUMsTUFBTSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RHLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrRkFBa0IsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1FBQ2hGLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQXVDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxhQUFhLG9CQUFvQixDQUFDLE1BQU0sc0JBQXNCLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25JLENBQUM7Q0FBQTtBQUVEOzs7Ozs7O0tBT0s7QUFDTCxTQUFlLGtCQUFrQixDQUFDLFVBQXVDOztRQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLFVBQVUsQ0FBQyxJQUFJLHlCQUF5QixVQUFVLENBQUMsaUJBQWlCLElBQUksQ0FBQyxDQUFDO1FBQzlILElBQUksVUFBVSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxNQUFNLFVBQVUsQ0FBQyxJQUFJLHFCQUFxQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEcsT0FBTztTQUNWO1FBQ0QsTUFBTSxxQkFBcUIsR0FBMEIsSUFBSSxvR0FBd0MsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RyxNQUFNLGNBQWMsR0FBRyxNQUFNLHFCQUFxQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELGNBQWMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsbURBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLG1EQUFVLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUNqSix5RUFBb0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGFBQWEsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7SUFDNUUsQ0FBQztDQUFBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvbW9kdWxlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0gZnJvbSBcIi4vYXBwbGljYXRpb24vRmFicmljYXRlTGlmZWN5Y2xlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge0NvbXBlbmRpdW1JbXBvcnRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnksIENyYWZ0aW5nU3lzdGVtRmFjdG9yeX0gZnJvbSBcIi4vY29yZS9DcmFmdGluZ1N5c3RlbUZhY3RvcnlcIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5cclxuSG9va3Mub25jZSgncmVhZHknLCBsb2FkQ3JhZnRpbmdTeXN0ZW1zKTtcclxuSG9va3Mub25jZSgncmVhZHknLCAoKSA9PiB7XHJcbiAgICBGYWJyaWNhdGVMaWZlY3ljbGUuaW5pdCgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBMb2FkcyBhbGwgQ3JhZnRpbmcgU3lzdGVtcyB3aXRoIGEgU3lzdGVtIFNwZWNpZmljYXRpb24gZGVjbGFyZWQgd2l0aCB0aGUgQ3JhZnRpbmcgU3lzdGVtIFJlZ2lzdHJ5LlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW1zKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc3lzdGVtU3BlY2lmaWNhdGlvbnMgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLnN5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgY29uc29sZS5sb2coYCR7UHJvcGVydGllcy5tb2R1bGUubGFiZWx9IHwgTG9hZGluZyAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtcy4gYCk7XHJcbiAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5mb3JFYWNoKEZhYnJpY2F0ZUxpZmVjeWNsZS5yZWdpc3RlckNyYWZ0aW5nU3lzdGVtU2V0dGluZ3MpO1xyXG4gICAgc3lzdGVtU3BlY2lmaWNhdGlvbnMuZm9yRWFjaChsb2FkQ3JhZnRpbmdTeXN0ZW0pO1xyXG4gICAgY29uc3Qgc3lzdGVtTmFtZXMgPSBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5tYXAoKHN5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbikgPT4gc3lzdGVtU3BlYy5uYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8IExvYWRlZCAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtczogJHtzeXN0ZW1OYW1lcy5qb2luKCcsICcpfSBgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGEgc2luZ2xlIENyYWZ0aW5nIFN5c3RlbSBmcm9tIGEgU3lzdGVtIFNwZWNpZmljYXRpb24sIHdoaWNoIG11c3QgaW5jbHVkZSBhIENvbXBlbmRpdW0gUGFjayBLZXkuIEl0ZW0gZGF0YSBmcm9tXHJcbiAqIHRoZSBDb21wZW5kaXVtIFBhY2sgaXMgdXNlZCB0byBsb2FkIHRoZSBSZWNpcGVzIGFuZCBDcmFmdGluZyBDb21wb25lbnRzIGludG8gdGhlIHN5c3RlbSBmcm9tIHRoZSBjb21wZW5kaXVtLiBUaGVcclxuICogRmFicmljYXRvciwgc3VwcG9ydGVkIHN5c3RlbXMgYW5kIG5hbWUgcHJvdmlkZWQgaW4gdGhlIHNwZWMgYXJlIGFsbCBwcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBzeXN0ZW1TcGVjIGBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25gIHRoYXQgZGV0ZXJtaW5lcyBob3cgYSBzeXN0ZW0gYmVoYXZlcyBhbmQgd2hpY2ggY29tcGVuZGl1bSBwYWNrIGNvbnRlbnRcclxuICogZm9yIHRoZSBzeXN0ZW0gc2hvdWxkIGJlIGxvYWRlZCBmcm9tLlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW0oc3lzdGVtU3BlYzogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkaW5nICR7c3lzdGVtU3BlYy5uYW1lfSBmcm9tIENvbXBlbmRpdW0gcGFjayAke3N5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXl9LiBgKTtcclxuICAgIGlmIChzeXN0ZW1TcGVjLnN1cHBvcnRlZEdhbWVTeXN0ZW1zLmluZGV4T2YoZ2FtZS5zeXN0ZW0uaWQpIDwgMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8ICR7c3lzdGVtU3BlYy5uYW1lfSBkb2VzIG5vdCBzdXBwb3J0ICR7Z2FtZS5zeXN0ZW0uaWR9ISBgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUZhY3Rvcnk6IENyYWZ0aW5nU3lzdGVtRmFjdG9yeSA9IG5ldyBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5KHN5c3RlbVNwZWMpO1xyXG4gICAgY29uc3QgY3JhZnRpbmdTeXN0ZW0gPSBhd2FpdCBjcmFmdGluZ1N5c3RlbUZhY3RvcnkubWFrZSgpO1xyXG4gICAgY3JhZnRpbmdTeXN0ZW0uZW5hYmxlZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuc2V0dGluZ3NLZXlzLmNyYWZ0aW5nU3lzdGVtLmVuYWJsZWQoc3lzdGVtU3BlYy5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5yZWdpc3RlcihjcmFmdGluZ1N5c3RlbSk7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkZWQgJHtzeXN0ZW1TcGVjLm5hbWV9LiBgKTtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/module.ts\n");

/***/ }),

/***/ "./src/scripts/registries/CraftingSystemRegistry.ts":
/*!**********************************************************!*\
  !*** ./src/scripts/registries/CraftingSystemRegistry.ts ***!
  \**********************************************************/
/*! exports provided: CraftingSystemRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemRegistry\", function() { return CraftingSystemRegistry; });\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./system_definitions/AlchemistsSuppliesV16 */ \"./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n\r\n\r\n\r\n\r\nclass CraftingSystemRegistry {\r\n    constructor() {\r\n        this._craftingSystemsByCompendiumKey = new Map();\r\n        this._craftingSystemsByPartId = new Map();\r\n        this._systemSpecifications = CraftingSystemRegistry.systemSpecifications();\r\n    }\r\n    register(system) {\r\n        this._craftingSystemsByCompendiumKey.set(system.compendiumPackKey, system);\r\n        this._craftingSystemsByPartId = this.resolvePartsForSystem(system, this._craftingSystemsByPartId);\r\n    }\r\n    resolvePartsForSystem(system, parts) {\r\n        const recipeLinks = new Map(system.recipes.map((recipe) => [recipe.partId, system]));\r\n        const componentLinks = new Map(system.components.map((component) => [component.partId, system]));\r\n        const systemParts = new Map([...recipeLinks, ...componentLinks]);\r\n        if (systemParts.size !== (recipeLinks.size + componentLinks.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} contains duplicate Part IDs. `);\r\n        }\r\n        const mergedParts = new Map([...parts, ...systemParts]);\r\n        if (mergedParts.size !== (systemParts.size + parts.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} shares ${(systemParts.size + parts.size) - mergedParts.size} Part IDs with already registered systems. `);\r\n        }\r\n        return mergedParts;\r\n    }\r\n    getSystemByCompendiumPackKey(id) {\r\n        if (this._craftingSystemsByCompendiumKey.has(id)) {\r\n            return this._craftingSystemsByCompendiumKey.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Compendium Pack Key ${id}. `);\r\n    }\r\n    getSystemByPartId(id) {\r\n        if (this._craftingSystemsByPartId.has(id)) {\r\n            return this._craftingSystemsByPartId.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Recipe ${id}. `);\r\n    }\r\n    getAllSystems() {\r\n        return Array.from(this._craftingSystemsByCompendiumKey.values());\r\n    }\r\n    get systemSpecifications() {\r\n        return this._systemSpecifications;\r\n    }\r\n    declareSpecification(spec) {\r\n        this._systemSpecifications.push(spec);\r\n    }\r\n    static systemSpecifications() {\r\n        const systemSpecifications = [];\r\n        const testSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemSpecification\"].builder()\r\n            .withName('Child\\'s Play')\r\n            .withEnableHint('Enable the test Crafting System for Fabricate?')\r\n            .withDescription('A simple tech demo used for the early development of Fabricate. ')\r\n            .withCompendiumPackKey('fabricate.fabricate-test')\r\n            .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__[\"GameSystemType\"].DND5E)\r\n            .withFabricator(_core_Fabricator__WEBPACK_IMPORTED_MODULE_3__[\"Fabricator\"].builder().build())\r\n            .build();\r\n        systemSpecifications.push(testSystemSpec);\r\n        systemSpecifications.push(_system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__[\"AlchemistsSuppliesSystemSpec\"]);\r\n        return systemSpecifications;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0NyYWZ0aW5nU3lzdGVtUmVnaXN0cnkudHM/MTlmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBc0Q7QUFDMEI7QUFDUTtBQUUxQztBQUU5QyxNQUFNLHNCQUFzQjtJQUE1QjtRQUVZLG9DQUErQixHQUFnQyxJQUFJLEdBQUcsRUFBMEIsQ0FBQztRQUNqRyw2QkFBd0IsR0FBZ0MsSUFBSSxHQUFHLEVBQTBCLENBQUM7UUFDMUYsMEJBQXFCLEdBQWtDLHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFrRWpILENBQUM7SUFoRVUsUUFBUSxDQUFDLE1BQXNCO1FBQ2xDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQ3RHLENBQUM7SUFFTyxxQkFBcUIsQ0FBQyxNQUFzQixFQUFFLEtBQWtDO1FBQ3BGLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxSCxNQUFNLGNBQWMsR0FBZ0MsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pKLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxFQUFFLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLFdBQVcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMvRCxNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixNQUFNLENBQUMsaUJBQWlCLGdDQUFnQyxDQUFDLENBQUM7U0FDNUc7UUFDRCxNQUFNLFdBQVcsR0FBZ0MsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEQsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsTUFBTSxDQUFDLGlCQUFpQixXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsV0FBVyxDQUFDLElBQUksNkNBQTZDLENBQUMsQ0FBQztTQUN0TDtRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSw0QkFBNEIsQ0FBQyxFQUFTO1FBQ3pDLElBQUksSUFBSSxDQUFDLCtCQUErQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUM5QyxPQUFPLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDdkQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLCtFQUErRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxFQUFTO1FBQzlCLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUN2QyxPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtFQUFrRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlGLENBQUM7SUFFTSxhQUFhO1FBQ2hCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsSUFBVyxvQkFBb0I7UUFDM0IsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQUVNLG9CQUFvQixDQUFDLElBQWlDO1FBQ3pELElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxvQkFBb0I7UUFFOUIsTUFBTSxvQkFBb0IsR0FBa0MsRUFBRSxDQUFDO1FBRS9ELE1BQU0sY0FBYyxHQUFnQyw2RkFBMkIsQ0FBQyxPQUFPLEVBQUU7YUFDcEYsUUFBUSxDQUFDLGVBQWUsQ0FBQzthQUN6QixjQUFjLENBQUMsZ0RBQWdELENBQUM7YUFDaEUsZUFBZSxDQUFDLGtFQUFrRSxDQUFDO2FBQ25GLHFCQUFxQixDQUFDLDBCQUEwQixDQUFDO2FBQ2pELHVCQUF1QixDQUFDLG1FQUFjLENBQUMsS0FBSyxDQUFDO2FBQzdDLGNBQWMsQ0FBQywyREFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQzVDLEtBQUssRUFBRSxDQUFDO1FBQ2Isb0JBQW9CLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRTFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxzR0FBNEIsQ0FBQyxDQUFDO1FBRXhELE9BQU8sb0JBQW9CLENBQUM7SUFDaEMsQ0FBQztDQUVKO0FBRThCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvcmVnaXN0cmllcy9DcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDcmFmdGluZ1N5c3RlbX0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0dhbWVTeXN0ZW1UeXBlfSBmcm9tIFwiLi4vY29yZS9HYW1lU3lzdGVtVHlwZVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXCI7XHJcbmltcG9ydCB7QWxjaGVtaXN0c1N1cHBsaWVzU3lzdGVtU3BlY30gZnJvbSBcIi4vc3lzdGVtX2RlZmluaXRpb25zL0FsY2hlbWlzdHNTdXBwbGllc1YxNlwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0b3J9IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0b3JcIjtcclxuXHJcbmNsYXNzIENyYWZ0aW5nU3lzdGVtUmVnaXN0cnkge1xyXG5cclxuICAgIHByaXZhdGUgX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleTogTWFwPHN0cmluZywgQ3JhZnRpbmdTeXN0ZW0+ID0gbmV3IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPigpO1xyXG4gICAgcHJpdmF0ZSBfY3JhZnRpbmdTeXN0ZW1zQnlQYXJ0SWQ6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4oKTtcclxuICAgIHByaXZhdGUgX3N5c3RlbVNwZWNpZmljYXRpb25zOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25bXSA9IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnkuc3lzdGVtU3BlY2lmaWNhdGlvbnMoKTtcclxuXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXIoc3lzdGVtOiBDcmFmdGluZ1N5c3RlbSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS5zZXQoc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5LCBzeXN0ZW0pO1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkID0gdGhpcy5yZXNvbHZlUGFydHNGb3JTeXN0ZW0oc3lzdGVtLCB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeVBhcnRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNvbHZlUGFydHNGb3JTeXN0ZW0oc3lzdGVtOiBDcmFmdGluZ1N5c3RlbSwgcGFydHM6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPik6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiB7XHJcbiAgICAgICAgY29uc3QgcmVjaXBlTGlua3M6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoc3lzdGVtLnJlY2lwZXMubWFwKChyZWNpcGU6IFJlY2lwZSkgPT4gW3JlY2lwZS5wYXJ0SWQsIHN5c3RlbV0pKTtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRMaW5rczogTWFwPHN0cmluZywgQ3JhZnRpbmdTeXN0ZW0+ID0gbmV3IE1hcChzeXN0ZW0uY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IFtjb21wb25lbnQucGFydElkLCBzeXN0ZW1dKSk7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtUGFydHM6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoWy4uLnJlY2lwZUxpbmtzLCAuLi5jb21wb25lbnRMaW5rc10pO1xyXG4gICAgICAgIGlmIChzeXN0ZW1QYXJ0cy5zaXplICE9PSAocmVjaXBlTGlua3Muc2l6ZSArIGNvbXBvbmVudExpbmtzLnNpemUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIENyYWZ0aW5nIFN5c3RlbSB3aXRoIElEICR7c3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fSBjb250YWlucyBkdXBsaWNhdGUgUGFydCBJRHMuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtZXJnZWRQYXJ0czogTWFwPHN0cmluZywgQ3JhZnRpbmdTeXN0ZW0+ID0gbmV3IE1hcChbLi4ucGFydHMsIC4uLnN5c3RlbVBhcnRzXSk7XHJcbiAgICAgICAgaWYgKG1lcmdlZFBhcnRzLnNpemUgIT09IChzeXN0ZW1QYXJ0cy5zaXplICsgcGFydHMuc2l6ZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgQ3JhZnRpbmcgU3lzdGVtIHdpdGggSUQgJHtzeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXl9IHNoYXJlcyAkeyhzeXN0ZW1QYXJ0cy5zaXplICsgcGFydHMuc2l6ZSkgLSBtZXJnZWRQYXJ0cy5zaXplfSBQYXJ0IElEcyB3aXRoIGFscmVhZHkgcmVnaXN0ZXJlZCBzeXN0ZW1zLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlZFBhcnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KGlkOnN0cmluZyk6IENyYWZ0aW5nU3lzdGVtIHtcclxuICAgICAgICBpZiAodGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlDb21wZW5kaXVtS2V5LmhhcyhpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS5nZXQoaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIENyYWZ0aW5nIHN5c3RlbSBpcyByZWdpc3RlcmVkIHdpdGggRmFicmljYXRlIGZvciB0aGUgQ29tcGVuZGl1bSBQYWNrIEtleSAke2lkfS4gYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN5c3RlbUJ5UGFydElkKGlkOnN0cmluZyk6IENyYWZ0aW5nU3lzdGVtIHtcclxuICAgICAgICBpZiAodGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlQYXJ0SWQuaGFzKGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlQYXJ0SWQuZ2V0KGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBDcmFmdGluZyBzeXN0ZW0gaXMgcmVnaXN0ZXJlZCB3aXRoIEZhYnJpY2F0ZSBmb3IgdGhlIFJlY2lwZSAke2lkfS4gYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFsbFN5c3RlbXMoKTogQ3JhZnRpbmdTeXN0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlDb21wZW5kaXVtS2V5LnZhbHVlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHN5c3RlbVNwZWNpZmljYXRpb25zKCk6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtU3BlY2lmaWNhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlY2xhcmVTcGVjaWZpY2F0aW9uKHNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX3N5c3RlbVNwZWNpZmljYXRpb25zLnB1c2goc3BlYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzeXN0ZW1TcGVjaWZpY2F0aW9ucygpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25bXSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHN5c3RlbVNwZWNpZmljYXRpb25zOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25bXSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCB0ZXN0U3lzdGVtU3BlYzogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uID0gQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUoJ0NoaWxkXFwncyBQbGF5JylcclxuICAgICAgICAgICAgLndpdGhFbmFibGVIaW50KCdFbmFibGUgdGhlIHRlc3QgQ3JhZnRpbmcgU3lzdGVtIGZvciBGYWJyaWNhdGU/JylcclxuICAgICAgICAgICAgLndpdGhEZXNjcmlwdGlvbignQSBzaW1wbGUgdGVjaCBkZW1vIHVzZWQgZm9yIHRoZSBlYXJseSBkZXZlbG9wbWVudCBvZiBGYWJyaWNhdGUuICcpXHJcbiAgICAgICAgICAgIC53aXRoQ29tcGVuZGl1bVBhY2tLZXkoJ2ZhYnJpY2F0ZS5mYWJyaWNhdGUtdGVzdCcpXHJcbiAgICAgICAgICAgIC53aXRoU3VwcG9ydGVkR2FtZVN5c3RlbShHYW1lU3lzdGVtVHlwZS5ETkQ1RSlcclxuICAgICAgICAgICAgLndpdGhGYWJyaWNhdG9yKEZhYnJpY2F0b3IuYnVpbGRlcigpLmJ1aWxkKCkpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIHN5c3RlbVNwZWNpZmljYXRpb25zLnB1c2godGVzdFN5c3RlbVNwZWMpO1xyXG5cclxuICAgICAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5wdXNoKEFsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWMpO1xyXG5cclxuICAgICAgICByZXR1cm4gc3lzdGVtU3BlY2lmaWNhdGlvbnM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nU3lzdGVtUmVnaXN0cnl9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/registries/CraftingSystemRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/InventoryRegistry.ts":
/*!*****************************************************!*\
  !*** ./src/scripts/registries/InventoryRegistry.ts ***!
  \*****************************************************/
/*! exports provided: InventoryRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRegistry\", function() { return InventoryRegistry; });\nclass InventoryRegistry {\r\n    constructor() {\r\n        this._managedInventories = new Map();\r\n    }\r\n    addFor(actorId, inventory) {\r\n        if (this._managedInventories.has(actorId)) {\r\n            throw new Error(`The Crafting Inventory for Actor ID ${actorId} is already managed by Fabricate and should not be overridden. `);\r\n        }\r\n        this._managedInventories.set(actorId, inventory);\r\n    }\r\n    getFor(actorId) {\r\n        return this._managedInventories.get(actorId);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5LnRzPzE4MzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBLE1BQU0saUJBQWlCO0lBQXZCO1FBRVksd0JBQW1CLEdBQXNDLElBQUksR0FBRyxFQUFnQyxDQUFDO0lBYTdHLENBQUM7SUFYVSxNQUFNLENBQUMsT0FBZSxFQUFFLFNBQStCO1FBQzFELElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLHVDQUF1QyxPQUFPLGlFQUFpRSxDQUFDLENBQUM7U0FDcEk7UUFDRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQWU7UUFDekIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pELENBQUM7Q0FFSjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvSW52ZW50b3J5UmVnaXN0cnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnlSZWdpc3RyeSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfbWFuYWdlZEludmVudG9yaWVzOiBNYXA8c3RyaW5nLCBJbnZlbnRvcnk8SXRlbS5EYXRhPj4gPSBuZXcgTWFwPHN0cmluZywgSW52ZW50b3J5PEl0ZW0uRGF0YT4+KCk7XHJcblxyXG4gICAgcHVibGljIGFkZEZvcihhY3RvcklkOiBzdHJpbmcsIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fbWFuYWdlZEludmVudG9yaWVzLmhhcyhhY3RvcklkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBDcmFmdGluZyBJbnZlbnRvcnkgZm9yIEFjdG9yIElEICR7YWN0b3JJZH0gaXMgYWxyZWFkeSBtYW5hZ2VkIGJ5IEZhYnJpY2F0ZSBhbmQgc2hvdWxkIG5vdCBiZSBvdmVycmlkZGVuLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbWFuYWdlZEludmVudG9yaWVzLnNldChhY3RvcklkLCBpbnZlbnRvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3IoYWN0b3JJZDogc3RyaW5nKTogSW52ZW50b3J5PEl0ZW0uRGF0YT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYW5hZ2VkSW52ZW50b3JpZXMuZ2V0KGFjdG9ySWQpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtJbnZlbnRvcnlSZWdpc3RyeX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/registries/InventoryRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts":
/*!****************************************************************************!*\
  !*** ./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts ***!
  \****************************************************************************/
/*! exports provided: AlchemistsSuppliesSystemSpec */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemistsSuppliesSystemSpec\", function() { return AlchemistsSuppliesSystemSpec; });\n/* harmony import */ var _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/EssenceCombiner */ \"./src/scripts/core/EssenceCombiner.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../dnd5e/AlchemicalEffect5E */ \"./src/scripts/dnd5e/AlchemicalEffect5E.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n/* harmony import */ var _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n/* harmony import */ var _core_CraftingCheck__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/CraftingCheck */ \"./src/scripts/core/CraftingCheck.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst blinded = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'earth'], 'Release a burst of stinging dust. Affected targets are blinded for the next round. ');\r\nconst prone = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['water', 'water'], 'Release a puddle of slippery oil. Affected targets immediately fall prone. ');\r\nconst lightningDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['air', 'air'], 'Deal 1d4 lightning damage on contact. Double damage to targets touching a metal surface or using metal weapons or armor. ', { expression: '1d4', type: 'lightning' });\r\nconst fireDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'fire'], 'Deal 1d4 fire damage on contact. Double damage to targets with cloth or leather armor. ', { expression: '1d4', type: 'fire' });\r\nconst persistentDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'water'], 'Release gel that sticks to targets. Each round, any damage-dealing effects continue to ' +\r\n    'deal 1 damage each until an action is used to remove the gel with a DC 10 Dexterity check .');\r\nconst coldDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['water', 'air'], 'Deal 1d4 cold damage on contact. Reduce target speed by 10 feet for the next round. ', { expression: '1d4', type: 'cold' });\r\nconst aoeExtension = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"AoeExtension5e\"](['air', 'fire'], 'Release concentrated mist in all directions. Increase the radius of all effects by 5 feet. ', { units: 'ft', value: 5 });\r\nconst acidDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'earth'], 'Deal 1d8 acid damage on contact. ', { expression: '1d8', type: 'acid' });\r\nconst diceMultiplier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"DiceMultiplier5e\"](['positive-energy'], 'Roll double the number of all damage dice. ', 2);\r\nconst savingThrowModifier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"SavingThrowModifier5e\"](['negative-energy'], 'Increase the DC to avoid bomb effects by 2. ', 2);\r\nconst essenceCombiner = _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__[\"EssenceCombiner\"].builder()\r\n    .withMaxComponents(6)\r\n    .withMaxEssences(6)\r\n    .withAlchemicalEffect(blinded)\r\n    .withAlchemicalEffect(prone)\r\n    .withAlchemicalEffect(lightningDamage)\r\n    .withAlchemicalEffect(fireDamage)\r\n    .withAlchemicalEffect(persistentDamage)\r\n    .withAlchemicalEffect(coldDamage)\r\n    .withAlchemicalEffect(aoeExtension)\r\n    .withAlchemicalEffect(acidDamage)\r\n    .withAlchemicalEffect(diceMultiplier)\r\n    .withAlchemicalEffect(savingThrowModifier)\r\n    .build();\r\nconst alchemistsSuppliesV16 = 'fabricate.alchemists-supplies-v16';\r\nconst alchemySpecification = new _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"AlchemySpecification\"](essenceCombiner, _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].builder()\r\n    .withName('Alchemical Bomb')\r\n    .withImageUrl('systems/dnd5e/icons/items/inventory/bomb.jpg')\r\n    .withPartId('90z9nOwmGnP4aUUk')\r\n    .withSystemId(alchemistsSuppliesV16)\r\n    .withEssences([])\r\n    .build());\r\nconst craftingCheck = _core_CraftingCheck__WEBPACK_IMPORTED_MODULE_7__[\"CraftingCheck5e\"].builder()\r\n    .withAbility('int')\r\n    .withBaseDC(6)\r\n    .withTool(new _core_CraftingCheck__WEBPACK_IMPORTED_MODULE_7__[\"Tool\"]('Alchemist\\'s Supplies', 'Alchemy'))\r\n    .withIngredientDCModifier(2)\r\n    .build();\r\nconst fabricator = _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"Fabricator\"].builder()\r\n    .withCraftingCheck(craftingCheck)\r\n    .withAlchemySpecification(alchemySpecification)\r\n    .build();\r\nconst AlchemistsSuppliesSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__[\"CraftingSystemSpecification\"].builder()\r\n    .withName('Alchemist\\'s Supplies v1.6')\r\n    .withCompendiumPackKey(alchemistsSuppliesV16)\r\n    .withEnableHint('Enable the Alchemist\\'s Supplies v1.6 crafting system by /u/calculusChild?')\r\n    .withDescription('Alchemy is the skill of exploiting unique properties of certain plants, minerals, and ' +\r\n    'creature parts, combining them to produce fantastic substances. This allows even non-spellcasters to mimic ' +\r\n    'minor magical effects, although the creations themselves are nonmagical.')\r\n    .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__[\"GameSystemType\"].DND5E)\r\n    .withFabricator(fabricator)\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Earth', 'Elemental earth, one of the fundamental forces of nature', 'mountain'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Water', 'Elemental water, one of the fundamental forces of nature', 'tint'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Air', 'Elemental air, one of the fundamental forces of nature', 'wind'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Fire', 'Elemental fire, one of the fundamental forces of nature', 'fire'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Positive Energy', 'Positive Energy - The essence of life and creation', 'sun'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Negative Energy', 'Negative Energy - The essence of death and destruction', 'moon'))\r\n    .build();\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTYudHM/YjYyNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUEyRDtBQUNGO0FBQ007QUFDb0I7QUFPM0M7QUFDK0I7QUFDWDtBQUNHO0FBRS9ELE1BQU0sT0FBTyxHQUFHLElBQUkscUVBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDOUMscUZBQXFGLENBQUMsQ0FBQztBQUUzRixNQUFNLEtBQUssR0FBRyxJQUFJLHFFQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQzVDLDZFQUE2RSxDQUFDLENBQUM7QUFFbkYsTUFBTSxlQUFlLEdBQUcsSUFBSSxrRUFBUSxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxFQUMvQywySEFBMkgsRUFDM0gsRUFBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUMsQ0FBQyxDQUFDO0FBRTVDLE1BQU0sVUFBVSxHQUFHLElBQUksa0VBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFDNUMseUZBQXlGLEVBQ3pGLEVBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUV2QyxNQUFNLGdCQUFnQixHQUFHLElBQUkscUVBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDdkQseUZBQXlGO0lBQ3pGLDZGQUE2RixDQUFDLENBQUM7QUFFbkcsTUFBTSxVQUFVLEdBQUcsSUFBSSxrRUFBUSxDQUFDLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUM1QyxzRkFBc0YsRUFDdEYsRUFBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUMsQ0FB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Q0FBQyxPQUFPLEVBQUUsMERBQTBELEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDL0csV0FBVyxDQUFDLElBQUksc0VBQWlCLENBQUMsS0FBSyxFQUFFLHdEQUF3RCxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQzNHLFdBQVcsQ0FBQyxJQUFJLHNFQUFpQixDQUFDLE1BQU0sRUFBRSx5REFBeUQsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUM3RyxXQUFXLENBQUMsSUFBSSxzRUFBaUIsQ0FBQyxpQkFBaUIsRUFBRSxvREFBb0QsRUFBRSxLQUFLLENBQUMsQ0FBQztLQUNsSCxXQUFXLENBQUMsSUFBSSxzRUFBaUIsQ0FBQyxpQkFBaUIsRUFBRSx3REFBd0QsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUN2SCxLQUFLLEVBQUUsQ0FBQztBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvc3lzdGVtX2RlZmluaXRpb25zL0FsY2hlbWlzdHNTdXBwbGllc1YxNi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RXNzZW5jZUNvbWJpbmVyfSBmcm9tIFwiLi4vLi4vY29yZS9Fc3NlbmNlQ29tYmluZXJcIjtcclxuaW1wb3J0IHtHYW1lU3lzdGVtVHlwZX0gZnJvbSBcIi4uLy4uL2NvcmUvR2FtZVN5c3RlbVR5cGVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uLy4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb259IGZyb20gXCIuLi8uLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge1xyXG4gICAgQW9lRXh0ZW5zaW9uNWUsXHJcbiAgICBDb25kaXRpb241ZSxcclxuICAgIERhbWFnZTVlLFxyXG4gICAgRGljZU11bHRpcGxpZXI1ZSxcclxuICAgIFNhdmluZ1Rocm93TW9kaWZpZXI1ZVxyXG59IGZyb20gXCIuLi8uLi9kbmQ1ZS9BbGNoZW1pY2FsRWZmZWN0NUVcIjtcclxuaW1wb3J0IHtBbGNoZW15U3BlY2lmaWNhdGlvbiwgRmFicmljYXRvcn0gZnJvbSBcIi4uLy4uL2NvcmUvRmFicmljYXRvclwiO1xyXG5pbXBvcnQge0Vzc2VuY2VEZWZpbml0aW9ufSBmcm9tIFwiLi4vLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ2hlY2s1ZSwgVG9vbH0gZnJvbSBcIi4uLy4uL2NvcmUvQ3JhZnRpbmdDaGVja1wiO1xyXG5cclxuY29uc3QgYmxpbmRlZCA9IG5ldyBDb25kaXRpb241ZShbJ2VhcnRoJywgJ2VhcnRoJ10sXHJcbiAgICAnUmVsZWFzZSBhIGJ1cnN0IG9mIHN0aW5naW5nIGR1c3QuIEFmZmVjdGVkIHRhcmdldHMgYXJlIGJsaW5kZWQgZm9yIHRoZSBuZXh0IHJvdW5kLiAnKTtcclxuXHJcbmNvbnN0IHByb25lID0gbmV3IENvbmRpdGlvbjVlKFsnd2F0ZXInLCAnd2F0ZXInXSxcclxuICAgICdSZWxlYXNlIGEgcHVkZGxlIG9mIHNsaXBwZXJ5IG9pbC4gQWZmZWN0ZWQgdGFyZ2V0cyBpbW1lZGlhdGVseSBmYWxsIHByb25lLiAnKTtcclxuXHJcbmNvbnN0IGxpZ2h0bmluZ0RhbWFnZSA9IG5ldyBEYW1hZ2U1ZShbJ2FpcicsICdhaXInXSxcclxuICAgICdEZWFsIDFkNCBsaWdodG5pbmcgZGFtYWdlIG9uIGNvbnRhY3QuIERvdWJsZSBkYW1hZ2UgdG8gdGFyZ2V0cyB0b3VjaGluZyBhIG1ldGFsIHN1cmZhY2Ugb3IgdXNpbmcgbWV0YWwgd2VhcG9ucyBvciBhcm1vci4gJyxcclxuICAgIHtleHByZXNzaW9uOiAnMWQ0JywgdHlwZTogJ2xpZ2h0bmluZyd9KTtcclxuXHJcbmNvbnN0IGZpcmVEYW1hZ2UgPSBuZXcgRGFtYWdlNWUoWydmaXJlJywgJ2ZpcmUnXSxcclxuICAgICdEZWFsIDFkNCBmaXJlIGRhbWFnZSBvbiBjb250YWN0LiBEb3VibGUgZGFtYWdlIHRvIHRhcmdldHMgd2l0aCBjbG90aCBvciBsZWF0aGVyIGFybW9yLiAnLFxyXG4gICAge2V4cHJlc3Npb246ICcxZDQnLCB0eXBlOiAnZmlyZSd9KTtcclxuXHJcbmNvbnN0IHBlcnNpc3RlbnREYW1hZ2UgPSBuZXcgQ29uZGl0aW9uNWUoWydlYXJ0aCcsICd3YXRlciddLFxyXG4gICAgJ1JlbGVhc2UgZ2VsIHRoYXQgc3RpY2tzIHRvIHRhcmdldHMuIEVhY2ggcm91bmQsIGFueSBkYW1hZ2UtZGVhbGluZyBlZmZlY3RzIGNvbnRpbnVlIHRvICcgK1xyXG4gICAgJ2RlYWwgMSBkYW1hZ2UgZWFjaCB1bnRpbCBhbiBhY3Rpb24gaXMgdXNlZCB0byByZW1vdmUgdGhlIGdlbCB3aXRoIGEgREMgMTAgRGV4dGVyaXR5IGNoZWNrIC4nKTtcclxuXHJcbmNvbnN0IGNvbGREYW1hZ2UgPSBuZXcgRGFtYWdlNWUoWyd3YXRlcicsICdhaXInXSxcclxuICAgICdEZWFsIDFkNCBjb2xkIGRhbWFnZSBvbiBjb250YWN0LiBSZWR1Y2UgdGFyZ2V0IHNwZWVkIGJ5IDEwIGZlZXQgZm9yIHRoZSBuZXh0IHJvdW5kLiAnLFxyXG4gICAge2V4cHJlc3Npb246ICcxZDQnLCB0eXBlOiAnY29sZCd9KTtcclxuXHJcbmNvbnN0IGFvZUV4dGVuc2lvbiA9IG5ldyBBb2VFeHRlbnNpb241ZShbJ2FpcicsICdmaXJlJ10sXHJcbiAgICAnUmVsZWFzZSBjb25jZW50cmF0ZWQgbWlzdCBpbiBhbGwgZGlyZWN0aW9ucy4gSW5jcmVhc2UgdGhlIHJhZGl1cyBvZiBhbGwgZWZmZWN0cyBieSA1IGZlZXQuICcsXHJcbiAgICB7dW5pdHM6ICdmdCcsIHZhbHVlOiA1fSk7XHJcblxyXG5jb25zdCBhY2lkRGFtYWdlID0gbmV3IERhbWFnZTVlKFsnZmlyZScsICdlYXJ0aCddLFxyXG4gICAgJ0RlYWwgMWQ4IGFjaWQgZGFtYWdlIG9uIGNvbnRhY3QuICcsXHJcbiAgICB7ZXhwcmVzc2lvbjogJzFkOCcsIHR5cGU6ICdhY2lkJ30pO1xyXG5cclxuY29uc3QgZGljZU11bHRpcGxpZXIgPSBuZXcgRGljZU11bHRpcGxpZXI1ZShbJ3Bvc2l0aXZlLWVuZXJneSddLFxyXG4gICAgJ1JvbGwgZG91YmxlIHRoZSBudW1iZXIgb2YgYWxsIGRhbWFnZSBkaWNlLiAnLFxyXG4gICAgMik7XHJcblxyXG5jb25zdCBzYXZpbmdUaHJvd01vZGlmaWVyID0gbmV3IFNhdmluZ1Rocm93TW9kaWZpZXI1ZShbJ25lZ2F0aXZlLWVuZXJneSddLFxyXG4gICAgJ0luY3JlYXNlIHRoZSBEQyB0byBhdm9pZCBib21iIGVmZmVjdHMgYnkgMi4gJyxcclxuICAgIDIpO1xyXG5cclxuY29uc3QgZXNzZW5jZUNvbWJpbmVyOiBFc3NlbmNlQ29tYmluZXI8SXRlbURhdGE1ZT4gPSBFc3NlbmNlQ29tYmluZXIuYnVpbGRlcjxJdGVtRGF0YTVlPigpXHJcbiAgICAud2l0aE1heENvbXBvbmVudHMoNilcclxuICAgIC53aXRoTWF4RXNzZW5jZXMoNilcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChibGluZGVkKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KHByb25lKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KGxpZ2h0bmluZ0RhbWFnZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChmaXJlRGFtYWdlKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KHBlcnNpc3RlbnREYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoY29sZERhbWFnZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChhb2VFeHRlbnNpb24pXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoYWNpZERhbWFnZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChkaWNlTXVsdGlwbGllcilcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChzYXZpbmdUaHJvd01vZGlmaWVyKVxyXG4gICAgLmJ1aWxkKCk7XHJcblxyXG5jb25zdCBhbGNoZW1pc3RzU3VwcGxpZXNWMTYgPSAnZmFicmljYXRlLmFsY2hlbWlzdHMtc3VwcGxpZXMtdjE2JztcclxuXHJcbmNvbnN0IGFsY2hlbXlTcGVjaWZpY2F0aW9uID0gbmV3IEFsY2hlbXlTcGVjaWZpY2F0aW9uKGVzc2VuY2VDb21iaW5lciwgQ3JhZnRpbmdDb21wb25lbnQuYnVpbGRlcigpXHJcbiAgICAud2l0aE5hbWUoJ0FsY2hlbWljYWwgQm9tYicpXHJcbiAgICAud2l0aEltYWdlVXJsKCdzeXN0ZW1zL2RuZDVlL2ljb25zL2l0ZW1zL2ludmVudG9yeS9ib21iLmpwZycpXHJcbiAgICAud2l0aFBhcnRJZCgnOTB6OW5Pd21HblA0YVVVaycpXHJcbiAgICAud2l0aFN5c3RlbUlkKGFsY2hlbWlzdHNTdXBwbGllc1YxNilcclxuICAgIC53aXRoRXNzZW5jZXMoW10pXHJcbiAgICAuYnVpbGQoKSk7XHJcblxyXG5jb25zdCBjcmFmdGluZ0NoZWNrOiBDcmFmdGluZ0NoZWNrNWUgPSBDcmFmdGluZ0NoZWNrNWUuYnVpbGRlcigpXHJcbiAgICAud2l0aEFiaWxpdHkoJ2ludCcpXHJcbiAgICAud2l0aEJhc2VEQyg2KVxyXG4gICAgLndpdGhUb29sKG5ldyBUb29sKCdBbGNoZW1pc3RcXCdzIFN1cHBsaWVzJywgJ0FsY2hlbXknKSlcclxuICAgIC53aXRoSW5ncmVkaWVudERDTW9kaWZpZXIoMilcclxuICAgIC5idWlsZCgpO1xyXG5cclxuY29uc3QgZmFicmljYXRvcjogRmFicmljYXRvcjxJdGVtRGF0YTVlLCBBY3RvckRhdGE1ZT4gPSBGYWJyaWNhdG9yLmJ1aWxkZXI8SXRlbURhdGE1ZSwgQWN0b3JEYXRhNWU+KClcclxuICAgIC53aXRoQ3JhZnRpbmdDaGVjayhjcmFmdGluZ0NoZWNrKVxyXG4gICAgLndpdGhBbGNoZW15U3BlY2lmaWNhdGlvbihhbGNoZW15U3BlY2lmaWNhdGlvbilcclxuICAgIC5idWlsZCgpO1xyXG5cclxuY29uc3QgQWxjaGVtaXN0c1N1cHBsaWVzU3lzdGVtU3BlYzogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uID0gQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLmJ1aWxkZXIoKVxyXG4gICAgLndpdGhOYW1lKCdBbGNoZW1pc3RcXCdzIFN1cHBsaWVzIHYxLjYnKVxyXG4gICAgLndpdGhDb21wZW5kaXVtUGFja0tleShhbGNoZW1pc3RzU3VwcGxpZXNWMTYpXHJcbiAgICAud2l0aEVuYWJsZUhpbnQoJ0VuYWJsZSB0aGUgQWxjaGVtaXN0XFwncyBTdXBwbGllcyB2MS42IGNyYWZ0aW5nIHN5c3RlbSBieSAvdS9jYWxjdWx1c0NoaWxkPycpXHJcbiAgICAud2l0aERlc2NyaXB0aW9uKCdBbGNoZW15IGlzIHRoZSBza2lsbCBvZiBleHBsb2l0aW5nIHVuaXF1ZSBwcm9wZXJ0aWVzIG9mIGNlcnRhaW4gcGxhbnRzLCBtaW5lcmFscywgYW5kICcgK1xyXG4gICAgICAgICdjcmVhdHVyZSBwYXJ0cywgY29tYmluaW5nIHRoZW0gdG8gcHJvZHVjZSBmYW50YXN0aWMgc3Vic3RhbmNlcy4gVGhpcyBhbGxvd3MgZXZlbiBub24tc3BlbGxjYXN0ZXJzIHRvIG1pbWljICcgK1xyXG4gICAgICAgICdtaW5vciBtYWdpY2FsIGVmZmVjdHMsIGFsdGhvdWdoIHRoZSBjcmVhdGlvbnMgdGhlbXNlbHZlcyBhcmUgbm9ubWFnaWNhbC4nKVxyXG4gICAgLndpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtKEdhbWVTeXN0ZW1UeXBlLkRORDVFKVxyXG4gICAgLndpdGhGYWJyaWNhdG9yKGZhYnJpY2F0b3IpXHJcbiAgICAud2l0aEVzc2VuY2UobmV3IEVzc2VuY2VEZWZpbml0aW9uKCdFYXJ0aCcsICdFbGVtZW50YWwgZWFydGgsIG9uZSBvZiB0aGUgZnVuZGFtZW50YWwgZm9yY2VzIG9mIG5hdHVyZScsICdtb3VudGFpbicpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignV2F0ZXInLCAnRWxlbWVudGFsIHdhdGVyLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAndGludCcpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignQWlyJywgJ0VsZW1lbnRhbCBhaXIsIG9uZSBvZiB0aGUgZnVuZGFtZW50YWwgZm9yY2VzIG9mIG5hdHVyZScsICd3aW5kJykpXHJcbiAgICAud2l0aEVzc2VuY2UobmV3IEVzc2VuY2VEZWZpbml0aW9uKCdGaXJlJywgJ0VsZW1lbnRhbCBmaXJlLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAnZmlyZScpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignUG9zaXRpdmUgRW5lcmd5JywgJ1Bvc2l0aXZlIEVuZXJneSAtIFRoZSBlc3NlbmNlIG9mIGxpZmUgYW5kIGNyZWF0aW9uJywgJ3N1bicpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignTmVnYXRpdmUgRW5lcmd5JywgJ05lZ2F0aXZlIEVuZXJneSAtIFRoZSBlc3NlbmNlIG9mIGRlYXRoIGFuZCBkZXN0cnVjdGlvbicsICdtb29uJykpXHJcbiAgICAuYnVpbGQoKTtcclxuXHJcbmV4cG9ydCB7QWxjaGVtaXN0c1N1cHBsaWVzU3lzdGVtU3BlY307Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\n");

/***/ })

/******/ });