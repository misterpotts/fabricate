/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "E:\\Projects\\Foundry Development\\dev-modules\\fabricate\\module\\scripts";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/scripts/module.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJwYWNrLXN0cmVhbS9ub2RlX21vZHVsZXMvbm9kZS1saWJzLWJyb3dzZXIvbW9jay9lbXB0eS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\n");

/***/ }),

/***/ "./src/scripts/Properties.ts":
/*!***********************************!*\
  !*** ./src/scripts/Properties.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\nconst Properties = {\r\n    module: {\r\n        name: 'fabricate',\r\n        label: 'Fabricate',\r\n        templates: {\r\n            recipeTab: 'modules/fabricate/templates/recipe-tab.html',\r\n            craftingTab: 'modules/fabricate/templates/crafting-tab.html'\r\n        }\r\n    },\r\n    types: {\r\n        recipe: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].RECIPE,\r\n        component: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT,\r\n        allowableItems: ['consumable', 'loot', 'scroll', 'trinket']\r\n    },\r\n    flagKeys: {\r\n        actor: {\r\n            selectedCraftingSystem: 'crafting.selectedSystemId',\r\n            selectedRecipe: 'crafting.selectedRecipeId',\r\n            hopperForSystem: (systemId) => `crafting.${systemId}.hopper`,\r\n            knownRecipesForSystem: (systemId) => `crafting.${systemId}.knownRecipes`,\r\n        },\r\n        item: {\r\n            identity: 'identity',\r\n            partId: 'identity.partId',\r\n            systemId: 'identity.systemId',\r\n            fabricateItemType: 'type',\r\n        }\r\n    },\r\n    settingsKeys: {\r\n        craftingSystem: {\r\n            enabled: (systemId) => `${systemId}.enabled`\r\n        }\r\n    }\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Properties);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9Qcm9wZXJ0aWVzLnRzPzkwMWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUF3RDtBQUV4RCxNQUFNLFVBQVUsR0FBRztJQUNmLE1BQU0sRUFBRTtRQUNKLElBQUksRUFBRSxXQUFXO1FBQ2pCLEtBQUssRUFBRSxXQUFXO1FBQ2xCLFNBQVMsRUFBRTtZQUNQLFNBQVMsRUFBRSw2Q0FBNkM7WUFDeEQsV0FBVyxFQUFFLCtDQUErQztTQUMvRDtLQUNKO0lBQ0QsS0FBSyxFQUFFO1FBQ0gsTUFBTSxFQUFFLHNFQUFpQixDQUFDLE1BQU07UUFDaEMsU0FBUyxFQUFFLHNFQUFpQixDQUFDLFNBQVM7UUFDdEMsY0FBYyxFQUFFLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDO0tBQzlEO0lBQ0QsUUFBUSxFQUFFO1FBQ04sS0FBSyxFQUFFO1lBQ0gsc0JBQXNCLEVBQUUsMkJBQTJCO1lBQ25ELGNBQWMsRUFBRSwyQkFBMkI7WUFDM0MsZUFBZSxFQUFFLENBQUMsUUFBZ0IsRUFBRSxFQUFFLENBQUMsWUFBWSxRQUFRLFNBQVM7WUFDcEUscUJBQXFCLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEVBQUUsQ0FBQyxZQUFZLFFBQVEsZUFBZTtTQUNuRjtRQUNELElBQUksRUFBRTtZQUNGLFFBQVEsRUFBRSxVQUFVO1lBQ3BCLE1BQU0sRUFBRSxpQkFBaUI7WUFDekIsUUFBUSxFQUFFLG1CQUFtQjtZQUM3QixpQkFBaUIsRUFBRSxNQUFNO1NBQzVCO0tBQ0o7SUFDRCxZQUFZLEVBQUU7UUFDVixjQUFjLEVBQUU7WUFDWixPQUFPLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEVBQUUsQ0FBQyxHQUFHLFFBQVEsVUFBVTtTQUN2RDtLQUNKO0NBQ0osQ0FBQztBQUVhLHlFQUFVLEVBQUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9Qcm9wZXJ0aWVzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdGVJdGVtVHlwZX0gZnJvbSBcIi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5cclxuY29uc3QgUHJvcGVydGllcyA9IHtcclxuICAgIG1vZHVsZToge1xyXG4gICAgICAgIG5hbWU6ICdmYWJyaWNhdGUnLFxyXG4gICAgICAgIGxhYmVsOiAnRmFicmljYXRlJyxcclxuICAgICAgICB0ZW1wbGF0ZXM6IHtcclxuICAgICAgICAgICAgcmVjaXBlVGFiOiAnbW9kdWxlcy9mYWJyaWNhdGUvdGVtcGxhdGVzL3JlY2lwZS10YWIuaHRtbCcsXHJcbiAgICAgICAgICAgIGNyYWZ0aW5nVGFiOiAnbW9kdWxlcy9mYWJyaWNhdGUvdGVtcGxhdGVzL2NyYWZ0aW5nLXRhYi5odG1sJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB0eXBlczoge1xyXG4gICAgICAgIHJlY2lwZTogRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFLFxyXG4gICAgICAgIGNvbXBvbmVudDogRmFicmljYXRlSXRlbVR5cGUuQ09NUE9ORU5ULFxyXG4gICAgICAgIGFsbG93YWJsZUl0ZW1zOiBbJ2NvbnN1bWFibGUnLCAnbG9vdCcsICdzY3JvbGwnLCAndHJpbmtldCddXHJcbiAgICB9LFxyXG4gICAgZmxhZ0tleXM6IHtcclxuICAgICAgICBhY3Rvcjoge1xyXG4gICAgICAgICAgICBzZWxlY3RlZENyYWZ0aW5nU3lzdGVtOiAnY3JhZnRpbmcuc2VsZWN0ZWRTeXN0ZW1JZCcsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkUmVjaXBlOiAnY3JhZnRpbmcuc2VsZWN0ZWRSZWNpcGVJZCcsXHJcbiAgICAgICAgICAgIGhvcHBlckZvclN5c3RlbTogKHN5c3RlbUlkOiBzdHJpbmcpID0+IGBjcmFmdGluZy4ke3N5c3RlbUlkfS5ob3BwZXJgLFxyXG4gICAgICAgICAgICBrbm93blJlY2lwZXNGb3JTeXN0ZW06IChzeXN0ZW1JZDogc3RyaW5nKSA9PiBgY3JhZnRpbmcuJHtzeXN0ZW1JZH0ua25vd25SZWNpcGVzYCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW06IHtcclxuICAgICAgICAgICAgaWRlbnRpdHk6ICdpZGVudGl0eScsXHJcbiAgICAgICAgICAgIHBhcnRJZDogJ2lkZW50aXR5LnBhcnRJZCcsXHJcbiAgICAgICAgICAgIHN5c3RlbUlkOiAnaWRlbnRpdHkuc3lzdGVtSWQnLFxyXG4gICAgICAgICAgICBmYWJyaWNhdGVJdGVtVHlwZTogJ3R5cGUnLFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXR0aW5nc0tleXM6IHtcclxuICAgICAgICBjcmFmdGluZ1N5c3RlbToge1xyXG4gICAgICAgICAgICBlbmFibGVkOiAoc3lzdGVtSWQ6IHN0cmluZykgPT4gYCR7c3lzdGVtSWR9LmVuYWJsZWRgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUHJvcGVydGllczsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/Properties.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateApplication.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/application/FabricateApplication.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../registries/InventoryRegistry */ \"./src/scripts/registries/InventoryRegistry.ts\");\n/* harmony import */ var _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../registries/CraftingSystemRegistry */ \"./src/scripts/registries/CraftingSystemRegistry.ts\");\n\r\n\r\nclass FabricateApplication {\r\n    constructor() {\r\n        this._inventories = new _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__[\"InventoryRegistry\"]();\r\n        this._systems = new _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemRegistry\"]();\r\n    }\r\n    get inventories() {\r\n        return this._inventories;\r\n    }\r\n    get systems() {\r\n        return this._systems;\r\n    }\r\n}\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (new FabricateApplication());\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cz83NzE2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFrRTtBQUNVO0FBRTVFLE1BQU0sb0JBQW9CO0lBS3RCO1FBQ0ksSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtFQUFpQixFQUFFLENBQUM7UUFDNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLHlGQUFzQixFQUFFLENBQUM7SUFDakQsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7Q0FFSjtBQUVjLG1FQUFJLG9CQUFvQixFQUFFLEVBQUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW52ZW50b3J5UmVnaXN0cnl9IGZyb20gXCIuLi9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1SZWdpc3RyeX0gZnJvbSBcIi4uL3JlZ2lzdHJpZXMvQ3JhZnRpbmdTeXN0ZW1SZWdpc3RyeVwiO1xyXG5cclxuY2xhc3MgRmFicmljYXRlQXBwbGljYXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yaWVzOiBJbnZlbnRvcnlSZWdpc3RyeTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5faW52ZW50b3JpZXMgPSBuZXcgSW52ZW50b3J5UmVnaXN0cnkoKTtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1zID0gbmV3IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW52ZW50b3JpZXMoKTogSW52ZW50b3J5UmVnaXN0cnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZlbnRvcmllcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtcygpOiBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtcztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBGYWJyaWNhdGVBcHBsaWNhdGlvbigpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateApplication.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateLifecycle.ts":
/*!*******************************************************!*\
  !*** ./src/scripts/application/FabricateLifecycle.ts ***!
  \*******************************************************/
/*! exports provided: FabricateLifecycle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateLifecycle\", function() { return FabricateLifecycle; });\n/* harmony import */ var _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/ItemRecipeTab */ \"./src/scripts/interface/ItemRecipeTab.ts\");\n/* harmony import */ var _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interface/CraftingTab */ \"./src/scripts/interface/CraftingTab.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass FabricateLifecycle {\r\n    static init() {\r\n        this.registerHandlebarsHelperFunctions();\r\n        this.registerItemRecipeTab();\r\n        this.registerActorCraftingTab();\r\n        this.registerApplicationListeners();\r\n    }\r\n    static registerHandlebarsHelperFunctions() {\r\n        Handlebars.registerHelper('ifEquals', function (arg1, arg2, options) {\r\n            // @ts-ignore\r\n            return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n        });\r\n        const convertEssenceSlugToIconMarkup = (essenceSlug, systemId) => {\r\n            const system = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n            const essenceDefinition = system.getEssenceBySlug(essenceSlug);\r\n            if (essenceDefinition) {\r\n                return essenceDefinition.icon;\r\n            }\r\n            return essenceSlug;\r\n        };\r\n        Handlebars.registerHelper('essenceIcon', function (arg1, arg2) {\r\n            return convertEssenceSlugToIconMarkup(arg1, arg2);\r\n        });\r\n        // @ts-ignore\r\n        Handlebars.registerHelper('essenceIconSeries', function (arg1, arg2) {\r\n            return arg1.map((essence) => convertEssenceSlugToIconMarkup(essence, arg2)).join(', ');\r\n        });\r\n    }\r\n    static registerActorCraftingTab() {\r\n        Hooks.on('renderActorSheet5e', (sheetData, sheetHtml, eventData) => {\r\n            _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__[\"CraftingTab\"].bind(sheetData, sheetHtml, eventData);\r\n        });\r\n    }\r\n    static registerItemRecipeTab() {\r\n        Hooks.on('renderItemSheet5e', (sheetData, sheetHtml) => {\r\n            _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__[\"ItemRecipeTab\"].bind(sheetData, sheetHtml);\r\n        });\r\n    }\r\n    static registerApplicationListeners() {\r\n        Hooks.on('createOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('deleteOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('updateOwnedItem', (actor, item, update) => __awaiter(this, void 0, void 0, function* () {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                if (typeof update.data !== 'undefined') {\r\n                    yield inventory.updateQuantityFor(item);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    static registerCraftingSystemSettings(systemSpec) {\r\n        game.settings.register(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey), {\r\n            name: systemSpec.name,\r\n            hint: systemSpec.enableHint,\r\n            scope: \"world\",\r\n            type: Boolean,\r\n            default: true,\r\n            config: true,\r\n            onChange: (enabled) => { _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemSpec.compendiumPackKey).enabled = enabled; }\r\n        });\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVMaWZlY3ljbGUudHM/OTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDSjtBQUdkO0FBQ21CO0FBRzFELE1BQU0sa0JBQWtCO0lBRWIsTUFBTSxDQUFDLElBQUk7UUFDZCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsQ0FBQztRQUN6QyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsNEJBQTRCLEVBQUU7SUFDdkMsQ0FBQztJQUVPLE1BQU0sQ0FBQyxpQ0FBaUM7UUFFNUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsVUFBUyxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU87WUFDOUQsYUFBYTtZQUNiLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLDhCQUE4QixHQUFHLENBQUMsV0FBbUIsRUFBRSxRQUFnQixFQUFFLEVBQUU7WUFDN0UsTUFBTSxNQUFNLEdBQXVCLDZEQUFvQixDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RyxNQUFNLGlCQUFpQixHQUFzQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDbEYsSUFBSSxpQkFBaUIsRUFBRTtnQkFDbkIsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7YUFDakM7WUFDRCxPQUFPLFdBQVcsQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRixVQUFVLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxVQUFT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T0FBTyxDQUFDLDRCQUE0QixDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQ2hKLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjtBQUUwQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUxpZmVjeWNsZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SXRlbVJlY2lwZVRhYn0gZnJvbSBcIi4uL2ludGVyZmFjZS9JdGVtUmVjaXBlVGFiXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdUYWJ9IGZyb20gXCIuLi9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCBGYWJyaWNhdGVBcHBsaWNhdGlvbiBmcm9tIFwiLi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtLCBFc3NlbmNlRGVmaW5pdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuXHJcbmNsYXNzIEZhYnJpY2F0ZUxpZmVjeWNsZSB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3Rlckl0ZW1SZWNpcGVUYWIoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQWN0b3JDcmFmdGluZ1RhYigpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJBcHBsaWNhdGlvbkxpc3RlbmVycygpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCkge1xyXG5cclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkVxdWFscycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXR1cm4gKGFyZzEgPT0gYXJnMikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAgPSAoZXNzZW5jZVNsdWc6IHN0cmluZywgc3lzdGVtSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZWZpbml0aW9uOiBFc3NlbmNlRGVmaW5pdGlvbiA9IHN5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2VTbHVnKTtcclxuICAgICAgICAgICAgaWYgKGVzc2VuY2VEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXNzZW5jZURlZmluaXRpb24uaWNvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXNzZW5jZVNsdWc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZXNzZW5jZUljb24nLCBmdW5jdGlvbihhcmcxLCBhcmcyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAoYXJnMSwgYXJnMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlc3NlbmNlSWNvblNlcmllcycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZzEubWFwKChlc3NlbmNlOiBzdHJpbmcpID0+IGNvbnZlcnRFc3NlbmNlU2x1Z1RvSWNvbk1hcmt1cChlc3NlbmNlLCBhcmcyKSkuam9pbignLCAnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJBY3RvckNyYWZ0aW5nVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldDVlJywgKHNoZWV0RGF0YTogSXRlbVNoZWV0LCBzaGVldEh0bWw6IGFueSwgZXZlbnREYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgQ3JhZnRpbmdUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCwgZXZlbnREYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJJdGVtUmVjaXBlVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0NWUnLCAoc2hlZXREYXRhOiBJdGVtU2hlZXQsIHNoZWV0SHRtbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyQXBwbGljYXRpb25MaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgIEhvb2tzLm9uKCdjcmVhdGVPd25lZEl0ZW0nLCAoYWN0b3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnkudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgSG9va3Mub24oJ2RlbGV0ZU93bmVkSXRlbScsIChhY3RvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcihhY3Rvci5pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbnZlbnRvcnkpIHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBIb29rcy5vbigndXBkYXRlT3duZWRJdGVtJywgYXN5bmMgKGFjdG9yOiBhbnksIGl0ZW06IGFueSwgdXBkYXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5OiBJbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZS5kYXRhICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGludmVudG9yeS51cGRhdGVRdWFudGl0eUZvcihpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyQ3JhZnRpbmdTeXN0ZW1TZXR0aW5ncyhzeXN0ZW1TcGVjOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+KSB7XHJcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLnNldHRpbmdzS2V5cy5jcmFmdGluZ1N5c3RlbS5lbmFibGVkKHN5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXkpLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN5c3RlbVNwZWMubmFtZSxcclxuICAgICAgICAgICAgaGludDogc3lzdGVtU3BlYy5lbmFibGVIaW50LFxyXG4gICAgICAgICAgICBzY29wZTogXCJ3b3JsZFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoZW5hYmxlZDogYm9vbGVhbikgPT4ge0ZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1TcGVjLmNvbXBlbmRpdW1QYWNrS2V5KS5lbmFibGVkID0gZW5hYmxlZDsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateLifecycle.ts\n");

/***/ }),

/***/ "./src/scripts/core/AlchemicalEffect.ts":
/*!**********************************************!*\
  !*** ./src/scripts/core/AlchemicalEffect.ts ***!
  \**********************************************/
/*! exports provided: BaseAlchemicalEffect, AlchemicalEffectType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseAlchemicalEffect\", function() { return BaseAlchemicalEffect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemicalEffectType\", function() { return AlchemicalEffectType; });\nvar AlchemicalEffectType;\r\n(function (AlchemicalEffectType) {\r\n    AlchemicalEffectType[AlchemicalEffectType[\"MODIFIER\"] = 1] = \"MODIFIER\";\r\n    AlchemicalEffectType[AlchemicalEffectType[\"BASIC\"] = 0] = \"BASIC\";\r\n})(AlchemicalEffectType || (AlchemicalEffectType = {}));\r\nclass BaseAlchemicalEffect {\r\n    constructor(essenceCombination, description, type) {\r\n        this._essenceCombination = essenceCombination;\r\n        this._description = description;\r\n        this._type = type;\r\n    }\r\n    get essenceCombination() {\r\n        return this._essenceCombination;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHM/ODdkNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFLLG9CQUdKO0FBSEQsV0FBSyxvQkFBb0I7SUFDckIsdUVBQVk7SUFDWixpRUFBUztBQUNiLENBQUMsRUFISSxvQkFBb0IsS0FBcEIsb0JBQW9CLFFBR3hCO0FBU0QsTUFBZSxvQkFBb0I7SUFNL0IsWUFBc0Isa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxJQUEwQjtRQUMvRixJQUFJLENBQUMsbUJBQW1CLEdBQUcsa0JBQWtCLENBQUM7UUFDOUMsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUM7UUFDaEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksa0JBQWtCO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFb0UiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJlbnVtIEFsY2hlbWljYWxFZmZlY3RUeXBlIHtcclxuICAgIE1PRElGSUVSID0gMSxcclxuICAgIEJBU0lDID0gMCxcclxufVxyXG5cclxuaW50ZXJmYWNlIEFsY2hlbWljYWxFZmZlY3Q8VD4ge1xyXG4gICAgZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXTtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBBbGNoZW1pY2FsRWZmZWN0VHlwZTtcclxuICAgIGFwcGx5VG8oaXRlbURhdGE6IFQpOiBUO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDxUPiBpbXBsZW1lbnRzIEFsY2hlbWljYWxFZmZlY3Q8VD57XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3R5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlO1xyXG4gICAgYWJzdHJhY3QgYXBwbHlUbyhpdGVtRGF0YTogVCk6IFQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHR5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZUNvbWJpbmF0aW9uID0gZXNzZW5jZUNvbWJpbmF0aW9uO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VDb21iaW5hdGlvbigpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VDb21iaW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGUoKTogQWxjaGVtaWNhbEVmZmVjdFR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtBbGNoZW1pY2FsRWZmZWN0LCBCYXNlQWxjaGVtaWNhbEVmZmVjdCwgQWxjaGVtaWNhbEVmZmVjdFR5cGV9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/AlchemicalEffect.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingComponent.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/CraftingComponent.ts ***!
  \***********************************************/
/*! exports provided: CraftingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingComponent\", function() { return CraftingComponent; });\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass CraftingComponent extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._essences = builder.essences;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingComponent.Builder();\r\n    }\r\n    static fromFlags(fabricateFlags, name, imageUrl) {\r\n        if (fabricateFlags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Crafting Component from ${fabricateFlags.type} data. `);\r\n        }\r\n        return CraftingComponent.builder()\r\n            .withName(name)\r\n            .withSystemId(fabricateFlags.identity.systemId)\r\n            .withPartId(fabricateFlags.identity.partId)\r\n            .withEssences(fabricateFlags.component.essences)\r\n            .withImageUrl(imageUrl)\r\n            .build();\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && other.name === this.name\r\n            && other.imageUrl === this.imageUrl\r\n            && other.essences.length === this.essences.length\r\n            && other.essences.every((essence) => this.essences.includes(essence));\r\n    }\r\n    isValid() {\r\n        return (this.name != null && this.name.length > 0)\r\n            && (this.essences != null)\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (CraftingComponent) {\r\n    class Builder {\r\n        constructor() {\r\n            this.essences = [];\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new CraftingComponent(this);\r\n        }\r\n    }\r\n    CraftingComponent.Builder = Builder;\r\n})(CraftingComponent || (CraftingComponent = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50LnRzPzlhZjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUc7QUFDckQ7QUFFOUMsTUFBTSxpQkFBa0IsU0FBUSw0REFBYTtJQUd6QyxZQUFZLE9BQWtDO1FBQzFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUF1QyxFQUFFLElBQVksRUFBRSxRQUFnQjtRQUMzRixJQUFJLGNBQWMsQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsU0FBUyxFQUFFO1lBQ3JELE1BQU0sSUFBSSxLQUFLLENBQUMsdUVBQXVFLGNBQWMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ3hIO1FBQ0QsT0FBTyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7YUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQzthQUNkLFlBQVksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQzthQUM5QyxVQUFVLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7YUFDMUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO2FBQy9DLFlBQVksQ0FBQyxRQUFRLENBQUM7YUFDdEIsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUF3QjtRQUNsQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLEtBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7ZUFDeEIsS0FBSyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTtlQUNoQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU07ZUFDOUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDdEYsQ0FBQztJQUVNLE9BQU87UUFDVixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQzNDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUM7ZUFDdkIsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FFSjtBQUVELFdBQVUsaUJBQWlCO0lBQ3ZCLE1BQWEsT0FBTztRQUFwQjtZQUdXLGFBQVEsR0FBYSxFQUFFLENBQUM7UUF1Q25DLENBQUM7UUFsQ1UsUUFBUSxDQUFDLEtBQWE7WUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFhO1lBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxVQUFVLENBQUMsS0FBYTtZQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQWU7WUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFdBQVcsQ0FBQyxLQUFhO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxDQUFDO0tBRUo7SUExQ1kseUJBQU8sVUEwQ25CO0FBQ0wsQ0FBQyxFQTVDUyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBNEMxQjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdDb21wb25lbnQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBlbmRpdW1FbnRyeSwgRmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIENyYWZ0aW5nQ29tcG9uZW50IGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlczogc3RyaW5nW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogQ3JhZnRpbmdDb21wb25lbnQuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuc3lzdGVtSWQsIGJ1aWxkZXIucGFydElkLCBidWlsZGVyLmltYWdlVXJsLCBidWlsZGVyLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VzID0gYnVpbGRlci5lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NvbXBvbmVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tRmxhZ3MoZmFicmljYXRlRmxhZ3M6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhLCBuYW1lOiBzdHJpbmcsIGltYWdlVXJsOiBzdHJpbmcpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgaWYgKGZhYnJpY2F0ZUZsYWdzLnR5cGUgIT09IEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgYSBGYWJyaWNhdGUgQ3JhZnRpbmcgQ29tcG9uZW50IGZyb20gJHtmYWJyaWNhdGVGbGFncy50eXBlfSBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nQ29tcG9uZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLndpdGhTeXN0ZW1JZChmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZClcclxuICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkKVxyXG4gICAgICAgICAgICAud2l0aEVzc2VuY2VzKGZhYnJpY2F0ZUZsYWdzLmNvbXBvbmVudC5lc3NlbmNlcylcclxuICAgICAgICAgICAgLndpdGhJbWFnZVVybChpbWFnZVVybClcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVxdWFscyhvdGhlcjogQ3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoIW90aGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcmVzVHlwZShvdGhlcilcclxuICAgICAgICAgICAgJiYgb3RoZXIubmFtZSA9PT0gdGhpcy5uYW1lXHJcbiAgICAgICAgICAgICYmIG90aGVyLmltYWdlVXJsID09PSB0aGlzLmltYWdlVXJsXHJcbiAgICAgICAgICAgICYmIG90aGVyLmVzc2VuY2VzLmxlbmd0aCA9PT0gdGhpcy5lc3NlbmNlcy5sZW5ndGhcclxuICAgICAgICAgICAgJiYgb3RoZXIuZXNzZW5jZXMuZXZlcnkoKGVzc2VuY2U6IHN0cmluZykgPT4gdGhpcy5lc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgJiYgKHRoaXMuZXNzZW5jZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgJiYgc3VwZXIuaXNWYWxpZCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nQ29tcG9uZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgY29tcGVuZGl1bUVudHJ5ITogQ29tcGVuZGl1bUVudHJ5O1xyXG4gICAgICAgIHB1YmxpYyBlc3NlbmNlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgaW1hZ2VVcmw6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgc3lzdGVtSWQ6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFydElkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTmFtZSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhQYXJ0SWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRJZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IHN0cmluZ1tdKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2UodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingComponent.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystem.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/CraftingSystem.ts ***!
  \********************************************/
/*! exports provided: CraftingSystem, EssenceDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystem\", function() { return CraftingSystem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceDefinition\", function() { return EssenceDefinition; });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass EssenceDefinition {\r\n    constructor(name, description, iconCode) {\r\n        this._name = name;\r\n        this._slug = name.toLowerCase().replace(' ', '-');\r\n        this._description = description;\r\n        this._iconCode = iconCode;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get iconCode() {\r\n        return this._iconCode;\r\n    }\r\n    get icon() {\r\n        if (this.iconCode) {\r\n            return `<i class=\"fas fa-${this._iconCode}\" title=\"${this.description}\"></i>`;\r\n        }\r\n        return this.name;\r\n    }\r\n    get slug() {\r\n        return this._slug;\r\n    }\r\n}\r\nclass CraftingSystem {\r\n    constructor(builder) {\r\n        this._recipesById = new Map();\r\n        this._componentsById = new Map();\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._essencesBySlug = new Map();\r\n        this._name = builder.name;\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._fabricator = builder.fabricator;\r\n        this._recipesById = builder.recipes;\r\n        this._componentsById = builder.components;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._enabled = builder.enabled;\r\n        this._enableHint = builder.enableHint;\r\n        this._description = builder.description;\r\n        this._essences = builder.essences;\r\n        this._essencesBySlug = new Map(builder.essences.map((essence) => [essence.slug, essence]));\r\n    }\r\n    static builder() {\r\n        return new CraftingSystem.Builder();\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(value) {\r\n        this._enabled = value;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    getEssenceBySlug(slug) {\r\n        return this._essencesBySlug.get(slug);\r\n    }\r\n    craft(actor, inventory, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const missingIngredients = [];\r\n            recipe.ingredients.forEach((ingredient) => {\r\n                if (!inventory.containsIngredient(ingredient)) {\r\n                    missingIngredients.push(ingredient);\r\n                }\r\n            });\r\n            if (missingIngredients.length > 0) {\r\n                const missingIngredientMessage = missingIngredients.map((ingredient) => ingredient.quantity + ':' + ingredient.component.name).join(',');\r\n                const errorMessage = `Unable to craft recipe ${recipe.name}. The following ingredients were missing: ${missingIngredientMessage}. `;\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: errorMessage });\r\n            }\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromRecipe(inventory, recipe);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: fabricationOutcome.describe() });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: err });\r\n            }\r\n        });\r\n    }\r\n    craftWithComponents(actor, inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!inventory.hasAllComponents(components)) {\r\n                const errorMessage = 'There are insufficient crafting components of the specified type in the inventory. ';\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: errorMessage });\r\n                return;\r\n            }\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromComponents(inventory, components);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: fabricationOutcome.describe() });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: err });\r\n            }\r\n        });\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._recipesById.values());\r\n    }\r\n    get components() {\r\n        return Array.from(this._componentsById.values());\r\n    }\r\n    getComponentByPartId(entryId) {\r\n        return this._componentsById.get(entryId);\r\n    }\r\n    supports(gameSystem) {\r\n        if (!this._supportedGameSystems || this._supportedGameSystems.length == 0) {\r\n            return true;\r\n        }\r\n        return this._supportedGameSystems.indexOf(gameSystem) > -1;\r\n    }\r\n    getRecipeByPartId(partId) {\r\n        return this._recipesById.get(partId);\r\n    }\r\n}\r\n(function (CraftingSystem) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.recipes = new Map();\r\n            this.components = new Map();\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystem(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withRecipes(value) {\r\n            this.recipes = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipes.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponent(value) {\r\n            this.components.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponents(value) {\r\n            this.components = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystem.Builder = Builder;\r\n})(CraftingSystem || (CraftingSystem = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtLnRzPzQ2ZGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBT0EsTUFBTSxpQkFBaUI7SUFPbkIsWUFBWSxJQUFZLEVBQUUsV0FBbUIsRUFBRSxRQUFpQjtRQUM1RCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixPQUFPLG9CQUFvQixJQUFJLENBQUMsU0FBUyxZQUFZLElBQUksQ0FBQyxXQUFXLFFBQVEsQ0FBQztTQUNqRjtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNyQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7Q0FDSjtBQUVELE1BQU0sY0FBYztJQWNoQixZQUFZLE9BQWtDO1FBVjdCLGlCQUFZLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7UUFDOUMsb0JBQWUsR0FBbUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUM1RCwwQkFBcUIsR0FBYSxFQUFFLENBQUM7UUFHckMs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YyxLQUFkLGNBQWMsUUEwRnZCO0FBRTBDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9DcmFmdGluZ1N5c3RlbS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmFicmljYXRvcn0gZnJvbSBcIi4vRmFicmljYXRvclwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4vUmVjaXBlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7SW52ZW50b3J5fSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtJbmdyZWRpZW50fSBmcm9tIFwiLi9JbmdyZWRpZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25PdXRjb21lfSBmcm9tIFwiLi9GYWJyaWNhdGlvbk91dGNvbWVcIjtcclxuXHJcbmNsYXNzIEVzc2VuY2VEZWZpbml0aW9uIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9uYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zbHVnOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaWNvbkNvZGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGljb25Db2RlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fc2x1ZyA9IG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcgJywgJy0nKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuX2ljb25Db2RlID0gaWNvbkNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGljb25Db2RlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ljb25Db2RlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGA8aSBjbGFzcz1cImZhcyBmYS0ke3RoaXMuX2ljb25Db2RlfVwiIHRpdGxlPVwiJHt0aGlzLmRlc2NyaXB0aW9ufVwiPjwvaT5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzbHVnKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NsdWc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nU3lzdGVtPFQ+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBlbmRpdW1QYWNrS2V5OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdG9yOiBGYWJyaWNhdG9yPFQ+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVjaXBlc0J5SWQ6IE1hcDxzdHJpbmcsIFJlY2lwZT4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb25lbnRzQnlJZDogTWFwPHN0cmluZywgQ3JhZnRpbmdDb21wb25lbnQ+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVIaW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VzQnlTbHVnOiBNYXA8c3RyaW5nLCBFc3NlbmNlRGVmaW5pdGlvbj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfZW5hYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBDcmFmdGluZ1N5c3RlbS5CdWlsZGVyPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGJ1aWxkZXIubmFtZTtcclxuICAgICAgICB0aGlzLl9jb21wZW5kaXVtUGFja0tleSA9IGJ1aWxkZXIuY29tcGVuZGl1bVBhY2tLZXk7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRvciA9IGJ1aWxkZXIuZmFicmljYXRvcjtcclxuICAgICAgICB0aGlzLl9yZWNpcGVzQnlJZCA9IGJ1aWxkZXIucmVjaXBlcztcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRzQnlJZCA9IGJ1aWxkZXIuY29tcG9uZW50cztcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IGJ1aWxkZXIuc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGJ1aWxkZXIuZW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9lbmFibGVIaW50ID0gYnVpbGRlci5lbmFibGVIaW50O1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gYnVpbGRlci5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZXNCeVNsdWcgPSBuZXcgTWFwKGJ1aWxkZXIuZXNzZW5jZXMubWFwKChlc3NlbmNlOiBFc3NlbmNlRGVmaW5pdGlvbikgPT4gW2Vzc2VuY2Uuc2x1ZywgZXNzZW5jZV0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ1N5c3RlbS5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZW5hYmxlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlSGludCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVIaW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogRXNzZW5jZURlZmluaXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVzc2VuY2VCeVNsdWcoc2x1Zzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzQnlTbHVnLmdldChzbHVnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JhZnQoYWN0b3I6IEFjdG9yLCBpbnZlbnRvcnk6IEludmVudG9yeSwgcmVjaXBlOiBSZWNpcGUpOiBQcm9taXNlPEZhYnJpY2F0aW9uT3V0Y29tZT4ge1xyXG5cclxuICAgICAgICBjb25zdCBtaXNzaW5nSW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSA9IFtdO1xyXG4gICAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy5mb3JFYWNoKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaW52ZW50b3J5LmNvbnRhaW5zSW5ncmVkaWVudChpbmdyZWRpZW50KSkge1xyXG4gICAgICAgICAgICAgICAgbWlzc2luZ0luZ3JlZGllbnRzLnB1c2goaW5ncmVkaWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobWlzc2luZ0luZ3JlZGllbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbWlzc2luZ0luZ3JlZGllbnRNZXNzYWdlOiBzdHJpbmcgPSBtaXNzaW5nSW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LnF1YW50aXR5ICsgJzonICsgaW5ncmVkaWVudC5jb21wb25lbnQubmFtZSkuam9pbignLCcpO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2U6IHN0cmluZyA9IGBVbmFibGUgdG8gY3JhZnQgcmVjaXBlICR7cmVjaXBlLm5hbWV9LiBUaGUgZm9sbG93aW5nIGluZ3JlZGllbnRzIHdlcmUgbWlzc2luZzogJHttaXNzaW5nSW5ncmVkaWVudE1lc3NhZ2V9LiBgO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGVycm9yTWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZmFicmljYXRpb25PdXRjb21lOiBGYWJyaWNhdGlvbk91dGNvbWUgPSBhd2FpdCB0aGlzLmZhYnJpY2F0b3IuZmFicmljYXRlRnJvbVJlY2lwZShpbnZlbnRvcnksIHJlY2lwZSk7XHJcbiAgICAgICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7dXNlcjogZ2FtZS51c2VyLCBzcGVha2VyOiBhY3RvciwgY29udGVudDogZmFicmljYXRpb25PdXRjb21lLmRlc2NyaWJlKCl9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhYnJpY2F0aW9uT3V0Y29tZTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGVycn0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNyYWZ0V2l0aENvbXBvbmVudHMoYWN0b3I6IEFjdG9yLCBpbnZlbnRvcnk6IEludmVudG9yeSwgY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IFByb21pc2U8RmFicmljYXRpb25PdXRjb21lPiB7XHJcblxyXG4gICAgICAgIGlmICghaW52ZW50b3J5Lmhhc0FsbENvbXBvbmVudHMoY29tcG9uZW50cykpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlOiBzdHJpbmcgPSAnVGhlcmUgYXJlIGluc3VmZmljaWVudCBjcmFmdGluZyBjb21wb25lbnRzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZSBpbiB0aGUgaW52ZW50b3J5LiAnO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGVycm9yTWVzc2FnZX0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhYnJpY2F0aW9uT3V0Y29tZTogRmFicmljYXRpb25PdXRjb21lID0gYXdhaXQgdGhpcy5mYWJyaWNhdG9yLmZhYnJpY2F0ZUZyb21Db21wb25lbnRzKGludmVudG9yeSwgY29tcG9uZW50cyk7XHJcbiAgICAgICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7dXNlcjogZ2FtZS51c2VyLCBzcGVha2VyOiBhY3RvciwgY29udGVudDogZmFicmljYXRpb25PdXRjb21lLmRlc2NyaWJlKCl9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhYnJpY2F0aW9uT3V0Y29tZTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGVycn0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBlbmRpdW1QYWNrS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBlbmRpdW1QYWNrS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmYWJyaWNhdG9yKCk6IEZhYnJpY2F0b3I8VD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWJyaWNhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXBwb3J0ZWRHYW1lU3lzdGVtcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZWNpcGVzKCk6IFJlY2lwZVtdIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9yZWNpcGVzQnlJZC52YWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudHMoKTogQ3JhZnRpbmdDb21wb25lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fY29tcG9uZW50c0J5SWQudmFsdWVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb21wb25lbnRCeVBhcnRJZChlbnRyeUlkOiBzdHJpbmcpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNCeUlkLmdldChlbnRyeUlkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VwcG9ydHMoZ2FtZVN5c3RlbTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyB8fCB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zLmluZGV4T2YoZ2FtZVN5c3RlbSkgPiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWNpcGVCeVBhcnRJZChwYXJ0SWQ6IHN0cmluZyk6IFJlY2lwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2lwZXNCeUlkLmdldChwYXJ0SWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5uYW1lc3BhY2UgQ3JhZnRpbmdTeXN0ZW0ge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyPFQ+IHtcclxuXHJcbiAgICAgICAgcHVibGljIG5hbWUhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGNvbXBlbmRpdW1QYWNrS2V5ITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBmYWJyaWNhdG9yITogRmFicmljYXRvcjxUPjtcclxuICAgICAgICBwdWJsaWMgc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgcHVibGljIHJlY2lwZXM6IE1hcDxzdHJpbmcsIFJlY2lwZT4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgcHVibGljIGNvbXBvbmVudHM6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50PiA9IG5ldyBNYXAoKTtcclxuICAgICAgICBwdWJsaWMgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgZW5hYmxlSGludCE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb24hOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGVzc2VuY2VzOiBFc3NlbmNlRGVmaW5pdGlvbltdID0gW107XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpIDogQ3JhZnRpbmdTeXN0ZW08VD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhOYW1lKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhDb21wZW5kaXVtUGFja0tleSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGVuZGl1bVBhY2tLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEZhYnJpY2F0b3IodmFsdWU6IEZhYnJpY2F0b3I8VD4pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5mYWJyaWNhdG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtcyh2YWx1ZTogc3RyaW5nW10pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3VwcG9ydGVkR2FtZVN5c3RlbSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkR2FtZVN5c3RlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhSZWNpcGVzKHZhbHVlOiBNYXA8c3RyaW5nLCBSZWNpcGU+KTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjaXBlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUmVjaXBlKHZhbHVlOiBSZWNpcGUpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWNpcGVzLnNldCh2YWx1ZS5wYXJ0SWQsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBvbmVudCh2YWx1ZTogQ3JhZnRpbmdDb21wb25lbnQpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldCh2YWx1ZS5wYXJ0SWQsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBvbmVudHModmFsdWU6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50Pik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaXNFbmFibGVkKHZhbHVlOiBib29sZWFuKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRW5hYmxlSGludCh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSGludCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRGVzY3JpcHRpb24odmFsdWU6IHN0cmluZyk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFc3NlbmNlKHZhbHVlOiBFc3NlbmNlRGVmaW5pdGlvbik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IEVzc2VuY2VEZWZpbml0aW9uW10pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nU3lzdGVtLCBFc3NlbmNlRGVmaW5pdGlvbn07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystem.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemFactory.ts":
/*!***************************************************!*\
  !*** ./src/scripts/core/CraftingSystemFactory.ts ***!
  \***************************************************/
/*! exports provided: FileReadingCraftingSystemFactory, CompendiumImportingCraftingSystemFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FileReadingCraftingSystemFactory\", function() { return FileReadingCraftingSystemFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CompendiumImportingCraftingSystemFactory\", function() { return CompendiumImportingCraftingSystemFactory; });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _Recipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Recipe */ \"./src/scripts/core/Recipe.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification) {\r\n        this._systemSpecification = systemSpecification;\r\n    }\r\n    get systemSpecification() {\r\n        return this._systemSpecification;\r\n    }\r\n    make() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const basicSystemData = yield this.prepare();\r\n            const componentErrors = [];\r\n            basicSystemData.components.forEach((craftingComponent) => {\r\n                if (!craftingComponent.isValid()) {\r\n                    componentErrors.push(`Crafting Component ${craftingComponent.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (componentErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading Crafting Components: ${componentErrors}. `);\r\n            }\r\n            const componentDictionary = new Map(basicSystemData.components.map((component) => [component.partId, component]));\r\n            const recipeErrors = [];\r\n            const populatedRecipes = basicSystemData.recipes.map((recipe) => {\r\n                const populatedIngredients = recipe.ingredients.map((ingredient) => {\r\n                    const craftingComponent = componentDictionary.get(ingredient.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified an Ingredient that was not found in the Crafting System: ${ingredient.compendiumEntry}.`);\r\n                    }\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_4__[\"Ingredient\"].builder()\r\n                        .withComponent(craftingComponent)\r\n                        .withQuantity(ingredient.quantity)\r\n                        .isConsumed(ingredient.consumed)\r\n                        .build();\r\n                });\r\n                const populatedCraftingResults = recipe.results.map((result) => {\r\n                    const craftingComponent = componentDictionary.get(result.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified a Result that was not found in the Crafting System: ${result.compendiumEntry}.`);\r\n                    }\r\n                    return _FabricationAction__WEBPACK_IMPORTED_MODULE_5__[\"FabricationAction\"].builder()\r\n                        .withAction(result.type)\r\n                        .withComponent(craftingComponent)\r\n                        .withQuantity(result.quantity)\r\n                        .withCustomData(result.customData)\r\n                        .build();\r\n                });\r\n                return _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].builder()\r\n                    .withName(recipe.name)\r\n                    .withPartId(recipe.partId)\r\n                    .withEssences(recipe.essences)\r\n                    .withSystemId(recipe.systemId)\r\n                    .withIngredients(populatedIngredients)\r\n                    .withResults(populatedCraftingResults)\r\n                    .build();\r\n            });\r\n            populatedRecipes.forEach((recipe) => {\r\n                if (!recipe.isValid()) {\r\n                    recipeErrors.push(`Recipe ${recipe.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (recipeErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading populating Recipes: ${recipeErrors}. `);\r\n            }\r\n            return _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystem\"].builder()\r\n                .withRecipes(new Map(populatedRecipes.map((recipe) => [recipe.partId, recipe])))\r\n                .withName(this.systemSpecification.name)\r\n                .withComponents(componentDictionary)\r\n                .withEssences(this.systemSpecification.essences)\r\n                .withEnableHint(this.systemSpecification.enableHint)\r\n                .withFabricator(this.systemSpecification.fabricator)\r\n                .withDescription(this.systemSpecification.description)\r\n                .withCompendiumPackKey(this.systemSpecification.compendiumPackKey)\r\n                .withSupportedGameSystems(this.systemSpecification.supportedGameSystems)\r\n                .build();\r\n        });\r\n    }\r\n}\r\nclass CompendiumImportingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let systemPack = game.packs.get(this.systemSpecification.compendiumPackKey);\r\n            let content = yield this.loadCompendiumContent(systemPack, 10);\r\n            const systemData = {\r\n                recipes: [],\r\n                components: []\r\n            };\r\n            content.forEach((item) => {\r\n                let itemConfig = item.data.flags.fabricate;\r\n                switch (itemConfig.type) {\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                        systemData.components.push(_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                        systemData.recipes.push(_Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    default:\r\n                        throw new Error(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Unable to load item ${item.id}. Could not determine Fabricate Entity Type. `);\r\n                }\r\n            });\r\n            return systemData;\r\n        });\r\n    }\r\n    /**\r\n     * Fallback awaiter for loading compendium content, as this was observed to be unreliable during development after the\r\n     * game 'ready' Hook was fired\r\n     *\r\n     * @param compendium The Compendium from which to reliably load the Content\r\n     * @param maxAttempts The maximum number of times to attempt loading Compendium Content\r\n     * */\r\n    loadCompendiumContent(compendium, maxAttempts) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let content = yield compendium.getContent();\r\n            let attempts = 0;\r\n            while ((!content || (content.length === 0)) && (attempts <= maxAttempts)) {\r\n                console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Waiting for content in Compendium Pack ${compendium.id} (Attempt ${attempts} of ${maxAttempts}. `);\r\n                yield this.wait(1000);\r\n                attempts++;\r\n                content = yield compendium.getContent();\r\n            }\r\n            return content;\r\n        });\r\n    }\r\n    /**\r\n     * Simple async awaiter delay function\r\n     *\r\n     * @param delay The number of millis to wait before resolving\r\n     * @return a promise that resolves once the delay period has elapsed\r\n     * */\r\n    wait(delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise(resolve => setTimeout(resolve, delay));\r\n        });\r\n    }\r\n}\r\nclass FileReadingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification, filePath) {\r\n        super(systemSpecification);\r\n        this._fileErrorsByLineNumber = new Map();\r\n        this._filePath = filePath;\r\n    }\r\n    get filePath() {\r\n        return this._filePath;\r\n    }\r\n    get fileErrorsByLineNumber() {\r\n        return this._fileErrorsByLineNumber;\r\n    }\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const lines = yield this.readFile(this.filePath);\r\n            return this.parseFileData(lines);\r\n        });\r\n    }\r\n    readFile(path) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const contents = yield fs__WEBPACK_IMPORTED_MODULE_0__[\"promises\"].readFile(path, 'utf-8');\r\n            return contents.split('\\n');\r\n        });\r\n    }\r\n    recordError(lineNumber, error) {\r\n        if (this._fileErrorsByLineNumber.has(lineNumber)) {\r\n            this._fileErrorsByLineNumber.get(lineNumber).push(error);\r\n        }\r\n        this._fileErrorsByLineNumber.set(lineNumber, [error]);\r\n    }\r\n    parseFileData(lines) {\r\n        const systemData = {\r\n            recipes: [],\r\n            components: []\r\n        };\r\n        lines.forEach((line, index) => {\r\n            const lineNumber = index + 1;\r\n            let json;\r\n            try {\r\n                json = JSON.parse(line);\r\n            }\r\n            catch (err) {\r\n                this.recordError(lineNumber, `Line is not valid JSON. `);\r\n                return;\r\n            }\r\n            if (!json.flags) {\r\n                this.recordError(lineNumber, `No flag data was present. `);\r\n                return;\r\n            }\r\n            const fabricateFlags = json.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate flags were set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate Item identity was set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity.partId || !fabricateFlags.identity.systemId) {\r\n                this.recordError(lineNumber, `An invalid Fabricate Item identity was set with Part ID '${fabricateFlags.identity.partId}' and System ID '${fabricateFlags.identity.systemId}' `);\r\n                return;\r\n            }\r\n            let fabricateItem;\r\n            switch (fabricateFlags.type) {\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                    if (!fabricateFlags.component) {\r\n                        this.recordError(lineNumber, `No Component definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const craftingComponent = _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = craftingComponent;\r\n                    systemData.components.push(craftingComponent);\r\n                    break;\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                    if (!fabricateFlags.recipe) {\r\n                        this.recordError(lineNumber, `No Recipe definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const recipe = _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = recipe;\r\n                    systemData.recipes.push(recipe);\r\n                    break;\r\n                default:\r\n                    this.recordError(lineNumber, `The Fabricate Item type ${fabricateFlags.type} was not \r\n                        recognized. Allowable values are COMPONENT or RECIPE`);\r\n                    return;\r\n            }\r\n            if (fabricateItem.partId !== json._id) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} part ID '${fabricateItem.partId}' did not match Compendium Entity ID '${json._id}. '`);\r\n            }\r\n            if (fabricateItem.name !== json.name) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} name '${fabricateItem.name}' did not match Compendium Entity name '${json.name}. '`);\r\n            }\r\n            if (fabricateItem.imageUrl !== json.img) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} image URL '${fabricateItem.imageUrl}' did not match Compendium Entity image URL '${json.img}. '`);\r\n            }\r\n        });\r\n        if (this.fileErrorsByLineNumber.size === 0) {\r\n            return systemData;\r\n        }\r\n        const lineErrorDetails = [];\r\n        this.fileErrorsByLineNumber.forEach((errors, line) => lineErrorDetails.push(`Line ${line}: ${errors.join(', ')} \\n`));\r\n        throw new Error(`Encountered ${this.fileErrorsByLineNumber.size} errors when processing file data for system ${this.systemSpecification.compendiumPackKey}. Errors: \\n ${lineErrorDetails}`);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtRmFjdG9yeS50cz9lN2YwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUV3QjtBQUVNO0FBQ3RCO0FBQ1E7QUFDYztBQUM0QjtBQUMzQztBQWF2QyxNQUFlLDZCQUE2QjtJQUd4QyxZQUFZLG1CQUFvRDtRQUM1RCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ25CLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ3JDLENBQUM7SUFFSyxJQUFJOztZQUNOLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdDLE1BQU0sZUFBZSxHQUFhLEVBQUUsQ0FBQztZQUNyQyxlQUFlLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGlCQUFvQyxFQUFFLEVBQUU7Z0JBQ3hFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDOUIsZUFBZSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsaUJBQWlCLENBQUMsZUFBZSxlQUFlLENBQUMsQ0FBQztpQkFDaEc7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUNILElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsbUNBQW1DLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLHFFQUFxRSxlQUFlLElBQUksQ0FBQyxDQUFDO2FBQzdLO1lBQ0QsTUFBTSxtQkFBbUIsR0FBbUMsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JLLE1BQU0s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SUFBSSxLQUFLLENBQUMsZUFBZSxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxnREFBZ0QsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixnQkFBZ0IsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO0lBQ2pNLENBQUM7Q0FFSjtBQUV5RyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnXHJcblxyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0gZnJvbSBcIi4vQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi9SZWNpcGVcIjtcclxuaW1wb3J0IHtJbmdyZWRpZW50fSBmcm9tIFwiLi9JbmdyZWRpZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb259IGZyb20gXCIuL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcbmltcG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQgUHJvcGVydGllcyBmcm9tIFwiLi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmludGVyZmFjZSBDcmFmdGluZ1N5c3RlbUZhY3Rvcnkge1xyXG4gICAgc3lzdGVtU3BlY2lmaWNhdGlvbjogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uPHt9PjtcclxuICAgIG1ha2UoKTogUHJvbWlzZTxDcmFmdGluZ1N5c3RlbTx7fT4+O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQmFzaWNTeXN0ZW1EYXRhIHtcclxuICAgIHJlY2lwZXM6IFJlY2lwZVtdO1xyXG4gICAgY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RDcmFmdGluZ1N5c3RlbUZhY3RvcnkgaW1wbGVtZW50cyBDcmFmdGluZ1N5c3RlbUZhY3Rvcnkge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3lzdGVtU3BlY2lmaWNhdGlvbjogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uPHt9PjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW1TcGVjaWZpY2F0aW9uOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+KSB7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtU3BlY2lmaWNhdGlvbiA9IHN5c3RlbVNwZWNpZmljYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN5c3RlbVNwZWNpZmljYXRpb24oKTogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uPHt9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N5c3RlbVNwZWNpZmljYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZSgpOiBQcm9taXNlPENyYWZ0aW5nU3lzdGVtPHt9Pj4ge1xyXG4gICAgICAgIGNvbnN0IGJhc2ljU3lzdGVtRGF0YSA9IGF3YWl0IHRoaXMucHJlcGFyZSgpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBiYXNpY1N5c3RlbURhdGEuY29tcG9uZW50cy5mb3JFYWNoKChjcmFmdGluZ0NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjcmFmdGluZ0NvbXBvbmVudC5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudEVycm9ycy5wdXNoKGBDcmFmdGluZyBDb21wb25lbnQgJHtjcmFmdGluZ0NvbXBvbmVudC5jb21wZW5kaXVtRW50cnl9IGlzIGludmFsaWQuIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudEVycm9ycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGJ1aWxkIENyYWZ0aW5nIFN5c3RlbSAke3RoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5uYW1lfS4gVGhlcmUgd2VyZSBvbmUgb3IgbW9yZSBpc3N1ZXMgd2l0aCByZWFkaW5nIENyYWZ0aW5nIENvbXBvbmVudHM6ICR7Y29tcG9uZW50RXJyb3JzfS4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudERpY3Rpb25hcnk6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50PiA9IG5ldyBNYXAoYmFzaWNTeXN0ZW1EYXRhLmNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBbY29tcG9uZW50LnBhcnRJZCwgY29tcG9uZW50XSkpO1xyXG4gICAgICAgIGNvbnN0IHJlY2lwZUVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCBwb3B1bGF0ZWRSZWNpcGVzOiBSZWNpcGVbXSA9IGJhc2ljU3lzdGVtRGF0YS5yZWNpcGVzLm1hcCgocmVjaXBlOiBSZWNpcGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcG9wdWxhdGVkSW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSA9IHJlY2lwZS5pbmdyZWRpZW50cy5tYXAoKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50ID0gY29tcG9uZW50RGljdGlvbmFyeS5nZXQoaW5ncmVkaWVudC5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVjaXBlICR7cmVjaXBlLm5hbWV9IHdpdGggSUQgJHtyZWNpcGUucGFydElkfSBzcGVjaWZpZWQgYW4gSW5ncmVkaWVudCB0aGF0IHdhcyBub3QgZm91bmQgaW4gdGhlIENyYWZ0aW5nIFN5c3RlbTogJHtpbmdyZWRpZW50LmNvbXBlbmRpdW1FbnRyeX0uYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5ncmVkaWVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChjcmFmdGluZ0NvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGluZ3JlZGllbnQucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmlzQ29uc3VtZWQoaW5ncmVkaWVudC5jb25zdW1lZClcclxuICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcHVsYXRlZENyYWZ0aW5nUmVzdWx0cyA9IHJlY2lwZS5yZXN1bHRzLm1hcCgocmVzdWx0OiBGYWJyaWNhdGlvbkFjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnQgPSBjb21wb25lbnREaWN0aW9uYXJ5LmdldChyZXN1bHQucGFydElkKTtcclxuICAgICAgICAgICAgICAgIGlmICghY3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlY2lwZSAke3JlY2lwZS5uYW1lfSB3aXRoIElEICR7cmVjaXBlLnBhcnRJZH0gc3BlY2lmaWVkIGEgUmVzdWx0IHRoYXQgd2FzIG5vdCBmb3VuZCBpbiB0aGUgQ3JhZnRpbmcgU3lzdGVtOiAke3Jlc3VsdC5jb21wZW5kaXVtRW50cnl9LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uKHJlc3VsdC50eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQ29tcG9uZW50KGNyYWZ0aW5nQ29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkocmVzdWx0LnF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQ3VzdG9tRGF0YShyZXN1bHQuY3VzdG9tRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWNpcGUuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aE5hbWUocmVjaXBlLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAud2l0aFBhcnRJZChyZWNpcGUucGFydElkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhFc3NlbmNlcyhyZWNpcGUuZXNzZW5jZXMpXHJcbiAgICAgICAgICAgICAgICAud2l0aFN5c3RlbUlkKHJlY2lwZS5zeXN0ZW1JZClcclxuICAgICAgICAgICAgICAgIC53aXRoSW5ncmVkaWVudHMocG9wdWxhdGVkSW5ncmVkaWVudHMpXHJcbiAgICAgICAgICAgICAgICAud2l0aFJlc3VsdHMocG9wdWxhdGVkQ3JhZnRpbmdSZXN1bHRzKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcG9wdWxhdGVkUmVjaXBlcy5mb3JFYWNoKChyZWNpcGU6IFJlY2lwZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJlY2lwZS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJlY2lwZUVycm9ycy5wdXNoKGBSZWNpcGUgJHtyZWNpcGUuY29tcGVuZGl1bUVudHJ5fSBpcyBpbnZhbGlkLiBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyZWNpcGVFcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBidWlsZCBDcmFmdGluZyBTeXN0ZW0gJHt0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24ubmFtZX0uIFRoZXJlIHdlcmUgb25lIG9yIG1vcmUgaXNzdWVzIHdpdGggcmVhZGluZyBwb3B1bGF0aW5nIFJlY2lwZXM6ICR7cmVjaXBlRXJyb3JzfS4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBDcmFmdGluZ1N5c3RlbS5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhSZWNpcGVzKG5ldyBNYXAocG9wdWxhdGVkUmVjaXBlcy5tYXAoKHJlY2lwZTogUmVjaXBlKSA9PiBbcmVjaXBlLnBhcnRJZCwgcmVjaXBlXSkpKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUodGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLm5hbWUpXHJcbiAgICAgICAgICAgIC53aXRoQ29tcG9uZW50cyhjb21wb25lbnREaWN0aW9uYXJ5KVxyXG4gICAgICAgICAgICAud2l0aEVzc2VuY2VzKHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5lc3NlbmNlcylcclxuICAgICAgICAgICAgLndpdGhFbmFibGVIaW50KHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5lbmFibGVIaW50KVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0b3IodGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmZhYnJpY2F0b3IpXHJcbiAgICAgICAgICAgIC53aXRoRGVzY3JpcHRpb24odGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgICAud2l0aENvbXBlbmRpdW1QYWNrS2V5KHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5jb21wZW5kaXVtUGFja0tleSlcclxuICAgICAgICAgICAgLndpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtcyh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uc3VwcG9ydGVkR2FtZVN5c3RlbXMpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IHByZXBhcmUoKTogUHJvbWlzZTxCYXNpY1N5c3RlbURhdGE+O1xyXG5cclxufVxyXG5cclxuY2xhc3MgQ29tcGVuZGl1bUltcG9ydGluZ0NyYWZ0aW5nU3lzdGVtRmFjdG9yeSBleHRlbmRzIEFic3RyYWN0Q3JhZnRpbmdTeXN0ZW1GYWN0b3J5IHtcclxuXHJcbiAgICBhc3luYyBwcmVwYXJlKCk6IFByb21pc2U8QmFzaWNTeXN0ZW1EYXRhPiB7XHJcbiAgICAgICAgbGV0IHN5c3RlbVBhY2s6IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldCh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uY29tcGVuZGl1bVBhY2tLZXkpO1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgdGhpcy5sb2FkQ29tcGVuZGl1bUNvbnRlbnQoc3lzdGVtUGFjaywgMTApO1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbURhdGE6IEJhc2ljU3lzdGVtRGF0YSA9IHtcclxuICAgICAgICAgICAgcmVjaXBlczogW10sXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb250ZW50LmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaXRlbUNvbmZpZzogRmFicmljYXRlQ29tcGVuZGl1bURhdGEgPSBpdGVtLmRhdGEuZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGl0ZW1Db25maWcudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtRGF0YS5jb21wb25lbnRzLnB1c2goQ3JhZnRpbmdDb21wb25lbnQuZnJvbUZsYWdzKGl0ZW1Db25maWcsIGl0ZW0ubmFtZSwgaXRlbS5pbWcpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFOlxyXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbURhdGEucmVjaXBlcy5wdXNoKFJlY2lwZS5mcm9tRmxhZ3MoaXRlbUNvbmZpZywgaXRlbS5uYW1lLCBpdGVtLmltZykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7UHJvcGVydGllcy5tb2R1bGUubGFiZWx9IHwgVW5hYmxlIHRvIGxvYWQgaXRlbSAke2l0ZW0uaWR9LiBDb3VsZCBub3QgZGV0ZXJtaW5lIEZhYnJpY2F0ZSBFbnRpdHkgVHlwZS4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3lzdGVtRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZhbGxiYWNrIGF3YWl0ZXIgZm9yIGxvYWRpbmcgY29tcGVuZGl1bSBjb250ZW50LCBhcyB0aGlzIHdhcyBvYnNlcnZlZCB0byBiZSB1bnJlbGlhYmxlIGR1cmluZyBkZXZlbG9wbWVudCBhZnRlciB0aGVcclxuICAgICAqIGdhbWUgJ3JlYWR5JyBIb29rIHdhcyBmaXJlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wZW5kaXVtIFRoZSBDb21wZW5kaXVtIGZyb20gd2hpY2ggdG8gcmVsaWFibHkgbG9hZCB0aGUgQ29udGVudFxyXG4gICAgICogQHBhcmFtIG1heEF0dGVtcHRzIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0byBhdHRlbXB0IGxvYWRpbmcgQ29tcGVuZGl1bSBDb250ZW50XHJcbiAgICAgKiAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQ29tcGVuZGl1bUNvbnRlbnQoY29tcGVuZGl1bTogQ29tcGVuZGl1bSwgbWF4QXR0ZW1wdHM6IG51bWJlcik6IFByb21pc2U8RW50aXR5W10+IHtcclxuICAgICAgICBsZXQgY29udGVudDogRW50aXR5W10gPSBhd2FpdCBjb21wZW5kaXVtLmdldENvbnRlbnQoKTtcclxuICAgICAgICBsZXQgYXR0ZW1wdHM6IG51bWJlciA9IDA7XHJcbiAgICAgICAgd2hpbGUgKCghY29udGVudCB8fCAoY29udGVudC5sZW5ndGggPT09IDApKSAmJiAoYXR0ZW1wdHMgPD0gbWF4QXR0ZW1wdHMpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8IFdhaXRpbmcgZm9yIGNvbnRlbnQgaW4gQ29tcGVuZGl1bSBQYWNrICR7Y29tcGVuZGl1bS5pZH0gKEF0dGVtcHQgJHthdHRlbXB0c30gb2YgJHttYXhBdHRlbXB0c30uIGApO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLndhaXQoMTAwMCk7XHJcbiAgICAgICAgICAgIGF0dGVtcHRzKys7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBhd2FpdCBjb21wZW5kaXVtLmdldENvbnRlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgYXN5bmMgYXdhaXRlciBkZWxheSBmdW5jdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZWxheSBUaGUgbnVtYmVyIG9mIG1pbGxpcyB0byB3YWl0IGJlZm9yZSByZXNvbHZpbmdcclxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgZGVsYXkgcGVyaW9kIGhhcyBlbGFwc2VkXHJcbiAgICAgKiAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyB3YWl0KGRlbGF5OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBGaWxlUmVhZGluZ0NyYWZ0aW5nU3lzdGVtRmFjdG9yeSBleHRlbmRzIEFic3RyYWN0Q3JhZnRpbmdTeXN0ZW1GYWN0b3J5IHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9maWxlUGF0aDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZmlsZUVycm9yc0J5TGluZU51bWJlcjogTWFwPG51bWJlciwgc3RyaW5nW10+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN5c3RlbVNwZWNpZmljYXRpb246IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbjx7fT4sIGZpbGVQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihzeXN0ZW1TcGVjaWZpY2F0aW9uKTtcclxuICAgICAgICB0aGlzLl9maWxlUGF0aCA9IGZpbGVQYXRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmaWxlUGF0aCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWxlUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZmlsZUVycm9yc0J5TGluZU51bWJlcigpOiBNYXA8bnVtYmVyLCBzdHJpbmdbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHByZXBhcmUoKTogUHJvbWlzZTxCYXNpY1N5c3RlbURhdGE+IHtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGF3YWl0IHRoaXMucmVhZEZpbGUodGhpcy5maWxlUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGaWxlRGF0YShsaW5lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWFkRmlsZShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShwYXRoLCAndXRmLTgnKTtcclxuICAgICAgICByZXR1cm4gY29udGVudHMuc3BsaXQoJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVjb3JkRXJyb3IobGluZU51bWJlcjogbnVtYmVyLCBlcnJvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ZpbGVFcnJvcnNCeUxpbmVOdW1iZXIuaGFzKGxpbmVOdW1iZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbGVFcnJvcnNCeUxpbmVOdW1iZXIuZ2V0KGxpbmVOdW1iZXIpLnB1c2goZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyLnNldChsaW5lTnVtYmVyLFtlcnJvcl0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlRmlsZURhdGEobGluZXM6IHN0cmluZ1tdKTogQmFzaWNTeXN0ZW1EYXRhIHtcclxuICAgICAgICBjb25zdCBzeXN0ZW1EYXRhOiBCYXNpY1N5c3RlbURhdGEgPSB7XHJcbiAgICAgICAgICAgIHJlY2lwZXM6IFtdLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGluZXMuZm9yRWFjaCgobGluZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVOdW1iZXIgPSBpbmRleCArIDE7XHJcbiAgICAgICAgICAgIGxldCBqc29uOiBhbnk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShsaW5lKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBMaW5lIGlzIG5vdCB2YWxpZCBKU09OLiBgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWpzb24uZmxhZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYE5vIGZsYWcgZGF0YSB3YXMgcHJlc2VudC4gYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZmFicmljYXRlRmxhZ3M6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhID0ganNvbi5mbGFncy5mYWJyaWNhdGU7XHJcbiAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYEZsYWcgZGF0YSB3YXMgcHJlc2VudCwgYnV0IG5vIEZhYnJpY2F0ZSBmbGFncyB3ZXJlIHNldC4gYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFmYWJyaWNhdGVGbGFncy5pZGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgRmxhZyBkYXRhIHdhcyBwcmVzZW50LCBidXQgbm8gRmFicmljYXRlIEl0ZW0gaWRlbnRpdHkgd2FzIHNldC4gYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5wYXJ0SWQgfHwgIWZhYnJpY2F0ZUZsYWdzLmlkZW50aXR5LnN5c3RlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBBbiBpbnZhbGlkIEZhYnJpY2F0ZSBJdGVtIGlkZW50aXR5IHdhcyBzZXQgd2l0aCBQYXJ0IElEICcke2ZhYnJpY2F0ZUZsYWdzLmlkZW50aXR5LnBhcnRJZH0nIGFuZCBTeXN0ZW0gSUQgJyR7ZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkuc3lzdGVtSWR9JyBgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgZmFicmljYXRlSXRlbTogRmFicmljYXRlSXRlbTtcclxuICAgICAgICAgICAgc3dpdGNoIChmYWJyaWNhdGVGbGFncy50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBObyBDb21wb25lbnQgZGVmaW5pdGlvbiB3YXMgcHJvdmlkZWQuIGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCA9IENyYWZ0aW5nQ29tcG9uZW50LmZyb21GbGFncyhmYWJyaWNhdGVGbGFncywganNvbi5uYW1lLCBqc29uLmltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFicmljYXRlSXRlbSA9IGNyYWZ0aW5nQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbURhdGEuY29tcG9uZW50cy5wdXNoKGNyYWZ0aW5nQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MucmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYE5vIFJlY2lwZSBkZWZpbml0aW9uIHdhcyBwcm92aWRlZC4gYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjaXBlOiBSZWNpcGUgPSBSZWNpcGUuZnJvbUZsYWdzKGZhYnJpY2F0ZUZsYWdzLCBqc29uLm5hbWUsIGpzb24uaW1nKTtcclxuICAgICAgICAgICAgICAgICAgICBmYWJyaWNhdGVJdGVtID0gcmVjaXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbURhdGEucmVjaXBlcy5wdXNoKHJlY2lwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYFRoZSBGYWJyaWNhdGUgSXRlbSB0eXBlICR7ZmFicmljYXRlRmxhZ3MudHlwZX0gd2FzIG5vdCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb2duaXplZC4gQWxsb3dhYmxlIHZhbHVlcyBhcmUgQ09NUE9ORU5UIG9yIFJFQ0lQRWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmFicmljYXRlSXRlbS5wYXJ0SWQgIT09IGpzb24uX2lkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGAke2ZhYnJpY2F0ZUZsYWdzLnR5cGV9IHBhcnQgSUQgJyR7ZmFicmljYXRlSXRlbS5wYXJ0SWR9JyBkaWQgbm90IG1hdGNoIENvbXBlbmRpdW0gRW50aXR5IElEICcke2pzb24uX2lkfS4gJ2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmYWJyaWNhdGVJdGVtLm5hbWUgIT09IGpzb24ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgJHtmYWJyaWNhdGVGbGFncy50eXBlfSBuYW1lICcke2ZhYnJpY2F0ZUl0ZW0ubmFtZX0nIGRpZCBub3QgbWF0Y2ggQ29tcGVuZGl1bSBFbnRpdHkgbmFtZSAnJHtqc29uLm5hbWV9LiAnYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZhYnJpY2F0ZUl0ZW0uaW1hZ2VVcmwgIT09IGpzb24uaW1nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGAke2ZhYnJpY2F0ZUZsYWdzLnR5cGV9IGltYWdlIFVSTCAnJHtmYWJyaWNhdGVJdGVtLmltYWdlVXJsfScgZGlkIG5vdCBtYXRjaCBDb21wZW5kaXVtIEVudGl0eSBpbWFnZSBVUkwgJyR7anNvbi5pbWd9LiAnYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5maWxlRXJyb3JzQnlMaW5lTnVtYmVyLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN5c3RlbURhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxpbmVFcnJvckRldGFpbHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgdGhpcy5maWxlRXJyb3JzQnlMaW5lTnVtYmVyLmZvckVhY2goKGVycm9yczogc3RyaW5nW10sIGxpbmU6IG51bWJlcikgPT4gbGluZUVycm9yRGV0YWlscy5wdXNoKGBMaW5lICR7bGluZX06ICR7ZXJyb3JzLmpvaW4oJywgJyl9IFxcbmApKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVuY291bnRlcmVkICR7dGhpcy5maWxlRXJyb3JzQnlMaW5lTnVtYmVyLnNpemV9IGVycm9ycyB3aGVuIHByb2Nlc3NpbmcgZmlsZSBkYXRhIGZvciBzeXN0ZW0gJHt0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uY29tcGVuZGl1bVBhY2tLZXl9LiBFcnJvcnM6IFxcbiAke2xpbmVFcnJvckRldGFpbHN9YCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nU3lzdGVtRmFjdG9yeSwgRmlsZVJlYWRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnksIENvbXBlbmRpdW1JbXBvcnRpbmdDcmFmdGluZ1N5c3RlbUZhY3Rvcnl9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemFactory.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemSpecification.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/core/CraftingSystemSpecification.ts ***!
  \*********************************************************/
/*! exports provided: CraftingSystemSpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemSpecification\", function() { return CraftingSystemSpecification; });\nclass CraftingSystemSpecification {\r\n    constructor(builder) {\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._name = builder.name;\r\n        this._description = builder.description;\r\n        this._enableHint = builder.enableHint;\r\n        this._enabled = builder.enabled;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._fabricator = builder.fabricator;\r\n        this._essences = builder.essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingSystemSpecification.Builder();\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n}\r\n(function (CraftingSystemSpecification) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystemSpecification(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystemSpecification.Builder = Builder;\r\n})(CraftingSystemSpecification || (CraftingSystemSpecification = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi50cz9mNTI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxNQUFNLDJCQUEyQjtJQVU3QixZQUFZLE9BQStDO1FBSjFDLDBCQUFxQixHQUFhLEVBQUUsQ0FBQztRQUVyQyxjQUFTLEdBQXdCLEVBQUUsQ0FBQztRQUdqRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3BELElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNoQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSwyQkFBMkIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7Q0FFSjtBQUVELFdBQVUsMkJBQTJCO0lBRWpDLE1BQWEsT0FBTztRQUFwQjtZQU9XLHlCQUFvQixHQUFhLEVBQUUsQ0FBQztZQUVwQyxhQUFRLEdBQXdCLEVBQUUsQ0FBQztRQXdEOUMsQ0FBQztRQXREVSxLQUFLO1lBQ1IsT0FBTyxJQUFJLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFFTSxRQUFRLENBQUMsS0FBYTtZQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0scUJBQXFCLENBQUMsS0FBYTtZQUN0QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1lBQy9CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBb0I7WUFDdEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7WUFDeEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLHdCQUF3QixDQUFDLEtBQWU7WUFDM0MsSUFBSSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sdUJBQXVCLENBQUMsS0FBYTtZQUN4QyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBYTtZQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUN4QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sU0FBUyxDQUFDLEtBQWM7WUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELGVBQWUsQ0FBQyxLQUFhO1lBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxXQUFXLENBQUMsS0FBd0I7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUEwQjtZQUMxQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBRUo7SUFqRVksbUNBQU8sVUFpRW5CO0FBRUwsQ0FBQyxFQXJFUywyQkFBMkIsS0FBM0IsMkJBQTJCLFFBcUVwQztBQUVtQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdG9yfSBmcm9tIFwiLi9GYWJyaWNhdG9yXCI7XHJcbmltcG9ydCB7RXNzZW5jZURlZmluaXRpb259IGZyb20gXCIuL0NyYWZ0aW5nU3lzdGVtXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248VD4ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcGVuZGl1bVBhY2tLZXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Rlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVIaW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdG9yOiBGYWJyaWNhdG9yPFQ+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlcjxUPikge1xyXG4gICAgICAgIHRoaXMuX2NvbXBlbmRpdW1QYWNrS2V5ID0gYnVpbGRlci5jb21wZW5kaXVtUGFja0tleTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gYnVpbGRlci5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gYnVpbGRlci5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLl9lbmFibGVIaW50ID0gYnVpbGRlci5lbmFibGVIaW50O1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSBidWlsZGVyLmVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgPSBidWlsZGVyLnN1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2ZhYnJpY2F0b3IgPSBidWlsZGVyLmZhYnJpY2F0b3I7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZXMgPSBidWlsZGVyLmVzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcjxUPigpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24uQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wZW5kaXVtUGFja0tleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wZW5kaXVtUGFja0tleTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlSGludCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVIaW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXBwb3J0ZWRHYW1lU3lzdGVtcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmYWJyaWNhdG9yKCk6IEZhYnJpY2F0b3I8VD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWJyaWNhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlc3NlbmNlcygpOiBFc3NlbmNlRGVmaW5pdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5uYW1lc3BhY2UgQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQnVpbGRlcjxUPiB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb21wZW5kaXVtUGFja0tleSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb24hOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZUhpbnQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZWQhOiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBzdXBwb3J0ZWRHYW1lU3lzdGVtczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRvciE6IEZhYnJpY2F0b3I8VD47XHJcbiAgICAgICAgcHVibGljIGVzc2VuY2VzOiBFc3NlbmNlRGVmaW5pdGlvbltdID0gW107XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpIDogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24odGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aE5hbWUodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBlbmRpdW1QYWNrS2V5KHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5jb21wZW5kaXVtUGFja0tleSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRmFicmljYXRvcih2YWx1ZTogRmFicmljYXRvcjxUPik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmZhYnJpY2F0b3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW1zKHZhbHVlOiBzdHJpbmdbXSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZEdhbWVTeXN0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRHYW1lU3lzdGVtcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVuYWJsZUhpbnQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUhpbnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaXNFbmFibGVkKHZhbHVlOiBib29sZWFuKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhEZXNjcmlwdGlvbih2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2UodmFsdWU6IEVzc2VuY2VEZWZpbml0aW9uKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFc3NlbmNlcyh2YWx1ZTogRXNzZW5jZURlZmluaXRpb25bXSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemSpecification.ts\n");

/***/ }),

/***/ "./src/scripts/core/EssenceCombiner.ts":
/*!*********************************************!*\
  !*** ./src/scripts/core/EssenceCombiner.ts ***!
  \*********************************************/
/*! exports provided: EssenceCombiner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceCombiner\", function() { return EssenceCombiner; });\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n\r\nclass EssenceCombiner {\r\n    constructor(builder) {\r\n        this._effectsByEssenceCombinationIdentity = new Map();\r\n        this._essenceIdentities = new Map();\r\n        this._maxComponents = builder.maxComponents;\r\n        this._maxEssences = builder.maxEssences;\r\n        this._effects = builder.effects;\r\n        this._essenceMatchSizes = this.effects.map((effect) => effect.essenceCombination.length)\r\n            .filter((count, index, essenceCounts) => essenceCounts.indexOf(count) === index);\r\n        const uniqueEssences = this.effects.map((effect) => effect.essenceCombination)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        this._essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssences);\r\n        this.effects.forEach((effect) => this._effectsByEssenceCombinationIdentity.set(_FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(effect.essenceCombination, this._essenceIdentities), effect));\r\n    }\r\n    static builder() {\r\n        return new EssenceCombiner.Builder();\r\n    }\r\n    get maxComponents() {\r\n        return this._maxComponents;\r\n    }\r\n    get maxEssences() {\r\n        return this._maxEssences;\r\n    }\r\n    get effects() {\r\n        return this._effects;\r\n    }\r\n    combine(components, baseItemData) {\r\n        this.validate(components);\r\n        const effects = this.determineAlchemicalEffectsForComponents(components);\r\n        const orderedEffects = this.orderAlchemicalEffects(effects);\r\n        return this.applyEffectsToBaseItem(orderedEffects, baseItemData);\r\n    }\r\n    validate(components) {\r\n        if ((this._maxComponents > 0) && (this._maxComponents < components.length)) {\r\n            throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxComponents} components. `);\r\n        }\r\n        if (this._maxEssences > 0) {\r\n            const essenceCount = components.map((component) => component.essences.length)\r\n                .reduce((left, right) => left + right, 0);\r\n            if (essenceCount > this._maxEssences) {\r\n                throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxEssences} essences. `);\r\n            }\r\n        }\r\n    }\r\n    applyEffectsToBaseItem(effects, baseItem) {\r\n        effects.forEach((effect) => effect.applyTo(baseItem));\r\n        return baseItem;\r\n    }\r\n    determineAlchemicalEffectsForComponents(components) {\r\n        if (components.length === 0 || this.effects.length === 0) {\r\n            return [];\r\n        }\r\n        return components.filter((component) => this._essenceMatchSizes.includes(component.essences.length))\r\n            .map((component) => {\r\n            const essenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, this._essenceIdentities);\r\n            return this._effectsByEssenceCombinationIdentity.get(essenceCombinationIdentity);\r\n        })\r\n            .filter((effect) => effect !== null && typeof effect !== 'undefined');\r\n    }\r\n    orderAlchemicalEffects(effects) {\r\n        return effects.sort((left, right) => {\r\n            return left.type.valueOf() - right.type.valueOf();\r\n        });\r\n    }\r\n}\r\n(function (EssenceCombiner) {\r\n    class Builder {\r\n        constructor() {\r\n            this.effects = [];\r\n        }\r\n        withMaxComponents(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withMaxEssences(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withAlchemicalEffect(value) {\r\n            this.effects.push(value);\r\n            return this;\r\n        }\r\n        withAlchemicalEffects(value) {\r\n            this.effects = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new EssenceCombiner(this);\r\n        }\r\n    }\r\n    EssenceCombiner.Builder = Builder;\r\n})(EssenceCombiner || (EssenceCombiner = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0Vzc2VuY2VDb21iaW5lci50cz8xOTQxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFzRDtBQUV0RCxNQUFNLGVBQWU7SUFTakIsWUFBbUIsT0FBbUM7UUFIckMseUNBQW9DLEdBQXFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDbkYsdUJBQWtCLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7UUFHakUsSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQzVDLElBQUksQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQztRQUN4QyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7UUFFaEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQzthQUN4RyxNQUFNLENBQUMsQ0FBQyxLQUFhLEVBQUUsS0FBYSxFQUFFLGFBQXVCLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUM7UUFFL0csTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUEyQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUM7YUFDOUYsTUFBTSxDQUFDLENBQUMsSUFBYyxFQUFFLEtBQWUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUM7YUFDbkUsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFlLEVBQUUsS0FBYSxFQUFFLFFBQWtCLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUss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RU0sS0FBSztZQUNSLE9BQU8sSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztLQUVKO0lBL0JZLHVCQUFPLFVBK0JuQjtBQUVMLENBQUMsRUFuQ1MsZUFBZSxLQUFmLGVBQWUsUUFtQ3hCO0FBRXVCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9Fc3NlbmNlQ29tYmluZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0FsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0gZnJvbSBcIi4vRmFicmljYXRpb25IZWxwZXJcIjtcclxuXHJcbmNsYXNzIEVzc2VuY2VDb21iaW5lcjxUPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhDb21wb25lbnRzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhFc3NlbmNlczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VNYXRjaFNpemVzOiBudW1iZXJbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5OiBNYXA8bnVtYmVyLCBBbGNoZW1pY2FsRWZmZWN0PFQ+PiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihidWlsZGVyOiBFc3NlbmNlQ29tYmluZXIuQnVpbGRlcjxUPikge1xyXG4gICAgICAgIHRoaXMuX21heENvbXBvbmVudHMgPSBidWlsZGVyLm1heENvbXBvbmVudHM7XHJcbiAgICAgICAgdGhpcy5fbWF4RXNzZW5jZXMgPSBidWlsZGVyLm1heEVzc2VuY2VzO1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdHMgPSBidWlsZGVyLmVmZmVjdHM7XHJcblxyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzID0gdGhpcy5lZmZlY3RzLm1hcCgoZWZmZWN0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiBlZmZlY3QuZXNzZW5jZUNvbWJpbmF0aW9uLmxlbmd0aClcclxuICAgICAgICAgICAgLmZpbHRlcigoY291bnQ6IG51bWJlciwgaW5kZXg6IG51bWJlciwgZXNzZW5jZUNvdW50czogbnVtYmVyW10pID0+IGVzc2VuY2VDb3VudHMuaW5kZXhPZihjb3VudCkgPT09IGluZGV4KTtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pcXVlRXNzZW5jZXMgPSB0aGlzLmVmZmVjdHMubWFwKChlZmZlY3Q6IEFsY2hlbWljYWxFZmZlY3Q8VD4pID0+IGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24pXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IHN0cmluZ1tdLCByaWdodDogc3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKChlc3NlbmNlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGVzc2VuY2VzOiBzdHJpbmdbXSkgPT4gZXNzZW5jZXMuaW5kZXhPZihlc3NlbmNlKSA9PT0gaW5kZXgpKTtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyA9IEZhYnJpY2F0aW9uSGVscGVyLmFzc2lnbkVzc2VuY2VJZGVudGl0aWVzKHVuaXF1ZUVzc2VuY2VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5lZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gdGhpcy5fZWZmZWN0c0J5RXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkuc2V0KEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24sIHRoaXMuX2Vzc2VuY2VJZGVudGl0aWVzKSwgZWZmZWN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyPFQ+KCk6IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heENvbXBvbmVudHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4Q29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF4RXNzZW5jZXMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4RXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVmZmVjdHMoKTogQWxjaGVtaWNhbEVmZmVjdDxUPltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWZmZWN0cztcclxuICAgIH1cclxuXHJcbiAgICBjb21iaW5lKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGJhc2VJdGVtRGF0YTogVCk6IFQge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50cyk7XHJcbiAgICAgICAgY29uc3QgZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdID0gdGhpcy5kZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50cyk7XHJcbiAgICAgICAgY29uc3Qgb3JkZXJlZEVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSA9IHRoaXMub3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUVmZmVjdHNUb0Jhc2VJdGVtKG9yZGVyZWRFZmZlY3RzLCBiYXNlSXRlbURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGUoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSkge1xyXG4gICAgICAgIGlmICgodGhpcy5fbWF4Q29tcG9uZW50cyA+IDApICYmICh0aGlzLl9tYXhDb21wb25lbnRzIDwgY29tcG9uZW50cy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heENvbXBvbmVudHN9IGNvbXBvbmVudHMuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbWF4RXNzZW5jZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VDb3VudCA9IGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBjb21wb25lbnQuZXNzZW5jZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyKSA9PiBsZWZ0ICsgcmlnaHQsIDApO1xyXG4gICAgICAgICAgICBpZiAoZXNzZW5jZUNvdW50ID4gdGhpcy5fbWF4RXNzZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heEVzc2VuY2VzfSBlc3NlbmNlcy4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseUVmZmVjdHNUb0Jhc2VJdGVtKGVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSwgYmFzZUl0ZW06IFQpOiBUIHtcclxuICAgICAgICBlZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0LmFwcGx5VG8oYmFzZUl0ZW0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID09PSAwIHx8IHRoaXMuZWZmZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50cy5maWx0ZXIoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzLmluY2x1ZGVzKGNvbXBvbmVudC5lc3NlbmNlcy5sZW5ndGgpKVxyXG4gICAgICAgICAgICAubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSA9IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGNvbXBvbmVudC5lc3NlbmNlcywgdGhpcy5fZXNzZW5jZUlkZW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5LmdldChlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0ICE9PSBudWxsICYmIHR5cGVvZiBlZmZlY3QhPT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10pOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10ge1xyXG4gICAgICAgIHJldHVybiBlZmZlY3RzLnNvcnQoKGxlZnQ6IEFsY2hlbWljYWxFZmZlY3Q8VD4sIHJpZ2h0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUudmFsdWVPZigpIC0gcmlnaHQudHlwZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBFc3NlbmNlQ29tYmluZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyPFQ+IHtcclxuXHJcbiAgICAgICAgcHVibGljIG1heENvbXBvbmVudHM6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgbWF4RXNzZW5jZXM6IG51bWJlclxyXG4gICAgICAgIHB1YmxpYyBlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgYmFzZUl0ZW06IFQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4Q29tcG9uZW50cyh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4Q29tcG9uZW50cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4RXNzZW5jZXModmFsdWU6IG51bWJlcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLm1heENvbXBvbmVudHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFsY2hlbWljYWxFZmZlY3QodmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD4pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5lZmZlY3RzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWxjaGVtaWNhbEVmZmVjdHModmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVmZmVjdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRXNzZW5jZUNvbWJpbmVyPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFc3NlbmNlQ29tYmluZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7RXNzZW5jZUNvbWJpbmVyfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/EssenceCombiner.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricateItem.ts":
/*!*******************************************!*\
  !*** ./src/scripts/core/FabricateItem.ts ***!
  \*******************************************/
/*! exports provided: FabricateItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItem\", function() { return FabricateItem; });\nclass FabricateItem {\r\n    constructor(systemId, partId, imageUrl, name) {\r\n        this._systemId = systemId;\r\n        this._partId = partId;\r\n        this._imageUrl = imageUrl;\r\n        this._name = name;\r\n    }\r\n    get partId() {\r\n        return this._partId;\r\n    }\r\n    get systemId() {\r\n        return this._systemId;\r\n    }\r\n    get compendiumEntry() {\r\n        return `${this.systemId}.${this.partId}`;\r\n    }\r\n    get imageUrl() {\r\n        return this._imageUrl;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    sharesType(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.partId === other.partId\r\n            && this.systemId === other.systemId;\r\n    }\r\n    isValid() {\r\n        return this.partId && this.partId.length > 0\r\n            && this.systemId && this.systemId.length > 0\r\n            && this.imageUrl != null && this.imageUrl.length > 0\r\n            && this.name != null && this.name.length > 0;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHM/YzkxZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUEsTUFBZSxhQUFhO0lBTXhCLFlBQXNCLFFBQWdCLEVBQUUsTUFBYyxFQUFFLFFBQWdCLEVBQUUsSUFBWTtRQUNsRixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksZUFBZTtRQUNmLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7SUFDNUMsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxVQUFVLENBQUMsS0FBb0I7UUFDM0IsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNSLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxLQUFLLEtBQUssQ0FBQyxNQUFNO2VBQzVCLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUM1QyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ3JDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztlQUN6QyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ2pELElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0o7QUFFcUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhYnN0cmFjdCBjbGFzcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfc3lzdGVtSWQ6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfcGFydElkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbWFnZVVybDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihzeXN0ZW1JZDogc3RyaW5nLCBwYXJ0SWQ6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtSWQgPSBzeXN0ZW1JZDtcclxuICAgICAgICB0aGlzLl9wYXJ0SWQgPSBwYXJ0SWQ7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBpbWFnZVVybDtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFydElkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBlbmRpdW1FbnRyeSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLnN5c3RlbUlkfS4ke3RoaXMucGFydElkfWBcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW1hZ2VVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW1hZ2VVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzaGFyZXNUeXBlKG90aGVyOiBGYWJyaWNhdGVJdGVtKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRJZCA9PT0gb3RoZXIucGFydElkXHJcbiAgICAgICAgICAgICYmIHRoaXMuc3lzdGVtSWQgPT09IG90aGVyLnN5c3RlbUlkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydElkICYmIHRoaXMucGFydElkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5zeXN0ZW1JZCAmJiB0aGlzLnN5c3RlbUlkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5pbWFnZVVybCAhPSBudWxsICYmIHRoaXMuaW1hZ2VVcmwubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAmJiB0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGVJdGVtfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricateItem.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationAction.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationAction.ts ***!
  \***********************************************/
/*! exports provided: FabricationAction, FabricationActionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationAction\", function() { return FabricationAction; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationActionType\", function() { return FabricationActionType; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nvar FabricationActionType;\r\n(function (FabricationActionType) {\r\n    FabricationActionType[\"ADD\"] = \"ADD\";\r\n    FabricationActionType[\"REMOVE\"] = \"REMOVE\";\r\n})(FabricationActionType || (FabricationActionType = {}));\r\nclass FabricationAction extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.component.systemId, builder.component.partId, builder.component.imageUrl, builder.component.name);\r\n        this._component = builder.component;\r\n        this._quantity = builder.quantity;\r\n        this._type = builder.action;\r\n        this._customData = builder.customData;\r\n    }\r\n    static builder() {\r\n        return new FabricationAction.Builder();\r\n    }\r\n    get component() {\r\n        return this._component;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    get customData() {\r\n        return this._customData;\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .withAction(flags.action)\r\n            .withQuantity(flags.quantity)\r\n            .withComponent(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => FabricationAction.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && (this.type != null)\r\n            && (this.type == FabricationActionType.ADD || this.type == FabricationActionType.REMOVE)\r\n            && this.component.isValid()\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (FabricationAction) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationAction(this);\r\n        }\r\n        withComponent(value) {\r\n            this.component = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        withAction(value) {\r\n            this.action = value;\r\n            return this;\r\n        }\r\n        withCustomData(value) {\r\n            this.customData = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationAction.Builder = Builder;\r\n})(FabricationAction || (FabricationAction = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uQWN0aW9uLnRzP2YzZDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUVSO0FBRTlDLElBQUsscUJBR0o7QUFIRCxXQUFLLHFCQUFxQjtJQUN0QixvQ0FBVztJQUNYLDBDQUFpQjtBQUNyQixDQUFDLEVBSEkscUJBQXFCLEtBQXJCLHFCQUFxQixRQUd6QjtBQUVELE1BQU0saUJBQWtCLFNBQVEsNERBQWE7SUFNekMsWUFBWSxPQUFrQztRQUMxQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoSCxJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDcEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7SUFDMUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQzNCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1YsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7SUFFTSxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQTJCLEVBQUUsUUFBZ0I7UUFDakUsT0FBTyxJQUFJLENBQUMsT0FBTyxFQUFFO2FBQ2hCLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ3hCLFlBQVksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO2FBQzVCLGFBQWEsQ0FBQyxvRUFBaUIsQ0FBQyxPQUFPLEVBQUU7YUFDckMsWUFBWSxDQUFDLFFBQVEsQ0FBQzthQUN0QixVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQzthQUN4QixLQUFLLEVBQUUsQ0FBQzthQUNaLEtBQUssRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFTSxNQUFNLENBQUMsYUFBYSxDQUFDLEtBQTZCLEVBQUUsUUFBZ0I7UUFDdkUsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDcEYsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7ZUFDNUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQztlQUNuQixDQUFDLElBQUksQ0FBQyxJQUFJLElBQUkscUJBQXFCLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUkscUJBQXFCLENBQUMsTUFBTSxDQUFDO2VBQ3JGLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFO2VBQ3hCLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQixDQUFDO0NBQ0o7QUFFRCxXQUFVLGlCQUFpQjtJQUN2QixNQUFhLE9BQU87UUFNVCxLQUFLO1lBQ1IsT0FBTyxJQUFJLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFFTSxhQUFhLENBQUMsS0FBd0I7WUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDdkIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFhO1lBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxVQUFVLENBQUMsS0FBNEI7WUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELGNBQWMsQ0FBQyxLQUFVO1lBQ3JCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1lBQ3hCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7S0FFSjtJQTlCWSx5QkFBTyxVQThCbkI7QUFDTCxDQUFDLEVBaENTLGlCQUFpQixLQUFqQixpQkFBaUIsUUFnQzFCO0FBRWdEIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9GYWJyaWNhdGlvbkFjdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRlUmVzdWx0RmxhZ3N9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuZW51bSBGYWJyaWNhdGlvbkFjdGlvblR5cGUge1xyXG4gICAgQUREID0gJ0FERCcsXHJcbiAgICBSRU1PVkUgPSAnUkVNT1ZFJ1xyXG59XHJcblxyXG5jbGFzcyBGYWJyaWNhdGlvbkFjdGlvbiBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3F1YW50aXR5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF90eXBlOiBGYWJyaWNhdGlvbkFjdGlvblR5cGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jdXN0b21EYXRhOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogRmFicmljYXRpb25BY3Rpb24uQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuY29tcG9uZW50LnN5c3RlbUlkLCBidWlsZGVyLmNvbXBvbmVudC5wYXJ0SWQsIGJ1aWxkZXIuY29tcG9uZW50LmltYWdlVXJsLCBidWlsZGVyLmNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB0aGlzLl9jb21wb25lbnQgPSBidWlsZGVyLmNvbXBvbmVudDtcclxuICAgICAgICB0aGlzLl9xdWFudGl0eSA9IGJ1aWxkZXIucXVhbnRpdHk7XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IGJ1aWxkZXIuYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuX2N1c3RvbURhdGEgPSBidWlsZGVyLmN1c3RvbURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCk6IEZhYnJpY2F0aW9uQWN0aW9uLkJ1aWxkZXIge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmFicmljYXRpb25BY3Rpb24uQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHF1YW50aXR5KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1YW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCk6IEZhYnJpY2F0aW9uQWN0aW9uVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1c3RvbURhdGEoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlUmVzdWx0RmxhZ3MsIHN5c3RlbUlkOiBzdHJpbmcpOiBGYWJyaWNhdGlvbkFjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9uKGZsYWdzLmFjdGlvbilcclxuICAgICAgICAgICAgLndpdGhRdWFudGl0eShmbGFncy5xdWFudGl0eSlcclxuICAgICAgICAgICAgLndpdGhDb21wb25lbnQoQ3JhZnRpbmdDb21wb25lbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aFN5c3RlbUlkKHN5c3RlbUlkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmxhZ3MucGFydElkKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCkpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbWFueUZyb21GbGFncyhmbGFnczogRmFicmljYXRlUmVzdWx0RmxhZ3NbXSwgc3lzdGVtSWQ6IHN0cmluZyk6IEZhYnJpY2F0aW9uQWN0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiBmbGFncy5tYXAoKGZsYWdEYXRhKSA9PiBGYWJyaWNhdGlvbkFjdGlvbi5mcm9tRmxhZ3MoZmxhZ0RhdGEsIHN5c3RlbUlkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucXVhbnRpdHkgIT0gbnVsbCAmJiB0aGlzLnF1YW50aXR5ID4gMClcclxuICAgICAgICAgICAgJiYgKHRoaXMudHlwZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAmJiAodGhpcy50eXBlID09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQgfHwgdGhpcy50eXBlID09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkUpXHJcbiAgICAgICAgICAgICYmIHRoaXMuY29tcG9uZW50LmlzVmFsaWQoKVxyXG4gICAgICAgICAgICAmJiBzdXBlci5pc1ZhbGlkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBGYWJyaWNhdGlvbkFjdGlvbiB7XHJcbiAgICBleHBvcnQgY2xhc3MgQnVpbGRlciB7XHJcbiAgICAgICAgcHVibGljIGNvbXBvbmVudCE6IENyYWZ0aW5nQ29tcG9uZW50O1xyXG4gICAgICAgIHB1YmxpYyBxdWFudGl0eSE6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgYWN0aW9uITogRmFicmljYXRpb25BY3Rpb25UeXBlO1xyXG4gICAgICAgIHB1YmxpYyBjdXN0b21EYXRhOiBhbnk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpOiBGYWJyaWNhdGlvbkFjdGlvbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFicmljYXRpb25BY3Rpb24odGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBvbmVudCh2YWx1ZTogQ3JhZnRpbmdDb21wb25lbnQpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFF1YW50aXR5KHZhbHVlOiBudW1iZXIpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5xdWFudGl0eSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWN0aW9uKHZhbHVlOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoQ3VzdG9tRGF0YSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uLCBGYWJyaWNhdGlvbkFjdGlvblR5cGV9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationAction.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationHelper.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationHelper.ts ***!
  \***********************************************/
/*! exports provided: FabricationHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationHelper\", function() { return FabricationHelper; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _FabricationOutcome__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass FabricationHelper {\r\n    static takeActionsForOutcome(inventory, fabricationActions, outcome, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const inventoryModifications = yield FabricationHelper.applyResults(fabricationActions, inventory);\r\n            const addedItems = inventoryModifications.filter((modification) => modification.action === _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD)\r\n                .map((additiveChange) => additiveChange.changedItems)\r\n                .reduce((left, right) => left.concat(right), []);\r\n            return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_1__[\"FabricationOutcome\"].builder()\r\n                .withActions(fabricationActions)\r\n                .withOutcomeType(outcome)\r\n                .withDisplayItems(addedItems)\r\n                .withRecipe(recipe)\r\n                .build();\r\n        });\r\n    }\r\n    static asCraftingResults(components, action) {\r\n        const componentsById = new Map();\r\n        components.forEach((component) => {\r\n            const identicalComponents = componentsById.get(component.partId);\r\n            if (!identicalComponents) {\r\n                componentsById.set(component.partId, [component]);\r\n            }\r\n            else {\r\n                identicalComponents.push(component);\r\n            }\r\n        });\r\n        if (Object.keys(componentsById).length === components.length) {\r\n            return components.map((component) => {\r\n                return _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                    .withComponent(component)\r\n                    .withQuantity(1)\r\n                    .withAction(action)\r\n                    .build();\r\n            });\r\n        }\r\n        const results = [];\r\n        componentsById.forEach((componentsOfType) => {\r\n            const craftingResult = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                .withComponent(componentsOfType[0])\r\n                .withQuantity(componentsOfType.length)\r\n                .withAction(action)\r\n                .build();\r\n            results.push(craftingResult);\r\n        });\r\n        return results;\r\n    }\r\n    ;\r\n    static essenceCombinationIdentity(essences, essenceIdentities) {\r\n        return essences.map((essence) => {\r\n            if (!essenceIdentities.has(essence)) {\r\n                throw new Error(`No known essence is registered for the slug '${essence}'. Known essences are: ${Array.from(essenceIdentities.keys()).join(', ')}`);\r\n            }\r\n            return essenceIdentities.get(essence);\r\n        })\r\n            .reduce((left, right) => left * right);\r\n    }\r\n    static assignEssenceIdentities(essences) {\r\n        const uniqueEssences = essences.filter((essence, index, collection) => collection.indexOf(essence) === index);\r\n        const primes = this.generatePrimes(uniqueEssences.length);\r\n        const essenceIdentities = new Map();\r\n        uniqueEssences.forEach((value, index) => essenceIdentities.set(value, primes[index]));\r\n        return essenceIdentities;\r\n    }\r\n    static generatePrimes(quantity) {\r\n        if (quantity <= FabricationHelper.primes.length) {\r\n            return FabricationHelper.primes.slice(0, quantity);\r\n        }\r\n        let candidate = 98;\r\n        while (FabricationHelper.primes.length < quantity) {\r\n            if (FabricationHelper.primes.every((p) => candidate % p)) {\r\n                FabricationHelper.primes.push(candidate);\r\n            }\r\n            candidate++;\r\n        }\r\n        return FabricationHelper.primes;\r\n    }\r\n    static asComponentCombinations(availableIngredients, limit) {\r\n        const denormalizedComponents = [];\r\n        availableIngredients.forEach((ingredient) => {\r\n            const ceiling = ingredient.quantity < limit ? ingredient.quantity : limit;\r\n            for (let i = 0; i < ceiling; i++) {\r\n                denormalizedComponents.push(ingredient.component);\r\n            }\r\n        });\r\n        const combinations = [];\r\n        const iterations = Math.pow(2, denormalizedComponents.length);\r\n        for (let i = 0; i < iterations; i++) {\r\n            const combination = [];\r\n            for (let j = 0; j < denormalizedComponents.length; j++) {\r\n                if (i & Math.pow(2, j)) {\r\n                    combination.push(denormalizedComponents[j]);\r\n                }\r\n            }\r\n            if (combination.length > 0) {\r\n                combinations.push(combination);\r\n            }\r\n        }\r\n        return combinations.sort((left, right) => left.length - right.length);\r\n    }\r\n    static applyResults(craftingResults, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const inventoryModifications = [];\r\n            for (const craftingResult of craftingResults) {\r\n                switch (craftingResult.type) {\r\n                    case _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD:\r\n                        if (craftingResult.customData) {\r\n                            const inventoryModification = yield inventory.addComponent(craftingResult.component, craftingResult.quantity, craftingResult.customData);\r\n                            inventoryModifications.push(inventoryModification);\r\n                        }\r\n                        else {\r\n                            const inventoryModification = yield inventory.addComponent(craftingResult.component, craftingResult.quantity);\r\n                            inventoryModifications.push(inventoryModification);\r\n                        }\r\n                        break;\r\n                    case _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE:\r\n                        const inventoryModification = yield inventory.removeComponent(craftingResult.component, craftingResult.quantity);\r\n                        inventoryModifications.push(inventoryModification);\r\n                        break;\r\n                    default:\r\n                        throw new Error(`The Crafting Action Type ${craftingResult.type} is not supported. Allowable values are: ADD, REMOVE. `);\r\n                }\r\n            }\r\n            return inventoryModifications;\r\n        });\r\n    }\r\n}\r\nFabricationHelper.primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97];\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uSGVscGVyLnRzPzQyZmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUM2RTtBQUVSO0FBSXJFLE1BQU0saUJBQWlCO0lBSVosTUFBTSxDQUFPLHFCQUFxQixDQUFDLFNBQW9CLEVBQUUsa0JBQXVDLEVBQUUsT0FBb0IsRUFBRSxNQUFlOztZQUMxSSxNQUFNLHNCQUFzQixHQUErQyxNQUFNLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxrQkFBa0IsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUMvSSxNQUFNLFVBQVUsR0FBVyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFzRCxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxLQUFLLHdFQUFxQixDQUFDLEdBQUcsQ0FBQztpQkFDbEssR0FBRyxDQUFDLENBQUMsY0FBd0QsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQztpQkFDOUYsTUFBTSxDQUFDLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUVyRSxPQUFPLHNFQUFrQixDQUFDLE9BQU8sRUFBRTtpQkFDOUIsV0FBVyxDQUFDLGtCQUFrQixDQUFDO2lCQUMvQixlQUFlLENBQUMsT0FBTyxDQUFDO2lCQUN4QixnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7aUJBQzVCLFVBQVUsQ0FBQyxNQUFNLENBQUM7aUJBQ2xCLEtBQUssRUFBRSxDQUFDO1FBQ2pCLENBQUM7S0FBQTtJQUVNLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxVQUErQixFQUFFLE1BQTZCO1FBQzFGLE1BQU0sY0FBYyxHQUFxQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ25FLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUU7WUFDaEQsTUFBTSxtQkFB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QXFCLENBQUMsQ0FBQzt5QkFDdEQ7NkJBQU07NEJBQ0gsTUFBTSxxQkFBcUIsR0FBNkMsTUFBTSxTQUFTLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzRCQUN4SixzQkFBc0IsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQzt5QkFDdEQ7d0JBQ0QsTUFBTTtvQkFDVixLQUFLLHdFQUFxQixDQUFDLE1BQU07d0JBQzdCLE1BQU0scUJBQXFCLEdBQTZDLE1BQU0sU0FBUyxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFDM0osc0JBQXNCLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7d0JBQ25ELE1BQU07b0JBQ1Y7d0JBQ0ksTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsY0FBYyxDQUFDLElBQUksd0RBQXdELENBQUMsQ0FBQztpQkFDaEk7YUFDSjtZQUNELE9BQU8sc0JBQXNCLENBQUM7UUFDbEMsQ0FBQztLQUFBOztBQTlIdUIsd0JBQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBa0k1RyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvRmFicmljYXRpb25IZWxwZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uLCBGYWJyaWNhdGlvbkFjdGlvblR5cGV9IGZyb20gXCIuL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5LCBJbnZlbnRvcnlNb2RpZmljYXRpb259IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uT3V0Y29tZSwgT3V0Y29tZVR5cGV9IGZyb20gXCIuL0ZhYnJpY2F0aW9uT3V0Y29tZVwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4vUmVjaXBlXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4vSW5ncmVkaWVudFwiO1xyXG5cclxuY2xhc3MgRmFicmljYXRpb25IZWxwZXIge1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHByaW1lcyA9IFsyLCAzLCA1LCA3LCAxMSwgMTMsIDE3LCAxOSwgMjMsIDI5LCAzMSwgMzcsIDQxLCA0MywgNDcsIDUzLCA1OSwgNjEsIDY3LCA3MSwgNzMsIDc5LCA4MywgODksIDk3XTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHRha2VBY3Rpb25zRm9yT3V0Y29tZShpbnZlbnRvcnk6IEludmVudG9yeSwgZmFicmljYXRpb25BY3Rpb25zOiBGYWJyaWNhdGlvbkFjdGlvbltdLCBvdXRjb21lOiBPdXRjb21lVHlwZSwgcmVjaXBlPzogUmVjaXBlKTogUHJvbWlzZTxGYWJyaWNhdGlvbk91dGNvbWU+IHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlNb2RpZmljYXRpb25zOiBJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+W10gPSBhd2FpdCBGYWJyaWNhdGlvbkhlbHBlci5hcHBseVJlc3VsdHMoZmFicmljYXRpb25BY3Rpb25zLCBpbnZlbnRvcnkpO1xyXG4gICAgICAgIGNvbnN0IGFkZGVkSXRlbXM6IEl0ZW1bXSA9IGludmVudG9yeU1vZGlmaWNhdGlvbnMuZmlsdGVyKChtb2RpZmljYXRpb246IEludmVudG9yeU1vZGlmaWNhdGlvbjxDcmFmdGluZ0NvbXBvbmVudD4pID0+IG1vZGlmaWNhdGlvbi5hY3Rpb24gPT09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgIC5tYXAoKGFkZGl0aXZlQ2hhbmdlOiBJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+KSA9PiBhZGRpdGl2ZUNoYW5nZS5jaGFuZ2VkSXRlbXMpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IEl0ZW1bXSwgcmlnaHQ6IEl0ZW1bXSkgPT4gbGVmdC5jb25jYXQocmlnaHQpLCBbXSk7XHJcblxyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbk91dGNvbWUuYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9ucyhmYWJyaWNhdGlvbkFjdGlvbnMpXHJcbiAgICAgICAgICAgIC53aXRoT3V0Y29tZVR5cGUob3V0Y29tZSlcclxuICAgICAgICAgICAgLndpdGhEaXNwbGF5SXRlbXMoYWRkZWRJdGVtcylcclxuICAgICAgICAgICAgLndpdGhSZWNpcGUocmVjaXBlKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzQ3JhZnRpbmdSZXN1bHRzKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGFjdGlvbjogRmFicmljYXRpb25BY3Rpb25UeXBlKTogRmFicmljYXRpb25BY3Rpb25bXSB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50c0J5SWQ6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50W10+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbXBvbmVudHMuZm9yRWFjaCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZGVudGljYWxDb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdID0gY29tcG9uZW50c0J5SWQuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWlkZW50aWNhbENvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHNCeUlkLnNldChjb21wb25lbnQucGFydElkLCBbY29tcG9uZW50XSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZGVudGljYWxDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhjb21wb25lbnRzQnlJZCkubGVuZ3RoID09PSBjb21wb25lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkFjdGlvbi5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChjb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eSgxKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uKGFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHM6IEZhYnJpY2F0aW9uQWN0aW9uW10gPSBbXTtcclxuICAgICAgICBjb21wb25lbnRzQnlJZC5mb3JFYWNoKChjb21wb25lbnRzT2ZUeXBlOiBDcmFmdGluZ0NvbXBvbmVudFtdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nUmVzdWx0ID0gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChjb21wb25lbnRzT2ZUeXBlWzBdKVxyXG4gICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eShjb21wb25lbnRzT2ZUeXBlLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIC53aXRoQWN0aW9uKGFjdGlvbilcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goY3JhZnRpbmdSZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGVzc2VuY2VzOiBzdHJpbmdbXSwgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4pOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBlc3NlbmNlcy5tYXAoKGVzc2VuY2U6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWVzc2VuY2VJZGVudGl0aWVzLmhhcyhlc3NlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBrbm93biBlc3NlbmNlIGlzIHJlZ2lzdGVyZWQgZm9yIHRoZSBzbHVnICcke2Vzc2VuY2V9Jy4gS25vd24gZXNzZW5jZXMgYXJlOiAke0FycmF5LmZyb20oZXNzZW5jZUlkZW50aXRpZXMua2V5cygpKS5qb2luKCcsICcpfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlc3NlbmNlSWRlbnRpdGllcy5nZXQoZXNzZW5jZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdCwgcmlnaHQpID0+IGxlZnQgKiByaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3NpZ25Fc3NlbmNlSWRlbnRpdGllcyhlc3NlbmNlczogc3RyaW5nW10pOiBNYXA8c3RyaW5nLCBudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB1bmlxdWVFc3NlbmNlcyA9IGVzc2VuY2VzLmZpbHRlcigoZXNzZW5jZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiBzdHJpbmdbXSkgPT4gY29sbGVjdGlvbi5pbmRleE9mKGVzc2VuY2UpID09PSBpbmRleCk7XHJcbiAgICAgICAgY29uc3QgcHJpbWVzID0gdGhpcy5nZW5lcmF0ZVByaW1lcyh1bmlxdWVFc3NlbmNlcy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHVuaXF1ZUVzc2VuY2VzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gZXNzZW5jZUlkZW50aXRpZXMuc2V0KHZhbHVlLCBwcmltZXNbaW5kZXhdKSk7XHJcbiAgICAgICAgcmV0dXJuIGVzc2VuY2VJZGVudGl0aWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVQcmltZXMocXVhbnRpdHk6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICBpZiAocXVhbnRpdHkgPD0gRmFicmljYXRpb25IZWxwZXIucHJpbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25IZWxwZXIucHJpbWVzLnNsaWNlKDAsIHF1YW50aXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IDk4O1xyXG4gICAgICAgIHdoaWxlIChGYWJyaWNhdGlvbkhlbHBlci5wcmltZXMubGVuZ3RoIDwgcXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgaWYgKEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcy5ldmVyeSgocCkgPT4gY2FuZGlkYXRlICUgcCkpIHtcclxuICAgICAgICAgICAgICAgIEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcy5wdXNoKGNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FuZGlkYXRlKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkhlbHBlci5wcmltZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc0NvbXBvbmVudENvbWJpbmF0aW9ucyhhdmFpbGFibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdLCBsaW1pdDogbnVtYmVyKTogQ3JhZnRpbmdDb21wb25lbnRbXVtdIHtcclxuICAgICAgICBjb25zdCBkZW5vcm1hbGl6ZWRDb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdID0gW107XHJcbiAgICAgICAgYXZhaWxhYmxlSW5ncmVkaWVudHMuZm9yRWFjaCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjZWlsaW5nID0gaW5ncmVkaWVudC5xdWFudGl0eSA8IGxpbWl0ID8gaW5ncmVkaWVudC5xdWFudGl0eSA6IGxpbWl0O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlaWxpbmc7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGVub3JtYWxpemVkQ29tcG9uZW50cy5wdXNoKGluZ3JlZGllbnQuY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmF0aW9uczogQ3JhZnRpbmdDb21wb25lbnRbXVtdID0gW107XHJcbiAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IE1hdGgucG93KDIsIGRlbm9ybWFsaXplZENvbXBvbmVudHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50W10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkZW5vcm1hbGl6ZWRDb21wb25lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAmIE1hdGgucG93KDIsIGopKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tYmluYXRpb24ucHVzaChkZW5vcm1hbGl6ZWRDb21wb25lbnRzW2pdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29tYmluYXRpb24ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29tYmluYXRpb25zLnB1c2goY29tYmluYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21iaW5hdGlvbnMuc29ydCgobGVmdCwgcmlnaHQpID0+IGxlZnQubGVuZ3RoIC0gcmlnaHQubGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGFwcGx5UmVzdWx0cyhjcmFmdGluZ1Jlc3VsdHM6IEZhYnJpY2F0aW9uQWN0aW9uW10sIGludmVudG9yeTogSW52ZW50b3J5KTogUHJvbWlzZTxJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+W10+IHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlNb2RpZmljYXRpb25zOiBJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+W10gPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGNyYWZ0aW5nUmVzdWx0IG9mIGNyYWZ0aW5nUmVzdWx0cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNyYWZ0aW5nUmVzdWx0LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRmFicmljYXRpb25BY3Rpb25UeXBlLkFERDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3JhZnRpbmdSZXN1bHQuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnZlbnRvcnlNb2RpZmljYXRpb246IEludmVudG9yeU1vZGlmaWNhdGlvbjxDcmFmdGluZ0NvbXBvbmVudD4gPSBhd2FpdCBpbnZlbnRvcnkuYWRkQ29tcG9uZW50KGNyYWZ0aW5nUmVzdWx0LmNvbXBvbmVudCwgY3JhZnRpbmdSZXN1bHQucXVhbnRpdHksIGNyYWZ0aW5nUmVzdWx0LmN1c3RvbURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlNb2RpZmljYXRpb25zLnB1c2goaW52ZW50b3J5TW9kaWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnZlbnRvcnlNb2RpZmljYXRpb246IEludmVudG9yeU1vZGlmaWNhdGlvbjxDcmFmdGluZ0NvbXBvbmVudD4gPSBhd2FpdCBpbnZlbnRvcnkuYWRkQ29tcG9uZW50KGNyYWZ0aW5nUmVzdWx0LmNvbXBvbmVudCwgY3JhZnRpbmdSZXN1bHQucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlNb2RpZmljYXRpb25zLnB1c2goaW52ZW50b3J5TW9kaWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkU6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5TW9kaWZpY2F0aW9uOiBJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+ID0gYXdhaXQgaW52ZW50b3J5LnJlbW92ZUNvbXBvbmVudChjcmFmdGluZ1Jlc3VsdC5jb21wb25lbnQsIGNyYWZ0aW5nUmVzdWx0LnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlNb2RpZmljYXRpb25zLnB1c2goaW52ZW50b3J5TW9kaWZpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgQ3JhZnRpbmcgQWN0aW9uIFR5cGUgJHtjcmFmdGluZ1Jlc3VsdC50eXBlfSBpcyBub3Qgc3VwcG9ydGVkLiBBbGxvd2FibGUgdmFsdWVzIGFyZTogQURELCBSRU1PVkUuIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnZlbnRvcnlNb2RpZmljYXRpb25zO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationHelper.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationOutcome.ts":
/*!************************************************!*\
  !*** ./src/scripts/core/FabricationOutcome.ts ***!
  \************************************************/
/*! exports provided: FabricationOutcome, OutcomeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationOutcome\", function() { return FabricationOutcome; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OutcomeType\", function() { return OutcomeType; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n\r\nvar OutcomeType;\r\n(function (OutcomeType) {\r\n    OutcomeType[\"SUCCESS\"] = \"SUCCESS\";\r\n    OutcomeType[\"FAILURE\"] = \"FAILURE\";\r\n})(OutcomeType || (OutcomeType = {}));\r\nclass FabricationOutcome {\r\n    constructor(builder) {\r\n        this._type = builder.type;\r\n        this._recipe = builder.recipe;\r\n        this._actions = builder.actions;\r\n        this._displayItems = builder.displayItems;\r\n    }\r\n    static builder() {\r\n        return new FabricationOutcome.Builder();\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    describe() {\r\n        const descriptionParts = [];\r\n        switch (this.type) {\r\n            case OutcomeType.SUCCESS:\r\n                if (this._recipe) {\r\n                    descriptionParts.push(`Successfully crafted \"${this._recipe.name}\"! `);\r\n                }\r\n                else {\r\n                    descriptionParts.push('Crafting success! ');\r\n                }\r\n                break;\r\n            case OutcomeType.FAILURE:\r\n                if (this._recipe) {\r\n                    descriptionParts.push(`Failed to craft ${this._recipe.name}. `);\r\n                }\r\n                else {\r\n                    descriptionParts.push('Crafting failure. ');\r\n                }\r\n                break;\r\n        }\r\n        if (this.actions && this.actions.length > 0) {\r\n            const removedParts = this.actions.filter((action) => action.type === _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE)\r\n                .map((action) => action.quantity + ' ' + action.name)\r\n                .join(', ');\r\n            if (removedParts && removedParts.length > 0) {\r\n                descriptionParts.push(`Removed: ${removedParts}. `);\r\n            }\r\n            const addedParts = this.actions.filter((action) => action.type === _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD)\r\n                .map((action) => action.quantity + ' ' + action.name)\r\n                .join(', ');\r\n            if (addedParts && addedParts.length > 0) {\r\n                descriptionParts.push(`Added: ${addedParts}. `);\r\n            }\r\n        }\r\n        return descriptionParts.map((line) => '<p>' + line + '</p>').join('\\n');\r\n    }\r\n    get displayItems() {\r\n        return this._displayItems;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n}\r\n(function (FabricationOutcome) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationOutcome(this);\r\n        }\r\n        withOutcomeType(value) {\r\n            this.type = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipe = value;\r\n            return this;\r\n        }\r\n        withActions(value) {\r\n            this.actions = value;\r\n            return this;\r\n        }\r\n        withDisplayItems(value) {\r\n            this.displayItems = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationOutcome.Builder = Builder;\r\n})(FabricationOutcome || (FabricationOutcome = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZS50cz9jMDEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQTZFO0FBRzdFLElBQUssV0FHSjtBQUhELFdBQUssV0FBVztJQUNaLGtDQUFtQjtJQUNuQixrQ0FBbUI7QUFDdkIsQ0FBQyxFQUhJLFdBQVcsS0FBWCxXQUFXLFFBR2Y7QUFFRCxNQUFNLGtCQUFrQjtJQU9wQixZQUFZLE9BQW1DO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDOUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztJQUM5QyxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVDLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVNLFFBQVE7UUFDWCxNQUFNLGdCQUFnQixHQUFhLEVBQUUsQ0FBQztRQUN0QyxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZixLQUFLLFdBQVcsQ0FBQyxPQUFPO2dCQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQ2QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLHlCQUF5QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDO2lCQUN6RTtxQkFBTTtvQkFDSCxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztpQkFDL0M7Z0JBQ0wsTUFBTTtZQUNOLEtBQUssV0FBVyxDQUFDLE9BQU87Z0JBQ3BCLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtvQkFDZCxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUM7aUJBQ2xFO3FCQUFNO29CQUNILGdCQUFnQixDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO2lCQUMvQztnQkFDTCxNQUFNO1NBQ1Q7UUFDRCxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pDLE1BQU0sWUFBWSxHQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBeUIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyx3RUFBcUIsQ0FBQyxNQUFNLENBQUM7aUJBQ3hILEdBQUcsQ0FBQyxDQUFDLE1BQXlCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7aUJBQ3ZFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoQixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDekMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFlBQVksWUFBWSxJQUFJLENBQUM7YUFDdEQ7WUFDRCxNQUFNLFVBQVUsR0FBVyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQXlCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssd0VBQXFCLENBQUMsR0FBRyxDQUFDO2lCQUNuSCxHQUFHLENBQUMsQ0FBQyxNQUF5QixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO2lCQUN2RSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEIsSUFBSSxVQUFVLElBQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3JDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxVQUFVLFVBQVUsSUFBSSxDQUFDO2FBQ2xEO1NBQ0o7UUFDRCxPQUFPLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEYsQ0FBQztJQUVELElBQUksWUFBWTtRQUNaLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7Q0FFSjtBQUVELFdBQVUsa0JBQWtCO0lBRXhCLE1BQWEsT0FBTztRQU9ULEtBQUs7WUFDUixPQUFPLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVNLGVBQWUsQ0FBQyxLQUFrQjtZQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sVUFBVSxDQUFDLEtBQWE7WUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFdBQVcsQ0FBQyxLQUEwQjtZQUN6QyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sZ0JBQWdCLENBQUMsS0FBYTtZQUNqQyxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBRUo7SUEvQlksMEJBQU8sVUErQm5CO0FBRUwsQ0FBQyxFQW5DUyxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBbUMzQjtBQUV1QyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvRmFicmljYXRpb25PdXRjb21lLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbiwgRmFicmljYXRpb25BY3Rpb25UeXBlfSBmcm9tIFwiLi9GYWJyaWNhdGlvbkFjdGlvblwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4vUmVjaXBlXCI7XHJcblxyXG5lbnVtIE91dGNvbWVUeXBlIHtcclxuICAgIFNVQ0NFU1MgPSAnU1VDQ0VTUycsXHJcbiAgICBGQUlMVVJFID0gJ0ZBSUxVUkUnXHJcbn1cclxuXHJcbmNsYXNzIEZhYnJpY2F0aW9uT3V0Y29tZSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdHlwZTogT3V0Y29tZVR5cGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWNpcGU6IFJlY2lwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kaXNwbGF5SXRlbXM6IEl0ZW1bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBGYWJyaWNhdGlvbk91dGNvbWUuQnVpbGRlcikge1xyXG4gICAgICAgIHRoaXMuX3R5cGUgPSBidWlsZGVyLnR5cGU7XHJcbiAgICAgICAgdGhpcy5fcmVjaXBlID0gYnVpbGRlci5yZWNpcGU7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucyA9IGJ1aWxkZXIuYWN0aW9ucztcclxuICAgICAgICB0aGlzLl9kaXNwbGF5SXRlbXMgPSBidWlsZGVyLmRpc3BsYXlJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKTogRmFicmljYXRpb25PdXRjb21lLkJ1aWxkZXIge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmFicmljYXRpb25PdXRjb21lLkJ1aWxkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdHlwZSgpOiBPdXRjb21lVHlwZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc2NyaWJlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25QYXJ0czogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIE91dGNvbWVUeXBlLlNVQ0NFU1M6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25QYXJ0cy5wdXNoKGBTdWNjZXNzZnVsbHkgY3JhZnRlZCBcIiR7dGhpcy5fcmVjaXBlLm5hbWV9XCIhIGApXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uUGFydHMucHVzaCgnQ3JhZnRpbmcgc3VjY2VzcyEgJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE91dGNvbWVUeXBlLkZBSUxVUkU6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25QYXJ0cy5wdXNoKGBGYWlsZWQgdG8gY3JhZnQgJHt0aGlzLl9yZWNpcGUubmFtZX0uIGApXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uUGFydHMucHVzaCgnQ3JhZnRpbmcgZmFpbHVyZS4gJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25zICYmIHRoaXMuYWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRQYXJ0czogc3RyaW5nID0gdGhpcy5hY3Rpb25zLmZpbHRlcigoYWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvbikgPT4gYWN0aW9uLnR5cGUgPT09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkUpXHJcbiAgICAgICAgICAgICAgICAubWFwKChhY3Rpb246IEZhYnJpY2F0aW9uQWN0aW9uKSA9PiBhY3Rpb24ucXVhbnRpdHkgKyAnICcgKyBhY3Rpb24ubmFtZSlcclxuICAgICAgICAgICAgICAgIC5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBpZiAocmVtb3ZlZFBhcnRzICYmIHJlbW92ZWRQYXJ0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblBhcnRzLnB1c2goYFJlbW92ZWQ6ICR7cmVtb3ZlZFBhcnRzfS4gYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhZGRlZFBhcnRzOiBzdHJpbmcgPSB0aGlzLmFjdGlvbnMuZmlsdGVyKChhY3Rpb246IEZhYnJpY2F0aW9uQWN0aW9uKSA9PiBhY3Rpb24udHlwZSA9PT0gRmFicmljYXRpb25BY3Rpb25UeXBlLkFERClcclxuICAgICAgICAgICAgICAgIC5tYXAoKGFjdGlvbjogRmFicmljYXRpb25BY3Rpb24pID0+IGFjdGlvbi5xdWFudGl0eSArICcgJyArIGFjdGlvbi5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgIGlmIChhZGRlZFBhcnRzICYmIGFkZGVkUGFydHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25QYXJ0cy5wdXNoKGBBZGRlZDogJHthZGRlZFBhcnRzfS4gYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb25QYXJ0cy5tYXAoKGxpbmU6IHN0cmluZykgPT4gJzxwPicgKyBsaW5lICsgJzwvcD4nKS5qb2luKCdcXG4nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlzcGxheUl0ZW1zKCk6IEl0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3BsYXlJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aW9ucygpOiBGYWJyaWNhdGlvbkFjdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9ucztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBGYWJyaWNhdGlvbk91dGNvbWUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHR5cGU6IE91dGNvbWVUeXBlO1xyXG4gICAgICAgIHB1YmxpYyByZWNpcGU6IFJlY2lwZTtcclxuICAgICAgICBwdWJsaWMgYWN0aW9uczogRmFicmljYXRpb25BY3Rpb25bXTtcclxuICAgICAgICBwdWJsaWMgZGlzcGxheUl0ZW1zOiBJdGVtW107XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpOiBGYWJyaWNhdGlvbk91dGNvbWUge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhYnJpY2F0aW9uT3V0Y29tZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoT3V0Y29tZVR5cGUodmFsdWU6IE91dGNvbWVUeXBlKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUmVjaXBlKHZhbHVlOiBSZWNpcGUpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5yZWNpcGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFjdGlvbnModmFsdWU6IEZhYnJpY2F0aW9uQWN0aW9uW10pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhEaXNwbGF5SXRlbXModmFsdWU6IEl0ZW1bXSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJdGVtcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbk91dGNvbWUsIE91dGNvbWVUeXBlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationOutcome.ts\n");

/***/ }),

/***/ "./src/scripts/core/Fabricator.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Fabricator.ts ***!
  \****************************************/
/*! exports provided: Fabricator, AlchemySpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fabricator\", function() { return Fabricator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemySpecification\", function() { return AlchemySpecification; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n/* harmony import */ var _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nvar EssenceMatchType;\r\n(function (EssenceMatchType) {\r\n    EssenceMatchType[\"EXACT\"] = \"EXACT\";\r\n    EssenceMatchType[\"SUPERSET\"] = \"SUPERSET\";\r\n    EssenceMatchType[\"NONE\"] = \"NONE\";\r\n})(EssenceMatchType || (EssenceMatchType = {}));\r\nclass CraftingComponentCombination {\r\n    constructor(components, essenceIdentities) {\r\n        this._essenceIdentities = new Map();\r\n        this._components = [];\r\n        this._components = components;\r\n        this._essenceIdentities = essenceIdentities;\r\n        this._combinationIdentity = components.map((component) => _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, essenceIdentities))\r\n            .reduce((left, right) => left * right, 1);\r\n    }\r\n    get components() {\r\n        return this._components;\r\n    }\r\n    get combinationIdentity() {\r\n        return this._combinationIdentity;\r\n    }\r\n    essenceMatchType(requiredEssences) {\r\n        const requiredEssenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(requiredEssences, this._essenceIdentities);\r\n        if (requiredEssenceCombinationIdentity === this._combinationIdentity) {\r\n            return EssenceMatchType.EXACT;\r\n        }\r\n        if (requiredEssenceCombinationIdentity > this._combinationIdentity) {\r\n            return EssenceMatchType.NONE;\r\n        }\r\n        const testResult = this._combinationIdentity % requiredEssenceCombinationIdentity;\r\n        if (testResult === 0) {\r\n            return EssenceMatchType.SUPERSET;\r\n        }\r\n        return EssenceMatchType.NONE;\r\n    }\r\n}\r\nclass AlchemySpecification {\r\n    constructor(essenceCombiner, baseComponent) {\r\n        if (!essenceCombiner || !baseComponent) {\r\n            throw new Error('Alchemy Specifications require an Essence Combiner and a Base Crafting Component. ');\r\n        }\r\n        this._essenceCombiner = essenceCombiner;\r\n        this._baseComponent = baseComponent;\r\n    }\r\n    get essenceCombiner() {\r\n        return this._essenceCombiner;\r\n    }\r\n    get baseComponent() {\r\n        return this._baseComponent;\r\n    }\r\n    getBaseItemData() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._baseItemData) {\r\n                return this._baseItemData;\r\n            }\r\n            const compendium = game.packs.get(this.baseComponent.systemId);\r\n            // @ts-ignore\r\n            const entity = yield compendium.getEntity(this.baseComponent.partId);\r\n            this._baseItemData = entity.data.data;\r\n            return this._baseItemData;\r\n        });\r\n    }\r\n}\r\nclass Fabricator {\r\n    constructor(alchemySpecification) {\r\n        this._alchemySpecification = alchemySpecification;\r\n    }\r\n    fabricateFromComponents(inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._alchemySpecification) {\r\n                throw new Error(`No Alchemy Specification has been provided for this system. You may only craft from Recipes. `);\r\n            }\r\n            const baseItemData = yield this._alchemySpecification.getBaseItemData();\r\n            const alchemicallyModifiedItemData = this._alchemySpecification.essenceCombiner.combine(components, duplicate(baseItemData));\r\n            const resultantComponentType = this._alchemySpecification.baseComponent;\r\n            const addComponentAction = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                .withAction(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD)\r\n                .withQuantity(1)\r\n                .withCustomData(alchemicallyModifiedItemData)\r\n                .withComponent(resultantComponentType)\r\n                .build();\r\n            const fabricationActions = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(components, _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE);\r\n            fabricationActions.push(addComponentAction);\r\n            return _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].takeActionsForOutcome(inventory, fabricationActions, _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS);\r\n        });\r\n    }\r\n    fabricateFromRecipe(inventory, recipe) {\r\n        const ownedComponents = inventory.components.filter((record) => record.fabricateItem.systemId === recipe.systemId);\r\n        const input = [];\r\n        const namedIngredientsByPartId = new Map();\r\n        if (recipe.ingredients && recipe.ingredients.length > 0) {\r\n            recipe.ingredients.forEach((ingredient) => {\r\n                namedIngredientsByPartId.set(ingredient.partId, ingredient);\r\n                if (ingredient.consumed) {\r\n                    input.push(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                        .withQuantity(ingredient.quantity)\r\n                        .withComponent(ingredient.component)\r\n                        .withAction(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE)\r\n                        .build());\r\n                }\r\n            });\r\n        }\r\n        if (recipe.essences && recipe.essences.length > 0) {\r\n            const availableIngredients = ownedComponents.map((componentRecord) => {\r\n                if (namedIngredientsByPartId.has(componentRecord.fabricateItem.partId)) {\r\n                    const namedIngredient = namedIngredientsByPartId.get(componentRecord.fabricateItem.partId);\r\n                    const availableQuantityForEssenceExtraction = componentRecord.totalQuantity > namedIngredient.quantity ? componentRecord.totalQuantity - namedIngredient.quantity : 0;\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                        .isConsumed(namedIngredient.consumed)\r\n                        .withComponent(componentRecord.fabricateItem)\r\n                        .withQuantity(availableQuantityForEssenceExtraction)\r\n                        .build();\r\n                }\r\n                return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                    .isConsumed(true)\r\n                    .withComponent(componentRecord.fabricateItem)\r\n                    .withQuantity(componentRecord.totalQuantity)\r\n                    .build();\r\n            });\r\n            const craftingComponentCombinations = this.analyzeCombinationsForEssences(availableIngredients, recipe.essences);\r\n            const selectedCombination = this.selectBestCombinationFrom(recipe, craftingComponentCombinations);\r\n            if (!selectedCombination || selectedCombination.length === 0) {\r\n                throw new Error(`There are insufficient components available to craft the Recipe \"${recipe.name}\". `);\r\n            }\r\n            const consumedComponents = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(selectedCombination, _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE);\r\n            input.push(...consumedComponents);\r\n        }\r\n        const output = recipe.results;\r\n        const fabricationActions = input.concat(output);\r\n        return _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].takeActionsForOutcome(inventory, fabricationActions, _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS, recipe);\r\n    }\r\n    analyzeCombinationsForEssences(availableIngredients, requiredEssences) {\r\n        const usableIngredients = availableIngredients.filter((ingredient) => ingredient.component.essences.filter((essence) => requiredEssences.includes(essence)).length > 0);\r\n        const uniqueEssencesInUsableComponents = usableIngredients.map((ingredient) => ingredient.component.essences)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        const essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssencesInUsableComponents);\r\n        return _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asComponentCombinations(usableIngredients, requiredEssences.length)\r\n            .map((combination) => {\r\n            return new CraftingComponentCombination(combination, essenceIdentities);\r\n        });\r\n    }\r\n    selectBestCombinationFrom(recipe, combinations) {\r\n        const exactMatches = [];\r\n        const supersets = [];\r\n        combinations.forEach((combination) => {\r\n            const essenceMatchType = combination.essenceMatchType(recipe.essences);\r\n            switch (essenceMatchType) {\r\n                case EssenceMatchType.EXACT:\r\n                    exactMatches.push(combination);\r\n                    break;\r\n                case EssenceMatchType.SUPERSET:\r\n                    supersets.push(combination);\r\n                    break;\r\n            }\r\n        });\r\n        const selectFewestComponents = (combinations) => {\r\n            return combinations.sort((left, right) => left.components.length - right.components.length)\r\n                .find(() => true)\r\n                .components;\r\n        };\r\n        if (exactMatches.length === 0 && supersets.length === 0) {\r\n            return [];\r\n        }\r\n        return exactMatches.length > 0 ? selectFewestComponents(exactMatches) : selectFewestComponents(supersets);\r\n    }\r\n    filterCraftableRecipesFor(craftingComponents, recipes) {\r\n        return recipes.filter((recipe) => this.isCraftableFromEssencesIn(recipe, craftingComponents));\r\n    }\r\n    isCraftableFromEssencesIn(recipe, components) {\r\n        const essences = components.map((component) => component.essences)\r\n            .reduce((left, right) => left.concat(right), []);\r\n        return essences.every((essence) => recipe.essences.includes(essence)\r\n            && (essences.filter((essence) => essence === essence).length >= recipe.essences.filter((essence) => essence === essence).length));\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0b3IudHM/Zjk1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQzZFO0FBRXZCO0FBRWU7QUFHN0I7QUFFeEMsSUFBSyxnQkFJSjtBQUpELFdBQUssZ0JBQWdCO0lBQ2pCLG1DQUFlO0lBQ2YseUNBQXFCO0lBQ3JCLGlDQUFhO0FBQ2pCLENBQUMsRUFKSSxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBSXBCO0FBRUQsTUFBTSw0QkFBNEI7SUFNOUIsWUFBWSxVQUErQixFQUFFLGlCQUFzQztRQUpsRSx1QkFBa0IsR0FBd0IsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNwRCxnQkFBVyxHQUF3QixFQUFFLENBQUM7UUFJbkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGlCQUFpQixDQUFDO1FBQzVDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBNEIsRUFBRSxFQUFFLENBQUMsb0VBQWlCLENBQUMsMEJBQTBCLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO2FBQzVKLE1BQU0sQ0FBQyxDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBSSxtQkFBbUI7UUFDbkIsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDckMsQ0FBQztJQUVNLGdCQUFnQixDQUFDLGdCQUEwQjtRQUM5QyxNQUFNLGtDQUFrQyxHQUFHLG9FQUFpQixDQUFDLDBCQUEwQixDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FB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LE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDekosQ0FBQztDQUNKO0FBRXlDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9GYWJyaWNhdG9yLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuL1JlY2lwZVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uLCBGYWJyaWNhdGlvbkFjdGlvblR5cGV9IGZyb20gXCIuL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25IZWxwZXJ9IGZyb20gXCIuL0ZhYnJpY2F0aW9uSGVscGVyXCI7XHJcbmltcG9ydCB7RXNzZW5jZUNvbWJpbmVyfSBmcm9tIFwiLi9Fc3NlbmNlQ29tYmluZXJcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbk91dGNvbWUsIE91dGNvbWVUeXBlfSBmcm9tIFwiLi9GYWJyaWNhdGlvbk91dGNvbWVcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4vSW5ncmVkaWVudFwiO1xyXG5cclxuZW51bSBFc3NlbmNlTWF0Y2hUeXBlIHtcclxuICAgIEVYQUNUID0gJ0VYQUNUJyxcclxuICAgIFNVUEVSU0VUID0gJ1NVUEVSU0VUJyxcclxuICAgIE5PTkUgPSAnTk9ORSdcclxufVxyXG5cclxuY2xhc3MgQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbiB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21iaW5hdGlvbklkZW50aXR5OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSwgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4pIHtcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRzID0gY29tcG9uZW50cztcclxuICAgICAgICB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyA9IGVzc2VuY2VJZGVudGl0aWVzO1xyXG4gICAgICAgIHRoaXMuX2NvbWJpbmF0aW9uSWRlbnRpdHkgPSBjb21wb25lbnRzLm1hcCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4gRmFicmljYXRpb25IZWxwZXIuZXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkoY29tcG9uZW50LmVzc2VuY2VzLCBlc3NlbmNlSWRlbnRpdGllcykpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlcikgPT4gbGVmdCAqIHJpZ2h0LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcG9uZW50cygpOiBDcmFmdGluZ0NvbXBvbmVudFtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tYmluYXRpb25JZGVudGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21iaW5hdGlvbklkZW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlc3NlbmNlTWF0Y2hUeXBlKHJlcXVpcmVkRXNzZW5jZXM6IHN0cmluZ1tdKTogRXNzZW5jZU1hdGNoVHlwZSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWlyZWRFc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSA9IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KHJlcXVpcmVkRXNzZW5jZXMsIHRoaXMuX2Vzc2VuY2VJZGVudGl0aWVzKTtcclxuICAgICAgICBpZiAocmVxdWlyZWRFc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSA9PT0gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gRXNzZW5jZU1hdGNoVHlwZS5FWEFDVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkgPiB0aGlzLl9jb21iaW5hdGlvbklkZW50aXR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFc3NlbmNlTWF0Y2hUeXBlLk5PTkU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSB0aGlzLl9jb21iaW5hdGlvbklkZW50aXR5ICUgcmVxdWlyZWRFc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eTtcclxuICAgICAgICBpZiAodGVzdFJlc3VsdCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gRXNzZW5jZU1hdGNoVHlwZS5TVVBFUlNFVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEVzc2VuY2VNYXRjaFR5cGUuTk9ORTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIEFsY2hlbXlTcGVjaWZpY2F0aW9uPFQ+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VDb21iaW5lcjogRXNzZW5jZUNvbWJpbmVyPFQ+O1xyXG4gICAgcHJpdmF0ZSBfYmFzZUl0ZW1EYXRhOiBUO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYmFzZUNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmVyOiBFc3NlbmNlQ29tYmluZXI8VD4sIGJhc2VDb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKCFlc3NlbmNlQ29tYmluZXIgfHwgIWJhc2VDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGNoZW15IFNwZWNpZmljYXRpb25zIHJlcXVpcmUgYW4gRXNzZW5jZSBDb21iaW5lciBhbmQgYSBCYXNlIENyYWZ0aW5nIENvbXBvbmVudC4gJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VDb21iaW5lciA9IGVzc2VuY2VDb21iaW5lcjtcclxuICAgICAgICB0aGlzLl9iYXNlQ29tcG9uZW50ID0gYmFzZUNvbXBvbmVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZUNvbWJpbmVyKCk6IEVzc2VuY2VDb21iaW5lcjxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VDb21iaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYmFzZUNvbXBvbmVudCgpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VDb21wb25lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0QmFzZUl0ZW1EYXRhKCk6IFByb21pc2U8VD4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9iYXNlSXRlbURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VJdGVtRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bTogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KHRoaXMuYmFzZUNvbXBvbmVudC5zeXN0ZW1JZCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGVudGl0eTogRW50aXR5PFQ+ID0gYXdhaXQgY29tcGVuZGl1bS5nZXRFbnRpdHkodGhpcy5iYXNlQ29tcG9uZW50LnBhcnRJZCk7XHJcbiAgICAgICAgdGhpcy5fYmFzZUl0ZW1EYXRhID0gZW50aXR5LmRhdGEuZGF0YTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYmFzZUl0ZW1EYXRhO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBGYWJyaWNhdG9yPFQ+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FsY2hlbXlTcGVjaWZpY2F0aW9uOiBBbGNoZW15U3BlY2lmaWNhdGlvbjxUPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhbGNoZW15U3BlY2lmaWNhdGlvbj86IEFsY2hlbXlTcGVjaWZpY2F0aW9uPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24gPSBhbGNoZW15U3BlY2lmaWNhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZmFicmljYXRlRnJvbUNvbXBvbmVudHMoaW52ZW50b3J5OiBJbnZlbnRvcnksIGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10pOiBQcm9taXNlPEZhYnJpY2F0aW9uT3V0Y29tZT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBBbGNoZW15IFNwZWNpZmljYXRpb24gaGFzIGJlZW4gcHJvdmlkZWQgZm9yIHRoaXMgc3lzdGVtLiBZb3UgbWF5IG9ubHkgY3JhZnQgZnJvbSBSZWNpcGVzLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYmFzZUl0ZW1EYXRhOiBUID0gYXdhaXQgdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24uZ2V0QmFzZUl0ZW1EYXRhKCk7XHJcbiAgICAgICAgY29uc3QgYWxjaGVtaWNhbGx5TW9kaWZpZWRJdGVtRGF0YTogVCA9IHRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uLmVzc2VuY2VDb21iaW5lci5jb21iaW5lKGNvbXBvbmVudHMsIGR1cGxpY2F0ZShiYXNlSXRlbURhdGEpKTtcclxuICAgICAgICBjb25zdCByZXN1bHRhbnRDb21wb25lbnRUeXBlOiBDcmFmdGluZ0NvbXBvbmVudCA9IHRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uLmJhc2VDb21wb25lbnQ7XHJcbiAgICAgICAgY29uc3QgYWRkQ29tcG9uZW50QWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvbiA9IEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aEFjdGlvbihGYWJyaWNhdGlvbkFjdGlvblR5cGUuQUREKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KDEpXHJcbiAgICAgICAgICAgIC53aXRoQ3VzdG9tRGF0YShhbGNoZW1pY2FsbHlNb2RpZmllZEl0ZW1EYXRhKVxyXG4gICAgICAgICAgICAud2l0aENvbXBvbmVudChyZXN1bHRhbnRDb21wb25lbnRUeXBlKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICBjb25zdCBmYWJyaWNhdGlvbkFjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uW10gPSBGYWJyaWNhdGlvbkhlbHBlci5hc0NyYWZ0aW5nUmVzdWx0cyhjb21wb25lbnRzLCBGYWJyaWNhdGlvbkFjdGlvblR5cGUuUkVNT1ZFKTtcclxuICAgICAgICBmYWJyaWNhdGlvbkFjdGlvbnMucHVzaChhZGRDb21wb25lbnRBY3Rpb24pO1xyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkhlbHBlci50YWtlQWN0aW9uc0Zvck91dGNvbWUoaW52ZW50b3J5LCBmYWJyaWNhdGlvbkFjdGlvbnMsIE91dGNvbWVUeXBlLlNVQ0NFU1MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmYWJyaWNhdGVGcm9tUmVjaXBlKGludmVudG9yeTogSW52ZW50b3J5LCByZWNpcGU6IFJlY2lwZSk6IFByb21pc2U8RmFicmljYXRpb25PdXRjb21lPiB7XHJcbiAgICAgICAgY29uc3Qgb3duZWRDb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+W10gPSBpbnZlbnRvcnkuY29tcG9uZW50cy5maWx0ZXIoKHJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PikgPT4gcmVjb3JkLmZhYnJpY2F0ZUl0ZW0uc3lzdGVtSWQgPT09IHJlY2lwZS5zeXN0ZW1JZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0OiBGYWJyaWNhdGlvbkFjdGlvbltdID0gW107XHJcbiAgICAgICAgY29uc3QgbmFtZWRJbmdyZWRpZW50c0J5UGFydElkOiBNYXA8c3RyaW5nLCBJbmdyZWRpZW50PiA9IG5ldyBNYXAoKTtcclxuICAgICAgICBpZiAocmVjaXBlLmluZ3JlZGllbnRzICYmIHJlY2lwZS5pbmdyZWRpZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgcmVjaXBlLmluZ3JlZGllbnRzLmZvckVhY2goKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IHtcclxuICAgICAgICAgICAgICAgbmFtZWRJbmdyZWRpZW50c0J5UGFydElkLnNldChpbmdyZWRpZW50LnBhcnRJZCwgaW5ncmVkaWVudCk7XHJcbiAgICAgICAgICAgICAgIGlmIChpbmdyZWRpZW50LmNvbnN1bWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoaW5ncmVkaWVudC5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChpbmdyZWRpZW50LmNvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAud2l0aEFjdGlvbihGYWJyaWNhdGlvbkFjdGlvblR5cGUuUkVNT1ZFKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlY2lwZS5lc3NlbmNlcyAmJiByZWNpcGUuZXNzZW5jZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBhdmFpbGFibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdID0gb3duZWRDb21wb25lbnRzLm1hcCgoY29tcG9uZW50UmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZWRJbmdyZWRpZW50c0J5UGFydElkLmhhcyhjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbS5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZWRJbmdyZWRpZW50OiBJbmdyZWRpZW50ID0gbmFtZWRJbmdyZWRpZW50c0J5UGFydElkLmdldChjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5Rm9yRXNzZW5jZUV4dHJhY3Rpb246IG51bWJlciA9IGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5ID4gbmFtZWRJbmdyZWRpZW50LnF1YW50aXR5ID8gY29tcG9uZW50UmVjb3JkLnRvdGFsUXVhbnRpdHkgLSBuYW1lZEluZ3JlZGllbnQucXVhbnRpdHkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbmdyZWRpZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaXNDb25zdW1lZChuYW1lZEluZ3JlZGllbnQuY29uc3VtZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoQ29tcG9uZW50KGNvbXBvbmVudFJlY29yZC5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGF2YWlsYWJsZVF1YW50aXR5Rm9yRXNzZW5jZUV4dHJhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEluZ3JlZGllbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLmlzQ29uc3VtZWQodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aENvbXBvbmVudChjb21wb25lbnRSZWNvcmQuZmFicmljYXRlSXRlbSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbnMgPSB0aGlzLmFuYWx5emVDb21iaW5hdGlvbnNGb3JFc3NlbmNlcyhhdmFpbGFibGVJbmdyZWRpZW50cywgcmVjaXBlLmVzc2VuY2VzKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb21iaW5hdGlvbjogQ3JhZnRpbmdDb21wb25lbnRbXSA9IHRoaXMuc2VsZWN0QmVzdENvbWJpbmF0aW9uRnJvbShyZWNpcGUsIGNyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25zKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvbWJpbmF0aW9uIHx8IHNlbGVjdGVkQ29tYmluYXRpb24ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGFyZSBpbnN1ZmZpY2llbnQgY29tcG9uZW50cyBhdmFpbGFibGUgdG8gY3JhZnQgdGhlIFJlY2lwZSBcIiR7cmVjaXBlLm5hbWV9XCIuIGApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29uc3VtZWRDb21wb25lbnRzID0gRmFicmljYXRpb25IZWxwZXIuYXNDcmFmdGluZ1Jlc3VsdHMoc2VsZWN0ZWRDb21iaW5hdGlvbiwgRmFicmljYXRpb25BY3Rpb25UeXBlLlJFTU9WRSk7XHJcbiAgICAgICAgICAgIGlucHV0LnB1c2goLi4uY29uc3VtZWRDb21wb25lbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG91dHB1dDogRmFicmljYXRpb25BY3Rpb25bXSA9IHJlY2lwZS5yZXN1bHRzO1xyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0aW9uQWN0aW9uczogRmFicmljYXRpb25BY3Rpb25bXSA9IGlucHV0LmNvbmNhdChvdXRwdXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25IZWxwZXIudGFrZUFjdGlvbnNGb3JPdXRjb21lKGludmVudG9yeSwgZmFicmljYXRpb25BY3Rpb25zLCBPdXRjb21lVHlwZS5TVUNDRVNTLCByZWNpcGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYW5hbHl6ZUNvbWJpbmF0aW9uc0ZvckVzc2VuY2VzKGF2YWlsYWJsZUluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10sIHJlcXVpcmVkRXNzZW5jZXM6IHN0cmluZ1tdKTogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdIHtcclxuICAgICAgICBjb25zdCB1c2FibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdID0gYXZhaWxhYmxlSW5ncmVkaWVudHMuZmlsdGVyKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNvbXBvbmVudC5lc3NlbmNlcy5maWx0ZXIoKGVzc2VuY2U6IHN0cmluZykgPT4gcmVxdWlyZWRFc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSkubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgY29uc3QgdW5pcXVlRXNzZW5jZXNJblVzYWJsZUNvbXBvbmVudHM6IHN0cmluZ1tdID0gdXNhYmxlSW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNvbXBvbmVudC5lc3NlbmNlcylcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogc3RyaW5nW10scmlnaHQ6c3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKChlc3NlbmNlLCBpbmRleCwgZXNzZW5jZXMpID0+IGVzc2VuY2VzLmluZGV4T2YoZXNzZW5jZSkgPT09IGluZGV4KSk7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBGYWJyaWNhdGlvbkhlbHBlci5hc3NpZ25Fc3NlbmNlSWRlbnRpdGllcyh1bmlxdWVFc3NlbmNlc0luVXNhYmxlQ29tcG9uZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uSGVscGVyLmFzQ29tcG9uZW50Q29tYmluYXRpb25zKHVzYWJsZUluZ3JlZGllbnRzLCByZXF1aXJlZEVzc2VuY2VzLmxlbmd0aClcclxuICAgICAgICAgICAgLm1hcCgoY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50W10pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uKGNvbWJpbmF0aW9uLCBlc3NlbmNlSWRlbnRpdGllcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3RCZXN0Q29tYmluYXRpb25Gcm9tKHJlY2lwZTogUmVjaXBlLCBjb21iaW5hdGlvbnM6IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25bXSk6IENyYWZ0aW5nQ29tcG9uZW50W10ge1xyXG4gICAgICAgIGNvbnN0IGV4YWN0TWF0Y2hlczogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdID0gW107XHJcbiAgICAgICAgY29uc3Qgc3VwZXJzZXRzOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uW10gPSBbXTtcclxuICAgICAgICBjb21iaW5hdGlvbnMuZm9yRWFjaCgoY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXNzZW5jZU1hdGNoVHlwZTogRXNzZW5jZU1hdGNoVHlwZSA9IGNvbWJpbmF0aW9uLmVzc2VuY2VNYXRjaFR5cGUocmVjaXBlLmVzc2VuY2VzKTtcclxuICAgICAgICAgICAgc3dpdGNoIChlc3NlbmNlTWF0Y2hUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVzc2VuY2VNYXRjaFR5cGUuRVhBQ1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhY3RNYXRjaGVzLnB1c2goY29tYmluYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFc3NlbmNlTWF0Y2hUeXBlLlNVUEVSU0VUOlxyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyc2V0cy5wdXNoKGNvbWJpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEZld2VzdENvbXBvbmVudHMgPSAoY29tYmluYXRpb25zOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uW10pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmF0aW9ucy5zb3J0KChsZWZ0LCByaWdodCkgPT4gbGVmdC5jb21wb25lbnRzLmxlbmd0aCAtIHJpZ2h0LmNvbXBvbmVudHMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jb21wb25lbnRzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGV4YWN0TWF0Y2hlcy5sZW5ndGggPT09IDAgJiYgc3VwZXJzZXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleGFjdE1hdGNoZXMubGVuZ3RoID4gMCA/IHNlbGVjdEZld2VzdENvbXBvbmVudHMoZXhhY3RNYXRjaGVzKSA6IHNlbGVjdEZld2VzdENvbXBvbmVudHMoc3VwZXJzZXRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZmlsdGVyQ3JhZnRhYmxlUmVjaXBlc0ZvcihjcmFmdGluZ0NvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIHJlY2lwZXM6IFJlY2lwZVtdKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlY2lwZXMuZmlsdGVyKChyZWNpcGU6IFJlY2lwZSkgPT4gdGhpcy5pc0NyYWZ0YWJsZUZyb21Fc3NlbmNlc0luKHJlY2lwZSwgY3JhZnRpbmdDb21wb25lbnRzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0NyYWZ0YWJsZUZyb21Fc3NlbmNlc0luKHJlY2lwZTogUmVjaXBlLCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZXMgPSBjb21wb25lbnRzLm1hcCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4gY29tcG9uZW50LmVzc2VuY2VzKVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBzdHJpbmdbXSwgcmlnaHQ6IHN0cmluZ1tdKSA9PiBsZWZ0LmNvbmNhdChyaWdodCksIFtdKTtcclxuICAgICAgICByZXR1cm4gZXNzZW5jZXMuZXZlcnkoKGVzc2VuY2U6IHN0cmluZykgPT4gcmVjaXBlLmVzc2VuY2VzLmluY2x1ZGVzKGVzc2VuY2UpXHJcbiAgICAgICAgICAgICYmICAoZXNzZW5jZXMuZmlsdGVyKChlc3NlbmNlOnN0cmluZykgPT4gZXNzZW5jZSA9PT0gZXNzZW5jZSkubGVuZ3RoID49IHJlY2lwZS5lc3NlbmNlcy5maWx0ZXIoKGVzc2VuY2U6c3RyaW5nKSA9PiBlc3NlbmNlID09PSBlc3NlbmNlKS5sZW5ndGgpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdG9yLCBBbGNoZW15U3BlY2lmaWNhdGlvbn07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/Fabricator.ts\n");

/***/ }),

/***/ "./src/scripts/core/GameSystemType.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/GameSystemType.ts ***!
  \********************************************/
/*! exports provided: GameSystemType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameSystemType\", function() { return GameSystemType; });\nvar GameSystemType;\r\n(function (GameSystemType) {\r\n    GameSystemType[\"DND5E\"] = \"dnd5e\";\r\n})(GameSystemType || (GameSystemType = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzPzdkODciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLElBQVksY0FFWDtBQUZELFdBQVksY0FBYztJQUN0QixpQ0FBZTtBQUNuQixDQUFDLEVBRlcsY0FBYyxLQUFkLGNBQWMsUUFFekIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gR2FtZVN5c3RlbVR5cGUge1xyXG4gICAgRE5ENUUgPSAnZG5kNWUnXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/GameSystemType.ts\n");

/***/ }),

/***/ "./src/scripts/core/Ingredient.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Ingredient.ts ***!
  \****************************************/
/*! exports provided: Ingredient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ingredient\", function() { return Ingredient; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass Ingredient extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.component.systemId, builder.component.partId, builder.component.imageUrl, builder.component.name);\r\n        this._component = builder.component;\r\n        this._quantity = builder.quantity;\r\n        this._consumed = builder.consumed;\r\n    }\r\n    static builder() {\r\n        return new Ingredient.Builder();\r\n    }\r\n    get component() {\r\n        return this._component;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get consumed() {\r\n        return this._consumed;\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && (this.quantity === other.quantity)\r\n            && (this.consumed === other.consumed);\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .isConsumed(flags.consumed)\r\n            .withQuantity(flags.quantity)\r\n            .withComponent(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => Ingredient.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && this.component.isValid();\r\n    }\r\n}\r\n(function (Ingredient) {\r\n    class Builder {\r\n        withComponent(value) {\r\n            this.component = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        isConsumed(value) {\r\n            this.consumed = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new Ingredient(this);\r\n        }\r\n    }\r\n    Ingredient.Builder = Builder;\r\n})(Ingredient || (Ingredient = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0luZ3JlZGllbnQudHM/N2JjNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUVSO0FBRTlDLE1BQU0sVUFBVyxTQUFRLDREQUFhO0lBS2xDLFlBQVksT0FBMkI7UUFDbkMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEgsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFpQjtRQUMzQixJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDO2VBQ2xDLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBK0IsRUFBRSxRQUFnQjtRQUNyRSxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUU7YUFDaEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDMUIsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDNUIsYUFBYSxDQUFDLG9FQUFpQixDQUFDLE9BQU8sRUFBRTthQUNyQyxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ3hCLEtBQUssRUFBRSxDQUFDO2FBQ1osS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBaUMsRUFBRSxRQUFnQjtRQUMzRSxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBRyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7ZUFDL0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0NBQ0o7QUFFRCxXQUFVLFVBQVU7SUFDaEIsTUFBYSxPQUFPO1FBS1QsYUFBYSxDQUFDLEtBQXdCO1lBQ3pDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxZQUFZLENBQUMsS0FBYTtZQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sVUFBVSxDQUFDLEtBQWM7WUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLEtBQUs7WUFDUixPQUFPLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLENBQUM7S0FDSjtJQXZCWSxrQkFBTyxVQXVCbkI7QUFDTCxDQUFDLEVBekJTLFVBQVUsS0FBVixVQUFVLFFBeUJuQjtBQUVxQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvSW5ncmVkaWVudC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRlSW5ncmVkaWVudEZsYWdzfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIEluZ3JlZGllbnQgZXh0ZW5kcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9xdWFudGl0eTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29uc3VtZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogSW5ncmVkaWVudC5CdWlsZGVyKSB7XHJcbiAgICAgICAgc3VwZXIoYnVpbGRlci5jb21wb25lbnQuc3lzdGVtSWQsIGJ1aWxkZXIuY29tcG9uZW50LnBhcnRJZCwgYnVpbGRlci5jb21wb25lbnQuaW1hZ2VVcmwsIGJ1aWxkZXIuY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudCA9IGJ1aWxkZXIuY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gYnVpbGRlci5xdWFudGl0eTtcclxuICAgICAgICB0aGlzLl9jb25zdW1lZCA9IGJ1aWxkZXIuY29uc3VtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5ncmVkaWVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudCgpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnN1bWVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25zdW1lZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiBJbmdyZWRpZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYXJlc1R5cGUob3RoZXIpXHJcbiAgICAgICAgICAgICYmICh0aGlzLnF1YW50aXR5ID09PSBvdGhlci5xdWFudGl0eSlcclxuICAgICAgICAgICAgJiYgKHRoaXMuY29uc3VtZWQgPT09IG90aGVyLmNvbnN1bWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlSW5ncmVkaWVudEZsYWdzLCBzeXN0ZW1JZDogc3RyaW5nKTogSW5ncmVkaWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC5pc0NvbnN1bWVkKGZsYWdzLmNvbnN1bWVkKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGZsYWdzLnF1YW50aXR5KVxyXG4gICAgICAgICAgICAud2l0aENvbXBvbmVudChDcmFmdGluZ0NvbXBvbmVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoc3lzdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aFBhcnRJZChmbGFncy5wYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBtYW55RnJvbUZsYWdzKGZsYWdzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSwgc3lzdGVtSWQ6IHN0cmluZyk6IEluZ3JlZGllbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGZsYWdzLm1hcCgoZmxhZ0RhdGEpID0+IEluZ3JlZGllbnQuZnJvbUZsYWdzKGZsYWdEYXRhLCBzeXN0ZW1JZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnF1YW50aXR5IT0gbnVsbCAmJiB0aGlzLnF1YW50aXR5ID4gMClcclxuICAgICAgICAmJiB0aGlzLmNvbXBvbmVudC5pc1ZhbGlkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbmdyZWRpZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgY29tcG9uZW50ITogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgcHVibGljIHF1YW50aXR5ITogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdW1lZCE6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcG9uZW50KHZhbHVlOiBDcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLnF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGlzQ29uc3VtZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zdW1lZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmdyZWRpZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgSW5ncmVkaWVudCB9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/Ingredient.ts\n");

/***/ }),

/***/ "./src/scripts/core/Recipe.ts":
/*!************************************!*\
  !*** ./src/scripts/core/Recipe.ts ***!
  \************************************/
/*! exports provided: Recipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Recipe\", function() { return Recipe; });\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\n\r\n\r\nclass Recipe extends _FabricateItem__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._ingredients = builder.ingredients;\r\n        this._essences = builder.essences;\r\n        this._results = builder.results;\r\n    }\r\n    static fromFlags(flags, name, imageUrl) {\r\n        if (flags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Recipe from ${flags.type} data. `);\r\n        }\r\n        return Recipe.builder()\r\n            .withName(name)\r\n            .withImageUrl(imageUrl)\r\n            .withPartId(flags.identity.partId)\r\n            .withEssences(flags.recipe.essences)\r\n            .withSystemId(flags.identity.systemId)\r\n            .withResults(_FabricationAction__WEBPACK_IMPORTED_MODULE_1__[\"FabricationAction\"].manyFromFlags(flags.recipe.results, flags.identity.systemId))\r\n            .withIngredients(_Ingredient__WEBPACK_IMPORTED_MODULE_0__[\"Ingredient\"].manyFromFlags(flags.recipe.ingredients, flags.identity.systemId))\r\n            .build();\r\n    }\r\n    get ingredients() {\r\n        return this._ingredients;\r\n    }\r\n    get results() {\r\n        return this._results;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new Recipe.Builder();\r\n    }\r\n    isValid() {\r\n        const nameValid = this.name != null && this.name.length > 0;\r\n        const idValid = this.partId && this.systemId;\r\n        let ingredientsValid = true;\r\n        this.ingredients.forEach((ingredient) => {\r\n            if (!ingredient.isValid()) {\r\n                ingredientsValid = false;\r\n            }\r\n        });\r\n        let resultsValid = true;\r\n        this.results.forEach((result) => {\r\n            if (!result.isValid()) {\r\n                resultsValid = false;\r\n            }\r\n        });\r\n        const essencesValid = this.essences !== null;\r\n        const hasInputSpecified = this.essences.length > 0 || this.ingredients.length > 0;\r\n        return nameValid && idValid && ingredientsValid && resultsValid && essencesValid && hasInputSpecified;\r\n    }\r\n}\r\n(function (Recipe) {\r\n    class Builder {\r\n        constructor() {\r\n            this.ingredients = [];\r\n            this.essences = [];\r\n            this.results = [];\r\n        }\r\n        build() {\r\n            return new Recipe(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withIngredient(value) {\r\n            this.ingredients.push(value);\r\n            return this;\r\n        }\r\n        withIngredients(value) {\r\n            this.ingredients.push(...value);\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(values) {\r\n            this.essences.push(...values);\r\n            return this;\r\n        }\r\n        withResult(value) {\r\n            this.results.push(value);\r\n            return this;\r\n        }\r\n        withResults(value) {\r\n            this.results = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n    }\r\n    Recipe.Builder = Builder;\r\n})(Recipe || (Recipe = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL1JlY2lwZS50cz81N2VkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF3QztBQUNjO0FBQzRCO0FBQ3BDO0FBRTlDLE1BQU0sTUFBTyxTQUFRLDREQUFhO0lBSzlCLFlBQVksT0FBdUI7UUFDL0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUNwQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUE4QixFQUFFLElBQVksRUFBRSxRQUFnQjtRQUNsRixJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsTUFBTSxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsMkRBQTJELEtBQUssQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ25HO1FBQ0QsT0FBTyxNQUFNLENBQUMsT0FBTyxFQUFFO2FBQ2xCLFFBQVEsQ0FBQyxJQUFJLENBQUM7YUFDZCxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQzthQUNqQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7YUFDbkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2FBQ3JDLFdBQVcsQ0FBQyxvRUFBaUIsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVB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SUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUM5QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQXdCO1lBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxXQUFXLENBQUMsS0FBMEI7WUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELFlBQVksQ0FBQyxLQUFhO1lBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQWE7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLO1lBQ25CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUs7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztLQUVKO0lBaEVZLGNBQU8sVUFnRW5CO0FBQ0wsQ0FBQyxFQW5FUyxNQUFNLEtBQU4sTUFBTSxRQW1FZjtBQUVlIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9SZWNpcGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuY2xhc3MgUmVjaXBlIGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbmdyZWRpZW50czogSW5ncmVkaWVudFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVzdWx0czogRmFicmljYXRpb25BY3Rpb25bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBSZWNpcGUuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuc3lzdGVtSWQsIGJ1aWxkZXIucGFydElkLCBidWlsZGVyLmltYWdlVXJsLCBidWlsZGVyLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2luZ3JlZGllbnRzID0gYnVpbGRlci5pbmdyZWRpZW50cztcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0cyA9IGJ1aWxkZXIucmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlQ29tcGVuZGl1bURhdGEsIG5hbWU6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZyk6IFJlY2lwZSB7XHJcbiAgICAgICAgaWYgKGZsYWdzLnR5cGUgIT09IEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgYSBGYWJyaWNhdGUgUmVjaXBlIGZyb20gJHtmbGFncy50eXBlfSBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFJlY2lwZS5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhOYW1lKG5hbWUpXHJcbiAgICAgICAgICAgIC53aXRoSW1hZ2VVcmwoaW1hZ2VVcmwpXHJcbiAgICAgICAgICAgIC53aXRoUGFydElkKGZsYWdzLmlkZW50aXR5LnBhcnRJZClcclxuICAgICAgICAgICAgLndpdGhFc3NlbmNlcyhmbGFncy5yZWNpcGUuZXNzZW5jZXMpXHJcbiAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoZmxhZ3MuaWRlbnRpdHkuc3lzdGVtSWQpXHJcbiAgICAgICAgICAgIC53aXRoUmVzdWx0cyhGYWJyaWNhdGlvbkFjdGlvbi5tYW55RnJvbUZsYWdzKGZsYWdzLnJlY2lwZS5yZXN1bHRzLCBmbGFncy5pZGVudGl0eS5zeXN0ZW1JZCkpXHJcbiAgICAgICAgICAgIC53aXRoSW5ncmVkaWVudHMoSW5ncmVkaWVudC5tYW55RnJvbUZsYWdzKGZsYWdzLnJlY2lwZS5pbmdyZWRpZW50cywgZmxhZ3MuaWRlbnRpdHkuc3lzdGVtSWQpKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5ncmVkaWVudHMoKTogSW5ncmVkaWVudFtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5ncmVkaWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlc3VsdHMoKTogRmFicmljYXRpb25BY3Rpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVjaXBlLkJ1aWxkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IG5hbWVWYWxpZCA9IHRoaXMubmFtZSAhPSBudWxsICYmIHRoaXMubmFtZS5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IGlkVmFsaWQgPSB0aGlzLnBhcnRJZCAmJiB0aGlzLnN5c3RlbUlkO1xyXG4gICAgICAgIGxldCBpbmdyZWRpZW50c1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmluZ3JlZGllbnRzLmZvckVhY2goKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpbmdyZWRpZW50LmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgaW5ncmVkaWVudHNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlc3VsdHNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXN1bHRzLmZvckVhY2goKHJlc3VsdDogRmFicmljYXRpb25BY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VzVmFsaWQ6IGJvb2xlYW4gPSB0aGlzLmVzc2VuY2VzICE9PSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGhhc0lucHV0U3BlY2lmaWVkOiBib29sZWFuID0gdGhpcy5lc3NlbmNlcy5sZW5ndGggPiAwIHx8IHRoaXMuaW5ncmVkaWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICByZXR1cm4gbmFtZVZhbGlkICYmIGlkVmFsaWQgJiYgaW5ncmVkaWVudHNWYWxpZCAmJiByZXN1bHRzVmFsaWQgJiYgZXNzZW5jZXNWYWxpZCAmJiBoYXNJbnB1dFNwZWNpZmllZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBSZWNpcGUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZXNzZW5jZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgcHVibGljIHJlc3VsdHM6IEZhYnJpY2F0aW9uQWN0aW9uW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgc3lzdGVtSWQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHBhcnRJZCE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgaW1hZ2VVcmw6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlY2lwZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhOYW1lKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEluZ3JlZGllbnQodmFsdWU6IEluZ3JlZGllbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmdyZWRpZW50cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoSW5ncmVkaWVudHModmFsdWU6IEluZ3JlZGllbnRbXSkge1xyXG4gICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRzLnB1c2goLi4udmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhFc3NlbmNlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcy5wdXNoKHZhbHVlKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhFc3NlbmNlcyh2YWx1ZXM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMucHVzaCguLi52YWx1ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhSZXN1bHQodmFsdWU6IEZhYnJpY2F0aW9uQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoUmVzdWx0cyh2YWx1ZTogRmFicmljYXRpb25BY3Rpb25bXSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoUGFydElkKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0SWQgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1JlY2lwZX07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/Recipe.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/AlchemicalEffect5E.ts":
/*!*************************************************!*\
  !*** ./src/scripts/dnd5e/AlchemicalEffect5E.ts ***!
  \*************************************************/
/*! exports provided: Damage5e, Condition5e, AoeExtension5e, SavingThrowModifier5e, DiceMultiplier5e */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Damage5e\", function() { return Damage5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Condition5e\", function() { return Condition5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AoeExtension5e\", function() { return AoeExtension5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SavingThrowModifier5e\", function() { return SavingThrowModifier5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DiceMultiplier5e\", function() { return DiceMultiplier5e; });\n/* harmony import */ var _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AlchemicalEffect */ \"./src/scripts/core/AlchemicalEffect.ts\");\n\r\nclass BaseAlchemicalEffect5e extends _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"BaseAlchemicalEffect\"] {\r\n    constructor(essenceCombination, description, type) {\r\n        super(essenceCombination, description, type);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e.description.value += `<p>${this.description}</p>`;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Damage5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, damage) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._damage = damage;\r\n    }\r\n    get damage() {\r\n        return this._damage;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts.push([this._damage.expression, this._damage.type]);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Condition5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass AoeExtension5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, aoeExtension) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._aoeExtension = aoeExtension;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        if (itemData5e.target.units !== this._aoeExtension.units) {\r\n            throw new Error(`You may not mix units in Alchemical Effects AoE Extensions. Found ${itemData5e.target.units}, expected ${this._aoeExtension.units}`);\r\n        }\r\n        itemData5e.target.value += this._aoeExtension.value;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass SavingThrowModifier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, savingThrowModifier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._savingThrowModifier = savingThrowModifier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.save.dc += this._savingThrowModifier;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass DiceMultiplier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, diceMultiplier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].MODIFIER);\r\n        this._diceMultiplier = diceMultiplier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts = itemData5e.damage.parts\r\n            .map((damagePart) => {\r\n            // @ts-ignore\r\n            const parsed = DiceTerm.fromExpression(damagePart[0]);\r\n            parsed.number = parsed.number * this._diceMultiplier;\r\n            return [parsed.expression, damagePart[1]];\r\n        });\r\n        return itemData5e;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9BbGNoZW1pY2FsRWZmZWN0NUUudHM/MjRkYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFvRjtBQVlwRixNQUFlLHNCQUF1QixTQUFRLDJFQUFnQztJQUUxRSxZQUFzQixrQkFBNEIsRUFBRSxXQUFtQixFQUFFLElBQTBCO1FBQy9GLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxNQUFNLElBQUksQ0FBQyxXQUFXLE1BQU0sQ0FBQztRQUM3RCxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBQ0o7QUFFRCxNQUFNLFFBQVMsU0FBUSxzQkFBc0I7SUFHekMsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLE1BQWM7UUFDekUsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxPQUFPLENBQUMsVUFBc0I7UUFDMUIsVUFBVSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdkMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzNFLE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0sV0FBWSxTQUFRLHNCQUFzQjtJQUU1QyxZQUFZLGtCQUE0QixFQUFFLFdBQW1CO1FBQ3pELEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFRCxNQUFNLGNBQWUsU0FBUSxzQkFBc0I7SUFHL0MsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLFlBQTBCO1FBQ3JGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7SUFDdEMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFO1lBQ3RELE1BQU0sSUFBSSxLQUFLLENBQUMscUVBQXFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUN6SjtRQUNELFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1FBQ3BELE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0scUJBQXNCLFNBQVEsc0JBQXNCO0lBR3RELFlBQVksa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxtQkFBMkI7UUFDdEYsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFDaEQsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBRUQsTUFBTSxnQkFBaUIsU0FBUSxzQkFBc0I7SUFHakQsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLGNBQXNCO1FBQ2pGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLENBQUM7SUFDMUMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDNUMsR0FBRyxDQUFDLENBQUMsVUFBa0MsRUFBRSxFQUFFO1lBQ3hDLGFBQWE7WUFDYixNQUFNLE1BQU0sR0FBYSxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQ3JELE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBSXNGIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZG5kNWUvQWxjaGVtaWNhbEVmZmVjdDVFLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBbGNoZW1pY2FsRWZmZWN0VHlwZSwgQmFzZUFsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuLi9jb3JlL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuXHJcbmludGVyZmFjZSBBb2VFeHRlbnNpb24ge1xyXG4gICAgdW5pdHM6IFRhcmdldFVuaXRUeXBlNWU7XHJcbiAgICB2YWx1ZTogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRGFtYWdlIHtcclxuICAgIGV4cHJlc3Npb246IHN0cmluZztcclxuICAgIHR5cGU6IERhbWFnZVR5cGU1ZTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0PEl0ZW1EYXRhNWU+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgdHlwZTogQWxjaGVtaWNhbEVmZmVjdFR5cGUpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlLmRlc2NyaXB0aW9uLnZhbHVlICs9IGA8cD4ke3RoaXMuZGVzY3JpcHRpb259PC9wPmA7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERhbWFnZTVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kYW1hZ2U6IERhbWFnZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkYW1hZ2U6IERhbWFnZSkge1xyXG4gICAgICAgIHN1cGVyKGVzc2VuY2VDb21iaW5hdGlvbiwgZGVzY3JpcHRpb24sIEFsY2hlbWljYWxFZmZlY3RUeXBlLkJBU0lDKTtcclxuICAgICAgICB0aGlzLl9kYW1hZ2UgPSBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRhbWFnZSgpOiBEYW1hZ2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5kYW1hZ2UucGFydHMucHVzaChbdGhpcy5fZGFtYWdlLmV4cHJlc3Npb24sIHRoaXMuX2RhbWFnZS50eXBlXSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb25kaXRpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBb2VFeHRlbnNpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb24pIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fYW9lRXh0ZW5zaW9uID0gYW9lRXh0ZW5zaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5VG8oaXRlbURhdGE1ZTogSXRlbURhdGE1ZSk6IEl0ZW1EYXRhNWUge1xyXG4gICAgICAgIGl0ZW1EYXRhNWUgPSBzdXBlci5hcHBseVRvKGl0ZW1EYXRhNWUpO1xyXG4gICAgICAgIGlmIChpdGVtRGF0YTVlLnRhcmdldC51bml0cyAhPT0gdGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG1heSBub3QgbWl4IHVuaXRzIGluIEFsY2hlbWljYWwgRWZmZWN0cyBBb0UgRXh0ZW5zaW9ucy4gRm91bmQgJHtpdGVtRGF0YTVlLnRhcmdldC51bml0c30sIGV4cGVjdGVkICR7dGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpdGVtRGF0YTVlLnRhcmdldC52YWx1ZSArPSB0aGlzLl9hb2VFeHRlbnNpb24udmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTYXZpbmdUaHJvd01vZGlmaWVyNWUgZXh0ZW5kcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDVlIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NhdmluZ1Rocm93TW9kaWZpZXI6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBzYXZpbmdUaHJvd01vZGlmaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fc2F2aW5nVGhyb3dNb2RpZmllciA9IHNhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5zYXZlLmRjICs9IHRoaXMuX3NhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBEaWNlTXVsdGlwbGllcjVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kaWNlTXVsdGlwbGllcjogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRpY2VNdWx0aXBsaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5NT0RJRklFUik7XHJcbiAgICAgICAgdGhpcy5fZGljZU11bHRpcGxpZXIgPSBkaWNlTXVsdGlwbGllcjtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlID0gc3VwZXIuYXBwbHlUbyhpdGVtRGF0YTVlKTtcclxuICAgICAgICBpdGVtRGF0YTVlLmRhbWFnZS5wYXJ0cyA9IGl0ZW1EYXRhNWUuZGFtYWdlLnBhcnRzXHJcbiAgICAgICAgICAgIC5tYXAoKGRhbWFnZVBhcnQ6IFtzdHJpbmcsIERhbWFnZVR5cGU1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZDogRGljZVRlcm0gPSBEaWNlVGVybS5mcm9tRXhwcmVzc2lvbihkYW1hZ2VQYXJ0WzBdKTtcclxuICAgICAgICAgICAgICAgIHBhcnNlZC5udW1iZXIgPSBwYXJzZWQubnVtYmVyICogdGhpcy5fZGljZU11bHRpcGxpZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3BhcnNlZC5leHByZXNzaW9uLCBkYW1hZ2VQYXJ0WzFdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCB7RGFtYWdlNWUsIENvbmRpdGlvbjVlLCBBb2VFeHRlbnNpb241ZSwgU2F2aW5nVGhyb3dNb2RpZmllcjVlLCBEaWNlTXVsdGlwbGllcjVlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/AlchemicalEffect5E.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/Inventory5E.ts":
/*!******************************************!*\
  !*** ./src/scripts/dnd5e/Inventory5E.ts ***!
  \******************************************/
/*! exports provided: Inventory5E */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Inventory5E\", function() { return Inventory5E; });\n/* harmony import */ var _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CraftingInventory */ \"./src/scripts/game/CraftingInventory.ts\");\n/* harmony import */ var _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/InventoryRecord */ \"./src/scripts/game/InventoryRecord.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_Ingredient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _game_Inventory__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../game/Inventory */ \"./src/scripts/game/Inventory.ts\");\n/* harmony import */ var _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Inventory5E extends _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__[\"CraftingInventory\"] {\r\n    constructor(actor) {\r\n        super(actor);\r\n        this._componentDirectory = new Map();\r\n        this._recipeDirectory = new Map();\r\n        this._supportedGameSystems = [_core_GameSystemType__WEBPACK_IMPORTED_MODULE_4__[\"GameSystemType\"].DND5E];\r\n        this.index();\r\n    }\r\n    index() {\r\n        if (!this._actor) {\r\n            throw new Error(`No Actor was set for this Inventory to index`);\r\n        }\r\n        const items = Array.from(this._actor.items.values());\r\n        this._componentDirectory.clear();\r\n        this._recipeDirectory.clear();\r\n        const candidateItems = items.filter(this.shouldIndex(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].types.allowableItems));\r\n        const uniqueComponentTypes = candidateItems.map((item) => item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId))\r\n            .filter((partId, index, partIds) => partIds.indexOf(partId) === index);\r\n        uniqueComponentTypes.forEach((partId) => {\r\n            const inventoryRecord = candidateItems.filter((candidateItem) => candidateItem.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId) === partId)\r\n                .map((item) => {\r\n                const fabricateItemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n                return _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withItem(item)\r\n                    .withActor(this.actor)\r\n                    .withTotalQuantity(item.data.data.quantity)\r\n                    .withFabricateItemType(fabricateItemType)\r\n                    .withFabricateItem(this.lookUp(item))\r\n                    .build();\r\n            })\r\n                .reduce((left, right) => left.combineWith(right));\r\n            this.applyItemTypeTreatment(inventoryRecord, (record) => this._componentDirectory.set(partId, record), (record) => this._recipeDirectory.set(partId, record));\r\n        });\r\n    }\r\n    applyItemTypeTreatment(inventoryRecord, craftingComponentConsumer, recipeConsumer) {\r\n        switch (inventoryRecord.fabricateItemType) {\r\n            case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT:\r\n                craftingComponentConsumer(inventoryRecord);\r\n                break;\r\n            case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE:\r\n                recipeConsumer(inventoryRecord);\r\n                break;\r\n            default:\r\n                throw new Error(`Unrecognized Fabricate Item Type '${inventoryRecord.fabricateItemType}' for Inventory \r\n                    Record ${inventoryRecord.fabricateItem.compendiumEntry}. The allowable values are 'COMPONENT' and \r\n                    'RECIPE'. `);\r\n        }\r\n    }\r\n    shouldIndex(allowableItems) {\r\n        return (item) => {\r\n            if (allowableItems.indexOf(item.type) < 0) {\r\n                return false;\r\n            }\r\n            const type = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n            if (!type) {\r\n                return false;\r\n            }\r\n            return type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT || type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE;\r\n        };\r\n    }\r\n    addComponent(component, amountToAdd = 1, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (customData) {\r\n                return this.addCustomItem(component, amountToAdd, customData);\r\n            }\r\n            const recordForType = this._componentDirectory.get(component.partId);\r\n            if (!recordForType) {\r\n                const compendium = game.packs.get(component.systemId);\r\n                const item = yield compendium.getEntity(component.partId);\r\n                item.data.data.quantity = amountToAdd;\r\n                const createdItem = yield this._actor.createEmbeddedEntity('OwnedItem', item);\r\n                const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withActor(this._actor)\r\n                    .withItem(createdItem)\r\n                    .withTotalQuantity(createdItem.data.data.quantity)\r\n                    .withFabricateItem(component)\r\n                    .build();\r\n                this._componentDirectory.set(component.partId, inventoryRecord);\r\n                return new _game_Inventory__WEBPACK_IMPORTED_MODULE_6__[\"InventoryModification\"]([createdItem], _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__[\"FabricationActionType\"].ADD, inventoryRecord);\r\n            }\r\n            else {\r\n                recordForType.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n                const item = recordForType.itemsOfType[0];\r\n                const updatedQuantityForItem = item.data.data.quantity + amountToAdd;\r\n                // @ts-ignore\r\n                const updatedItem = yield this.actor.updateEmbeddedEntity('OwnedItem', { _id: item._id, data: { quantity: updatedQuantityForItem } });\r\n                recordForType.totalQuantity = recordForType.totalQuantity + amountToAdd;\r\n                return new _game_Inventory__WEBPACK_IMPORTED_MODULE_6__[\"InventoryModification\"]([updatedItem], _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__[\"FabricationActionType\"].ADD, recordForType);\r\n            }\r\n        });\r\n    }\r\n    addCustomItem(component, amountToAdd, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const compendium = game.packs.get(component.systemId);\r\n            const item = yield compendium.getEntity(component.partId);\r\n            item.data.data.quantity = amountToAdd;\r\n            const data = duplicate(item.data);\r\n            mergeObject(data.data, customData);\r\n            const recordForType = this._componentDirectory.get(component.partId);\r\n            const createdItem = yield this._actor.createEmbeddedEntity('OwnedItem', data);\r\n            if (recordForType) {\r\n                recordForType.totalQuantity = recordForType.totalQuantity + amountToAdd;\r\n                return new _game_Inventory__WEBPACK_IMPORTED_MODULE_6__[\"InventoryModification\"]([createdItem], _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__[\"FabricationActionType\"].ADD, recordForType);\r\n            }\r\n            else {\r\n                const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withActor(this._actor)\r\n                    .withItem(createdItem)\r\n                    .withTotalQuantity(createdItem.data.quantity)\r\n                    .withFabricateItem(component)\r\n                    .build();\r\n                this._componentDirectory.set(component.partId, inventoryRecord);\r\n                return new _game_Inventory__WEBPACK_IMPORTED_MODULE_6__[\"InventoryModification\"]([createdItem], _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__[\"FabricationActionType\"].ADD, inventoryRecord);\r\n            }\r\n        });\r\n    }\r\n    get contents() {\r\n        const recipes = this.recipes;\r\n        const components = this.components;\r\n        return recipes.concat(components);\r\n    }\r\n    removeComponent(component, amountToRemove = 1) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.containsIngredient(_core_Ingredient__WEBPACK_IMPORTED_MODULE_5__[\"Ingredient\"].builder().withQuantity(amountToRemove).withComponent(component).build())) {\r\n                throw new Error(`Cannot remove ${amountToRemove} ${component.name} from Inventory for Actor ${this.actorId} - \r\n                there is not enough of the component in their inventory! `);\r\n            }\r\n            const recordForType = this._componentDirectory.get(component.partId);\r\n            recordForType.itemsOfType = recordForType.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n            let removed = 0;\r\n            let currentItemIndex = 0;\r\n            const modifiedItems = [];\r\n            while (removed < amountToRemove) {\r\n                const thisItem = recordForType.itemsOfType[currentItemIndex];\r\n                modifiedItems.push(thisItem);\r\n                const remaining = amountToRemove - removed;\r\n                if (remaining < thisItem.data.data.quantity) {\r\n                    const updatedQuantity = thisItem.data.data.quantity - remaining;\r\n                    // @ts-ignore\r\n                    yield this.actor.updateEmbeddedEntity('OwnedItem', {\r\n                        _id: thisItem.id,\r\n                        data: { quantity: updatedQuantity }\r\n                    });\r\n                    recordForType.totalQuantity = updatedQuantity;\r\n                    removed += amountToRemove;\r\n                }\r\n                else {\r\n                    const amountRemoved = thisItem.data.data.quantity;\r\n                    // @ts-ignore\r\n                    yield this.actor.deleteEmbeddedEntity('OwnedItem', thisItem.id);\r\n                    removed += amountRemoved;\r\n                    recordForType.totalQuantity = recordForType.totalQuantity - amountRemoved;\r\n                }\r\n                currentItemIndex++;\r\n            }\r\n            const remainingItems = recordForType.itemsOfType.filter((item) => item.data.data.quantity > 0);\r\n            recordForType.itemsOfType = remainingItems;\r\n            if (remainingItems.length === 0) {\r\n                this._componentDirectory.delete(component.partId);\r\n            }\r\n            return new _game_Inventory__WEBPACK_IMPORTED_MODULE_6__[\"InventoryModification\"](modifiedItems, _core_FabricationAction__WEBPACK_IMPORTED_MODULE_7__[\"FabricationActionType\"].REMOVE, recordForType);\r\n        });\r\n    }\r\n    updateQuantityFor(item) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!item) {\r\n                throw new Error('Unable to update Inventory quantity for null Item. ');\r\n            }\r\n            const fabricateFlags = item.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                return false; // Not a Fabricate Item\r\n            }\r\n            const partId = fabricateFlags.identity.partId;\r\n            if (!partId) {\r\n                throw new Error(`Unable to update Inventory quantity for Item ${item._id} with no Fabricate Part ID set in flag data. `);\r\n            }\r\n            let inventoryRecordForType;\r\n            if (fabricateFlags.type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT) {\r\n                inventoryRecordForType = this._componentDirectory.get(partId);\r\n            }\r\n            else if (fabricateFlags.type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE) {\r\n                inventoryRecordForType = this._recipeDirectory.get(partId);\r\n            }\r\n            if (!inventoryRecordForType) {\r\n                yield this.update();\r\n                return true;\r\n            }\r\n            if (inventoryRecordForType.itemsOfType.length === 1) {\r\n                inventoryRecordForType.totalQuantity = item.data.quantity;\r\n                return true;\r\n            }\r\n            const totalExcludingChanged = inventoryRecordForType.itemsOfType.filter((managedItem) => managedItem.id !== item._id)\r\n                .map((managedItem) => managedItem.data.data.quantity)\r\n                .reduce((left, right) => left + right, 0);\r\n            inventoryRecordForType.totalQuantity = totalExcludingChanged + item.data.quantity;\r\n            return true;\r\n        });\r\n    }\r\n    update() {\r\n        this.index();\r\n    }\r\n    get components() {\r\n        return Array.from(this._componentDirectory.values());\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._recipeDirectory.values());\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9JbnZlbnRvcnk1RS50cz9iMzcxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEQ7QUFDSjtBQUNqQjtBQUMyQztBQUU1QjtBQUNSO0FBR1U7QUFDUTtBQUtoRSxNQUFNLFdBQVksU0FBUSx5RUFBaUI7SUFJdkMsWUFBWSxLQUFVO1FBQ2xCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUpBLHdCQUFtQixHQUFvRCxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2pGLHFCQUFnQixHQUF5QyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBSWhGLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLG1FQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFTyxLQUFLO1FBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZCxNQUFNLElBQUksS0FBSyxDQUFDLDhDQUE4QyxDQUFDLENBQUM7U0FDbkU7UUFDRCxNQUFNLEtBQUssR0FBUSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUU5QixNQUFNLGNBQWMsR0FBVyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsbURBQVUsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUMvRixNQUFNLG9CQUFvQixHQUFhLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFVLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsbURBQVUsQ0FBQyxNQUFNLENBQUMsSUFB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cG9ydCB7Q3JhZnRpbmdJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7SW52ZW50b3J5UmVjb3JkfSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlSZWNvcmRcIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4uL2NvcmUvSW5ncmVkaWVudFwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4uL2NvcmUvUmVjaXBlXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRlSXRlbVwiO1xyXG5pbXBvcnQge0ludmVudG9yeU1vZGlmaWNhdGlvbn0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb25UeXBlfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGlvbkFjdGlvblwiO1xyXG5cclxudHlwZSBSZWNpcGVDb25zdW1lciA9IChmYWJyaWNhdGVJdGVtOiBJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlPikgPT4gdm9pZDtcclxudHlwZSBDcmFmdGluZ0NvbXBvbmVudENvbnN1bWVyID0gKGZhYnJpY2F0ZUl0ZW06IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHZvaWQ7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnk1RSBleHRlbmRzIENyYWZ0aW5nSW52ZW50b3J5IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBvbmVudERpcmVjdG9yeTogTWFwPHN0cmluZywgSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50Pj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWNpcGVEaXJlY3Rvcnk6IE1hcDxzdHJpbmcsIEludmVudG9yeVJlY29yZDxSZWNpcGU+PiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhY3RvcjogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoYWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zID0gW0dhbWVTeXN0ZW1UeXBlLkRORDVFXTtcclxuICAgICAgICB0aGlzLmluZGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbmRleCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gQWN0b3Igd2FzIHNldCBmb3IgdGhpcyBJbnZlbnRvcnkgdG8gaW5kZXhgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaXRlbXM6IGFueSA9IEFycmF5LmZyb20odGhpcy5fYWN0b3IuaXRlbXMudmFsdWVzKCkpO1xyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudERpcmVjdG9yeS5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuX3JlY2lwZURpcmVjdG9yeS5jbGVhcigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5kaWRhdGVJdGVtczogSXRlbVtdID0gaXRlbXMuZmlsdGVyKHRoaXMuc2hvdWxkSW5kZXgoUHJvcGVydGllcy50eXBlcy5hbGxvd2FibGVJdGVtcykpO1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUNvbXBvbmVudFR5cGVzOiBzdHJpbmdbXSA9IGNhbmRpZGF0ZUl0ZW1zLm1hcCgoaXRlbTogSXRlbSkgPT4gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5wYXJ0SWQpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChwYXJ0SWQ6IHN0cmluZywgaW5kZXg6IG51bWJlciwgcGFydElkczogc3RyaW5nW10pID0+IHBhcnRJZHMuaW5kZXhPZihwYXJ0SWQpID09PSBpbmRleCk7XHJcblxyXG4gICAgICAgIHVuaXF1ZUNvbXBvbmVudFR5cGVzLmZvckVhY2goKHBhcnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+ID0gY2FuZGlkYXRlSXRlbXMuZmlsdGVyKChjYW5kaWRhdGVJdGVtOiBJdGVtKSA9PiBjYW5kaWRhdGVJdGVtLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5pdGVtLnBhcnRJZCkgPT09IHBhcnRJZClcclxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW06IEl0ZW08SXRlbURhdGE1ZT4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWJyaWNhdGVJdGVtVHlwZSA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uZmFicmljYXRlSXRlbVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnZlbnRvcnlSZWNvcmQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoSXRlbShpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aEFjdG9yKHRoaXMuYWN0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoVG90YWxRdWFudGl0eShpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhGYWJyaWNhdGVJdGVtVHlwZShmYWJyaWNhdGVJdGVtVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhGYWJyaWNhdGVJdGVtKHRoaXMubG9va1VwKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4sIHJpZ2h0OiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4pID0+IGxlZnQuY29tYmluZVdpdGgocmlnaHQpKTtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUl0ZW1UeXBlVHJlYXRtZW50KGludmVudG9yeVJlY29yZCxcclxuICAgICAgICAgICAgICAgIChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHRoaXMuX2NvbXBvbmVudERpcmVjdG9yeS5zZXQocGFydElkLCByZWNvcmQpLFxyXG4gICAgICAgICAgICAgICAgKHJlY29yZDogSW52ZW50b3J5UmVjb3JkPFJlY2lwZT4pID0+IHRoaXMuX3JlY2lwZURpcmVjdG9yeS5zZXQocGFydElkLCByZWNvcmQpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFwcGx5SXRlbVR5cGVUcmVhdG1lbnQoaW52ZW50b3J5UmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JhZnRpbmdDb21wb25lbnRDb25zdW1lcjogQ3JhZnRpbmdDb21wb25lbnRDb25zdW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNpcGVDb25zdW1lcjogUmVjaXBlQ29uc3VtZXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICAgIGNyYWZ0aW5nQ29tcG9uZW50Q29uc3VtZXIoPEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4+aW52ZW50b3J5UmVjb3JkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgIHJlY2lwZUNvbnN1bWVyKDxJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlPj5pbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBGYWJyaWNhdGUgSXRlbSBUeXBlICcke2ludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtVHlwZX0nIGZvciBJbnZlbnRvcnkgXHJcbiAgICAgICAgICAgICAgICAgICAgUmVjb3JkICR7aW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uY29tcGVuZGl1bUVudHJ5fS4gVGhlIGFsbG93YWJsZSB2YWx1ZXMgYXJlICdDT01QT05FTlQnIGFuZCBcclxuICAgICAgICAgICAgICAgICAgICAnUkVDSVBFJy4gYClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRJbmRleChhbGxvd2FibGVJdGVtczogc3RyaW5nW10pIHtcclxuICAgICAgICByZXR1cm4gKGl0ZW06IEl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGFsbG93YWJsZUl0ZW1zLmluZGV4T2YoaXRlbS50eXBlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5mYWJyaWNhdGVJdGVtVHlwZSk7XHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQgfHwgdHlwZSA9PT0gRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWRkQ29tcG9uZW50KGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQsIGFtb3VudFRvQWRkOiBudW1iZXIgPSAxLCBjdXN0b21EYXRhPzogYW55KTogUHJvbWlzZTxJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+PiB7XHJcbiAgICAgICAgaWYgKGN1c3RvbURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ3VzdG9tSXRlbShjb21wb25lbnQsIGFtb3VudFRvQWRkLCBjdXN0b21EYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVjb3JkRm9yVHlwZTogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PiA9IHRoaXMuX2NvbXBvbmVudERpcmVjdG9yeS5nZXQoY29tcG9uZW50LnBhcnRJZCk7XHJcbiAgICAgICAgaWYgKCFyZWNvcmRGb3JUeXBlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldChjb21wb25lbnQuc3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtOiBFbnRpdHk8SXRlbURhdGE1ZT4gPSBhd2FpdCBjb21wZW5kaXVtLmdldEVudGl0eShjb21wb25lbnQucGFydElkKTtcclxuICAgICAgICAgICAgaXRlbS5kYXRhLmRhdGEucXVhbnRpdHkgPSBhbW91bnRUb0FkZDtcclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlZEl0ZW06IEl0ZW08SXRlbURhdGE1ZT4gPSBhd2FpdCB0aGlzLl9hY3Rvci5jcmVhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywgaXRlbSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PiA9IEludmVudG9yeVJlY29yZC5idWlsZGVyPENyYWZ0aW5nQ29tcG9uZW50PigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdG9yKHRoaXMuX2FjdG9yKVxyXG4gICAgICAgICAgICAgICAgLndpdGhJdGVtKGNyZWF0ZWRJdGVtKVxyXG4gICAgICAgICAgICAgICAgLndpdGhUb3RhbFF1YW50aXR5KGNyZWF0ZWRJdGVtLmRhdGEuZGF0YS5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgIC53aXRoRmFicmljYXRlSXRlbShjb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50RGlyZWN0b3J5LnNldChjb21wb25lbnQucGFydElkLCBpbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmVudG9yeU1vZGlmaWNhdGlvbihbY3JlYXRlZEl0ZW1dLCBGYWJyaWNhdGlvbkFjdGlvblR5cGUuQURELCBpbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUuc29ydCgobGVmdDogSXRlbTxJdGVtRGF0YTVlPiwgcmlnaHQ6IEl0ZW08SXRlbURhdGE1ZT4pID0+IGxlZnQuZGF0YS5kYXRhLnF1YW50aXR5IC0gcmlnaHQuZGF0YS5kYXRhLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbTogSXRlbTxJdGVtRGF0YTVlPiA9IHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGVbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRRdWFudGl0eUZvckl0ZW0gPSBpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSArIGFtb3VudFRvQWRkO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBJdGVtPEl0ZW1EYXRhNWU+ID0gYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywge19pZDogaXRlbS5faWQsIGRhdGE6IHtxdWFudGl0eTogdXBkYXRlZFF1YW50aXR5Rm9ySXRlbX19KTtcclxuICAgICAgICAgICAgcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ICsgYW1vdW50VG9BZGQ7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5TW9kaWZpY2F0aW9uKFt1cGRhdGVkSXRlbV0sIEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQsIHJlY29yZEZvclR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZEN1c3RvbUl0ZW0oY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCwgYW1vdW50VG9BZGQ6IG51bWJlciwgY3VzdG9tRGF0YTogSXRlbURhdGE1ZSk6IFByb21pc2U8SW52ZW50b3J5TW9kaWZpY2F0aW9uPENyYWZ0aW5nQ29tcG9uZW50Pj4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldChjb21wb25lbnQuc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW06IEVudGl0eTxJdGVtRGF0YTVlPiA9IGF3YWl0IGNvbXBlbmRpdW0uZ2V0RW50aXR5KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIGl0ZW0uZGF0YS5kYXRhLnF1YW50aXR5ID0gYW1vdW50VG9BZGQ7XHJcbiAgICAgICAgY29uc3QgZGF0YTogRW50aXR5LkRhdGE8SXRlbURhdGE1ZT4gPSBkdXBsaWNhdGUoaXRlbS5kYXRhKTtcclxuICAgICAgICBtZXJnZU9iamVjdChkYXRhLmRhdGEsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIGNvbnN0IHJlY29yZEZvclR5cGU6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4gPSB0aGlzLl9jb21wb25lbnREaXJlY3RvcnkuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRJdGVtOiBhbnkgPSBhd2FpdCB0aGlzLl9hY3Rvci5jcmVhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywgZGF0YSk7XHJcbiAgICAgICAgaWYgKHJlY29yZEZvclR5cGUpIHtcclxuICAgICAgICAgICAgcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ICsgYW1vdW50VG9BZGQ7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5TW9kaWZpY2F0aW9uKFtjcmVhdGVkSXRlbV0sIEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQsIHJlY29yZEZvclR5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PiA9IEludmVudG9yeVJlY29yZC5idWlsZGVyPENyYWZ0aW5nQ29tcG9uZW50PigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdG9yKHRoaXMuX2FjdG9yKVxyXG4gICAgICAgICAgICAgICAgLndpdGhJdGVtKGNyZWF0ZWRJdGVtKVxyXG4gICAgICAgICAgICAgICAgLndpdGhUb3RhbFF1YW50aXR5KGNyZWF0ZWRJdGVtLmRhdGEucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0oY29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvbmVudERpcmVjdG9yeS5zZXQoY29tcG9uZW50LnBhcnRJZCwgaW52ZW50b3J5UmVjb3JkKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnZlbnRvcnlNb2RpZmljYXRpb24oW2NyZWF0ZWRJdGVtXSwgRmFicmljYXRpb25BY3Rpb25UeXBlLkFERCwgaW52ZW50b3J5UmVjb3JkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRlbnRzKCk6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPltdIHtcclxuICAgICAgICBjb25zdCByZWNpcGVzOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXSA9IHRoaXMucmVjaXBlcztcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXSA9IHRoaXMuY29tcG9uZW50cztcclxuICAgICAgICByZXR1cm4gcmVjaXBlcy5jb25jYXQoY29tcG9uZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVtb3ZlQ29tcG9uZW50KGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQsIGFtb3VudFRvUmVtb3ZlOiBudW1iZXIgPSAxKTogUHJvbWlzZTxJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zSW5ncmVkaWVudChJbmdyZWRpZW50LmJ1aWxkZXIoKS53aXRoUXVhbnRpdHkoYW1vdW50VG9SZW1vdmUpLndpdGhDb21wb25lbnQoY29tcG9uZW50KS5idWlsZCgpKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZW1vdmUgJHthbW91bnRUb1JlbW92ZX0gJHtjb21wb25lbnQubmFtZX0gZnJvbSBJbnZlbnRvcnkgZm9yIEFjdG9yICR7dGhpcy5hY3RvcklkfSAtIFxyXG4gICAgICAgICAgICAgICAgdGhlcmUgaXMgbm90IGVub3VnaCBvZiB0aGUgY29tcG9uZW50IGluIHRoZWlyIGludmVudG9yeSEgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlY29yZEZvclR5cGU6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4gPSB0aGlzLl9jb21wb25lbnREaXJlY3RvcnkuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUgPSByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlLnNvcnQoKGxlZnQ6IEl0ZW08SXRlbURhdGE1ZT4sIHJpZ2h0OiBJdGVtPEl0ZW1EYXRhNWU+KSA9PiBsZWZ0LmRhdGEuZGF0YS5xdWFudGl0eSAtIHJpZ2h0LmRhdGEuZGF0YS5xdWFudGl0eSk7XHJcbiAgICAgICAgbGV0IHJlbW92ZWQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRJdGVtSW5kZXggPSAwO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVkSXRlbXM6IEl0ZW08SXRlbURhdGE1ZT5bXSA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChyZW1vdmVkIDwgYW1vdW50VG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgdGhpc0l0ZW06IGFueSA9IHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGVbY3VycmVudEl0ZW1JbmRleF07XHJcbiAgICAgICAgICAgIG1vZGlmaWVkSXRlbXMucHVzaCh0aGlzSXRlbSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGFtb3VudFRvUmVtb3ZlIC0gcmVtb3ZlZDtcclxuICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8IHRoaXNJdGVtLmRhdGEuZGF0YS5xdWFudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFF1YW50aXR5ID0gdGhpc0l0ZW0uZGF0YS5kYXRhLnF1YW50aXR5IC0gcmVtYWluaW5nO1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pZDogdGhpc0l0ZW0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge3F1YW50aXR5OiB1cGRhdGVkUXVhbnRpdHl9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSA9IHVwZGF0ZWRRdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWQgKz0gYW1vdW50VG9SZW1vdmU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRSZW1vdmVkOiBudW1iZXIgPSB0aGlzSXRlbS5kYXRhLmRhdGEucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmRlbGV0ZUVtYmVkZGVkRW50aXR5KCdPd25lZEl0ZW0nLCB0aGlzSXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkICs9IGFtb3VudFJlbW92ZWQ7XHJcbiAgICAgICAgICAgICAgICByZWNvcmRGb3JUeXBlLnRvdGFsUXVhbnRpdHkgPSByZWNvcmRGb3JUeXBlLnRvdGFsUXVhbnRpdHkgLSBhbW91bnRSZW1vdmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtSW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nSXRlbXM6IEl0ZW1bXSA9IHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUuZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0uZGF0YS5kYXRhLnF1YW50aXR5ID4gMCk7XHJcbiAgICAgICAgcmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZSA9IHJlbWFpbmluZ0l0ZW1zO1xyXG4gICAgICAgIGlmIChyZW1haW5pbmdJdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50RGlyZWN0b3J5LmRlbGV0ZShjb21wb25lbnQucGFydElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+KG1vZGlmaWVkSXRlbXMsIEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkUsIHJlY29yZEZvclR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVRdWFudGl0eUZvcihpdGVtOiBJdGVtLkRhdGE8SXRlbURhdGE1ZT4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gdXBkYXRlIEludmVudG9yeSBxdWFudGl0eSBmb3IgbnVsbCBJdGVtLiAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmFicmljYXRlRmxhZ3M6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhID0gaXRlbS5mbGFncy5mYWJyaWNhdGU7XHJcbiAgICAgICAgaWYgKCFmYWJyaWNhdGVGbGFncykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vdCBhIEZhYnJpY2F0ZSBJdGVtXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcnRJZDogc3RyaW5nID0gZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkO1xyXG4gICAgICAgIGlmICghcGFydElkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHVwZGF0ZSBJbnZlbnRvcnkgcXVhbnRpdHkgZm9yIEl0ZW0gJHtpdGVtLl9pZH0gd2l0aCBubyBGYWJyaWNhdGUgUGFydCBJRCBzZXQgaW4gZmxhZyBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGludmVudG9yeVJlY29yZEZvclR5cGU6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPjtcclxuICAgICAgICBpZiAoZmFicmljYXRlRmxhZ3MudHlwZSA9PT0gRmFicmljYXRlSXRlbVR5cGUuQ09NUE9ORU5UKSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeVJlY29yZEZvclR5cGUgPSB0aGlzLl9jb21wb25lbnREaXJlY3RvcnkuZ2V0KHBhcnRJZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEUpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5UmVjb3JkRm9yVHlwZSA9IHRoaXMuX3JlY2lwZURpcmVjdG9yeS5nZXQocGFydElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpbnZlbnRvcnlSZWNvcmRGb3JUeXBlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW52ZW50b3J5UmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5UmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gaXRlbS5kYXRhLnF1YW50aXR5O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG90YWxFeGNsdWRpbmdDaGFuZ2VkID0gaW52ZW50b3J5UmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZS5maWx0ZXIoKG1hbmFnZWRJdGVtOiBJdGVtPEl0ZW1EYXRhNWU+KSA9PiBtYW5hZ2VkSXRlbS5pZCAhPT0gaXRlbS5faWQpXHJcbiAgICAgICAgICAgIC5tYXAoKG1hbmFnZWRJdGVtOiBhbnkpID0+IG1hbmFnZWRJdGVtLmRhdGEuZGF0YS5xdWFudGl0eSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdCwgcmlnaHQpID0+IGxlZnQgKyByaWdodCwgMCk7XHJcbiAgICAgICAgaW52ZW50b3J5UmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gdG90YWxFeGNsdWRpbmdDaGFuZ2VkICsgaXRlbS5kYXRhLnF1YW50aXR5O1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluZGV4KClcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcG9uZW50cygpOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+W10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2NvbXBvbmVudERpcmVjdG9yeS52YWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlY2lwZXMoKTogSW52ZW50b3J5UmVjb3JkPFJlY2lwZT5bXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcmVjaXBlRGlyZWN0b3J5LnZhbHVlcygpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtJbnZlbnRvcnk1RX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/Inventory5E.ts\n");

/***/ }),

/***/ "./src/scripts/game/CompendiumData.ts":
/*!********************************************!*\
  !*** ./src/scripts/game/CompendiumData.ts ***!
  \********************************************/
/*! exports provided: FabricateItemType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItemType\", function() { return FabricateItemType; });\nvar FabricateItemType;\r\n(function (FabricateItemType) {\r\n    FabricateItemType[\"RECIPE\"] = \"RECIPE\";\r\n    FabricateItemType[\"COMPONENT\"] = \"COMPONENT\";\r\n})(FabricateItemType || (FabricateItemType = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NvbXBlbmRpdW1EYXRhLnRzPzBlMTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBLElBQUssaUJBR0o7QUFIRCxXQUFLLGlCQUFpQjtJQUNsQixzQ0FBaUI7SUFDakIsNENBQXVCO0FBQzNCLENBQUMsRUFISSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBR3JCO0FBa0M0SSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2dhbWUvQ29tcGVuZGl1bURhdGEudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRpb25BY3Rpb25cIjtcclxuXHJcbmVudW0gRmFicmljYXRlSXRlbVR5cGUge1xyXG4gICAgUkVDSVBFID0gJ1JFQ0lQRScsXHJcbiAgICBDT01QT05FTlQgPSAnQ09NUE9ORU5UJ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ29tcGVuZGl1bUVudHJ5IHtcclxuICAgIHN5c3RlbUlkOiBzdHJpbmc7XHJcbiAgICBwYXJ0SWQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZUNvbXBvbmVudEZsYWdzIHtcclxuICAgIGVzc2VuY2VzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZUluZ3JlZGllbnRGbGFncyB7XHJcbiAgICBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgY29uc3VtZWQ6IGJvb2xlYW4sXHJcbiAgICBwYXJ0SWQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZVJlc3VsdEZsYWdzIHtcclxuICAgIGFjdGlvbjogRmFicmljYXRpb25BY3Rpb25UeXBlLFxyXG4gICAgcGFydElkOiBzdHJpbmcsXHJcbiAgICBxdWFudGl0eTogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSB7XHJcbiAgICB0eXBlOiBGYWJyaWNhdGVJdGVtVHlwZTtcclxuICAgIGlkZW50aXR5OiBDb21wZW5kaXVtRW50cnk7XHJcbiAgICByZWNpcGU/OiB7XHJcbiAgICAgICAgZXNzZW5jZXM6IHN0cmluZ1tdLFxyXG4gICAgICAgIGluZ3JlZGllbnRzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSxcclxuICAgICAgICByZXN1bHRzOiBGYWJyaWNhdGVSZXN1bHRGbGFnc1tdXHJcbiAgICB9O1xyXG4gICAgY29tcG9uZW50PzogRmFicmljYXRlQ29tcG9uZW50RmxhZ3M7XHJcbn1cclxuXHJcbmV4cG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlLCBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3MsIEZhYnJpY2F0ZVJlc3VsdEZsYWdzLCBGYWJyaWNhdGVDb21wb25lbnRGbGFncywgQ29tcGVuZGl1bUVudHJ5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/CompendiumData.ts\n");

/***/ }),

/***/ "./src/scripts/game/CraftingInventory.ts":
/*!***********************************************!*\
  !*** ./src/scripts/game/CraftingInventory.ts ***!
  \***********************************************/
/*! exports provided: CraftingInventory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingInventory\", function() { return CraftingInventory; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\n/* harmony import */ var _CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\n\r\n\r\nclass CraftingInventory {\r\n    constructor(actor) {\r\n        this._actor = actor;\r\n        this._supportedGameSystems = [];\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get actorId() {\r\n        return this._actor.id;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get size() {\r\n        return this.contents.length;\r\n    }\r\n    get componentCount() {\r\n        return this.components.map((componentRecord) => componentRecord.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n    }\r\n    supportsGameSystem(gameSystem) {\r\n        return this._supportedGameSystems.some((supported) => supported === gameSystem);\r\n    }\r\n    containsIngredient(ingredient) {\r\n        const quantity = this.components.filter((candidate) => candidate.fabricateItem.sharesType(ingredient))\r\n            .map((candidate) => candidate.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n        return ingredient.quantity <= quantity;\r\n    }\r\n    containsRecipe(partId) {\r\n        const match = this.recipes.find((recipe) => recipe.fabricateItem.partId === partId);\r\n        return !!match;\r\n    }\r\n    hasAllComponents(components) {\r\n        const componentCountById = new Map();\r\n        components.forEach((component) => {\r\n            if (componentCountById.has(component.partId)) {\r\n                const currentCount = componentCountById.get(component.partId);\r\n                componentCountById.set(component.partId, currentCount + 1);\r\n            }\r\n            else {\r\n                componentCountById.set(component.partId, 1);\r\n            }\r\n        });\r\n        componentCountById.forEach((amountRequired, partId) => {\r\n            const inventoryRecordForType = this.components.find((record) => record.fabricateItem.partId === partId);\r\n            if (!inventoryRecordForType || inventoryRecordForType.totalQuantity < amountRequired) {\r\n                return false;\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    hasAllIngredientsFor(recipe) {\r\n        return this.hasAllNamedIngredients(recipe) && this.hasAllEssences(recipe);\r\n    }\r\n    hasAllEssences(recipe) {\r\n        const outstandingEssencesByType = new Map();\r\n        if (!recipe.essences || recipe.essences.length === 0) {\r\n            return true;\r\n        }\r\n        recipe.essences.forEach((essence) => {\r\n            if (outstandingEssencesByType.has(essence)) {\r\n                outstandingEssencesByType.set(essence, outstandingEssencesByType.get(essence) + 1);\r\n            }\r\n            else {\r\n                outstandingEssencesByType.set(essence, 1);\r\n            }\r\n        });\r\n        for (let i = 0; i < this.components.length; i++) {\r\n            const thisRecord = this.components[i];\r\n            if (thisRecord.fabricateItem.essences) {\r\n                thisRecord.fabricateItem.essences.forEach((essence) => {\r\n                    if (outstandingEssencesByType.has(essence)) {\r\n                        const remaining = outstandingEssencesByType.get(essence);\r\n                        const contribution = thisRecord.totalQuantity;\r\n                        if (remaining <= contribution) {\r\n                            outstandingEssencesByType.delete(essence);\r\n                        }\r\n                        else {\r\n                            outstandingEssencesByType.set(essence, remaining - contribution);\r\n                        }\r\n                    }\r\n                });\r\n                if (outstandingEssencesByType.size === 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    hasAllNamedIngredients(recipe) {\r\n        const ingredientsByType = new Map();\r\n        let failedToFind = false;\r\n        let duplicatedIngredient = false;\r\n        recipe.ingredients.forEach((ingredient) => {\r\n            const present = this.containsIngredient(ingredient);\r\n            if (!present) {\r\n                failedToFind = true;\r\n                return;\r\n            }\r\n            const occurrences = ingredientsByType.get(ingredient.component.partId) + 1;\r\n            ingredientsByType.set(ingredient.component.partId, occurrences);\r\n            if (occurrences > 1) {\r\n                duplicatedIngredient = true;\r\n            }\r\n        });\r\n        if (duplicatedIngredient) {\r\n            throw new Error(`One or more ingredients were duplicated in a call to CraftingInventory.containsMany(ingredients: Ingredient[]). \r\n            Recipe[name='${recipe.name}',id='${recipe.partId}'] seems to be mis-configured! Recipes should be specified as \r\n            Ingredient[Mud, 2], not [Ingredient[Mud, 1], Ingredient[Mud 1]]. `);\r\n        }\r\n        return !failedToFind;\r\n    }\r\n    getOwningCraftingSystemForItem(item) {\r\n        const systemId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.systemId);\r\n        const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n        if (!craftingSystem) {\r\n            throw new Error(`Unable to look up crafting System '${systemId}' when indexing Item '${item._id}'. `);\r\n        }\r\n        return craftingSystem;\r\n    }\r\n    lookUp(item) {\r\n        const craftingSystem = this.getOwningCraftingSystemForItem(item);\r\n        const itemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.fabricateItemType);\r\n        const partId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.partId);\r\n        switch (itemType) {\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE:\r\n                const recipe = craftingSystem.getRecipeByPartId(partId);\r\n                if (recipe) {\r\n                    return recipe;\r\n                }\r\n                throw new Error(`Unable to look up Recipe with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].COMPONENT:\r\n                const craftingComponent = craftingSystem.getComponentByPartId(partId);\r\n                if (craftingComponent) {\r\n                    return craftingComponent;\r\n                }\r\n                throw new Error(`Unable to look up Crafting Component with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            default:\r\n                throw new Error(`Unrecognized Fabricate Item Type of '${itemType}' for Item '${item._id}'. \r\n                    The allowable values are 'COMPONENT' and 'RECIPE'. `);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5LnRzP2Q3N2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF1QztBQUNnQztBQUNwQjtBQUduRCxNQUFlLGlCQUFpQjtJQUs1QixZQUFzQixLQUFZO1FBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxvQkFBb0I7UUFDcEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQVFELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxlQUFtRCxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDO2FBQzdHLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVNLGtCQUFrQixDQUFDLFVBQTBCO1FBQ2hELE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLFNBQXlCLEVBQUUsRUFBRSxDQUFDLFNBQVMsS0FBSyxVQUFVLENBQUMsQ0FBQztJQUNwRyxDQUFDO0lBSUQsa0JBQWtCLENBQUMsVUFBc0I7UUFDckMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVB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QyxJQUFJLENBQUMsQ0FBQztRQUNyRixNQUFNLFFBQVEsR0FBc0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsbURBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDckgsTUFBTSxNQUFNLEdBQVcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsbURBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdGLFFBQVEsUUFBUSxFQUFFO1lBQ2QsS0FBSyxpRUFBaUIsQ0FBQyxNQUFNO2dCQUN6QixNQUFNLE1BQU0sR0FBVyxjQUFjLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2hFLElBQUksTUFBTSxFQUFFO29CQUNSLE9BQU8sTUFBTSxDQUFDO2lCQUNqQjtnQkFDRCxNQUFNLElBQUksS0FBSyxDQUFDLDBDQUEwQyxNQUFNO3VCQUN6RCxjQUFjLENBQUMsaUJBQWlCLEtBQUssQ0FBQyxDQUFDO1lBQ2xELEtBQUssaUVBQWlCLENBQUMsU0FBUztnQkFDNUIsTUFBTSxpQkFBaUIsR0FBc0IsY0FBYyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUN6RixJQUFJLGlCQUFpQixFQUFFO29CQUNuQixPQUFPLGlCQUFpQixDQUFDO2lCQUM1QjtnQkFDRCxNQUFNLElBQUksS0FBSyxDQUFDLHNEQUFzRCxNQUFNO3VCQUNyRSxjQUFjLENBQUMsaUJBQWlCLEtBQUssQ0FBQyxDQUFDO1lBQ2xEO2dCQUNJLE1BQU0sSUFBSSxLQUFLLENBQUMsd0NBQXdDLFFBQVEsZUFBZSxJQUFJLENBQUMsR0FBRzt3RUFDL0IsQ0FBQztTQUNoRTtJQUNMLENBQUM7Q0FRSjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2dhbWUvQ3JhZnRpbmdJbnZlbnRvcnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ludmVudG9yeSwgSW52ZW50b3J5TW9kaWZpY2F0aW9ufSBmcm9tIFwiLi9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnlSZWNvcmR9IGZyb20gXCIuL0ludmVudG9yeVJlY29yZFwiO1xyXG5pbXBvcnQge0dhbWVTeXN0ZW1UeXBlfSBmcm9tIFwiLi4vY29yZS9HYW1lU3lzdGVtVHlwZVwiO1xyXG5pbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuLi9jb3JlL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuLi9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5cclxuYWJzdHJhY3QgY2xhc3MgQ3JhZnRpbmdJbnZlbnRvcnkgaW1wbGVtZW50cyBJbnZlbnRvcnkge1xyXG5cclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfYWN0b3I6IGFueTtcclxuICAgIHByb3RlY3RlZCBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IEdhbWVTeXN0ZW1UeXBlW107XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGFjdG9yOiBBY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0b3IoKTogQWN0b3Ige1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0b3JJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rvci5pZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3VwcG9ydGVkR2FtZVN5c3RlbXMoKTogR2FtZVN5c3RlbVR5cGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGdldCBjb250ZW50cygpOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXTtcclxuXHJcbiAgICBhYnN0cmFjdCBnZXQgY29tcG9uZW50cygpOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+W107XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0IHJlY2lwZXMoKTogSW52ZW50b3J5UmVjb3JkPFJlY2lwZT5bXTtcclxuXHJcbiAgICBnZXQgc2l6ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcG9uZW50Q291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzLm1hcCgoY29tcG9uZW50UmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+KSA9PiBjb21wb25lbnRSZWNvcmQudG90YWxRdWFudGl0eSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdCwgcmlnaHQpID0+IGxlZnQgKyByaWdodCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1cHBvcnRzR2FtZVN5c3RlbShnYW1lU3lzdGVtOiBHYW1lU3lzdGVtVHlwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcy5zb21lKChzdXBwb3J0ZWQ6IEdhbWVTeXN0ZW1UeXBlKSA9PiBzdXBwb3J0ZWQgPT09IGdhbWVTeXN0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhZGRDb21wb25lbnQoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCwgcXVhbnRpdHk/OiBudW1iZXIpOiBQcm9taXNlPEludmVudG9yeU1vZGlmaWNhdGlvbjxDcmFmdGluZ0NvbXBvbmVudD4+O1xyXG5cclxuICAgIGNvbnRhaW5zSW5ncmVkaWVudChpbmdyZWRpZW50OiBJbmdyZWRpZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgcXVhbnRpdHkgPSB0aGlzLmNvbXBvbmVudHMuZmlsdGVyKChjYW5kaWRhdGU6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IGNhbmRpZGF0ZS5mYWJyaWNhdGVJdGVtLnNoYXJlc1R5cGUoaW5ncmVkaWVudCkpXHJcbiAgICAgICAgICAgIC5tYXAoKGNhbmRpZGF0ZTogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+KSA9PiBjYW5kaWRhdGUudG90YWxRdWFudGl0eSlcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdCwgcmlnaHQpID0+IGxlZnQgKyByaWdodCwgMCk7XHJcbiAgICAgICAgcmV0dXJuIGluZ3JlZGllbnQucXVhbnRpdHkgPD0gcXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnNSZWNpcGUocGFydElkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMucmVjaXBlcy5maW5kKChyZWNpcGU6IEludmVudG9yeVJlY29yZDxSZWNpcGU+KSA9PiByZWNpcGUuZmFicmljYXRlSXRlbS5wYXJ0SWQgPT09IHBhcnRJZCk7XHJcbiAgICAgICAgcmV0dXJuICEhbWF0Y2g7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQWxsQ29tcG9uZW50cyhjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50Q291bnRCeUlkOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuICAgICAgICBjb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudENvdW50QnlJZC5oYXMoY29tcG9uZW50LnBhcnRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IGNvbXBvbmVudENvdW50QnlJZC5nZXQoY29tcG9uZW50LnBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRDb3VudEJ5SWQuc2V0KGNvbXBvbmVudC5wYXJ0SWQsIGN1cnJlbnRDb3VudCArIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50Q291bnRCeUlkLnNldChjb21wb25lbnQucGFydElkLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbXBvbmVudENvdW50QnlJZC5mb3JFYWNoKChhbW91bnRSZXF1aXJlZDogbnVtYmVyLCBwYXJ0SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnlSZWNvcmRGb3JUeXBlID0gdGhpcy5jb21wb25lbnRzLmZpbmQoKHJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PikgPT4gcmVjb3JkLmZhYnJpY2F0ZUl0ZW0ucGFydElkID09PSBwYXJ0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWludmVudG9yeVJlY29yZEZvclR5cGUgfHwgaW52ZW50b3J5UmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5IDwgYW1vdW50UmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc0FsbEluZ3JlZGllbnRzRm9yKHJlY2lwZTogUmVjaXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzQWxsTmFtZWRJbmdyZWRpZW50cyhyZWNpcGUpICYmIHRoaXMuaGFzQWxsRXNzZW5jZXMocmVjaXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc0FsbEVzc2VuY2VzKHJlY2lwZTogUmVjaXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZTogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgaWYgKCFyZWNpcGUuZXNzZW5jZXMgfHwgcmVjaXBlLmVzc2VuY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVjaXBlLmVzc2VuY2VzLmZvckVhY2goKGVzc2VuY2U6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAob3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5oYXMoZXNzZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgIG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuc2V0KGVzc2VuY2UsIG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuZ2V0KGVzc2VuY2UpICsgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLnNldChlc3NlbmNlLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXNSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4gPSB0aGlzLmNvbXBvbmVudHNbaV07XHJcbiAgICAgICAgICAgIGlmICh0aGlzUmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNSZWNvcmQuZmFicmljYXRlSXRlbS5lc3NlbmNlcy5mb3JFYWNoKChlc3NlbmNlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5oYXMoZXNzZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nOiBudW1iZXIgPSBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLmdldChlc3NlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJpYnV0aW9uID0gdGhpc1JlY29yZC50b3RhbFF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IGNvbnRyaWJ1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5kZWxldGUoZXNzZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLnNldChlc3NlbmNlLCByZW1haW5pbmcgLSBjb250cmlidXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFzQWxsTmFtZWRJbmdyZWRpZW50cyhyZWNpcGU6IFJlY2lwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGluZ3JlZGllbnRzQnlUeXBlID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuICAgICAgICBsZXQgZmFpbGVkVG9GaW5kOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGR1cGxpY2F0ZWRJbmdyZWRpZW50OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgcmVjaXBlLmluZ3JlZGllbnRzLmZvckVhY2goKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJlc2VudDogYm9vbGVhbiA9IHRoaXMuY29udGFpbnNJbmdyZWRpZW50KGluZ3JlZGllbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXByZXNlbnQpIHtcclxuICAgICAgICAgICAgICAgIGZhaWxlZFRvRmluZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb2NjdXJyZW5jZXMgPSBpbmdyZWRpZW50c0J5VHlwZS5nZXQoaW5ncmVkaWVudC5jb21wb25lbnQucGFydElkKSArIDE7XHJcbiAgICAgICAgICAgIGluZ3JlZGllbnRzQnlUeXBlLnNldChpbmdyZWRpZW50LmNvbXBvbmVudC5wYXJ0SWQsIG9jY3VycmVuY2VzKTtcclxuICAgICAgICAgICAgaWYgKG9jY3VycmVuY2VzID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZHVwbGljYXRlZEluZ3JlZGllbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGR1cGxpY2F0ZWRJbmdyZWRpZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25lIG9yIG1vcmUgaW5ncmVkaWVudHMgd2VyZSBkdXBsaWNhdGVkIGluIGEgY2FsbCB0byBDcmFmdGluZ0ludmVudG9yeS5jb250YWluc01hbnkoaW5ncmVkaWVudHM6IEluZ3JlZGllbnRbXSkuIFxyXG4gICAgICAgICAgICBSZWNpcGVbbmFtZT0nJHtyZWNpcGUubmFtZX0nLGlkPScke3JlY2lwZS5wYXJ0SWR9J10gc2VlbXMgdG8gYmUgbWlzLWNvbmZpZ3VyZWQhIFJlY2lwZXMgc2hvdWxkIGJlIHNwZWNpZmllZCBhcyBcclxuICAgICAgICAgICAgSW5ncmVkaWVudFtNdWQsIDJdLCBub3QgW0luZ3JlZGllbnRbTXVkLCAxXSwgSW5ncmVkaWVudFtNdWQgMV1dLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICFmYWlsZWRUb0ZpbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldE93bmluZ0NyYWZ0aW5nU3lzdGVtRm9ySXRlbShpdGVtOiBJdGVtKTogQ3JhZnRpbmdTeXN0ZW08e30+IHtcclxuICAgICAgICBjb25zdCBzeXN0ZW1JZCA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KHN5c3RlbUlkKTtcclxuICAgICAgICBpZiAoIWNyYWZ0aW5nU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvb2sgdXAgY3JhZnRpbmcgU3lzdGVtICcke3N5c3RlbUlkfScgd2hlbiBpbmRleGluZyBJdGVtICcke2l0ZW0uX2lkfScuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JhZnRpbmdTeXN0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvb2tVcChpdGVtOiBJdGVtKTogRmFicmljYXRlSXRlbSB7XHJcbiAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IHRoaXMuZ2V0T3duaW5nQ3JhZnRpbmdTeXN0ZW1Gb3JJdGVtKGl0ZW0pO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1UeXBlOiBGYWJyaWNhdGVJdGVtVHlwZSA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uZmFicmljYXRlSXRlbVR5cGUpO1xyXG4gICAgICAgIGNvbnN0IHBhcnRJZDogc3RyaW5nID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgIHN3aXRjaCAoaXRlbVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEU6XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNpcGU6IFJlY2lwZSA9IGNyYWZ0aW5nU3lzdGVtLmdldFJlY2lwZUJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2lwZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvb2sgdXAgUmVjaXBlIHdpdGggUGFydCBJRCAnJHtwYXJ0SWR9JyBmcm9tIENyYWZ0aW5nIFN5c3RlbSBcclxuICAgICAgICAgICAgICAgICAgICAnJHtjcmFmdGluZ1N5c3RlbS5jb21wZW5kaXVtUGFja0tleX0uICdgKTtcclxuICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQ6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQgPSBjcmFmdGluZ1N5c3RlbS5nZXRDb21wb25lbnRCeVBhcnRJZChwYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNyYWZ0aW5nQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyYWZ0aW5nQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9vayB1cCBDcmFmdGluZyBDb21wb25lbnQgd2l0aCBQYXJ0IElEICcke3BhcnRJZH0nIGZyb20gQ3JhZnRpbmcgU3lzdGVtIFxyXG4gICAgICAgICAgICAgICAgICAgICcke2NyYWZ0aW5nU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fS4gJ2ApO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgRmFicmljYXRlIEl0ZW0gVHlwZSBvZiAnJHtpdGVtVHlwZX0nIGZvciBJdGVtICcke2l0ZW0uX2lkfScuIFxyXG4gICAgICAgICAgICAgICAgICAgIFRoZSBhbGxvd2FibGUgdmFsdWVzIGFyZSAnQ09NUE9ORU5UJyBhbmQgJ1JFQ0lQRScuIGApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZW1vdmVDb21wb25lbnQoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCwgcXVhbnRpdHk/OiBudW1iZXIpOiBQcm9taXNlPEludmVudG9yeU1vZGlmaWNhdGlvbjxDcmFmdGluZ0NvbXBvbmVudD4+O1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCB1cGRhdGUoKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgdXBkYXRlUXVhbnRpdHlGb3IoaXRlbTogYW55KTogUHJvbWlzZTxib29sZWFuPjtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdJbnZlbnRvcnl9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/game/CraftingInventory.ts\n");

/***/ }),

/***/ "./src/scripts/game/Inventory.ts":
/*!***************************************!*\
  !*** ./src/scripts/game/Inventory.ts ***!
  \***************************************/
/*! exports provided: InventoryModification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryModification\", function() { return InventoryModification; });\nclass InventoryModification {\r\n    constructor(changedItems, action, updatedRecord) {\r\n        this._changedItems = changedItems;\r\n        this._action = action;\r\n        this._updatedRecord = updatedRecord;\r\n    }\r\n    get changedItems() {\r\n        return this._changedItems;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    get updatedRecord() {\r\n        return this._updatedRecord;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0ludmVudG9yeS50cz8xYTVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVFBO0FBQUE7QUFBQSxNQUFNLHFCQUFxQjtJQUt2QixZQUFZLFlBQW9CLEVBQUUsTUFBNkIsRUFBRSxhQUFpQztRQUM5RixJQUFJLENBQUMsYUFBYSxHQUFHLFlBQVksQ0FBQztRQUNsQyxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsY0FBYyxHQUFHLGFBQWEsQ0FBQztJQUN4QyxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksYUFBYTtRQUNiLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixDQUFDO0NBQ0o7QUFvQndDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZ2FtZS9JbnZlbnRvcnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0dhbWVTeXN0ZW1UeXBlfSBmcm9tIFwiLi4vY29yZS9HYW1lU3lzdGVtVHlwZVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4vSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4uL2NvcmUvSW5ncmVkaWVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4uL2NvcmUvUmVjaXBlXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRlSXRlbVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRpb25BY3Rpb25cIjtcclxuXHJcbmNsYXNzIEludmVudG9yeU1vZGlmaWNhdGlvbjxUIGV4dGVuZHMgRmFicmljYXRlSXRlbT4ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2hhbmdlZEl0ZW1zOiBJdGVtW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hY3Rpb246IEZhYnJpY2F0aW9uQWN0aW9uVHlwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3VwZGF0ZWRSZWNvcmQ6IEludmVudG9yeVJlY29yZDxUPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjaGFuZ2VkSXRlbXM6IEl0ZW1bXSwgYWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUsIHVwZGF0ZWRSZWNvcmQ6IEludmVudG9yeVJlY29yZDxUPikge1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZWRJdGVtcyA9IGNoYW5nZWRJdGVtcztcclxuICAgICAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlZFJlY29yZCA9IHVwZGF0ZWRSZWNvcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNoYW5nZWRJdGVtcygpOiBJdGVtW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaGFuZ2VkSXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGlvbigpOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVwZGF0ZWRSZWNvcmQoKTogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlZFJlY29yZDtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIEludmVudG9yeSB7XHJcbiAgICBhY3RvcjogQWN0b3I7XHJcbiAgICBzdXBwb3J0ZWRHYW1lU3lzdGVtczogR2FtZVN5c3RlbVR5cGVbXTtcclxuICAgIGNvbnRlbnRzOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXTtcclxuICAgIGNvbXBvbmVudHM6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD5bXTtcclxuICAgIHJlY2lwZXM6IEludmVudG9yeVJlY29yZDxSZWNpcGU+W107XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBzdXBwb3J0c0dhbWVTeXN0ZW0oZ2FtZVN5c3RlbTogR2FtZVN5c3RlbVR5cGUpOiBib29sZWFuO1xyXG4gICAgY29udGFpbnNJbmdyZWRpZW50KGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpOiBib29sZWFuO1xyXG4gICAgY29udGFpbnNSZWNpcGUocGFydElkOiBzdHJpbmcpOiBib29sZWFuO1xyXG4gICAgaGFzQWxsSW5ncmVkaWVudHNGb3IocmVjaXBlOiBSZWNpcGUpOiBib29sZWFuO1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQsIHF1YW50aXR5PzogbnVtYmVyLCBjdXN0b21EYXRhPzogYW55KTogUHJvbWlzZTxJbnZlbnRvcnlNb2RpZmljYXRpb248Q3JhZnRpbmdDb21wb25lbnQ+PjtcclxuICAgIHJlbW92ZUNvbXBvbmVudChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50LCBxdWFudGl0eT86IG51bWJlcik6IFByb21pc2U8SW52ZW50b3J5TW9kaWZpY2F0aW9uPENyYWZ0aW5nQ29tcG9uZW50Pj47XHJcbiAgICB1cGRhdGUoKTogdm9pZDtcclxuICAgIGhhc0FsbENvbXBvbmVudHMoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IGJvb2xlYW47XHJcbiAgICB1cGRhdGVRdWFudGl0eUZvcihpdGVtOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+O1xyXG59XHJcblxyXG5leHBvcnQge0ludmVudG9yeSwgSW52ZW50b3J5TW9kaWZpY2F0aW9ufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/Inventory.ts\n");

/***/ }),

/***/ "./src/scripts/game/InventoryRecord.ts":
/*!*********************************************!*\
  !*** ./src/scripts/game/InventoryRecord.ts ***!
  \*********************************************/
/*! exports provided: InventoryRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRecord\", function() { return InventoryRecord; });\nclass InventoryRecord {\r\n    constructor(builder) {\r\n        this._actor = builder.actor;\r\n        this._itemsOfType = builder.itemsOfType;\r\n        this._totalQuantity = builder.totalQuantity;\r\n        this._fabricateItem = builder.fabricateItem;\r\n        this._fabricateItemType = builder.fabricateItemType;\r\n    }\r\n    static builder() {\r\n        return new InventoryRecord.Builder();\r\n    }\r\n    combineWith(other) {\r\n        if (!this.fabricateItem.sharesType(other.fabricateItem)) {\r\n            throw new Error(`Unable to combine Inventory Records for different Fabricate Item types: ${this.fabricateItem.partId} | ${other.fabricateItem.partId}`);\r\n        }\r\n        if (this.actor.id !== other.actor.id) {\r\n            throw new Error(`Unable to combine inventory records from different Actors: ${this.actor.id} | ${other.actor.id}`);\r\n        }\r\n        return InventoryRecord.builder()\r\n            .withFabricateItem(this.fabricateItem)\r\n            .withFabricateItemType(this.fabricateItemType)\r\n            .withActor(this.actor)\r\n            .withItems(this.itemsOfType)\r\n            .withItems(other.itemsOfType)\r\n            .withTotalQuantity(this.totalQuantity + other.totalQuantity)\r\n            .build();\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get itemsOfType() {\r\n        return this._itemsOfType;\r\n    }\r\n    set itemsOfType(value) {\r\n        this._itemsOfType = value;\r\n    }\r\n    get totalQuantity() {\r\n        return this._totalQuantity;\r\n    }\r\n    set totalQuantity(value) {\r\n        this._totalQuantity = value;\r\n    }\r\n    get fabricateItem() {\r\n        return this._fabricateItem;\r\n    }\r\n    get fabricateItemType() {\r\n        return this._fabricateItemType;\r\n    }\r\n}\r\n(function (InventoryRecord) {\r\n    class Builder {\r\n        constructor() {\r\n            this.itemsOfType = [];\r\n        }\r\n        withActor(value) {\r\n            this.actor = value;\r\n            return this;\r\n        }\r\n        withItem(value) {\r\n            this.itemsOfType.push(value);\r\n            return this;\r\n        }\r\n        withItems(value) {\r\n            this.itemsOfType.push(...value);\r\n            return this;\r\n        }\r\n        withFabricateItem(value) {\r\n            this.fabricateItem = value;\r\n            return this;\r\n        }\r\n        withTotalQuantity(value) {\r\n            this.totalQuantity = value;\r\n            return this;\r\n        }\r\n        withFabricateItemType(value) {\r\n            this.fabricateItemType = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new InventoryRecord(this);\r\n        }\r\n    }\r\n    InventoryRecord.Builder = Builder;\r\n})(InventoryRecord || (InventoryRecord = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0ludmVudG9yeVJlY29yZC50cz9lZDA1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxNQUFNLGVBQWU7SUFPakIsWUFBWSxPQUFtQztRQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7UUFDNUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztJQUN4RCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGVBQWUsQ0FBQyxPQUFPLEVBQUssQ0FBQztJQUM1QyxDQUFDO0lBRU0sV0FBVyxDQUFDLEtBQXlCO1FBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDckQsTUFBTSxJQUFJLEtBQUssQ0FBQywyRUFBMkUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLE1BQU0sS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQzNKO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRTtZQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLDhEQUE4RCxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdEg7UUFDRCxPQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUs7YUFDOUIsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQzthQUNyQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUM7YUFDN0MsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7YUFDckIsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7YUFDM0IsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7YUFDNUIsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO2FBQzNELEtBQUssRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxXQUFXLENBQUMsS0FBYTtRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxhQUFhO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFJLGFBQWEsQ0FBQyxLQUFhO1FBQzNCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQUksaUJBQWlCO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ25DLENBQUM7Q0FDSjtBQUVELFdBQVUsZUFBZTtJQUNyQixNQUFhLE9BQU87UUFBcEI7WUFFVyxnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQXVDcEMsQ0FBQztRQWxDVSxTQUFTLENBQUMsS0FBWTtZQUN6QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sUUFBUSxDQUFDLEtBQVc7WUFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDN0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFNBQVMsQ0FBQyxLQUFhO1lBQzFCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7WUFDaEMsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGlCQUFpQixDQUFDLEtBQVE7WUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGlCQUFpQixDQUFDLEtBQWE7WUFDbEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLHFCQUFxQixDQUFDLEtBQXdCO1lBQ2pELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7WUFDL0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLEtBQUs7WUFDUixPQUFPLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JDLENBQUM7S0FFSjtJQXpDWSx1QkFBTyxVQXlDbkI7QUFDTCxDQUFDLEVBM0NTLGVBQWUsS0FBZixlQUFlLFFBMkN4QjtBQUV1QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2dhbWUvSW52ZW50b3J5UmVjb3JkLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdGVJdGVtVHlwZX0gZnJvbSBcIi4vQ29tcGVuZGl1bURhdGFcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVJdGVtfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGVJdGVtXCI7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnlSZWNvcmQ8VCBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdG9yOiBBY3RvcjtcclxuICAgIHByaXZhdGUgX2l0ZW1zT2ZUeXBlOiBJdGVtW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdGVJdGVtOiBUO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZmFicmljYXRlSXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG4gICAgcHJpdmF0ZSBfdG90YWxRdWFudGl0eTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IEludmVudG9yeVJlY29yZC5CdWlsZGVyPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBidWlsZGVyLmFjdG9yO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zT2ZUeXBlID0gYnVpbGRlci5pdGVtc09mVHlwZTtcclxuICAgICAgICB0aGlzLl90b3RhbFF1YW50aXR5ID0gYnVpbGRlci50b3RhbFF1YW50aXR5O1xyXG4gICAgICAgIHRoaXMuX2ZhYnJpY2F0ZUl0ZW0gPSBidWlsZGVyLmZhYnJpY2F0ZUl0ZW07XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRlSXRlbVR5cGUgPSBidWlsZGVyLmZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcjxUIGV4dGVuZHMgRmFicmljYXRlSXRlbT4oKTogSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8VD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8VD4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29tYmluZVdpdGgob3RoZXI6IEludmVudG9yeVJlY29yZDxUPik6IEludmVudG9yeVJlY29yZDxUPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZhYnJpY2F0ZUl0ZW0uc2hhcmVzVHlwZShvdGhlci5mYWJyaWNhdGVJdGVtKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb21iaW5lIEludmVudG9yeSBSZWNvcmRzIGZvciBkaWZmZXJlbnQgRmFicmljYXRlIEl0ZW0gdHlwZXM6ICR7dGhpcy5mYWJyaWNhdGVJdGVtLnBhcnRJZH0gfCAke290aGVyLmZhYnJpY2F0ZUl0ZW0ucGFydElkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rvci5pZCAhPT0gb3RoZXIuYWN0b3IuaWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29tYmluZSBpbnZlbnRvcnkgcmVjb3JkcyBmcm9tIGRpZmZlcmVudCBBY3RvcnM6ICR7dGhpcy5hY3Rvci5pZH0gfCAke290aGVyLmFjdG9yLmlkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8VD4oKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0odGhpcy5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKHRoaXMuZmFicmljYXRlSXRlbVR5cGUpXHJcbiAgICAgICAgICAgIC53aXRoQWN0b3IodGhpcy5hY3RvcilcclxuICAgICAgICAgICAgLndpdGhJdGVtcyh0aGlzLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aEl0ZW1zKG90aGVyLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aFRvdGFsUXVhbnRpdHkodGhpcy50b3RhbFF1YW50aXR5ICsgb3RoZXIudG90YWxRdWFudGl0eSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdG9yKCk6IEFjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGl0ZW1zT2ZUeXBlKCk6IEl0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zT2ZUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpdGVtc09mVHlwZSh2YWx1ZTogSXRlbVtdKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXNPZlR5cGUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG90YWxRdWFudGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbFF1YW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0b3RhbFF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl90b3RhbFF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW0oKTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhYnJpY2F0ZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW1UeXBlKCk6IEZhYnJpY2F0ZUl0ZW1UeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRlSXRlbVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbnZlbnRvcnlSZWNvcmQge1xyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXI8VCBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0+IHtcclxuICAgICAgICBwdWJsaWMgYWN0b3IhOiBBY3RvcjtcclxuICAgICAgICBwdWJsaWMgaXRlbXNPZlR5cGU6IEl0ZW1bXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyBmYWJyaWNhdGVJdGVtITogVDtcclxuICAgICAgICBwdWJsaWMgdG90YWxRdWFudGl0eSE6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRlSXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFjdG9yKHZhbHVlOiBBY3Rvcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJdGVtKHZhbHVlOiBJdGVtKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNPZlR5cGUucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJdGVtcyh2YWx1ZTogSXRlbVtdKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNPZlR5cGUucHVzaCguLi52YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWJyaWNhdGVJdGVtKHZhbHVlOiBUKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFicmljYXRlSXRlbSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoVG90YWxRdWFudGl0eSh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxRdWFudGl0eSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRmFicmljYXRlSXRlbVR5cGUodmFsdWU6IEZhYnJpY2F0ZUl0ZW1UeXBlKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFicmljYXRlSXRlbVR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogSW52ZW50b3J5UmVjb3JkPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnZlbnRvcnlSZWNvcmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtJbnZlbnRvcnlSZWNvcmR9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/game/InventoryRecord.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTab.ts":
/*!**********************************************!*\
  !*** ./src/scripts/interface/CraftingTab.ts ***!
  \**********************************************/
/*! exports provided: CraftingTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTab\", function() { return CraftingTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dnd5e/Inventory5E */ \"./src/scripts/dnd5e/Inventory5E.ts\");\n/* harmony import */ var _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingTabData */ \"./src/scripts/interface/CraftingTabData.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass CraftingTab {\r\n    constructor(actorApplication, actor) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = actorApplication;\r\n        this._actor = actor;\r\n        let inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n        if (inventory) {\r\n            this._inventory = inventory;\r\n        }\r\n        else {\r\n            inventory = new _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__[\"Inventory5E\"](actor);\r\n            _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.addFor(actor.id, inventory);\r\n            this._inventory = inventory;\r\n        }\r\n    }\r\n    static bind(actorApplication, sheetHtml, eventData) {\r\n        const actor = game.actors.get(eventData.actor._id);\r\n        if (!game.user.isGM || !actor.owner) {\r\n            return;\r\n        }\r\n        let tab = CraftingTab.tabs.get(actorApplication.id);\r\n        if (!tab) {\r\n            tab = new CraftingTab(actorApplication, actor);\r\n            CraftingTab.tabs.set(actorApplication.id, tab);\r\n        }\r\n        tab.init(sheetHtml);\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToCharacterSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const craftingTabDTO = new _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__[\"CraftingTabData\"](_application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getAllSystems(), this._inventory, this._actor);\r\n            yield craftingTabDTO.init();\r\n            let template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.craftingTab, craftingTabDTO);\r\n            let element = this._sheetHtml.find('.crafting-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-crafting').append(template);\r\n            }\r\n            this.handleActorSheetEvents(craftingTabDTO);\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(CraftingTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToCharacterSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($('<a class=\"item fabricate-crafting\" data-tab=\"fabricate-crafting\">Crafting</a>'));\r\n        $(sheetHtml.find(`.sheet-body`)).append($('<div class=\"tab fabricate-crafting\" data-group=\"primary\" data-tab=\"fabricate-crafting\"></div>'));\r\n    }\r\n    handleActorSheetEvents(craftingTabDTO) {\r\n        this._sheetHtml.find('.add-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            if (!hopperContentsForSystem) {\r\n                hopperContentsForSystem = [];\r\n            }\r\n            const component = hopperContentsForSystem.find((item) => item.entryId === componentId);\r\n            if (!component) {\r\n                const component = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId).getComponentByPartId(componentId);\r\n                hopperContentsForSystem.push({ name: component.name, quantity: 1, imageUrl: component.imageUrl, entryId: component.partId });\r\n            }\r\n            else {\r\n                component.quantity = component.quantity + 1;\r\n            }\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, hopperContentsForSystem);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.remove-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            const matchingRecord = hopperContentsForSystem.find((recordData) => recordData.entryId === componentId);\r\n            matchingRecord.quantity = matchingRecord.quantity - 1;\r\n            const nonZeroRecords = hopperContentsForSystem.filter((recordData) => recordData.quantity > 0);\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, nonZeroRecords);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.clear-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.craft-from-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            const hopperContents = craftingTabDTO.inventory.preparedComponents;\r\n            if (!hopperContents || hopperContents.length === 0) {\r\n                return;\r\n            }\r\n            console.log(`Craft for system ${craftingSystemId} with ${hopperContents.length} components`);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId);\r\n            const craftingComponents = hopperContents.map((hopperItem) => craftingSystem.getComponentByPartId(hopperItem.entryId));\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            yield craftingSystem.craftWithComponents(this._actor, _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id), craftingComponents);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedSystem\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const systemIdToActivate = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, systemIdToActivate);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedRecipe\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const selectedRecipeId = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe, selectedRecipeId);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.actor-recipe-crafting').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const recipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByPartId(recipeId);\r\n            const recipe = craftingSystem.getRecipeByPartId(recipeId);\r\n            const inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id);\r\n            yield craftingSystem.craft(this._actor, inventory, recipe);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-crafting[data-tab=\"${CraftingTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nCraftingTab.tabs = new Map();\r\nCraftingTab.tabKey = 'fabricate-crafting';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWIudHM/YzFlZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFFVTtBQUNDO0FBSXFCO0FBRXZFLE1BQU0sV0FBVztJQXVCYixZQUFZLGdCQUFxQixFQUFFLEtBQVk7UUFqQnZDLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQWtCdEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGdCQUFnQixDQUFDO1FBQzFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksU0FBUyxHQUFHLHlFQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xFLElBQUksU0FBUyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDL0I7YUFBTTtZQUNILFNBQVMsR0FBRyxJQUFJLDhEQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMseUVBQW9CLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQzdELElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1NBQy9CO0lBQ0wsQ0FBQztJQXhCTSxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFxQixFQUFFLFNBQXNCLEVBQUUsU0FBYztRQUM1RSxNQUFNLEtBQUssR0FBVSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUc7WUFDbEMsT0FBTztTQUNWO1FBQ0QsSUFBSSxHQUFHLEdBQWdCLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVB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LENBQUMsQ0FBQztZQUMxRCxNQUFNLFNBQVMsR0FBRyx5RUFBb0IsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUUsTUFBTSxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFDN0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLENBQUMsRUFBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLGFBQWE7UUFDakIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hILENBQUM7O0FBM0t1QixnQkFBSSxHQUE2QixJQUFJLEdBQUcsRUFBRSxDQUFDO0FBT3BELGtCQUFNLEdBQVcsb0JBQW9CLENBQUM7QUF1S3JDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvaW50ZXJmYWNlL0NyYWZ0aW5nVGFiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeTVFfSBmcm9tIFwiLi4vZG5kNWUvSW52ZW50b3J5NUVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1RhYkRhdGF9IGZyb20gXCIuL0NyYWZ0aW5nVGFiRGF0YVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZERhdGF9IGZyb20gXCIuL0ludGVyZmFjZURhdGFUeXBlc1wiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1RhYiB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB0YWJzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1RhYj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hlZXRBcHBsaWNhdGlvbjogYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hlZXRIdG1sOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbnZlbnRvcnk6IEludmVudG9yeTtcclxuICAgIHByaXZhdGUgX3N1cHByZXNzZWRJbk5hdjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYWN0b3I6IEFjdG9yO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGFiS2V5OiBzdHJpbmcgPSAnZmFicmljYXRlLWNyYWZ0aW5nJztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJpbmQoYWN0b3JBcHBsaWNhdGlvbjogYW55LCBzaGVldEh0bWw6IEhUTUxFbGVtZW50LCBldmVudERhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFjdG9yOiBBY3RvciA9IGdhbWUuYWN0b3JzLmdldChldmVudERhdGEuYWN0b3IuX2lkKTtcclxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNIHx8ICFhY3Rvci5vd25lciApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGFiOiBDcmFmdGluZ1RhYiA9IENyYWZ0aW5nVGFiLnRhYnMuZ2V0KGFjdG9yQXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgIGlmICghdGFiKSB7XHJcbiAgICAgICAgICAgIHRhYiA9IG5ldyBDcmFmdGluZ1RhYihhY3RvckFwcGxpY2F0aW9uLCBhY3Rvcik7XHJcbiAgICAgICAgICAgIENyYWZ0aW5nVGFiLnRhYnMuc2V0KGFjdG9yQXBwbGljYXRpb24uaWQsIHRhYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhYi5pbml0KHNoZWV0SHRtbCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWN0b3JBcHBsaWNhdGlvbjogYW55LCBhY3RvcjogQWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9zaGVldEFwcGxpY2F0aW9uID0gYWN0b3JBcHBsaWNhdGlvbjtcclxuICAgICAgICB0aGlzLl9hY3RvciA9IGFjdG9yO1xyXG4gICAgICAgIGxldCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgIGlmIChpbnZlbnRvcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gaW52ZW50b3J5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeSA9IG5ldyBJbnZlbnRvcnk1RShhY3Rvcik7XHJcbiAgICAgICAgICAgIEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmFkZEZvcihhY3Rvci5pZCwgaW52ZW50b3J5KTtcclxuICAgICAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gaW52ZW50b3J5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXQoc2hlZXRIdG1sOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwgPSBzaGVldEh0bWw7XHJcbiAgICAgICAgdGhpcy5hZGRUYWJUb0NoYXJhY3RlclNoZWV0KHNoZWV0SHRtbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlcigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBjcmFmdGluZ1RhYkRUTyA9IG5ldyBDcmFmdGluZ1RhYkRhdGEoRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRBbGxTeXN0ZW1zKCksIHRoaXMuX2ludmVudG9yeSwgdGhpcy5fYWN0b3IpO1xyXG4gICAgICAgIGF3YWl0IGNyYWZ0aW5nVGFiRFRPLmluaXQoKTtcclxuICAgICAgICBsZXQgdGVtcGxhdGU6IEhUTUxFbGVtZW50ID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nVGFiLCBjcmFmdGluZ1RhYkRUTyk7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNyYWZ0aW5nLXRhYi1jb250ZW50Jyk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy50YWIuZmFicmljYXRlLWNyYWZ0aW5nJykuYXBwZW5kKHRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQWN0b3JTaGVldEV2ZW50cyhjcmFmdGluZ1RhYkRUTyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zdXBwcmVzc2VkSW5OYXYgJiYgIXRoaXMuaXNBY3RpdmVJbk5hdigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NoZWV0QXBwbGljYXRpb24uX3RhYnNbMF0uYWN0aXZhdGUoQ3JhZnRpbmdUYWIudGFiS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFRhYlRvQ2hhcmFjdGVyU2hlZXQoc2hlZXRIdG1sOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0YWJzID0gc2hlZXRIdG1sLmZpbmQoYC50YWJzW2RhdGEtZ3JvdXA9XCJwcmltYXJ5XCJdYCk7XHJcbiAgICAgICAgdGFicy5hcHBlbmQoJChcclxuICAgICAgICAgICAgJzxhIGNsYXNzPVwiaXRlbSBmYWJyaWNhdGUtY3JhZnRpbmdcIiBkYXRhLXRhYj1cImZhYnJpY2F0ZS1jcmFmdGluZ1wiPkNyYWZ0aW5nPC9hPidcclxuICAgICAgICApKTtcclxuXHJcbiAgICAgICAgJChzaGVldEh0bWwuZmluZChgLnNoZWV0LWJvZHlgKSkuYXBwZW5kKCQoXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGFiIGZhYnJpY2F0ZS1jcmFmdGluZ1wiIGRhdGEtZ3JvdXA9XCJwcmltYXJ5XCIgZGF0YS10YWI9XCJmYWJyaWNhdGUtY3JhZnRpbmdcIj48L2Rpdj4nXHJcbiAgICAgICAgKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVBY3RvclNoZWV0RXZlbnRzKGNyYWZ0aW5nVGFiRFRPOiBDcmFmdGluZ1RhYkRhdGEpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5hZGQtY3JhZnRpbmctY29tcG9uZW50JykuY2xpY2soYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtSWQ6IHN0cmluZyA9IGNyYWZ0aW5nVGFiRFRPLmNyYWZ0aW5nLnNlbGVjdGVkU3lzdGVtSWQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW06IEludmVudG9yeVJlY29yZERhdGFbXSA9IHRoaXMuX2FjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCk7XHJcbiAgICAgICAgICAgIGlmICghaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0uZmluZCgoaXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gaXRlbS5lbnRyeUlkID09PSBjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICghY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50ID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KGNyYWZ0aW5nU3lzdGVtSWQpLmdldENvbXBvbmVudEJ5UGFydElkKGNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgICAgIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtLnB1c2goe25hbWU6IGNvbXBvbmVudC5uYW1lLCBxdWFudGl0eTogMSwgaW1hZ2VVcmw6IGNvbXBvbmVudC5pbWFnZVVybCwgZW50cnlJZDogY29tcG9uZW50LnBhcnRJZH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucXVhbnRpdHkgPSBjb21wb25lbnQucXVhbnRpdHkgKyAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmAsIGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCcucmVtb3ZlLWNyYWZ0aW5nLWNvbXBvbmVudCcpLmNsaWNrKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbXBvbmVudC1pZCcpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUlkOiBzdHJpbmcgPSBjcmFmdGluZ1RhYkRUTy5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhW10gPSB0aGlzLl9hY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmApO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ1JlY29yZCA9IGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtLmZpbmQoKHJlY29yZERhdGE6IEludmVudG9yeVJlY29yZERhdGEpID0+IHJlY29yZERhdGEuZW50cnlJZCA9PT0gY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICBtYXRjaGluZ1JlY29yZC5xdWFudGl0eSA9IG1hdGNoaW5nUmVjb3JkLnF1YW50aXR5IC0gMTtcclxuICAgICAgICAgICAgY29uc3Qgbm9uWmVyb1JlY29yZHMgPSBob3BwZXJDb250ZW50c0ZvclN5c3RlbS5maWx0ZXIoKHJlY29yZERhdGE6IEludmVudG9yeVJlY29yZERhdGEpID0+IHJlY29yZERhdGEucXVhbnRpdHkgPiAwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCwgbm9uWmVyb1JlY29yZHMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5jbGVhci1jb21wb25lbnRzLmNyYWZ0LWJ1dHRvbicpLmNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW1JZDogc3RyaW5nID0gY3JhZnRpbmdUYWJEVE8uY3JhZnRpbmcuc2VsZWN0ZWRTeXN0ZW1JZDtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYWN0b3IudW5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIGBjcmFmdGluZy4ke2NyYWZ0aW5nU3lzdGVtSWR9LmhvcHBlcmApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5jcmFmdC1mcm9tLWNvbXBvbmVudHMuY3JhZnQtYnV0dG9uJykuY2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUlkOiBzdHJpbmcgPSBjcmFmdGluZ1RhYkRUTy5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkO1xyXG4gICAgICAgICAgICBjb25zdCBob3BwZXJDb250ZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdID0gY3JhZnRpbmdUYWJEVE8uaW52ZW50b3J5LnByZXBhcmVkQ29tcG9uZW50cztcclxuXHJcbiAgICAgICAgICAgIGlmICghaG9wcGVyQ29udGVudHMgfHwgaG9wcGVyQ29udGVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmFmdCBmb3Igc3lzdGVtICR7Y3JhZnRpbmdTeXN0ZW1JZH0gd2l0aCAke2hvcHBlckNvbnRlbnRzLmxlbmd0aH0gY29tcG9uZW50c2ApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShjcmFmdGluZ1N5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnRzID0gaG9wcGVyQ29udGVudHMubWFwKChob3BwZXJJdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhKSA9PiBjcmFmdGluZ1N5c3RlbS5nZXRDb21wb25lbnRCeVBhcnRJZChob3BwZXJJdGVtLmVudHJ5SWQpKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjdG9yLnVuc2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBgY3JhZnRpbmcuJHtjcmFmdGluZ1N5c3RlbUlkfS5ob3BwZXJgKTtcclxuICAgICAgICAgICAgYXdhaXQgY3JhZnRpbmdTeXN0ZW0uY3JhZnRXaXRoQ29tcG9uZW50cyh0aGlzLl9hY3RvciwgRmFicmljYXRlQXBwbGljYXRpb24uaW52ZW50b3JpZXMuZ2V0Rm9yKHRoaXMuX2FjdG9yLmlkKSwgY3JhZnRpbmdDb21wb25lbnRzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCdzZWxlY3RbbmFtZT1cImZhYnJpY2F0ZS5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbVwiXScpLmNoYW5nZShhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW1JZFRvQWN0aXZhdGU6IHN0cmluZyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYWN0b3Iuc2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW0sIHN5c3RlbUlkVG9BY3RpdmF0ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnc2VsZWN0W25hbWU9XCJmYWJyaWNhdGUuY3JhZnRpbmcuc2VsZWN0ZWRSZWNpcGVcIl0nKS5jaGFuZ2UoYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRSZWNpcGVJZDogc3RyaW5nID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRSZWNpcGUsIHNlbGVjdGVkUmVjaXBlSWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5hY3Rvci1yZWNpcGUtY3JhZnRpbmcnKS5jbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY2lwZUlkID0gYXdhaXQgdGhpcy5fYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkUmVjaXBlKTtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlQYXJ0SWQocmVjaXBlSWQpO1xyXG4gICAgICAgICAgICBjb25zdCByZWNpcGUgPSBjcmFmdGluZ1N5c3RlbS5nZXRSZWNpcGVCeVBhcnRJZChyZWNpcGVJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcih0aGlzLl9hY3Rvci5pZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGNyYWZ0aW5nU3lzdGVtLmNyYWZ0KHRoaXMuX2FjdG9yLCBpbnZlbnRvcnksIHJlY2lwZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNBY3RpdmVJbk5hdigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gJCh0aGlzLl9zaGVldEh0bWwpLmZpbmQoYGEuZmFicmljYXRlLWNyYWZ0aW5nW2RhdGEtdGFiPVwiJHtDcmFmdGluZ1RhYi50YWJLZXl9XCJdYCkuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nVGFifSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTab.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTabData.ts":
/*!**************************************************!*\
  !*** ./src/scripts/interface/CraftingTabData.ts ***!
  \**************************************************/
/*! exports provided: CraftingTabData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTabData\", function() { return CraftingTabData; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass CraftingTabData {\r\n    constructor(craftingSystems, inventory, actor) {\r\n        this._recipeData = [];\r\n        this._craftingSystems = craftingSystems;\r\n        this._inventory = inventory;\r\n        this._actor = actor;\r\n    }\r\n    get crafting() {\r\n        return this._craftingSystemData;\r\n    }\r\n    get recipes() {\r\n        return this._recipeData;\r\n    }\r\n    get inventory() {\r\n        return this._inventoryContents;\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._craftingSystemData = yield this.prepareCraftingSystemData(this._craftingSystems, this._actor);\r\n            if (this._craftingSystemData.hasEnabledSystems) {\r\n                const selectedCraftingSystem = this._craftingSystems.find((system) => system.compendiumPackKey === this._craftingSystemData.selectedSystemId);\r\n                this._recipeData = yield this.prepareRecipeDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n                this._inventoryContents = this.prepareInventoryDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n            }\r\n        });\r\n    }\r\n    prepareCraftingSystemData(craftingSystems, actor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let enabledSystems = 0;\r\n            const craftingSystemsInfo = [];\r\n            const storedSystemId = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem);\r\n            craftingSystems.forEach((system) => {\r\n                if (system.enabled) {\r\n                    enabledSystems++;\r\n                }\r\n                craftingSystemsInfo.push({\r\n                    disabled: !system.enabled,\r\n                    compendiumPackKey: system.compendiumPackKey,\r\n                    name: system.name,\r\n                    selected: system.compendiumPackKey === storedSystemId\r\n                });\r\n            });\r\n            const hasEnabledSystems = enabledSystems > 0;\r\n            if (storedSystemId) {\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: storedSystemId\r\n                };\r\n            }\r\n            else if (hasEnabledSystems) {\r\n                const firstEnabledSystem = craftingSystemsInfo.find((systemInfo) => !systemInfo.disabled);\r\n                firstEnabledSystem.selected = true;\r\n                yield actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, firstEnabledSystem.compendiumPackKey);\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: firstEnabledSystem.compendiumPackKey\r\n                };\r\n            }\r\n        });\r\n    }\r\n    prepareRecipeDataForSystem(craftingSystem, actor, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const storedKnownRecipes = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.knownRecipesForSystem(craftingSystem.compendiumPackKey));\r\n            const knownRecipes = storedKnownRecipes ? storedKnownRecipes : [];\r\n            const recipeData = [];\r\n            const selectedRecipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            craftingSystem.recipes.forEach((recipe) => {\r\n                const isKnown = knownRecipes.includes(recipe.partId);\r\n                const isOwned = inventory.containsRecipe(recipe.partId);\r\n                const isCraftable = (isKnown || isOwned) ? inventory.hasAllIngredientsFor(recipe) : false;\r\n                const isSelected = recipe.partId === selectedRecipeId;\r\n                recipeData.push({\r\n                    name: recipe.name,\r\n                    partId: recipe.partId,\r\n                    known: isKnown,\r\n                    owned: isOwned,\r\n                    craftable: isCraftable,\r\n                    selected: isSelected\r\n                });\r\n            });\r\n            return recipeData;\r\n        });\r\n    }\r\n    prepareInventoryDataForSystem(craftingSystem, actor, inventory) {\r\n        const inventoryContents = {\r\n            ownedComponents: [],\r\n            preparedComponents: []\r\n        };\r\n        inventory.components.filter((inventoryRecord) => inventoryRecord.fabricateItem.systemId === craftingSystem.compendiumPackKey)\r\n            .forEach((inventoryRecord) => {\r\n            inventoryContents.ownedComponents.push({\r\n                name: inventoryRecord.fabricateItem.name,\r\n                entryId: inventoryRecord.fabricateItem.partId,\r\n                quantity: inventoryRecord.totalQuantity,\r\n                imageUrl: inventoryRecord.fabricateItem.imageUrl\r\n            });\r\n        });\r\n        const savedHopperContents = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.hopperForSystem(craftingSystem.compendiumPackKey));\r\n        if (savedHopperContents) {\r\n            inventoryContents.preparedComponents = savedHopperContents;\r\n            savedHopperContents.forEach((hopperItem) => {\r\n                const inventoryItem = inventoryContents.ownedComponents.find((inventoryItem) => inventoryItem.entryId === hopperItem.entryId);\r\n                if (inventoryItem) {\r\n                    inventoryItem.quantity = inventoryItem.quantity - hopperItem.quantity;\r\n                }\r\n            });\r\n            inventoryContents.ownedComponents = inventoryContents.ownedComponents.filter((inventoryItem) => inventoryItem.quantity > 0);\r\n        }\r\n        return inventoryContents;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJEYXRhLnRzPzIxMDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSXVDO0FBU3ZDLE1BQU0sZUFBZTtJQVVqQixZQUFZLGVBQXFDLEVBQUUsU0FBb0IsRUFBRSxLQUFZO1FBSDdFLGdCQUFXLEdBQWlCLEVBQUUsQ0FBQztRQUluQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZUFBZSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNwQyxDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUNuQyxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ0wsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFFSyxJQUFJOztZQUNOLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXBHLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixFQUFFO2dCQUM1QyxNQUFNLHNCQUFzQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUEwQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEtBQUssSUFBSSxDQUFDLG1CQUFtQixDQUFDLGdCQUFnQixDQUFDLENBQUM7Z0JBRWxLLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUMs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ZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5fSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1EYXRhLCBDcmFmdGluZ1N5c3RlbUluZm8sIEludmVudG9yeVJlY29yZERhdGEsIFJlY2lwZURhdGF9IGZyb20gXCIuL0ludGVyZmFjZURhdGFUeXBlc1wiO1xyXG5cclxuaW50ZXJmYWNlIEludmVudG9yeUNvbnRlbnRzIHtcclxuICAgIG93bmVkQ29tcG9uZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdO1xyXG4gICAgcHJlcGFyZWRDb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmREYXRhW107XHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nVGFiRGF0YSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY3JhZnRpbmdTeXN0ZW1zOiBDcmFmdGluZ1N5c3RlbTx7fT5bXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yeTogSW52ZW50b3J5O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYWN0b3I6IEFjdG9yO1xyXG5cclxuICAgIHByaXZhdGUgX2NyYWZ0aW5nU3lzdGVtRGF0YTogQ3JhZnRpbmdTeXN0ZW1EYXRhO1xyXG4gICAgcHJpdmF0ZSBfcmVjaXBlRGF0YTogUmVjaXBlRGF0YVtdID0gW107XHJcbiAgICBwcml2YXRlIF9pbnZlbnRvcnlDb250ZW50czogSW52ZW50b3J5Q29udGVudHM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY3JhZnRpbmdTeXN0ZW1zOiBDcmFmdGluZ1N5c3RlbTx7fT5bXSwgaW52ZW50b3J5OiBJbnZlbnRvcnksIGFjdG9yOiBBY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2NyYWZ0aW5nU3lzdGVtcyA9IGNyYWZ0aW5nU3lzdGVtcztcclxuICAgICAgICB0aGlzLl9pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3JhZnRpbmcoKTogQ3JhZnRpbmdTeXN0ZW1EYXRhIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZWNpcGVzKCk6IFJlY2lwZURhdGFbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2lwZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGludmVudG9yeSgpOiBJbnZlbnRvcnlDb250ZW50cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludmVudG9yeUNvbnRlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcigpOiBBY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlQ3JhZnRpbmdTeXN0ZW1EYXRhKHRoaXMuX2NyYWZ0aW5nU3lzdGVtcywgdGhpcy5fYWN0b3IpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhLmhhc0VuYWJsZWRTeXN0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW0gPSB0aGlzLl9jcmFmdGluZ1N5c3RlbXMuZmluZCgoc3lzdGVtOiBDcmFmdGluZ1N5c3RlbTx7fT4pID0+IHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSA9PT0gdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhLnNlbGVjdGVkU3lzdGVtSWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVjaXBlRGF0YSA9IGF3YWl0IHRoaXMucHJlcGFyZVJlY2lwZURhdGFGb3JTeXN0ZW0oc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSwgdGhpcy5fYWN0b3IsIHRoaXMuX2ludmVudG9yeSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbnZlbnRvcnlDb250ZW50cyA9IHRoaXMucHJlcGFyZUludmVudG9yeURhdGFGb3JTeXN0ZW0oc2VsZWN0ZWRDcmFmdGluZ1N5c3RlbSx0aGlzLl9hY3RvciwgdGhpcy5faW52ZW50b3J5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcHJlcGFyZUNyYWZ0aW5nU3lzdGVtRGF0YShjcmFmdGluZ1N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtPHt9PltdLCBhY3RvcjogQWN0b3IpOiBQcm9taXNlPENyYWZ0aW5nU3lzdGVtRGF0YT4ge1xyXG4gICAgICAgIGxldCBlbmFibGVkU3lzdGVtczogbnVtYmVyID0gMDtcclxuICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbXNJbmZvOiBDcmFmdGluZ1N5c3RlbUluZm9bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFN5c3RlbUlkID0gYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW0pO1xyXG4gICAgICAgIGNyYWZ0aW5nU3lzdGVtcy5mb3JFYWNoKChzeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWRTeXN0ZW1zKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3JhZnRpbmdTeXN0ZW1zSW5mby5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhc3lzdGVtLmVuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBjb21wZW5kaXVtUGFja0tleTogc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5LFxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3lzdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5ID09PSBzdG9yZWRTeXN0ZW1JZFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhhc0VuYWJsZWRTeXN0ZW1zOiBib29sZWFuID0gZW5hYmxlZFN5c3RlbXMgPiAwO1xyXG4gICAgICAgIGlmIChzdG9yZWRTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtczogY3JhZnRpbmdTeXN0ZW1zSW5mbyxcclxuICAgICAgICAgICAgICAgIGhhc0VuYWJsZWRTeXN0ZW1zOiBoYXNFbmFibGVkU3lzdGVtcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3lzdGVtSWQ6IHN0b3JlZFN5c3RlbUlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGhhc0VuYWJsZWRTeXN0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RW5hYmxlZFN5c3RlbSA9IGNyYWZ0aW5nU3lzdGVtc0luZm8uZmluZCgoc3lzdGVtSW5mbzogQ3JhZnRpbmdTeXN0ZW1JbmZvKSA9PiAhc3lzdGVtSW5mby5kaXNhYmxlZCk7XHJcbiAgICAgICAgICAgIGZpcnN0RW5hYmxlZFN5c3RlbS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IGFjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZENyYWZ0aW5nU3lzdGVtLCBmaXJzdEVuYWJsZWRTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtczogY3JhZnRpbmdTeXN0ZW1zSW5mbyxcclxuICAgICAgICAgICAgICAgIGhhc0VuYWJsZWRTeXN0ZW1zOiBoYXNFbmFibGVkU3lzdGVtcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3lzdGVtSWQ6IGZpcnN0RW5hYmxlZFN5c3RlbS5jb21wZW5kaXVtUGFja0tleVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHByZXBhcmVSZWNpcGVEYXRhRm9yU3lzdGVtKGNyYWZ0aW5nU3lzdGVtOiBDcmFmdGluZ1N5c3RlbTx7fT4sIGFjdG9yOiBBY3RvciwgaW52ZW50b3J5OiBJbnZlbnRvcnkpOiBQcm9taXNlPFJlY2lwZURhdGFbXT4ge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZEtub3duUmVjaXBlczogc3RyaW5nW10gPSBhY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iua25vd25SZWNpcGVzRm9yU3lzdGVtKGNyYWZ0aW5nU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5KSk7XHJcbiAgICAgICAgY29uc3Qga25vd25SZWNpcGVzOiBzdHJpbmdbXSA9IHN0b3JlZEtub3duUmVjaXBlcyA/IHN0b3JlZEtub3duUmVjaXBlcyA6IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlY2lwZURhdGE6IFJlY2lwZURhdGFbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUmVjaXBlSWQ6IHN0cmluZyA9IGF3YWl0IHRoaXMuX2FjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZFJlY2lwZSk7XHJcbiAgICAgICAgY3JhZnRpbmdTeXN0ZW0ucmVjaXBlcy5mb3JFYWNoKChyZWNpcGU6IFJlY2lwZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0tub3duOiBib29sZWFuID0ga25vd25SZWNpcGVzLmluY2x1ZGVzKHJlY2lwZS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc093bmVkOiBib29sZWFuID0gaW52ZW50b3J5LmNvbnRhaW5zUmVjaXBlKHJlY2lwZS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0NyYWZ0YWJsZTogYm9vbGVhbiA9IChpc0tub3duIHx8IGlzT3duZWQpID8gaW52ZW50b3J5Lmhhc0FsbEluZ3JlZGllbnRzRm9yKHJlY2lwZSkgOiBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZDogYm9vbGVhbiA9IHJlY2lwZS5wYXJ0SWQgPT09IHNlbGVjdGVkUmVjaXBlSWQ7XHJcbiAgICAgICAgICAgIHJlY2lwZURhdGEucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiByZWNpcGUubmFtZSxcclxuICAgICAgICAgICAgICAgIHBhcnRJZDogcmVjaXBlLnBhcnRJZCxcclxuICAgICAgICAgICAgICAgIGtub3duOiBpc0tub3duLFxyXG4gICAgICAgICAgICAgICAgb3duZWQ6IGlzT3duZWQsXHJcbiAgICAgICAgICAgICAgICBjcmFmdGFibGU6IGlzQ3JhZnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGlzU2VsZWN0ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlY2lwZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZUludmVudG9yeURhdGFGb3JTeXN0ZW0oY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiwgYWN0b3I6IEFjdG9yLCBpbnZlbnRvcnk6IEludmVudG9yeSk6IEludmVudG9yeUNvbnRlbnRzIHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlDb250ZW50czogSW52ZW50b3J5Q29udGVudHMgPSB7XHJcbiAgICAgICAgICAgIG93bmVkQ29tcG9uZW50czogW10sXHJcbiAgICAgICAgICAgIHByZXBhcmVkQ29tcG9uZW50czogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgaW52ZW50b3J5LmNvbXBvbmVudHMuZmlsdGVyKChpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLnN5c3RlbUlkID09PSBjcmFmdGluZ1N5c3RlbS5jb21wZW5kaXVtUGFja0tleSlcclxuICAgICAgICAgICAgLmZvckVhY2goKGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5Q29udGVudHMub3duZWRDb21wb25lbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlJZDogaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0ucGFydElkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBpbnZlbnRvcnlSZWNvcmQudG90YWxRdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZVVybDogaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uaW1hZ2VVcmxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzYXZlZEhvcHBlckNvbnRlbnRzOiBJbnZlbnRvcnlSZWNvcmREYXRhW10gPSBhY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3IuaG9wcGVyRm9yU3lzdGVtKGNyYWZ0aW5nU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5KSk7XHJcbiAgICAgICAgaWYgKHNhdmVkSG9wcGVyQ29udGVudHMpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5Q29udGVudHMucHJlcGFyZWRDb21wb25lbnRzID0gc2F2ZWRIb3BwZXJDb250ZW50cztcclxuICAgICAgICAgICAgc2F2ZWRIb3BwZXJDb250ZW50cy5mb3JFYWNoKChob3BwZXJJdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZlbnRvcnlJdGVtID0gaW52ZW50b3J5Q29udGVudHMub3duZWRDb21wb25lbnRzLmZpbmQoKGludmVudG9yeUl0ZW06IEludmVudG9yeVJlY29yZERhdGEpID0+IGludmVudG9yeUl0ZW0uZW50cnlJZCA9PT0gaG9wcGVySXRlbS5lbnRyeUlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnZlbnRvcnlJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5SXRlbS5xdWFudGl0eSA9IGludmVudG9yeUl0ZW0ucXVhbnRpdHkgLSBob3BwZXJJdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaW52ZW50b3J5Q29udGVudHMub3duZWRDb21wb25lbnRzID0gaW52ZW50b3J5Q29udGVudHMub3duZWRDb21wb25lbnRzLmZpbHRlcigoaW52ZW50b3J5SXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gaW52ZW50b3J5SXRlbS5xdWFudGl0eSA+IDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW52ZW50b3J5Q29udGVudHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdUYWJEYXRhfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTabData.ts\n");

/***/ }),

/***/ "./src/scripts/interface/ItemRecipeTab.ts":
/*!************************************************!*\
  !*** ./src/scripts/interface/ItemRecipeTab.ts ***!
  \************************************************/
/*! exports provided: ItemRecipeTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemRecipeTab\", function() { return ItemRecipeTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass ItemRecipeTab {\r\n    constructor(itemApplication) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = itemApplication;\r\n        this._item = itemApplication.item;\r\n        const partId = itemApplication.item.data.flags.fabricate.identity.partId;\r\n        this._craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByPartId(partId);\r\n        this._recipe = this._craftingSystem.getRecipeByPartId(partId);\r\n    }\r\n    static bind(itemApplication, sheetHtml) {\r\n        if (!itemApplication.item.data.flags.fabricate) {\r\n            return;\r\n        }\r\n        const fabricateFlags = itemApplication.item.data.flags.fabricate;\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.recipe) {\r\n            let tab = ItemRecipeTab.tabs.get(itemApplication.id);\r\n            if (!tab) {\r\n                tab = new ItemRecipeTab(itemApplication);\r\n                ItemRecipeTab.tabs.set(itemApplication.id, tab);\r\n            }\r\n            tab.init(sheetHtml);\r\n        }\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.component && fabricateFlags.component.essences && fabricateFlags.component.essences.length > 0) {\r\n            const essences = fabricateFlags.component.essences;\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(fabricateFlags.identity.systemId);\r\n            const essenceDescription = essences.map((essence) => craftingSystem.getEssenceBySlug(essence).icon)\r\n                .join(', ');\r\n            sheetHtml.find('ol.properties-list').append($(`<li>${essenceDescription}</li>`));\r\n        }\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToItemSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.recipeTab, { recipe: this._recipe, item: this._item, system: this._craftingSystem });\r\n            const element = this._sheetHtml.find('.recipe-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-recipe').append(template);\r\n            }\r\n            this.handleItemSheetEvents();\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(ItemRecipeTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToItemSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($(`<a class=\"item fabricate-recipe\" data-tab=\"${ItemRecipeTab.tabKey}\">Recipe</a>`));\r\n        $(sheetHtml.find(`.sheet-body`)).append($(`<div class=\"tab fabricate-recipe\" data-group=\"primary\" data-tab=\"${ItemRecipeTab.tabKey}\"></div>`));\r\n    }\r\n    handleItemSheetEvents() {\r\n        this._sheetHtml.find('.craft-button').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const actorId = event.target.getAttribute('data-actor-id');\r\n            const actor = game.actors.get(actorId);\r\n            const inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inventories.getFor(actorId);\r\n            yield this._craftingSystem.craft(actor, inventory, this._recipe);\r\n            this._suppressedInNav = true;\r\n            yield this.render();\r\n        }));\r\n        this._sheetHtml.find('.open-compendium-item').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const partId = event.currentTarget.getAttribute('data-part-id');\r\n            const systemId = event.currentTarget.getAttribute('data-system-id');\r\n            const compendium = game.packs.get(systemId);\r\n            const entity = yield compendium.getEntity(partId);\r\n            if (!game.user.isGM && entity.permission === 0) {\r\n                console.warn('You are attempting to view the details of a Crafting Component that you have no ' +\r\n                    'access to. Ask your GM oran administrator to grant you access to the items in the compendium for ' +\r\n                    'the Crafting System \"' + this._craftingSystem.name + '\"');\r\n            }\r\n            entity.sheet.render(true);\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-recipe[data-tab=\"${ItemRecipeTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nItemRecipeTab.tabs = new Map();\r\nItemRecipeTab.tabKey = 'fabricate-recipe';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvSXRlbVJlY2lwZVRhYi50cz8wY2I3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFHZ0M7QUFJdkUsTUFBTSxhQUFhO0lBa0NmLFlBQVksZUFBb0I7UUF6QnhCLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQTBCdEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGVBQWUsQ0FBQztRQUN6QyxJQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUM7UUFDbEMsTUFBTSxNQUFNLEdBQVcsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQ2pGLElBQUksQ0FBQyxlQUFlLEdBQUcseUVBQW9CLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBNUJNLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBb0IsRUFBRSxTQUFjO1FBQ25ELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFO1lBQzVDLE9BQU87U0FDVjtRQUNELE1BQU0sY0FBYyxHQUE0QixlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1FBQzFGLElBQUksY0FBYyxDQUFDLElBQUksS0FBSyxtREFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7WUFDakQsSUFBSSxHQUFHLEdBQWtCLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwRSxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNOLEdBQUcs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LEVBQUU7Z0JBQzVDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0ZBQWtGO29CQUMzRixtR0FBbUc7b0JBQ25HLHVCQUF1QixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2FBQ2xFO1lBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxFQUFDLENBQUM7SUFFUCxDQUFDO0lBRU8sYUFBYTtRQUNqQixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxhQUFhLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEgsQ0FBQzs7QUF2R3VCLGtCQUFJLEdBQStCLElBQUksR0FBRyxFQUFFLENBQUM7QUFTdEQsb0JBQU0sR0FBVyxrQkFBa0IsQ0FBQztBQWlHakMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvSXRlbVJlY2lwZVRhYi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi4vY29yZS9SZWNpcGVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1N5c3RlbX0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuLi9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGF9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcblxyXG5jbGFzcyBJdGVtUmVjaXBlVGFiIHtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHRhYnM6IE1hcDxzdHJpbmcsIEl0ZW1SZWNpcGVUYWI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHByaXZhdGUgX3NoZWV0QXBwbGljYXRpb246IGFueTtcclxuICAgIHByaXZhdGUgX3NoZWV0SHRtbDogYW55O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaXRlbTogYW55O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVjaXBlOiBSZWNpcGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW08e30+O1xyXG4gICAgcHJpdmF0ZSBfc3VwcHJlc3NlZEluTmF2OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0YWJLZXk6IHN0cmluZyA9ICdmYWJyaWNhdGUtcmVjaXBlJztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJpbmQoaXRlbUFwcGxpY2F0aW9uOiBhbnksIHNoZWV0SHRtbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpdGVtQXBwbGljYXRpb24uaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW1BcHBsaWNhdGlvbi5pdGVtLmRhdGEuZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLnJlY2lwZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFiOiBJdGVtUmVjaXBlVGFiID0gSXRlbVJlY2lwZVRhYi50YWJzLmdldChpdGVtQXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYikge1xyXG4gICAgICAgICAgICAgICAgdGFiID0gbmV3IEl0ZW1SZWNpcGVUYWIoaXRlbUFwcGxpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIudGFicy5zZXQoaXRlbUFwcGxpY2F0aW9uLmlkLCB0YWIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhYi5pbml0KHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLmNvbXBvbmVudCAmJiBmYWJyaWNhdGVGbGFncy5jb21wb25lbnQuZXNzZW5jZXMgJiYgZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXNzZW5jZXM6IHN0cmluZ1tdID0gZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZXNjcmlwdGlvbiA9IGVzc2VuY2VzLm1hcCgoZXNzZW5jZTogc3RyaW5nKSA9PiBjcmFmdGluZ1N5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2UpLmljb24pXHJcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKTtcclxuICAgICAgICAgICAgc2hlZXRIdG1sLmZpbmQoJ29sLnByb3BlcnRpZXMtbGlzdCcpLmFwcGVuZCgkKGA8bGk+JHtlc3NlbmNlRGVzY3JpcHRpb259PC9saT5gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1BcHBsaWNhdGlvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fc2hlZXRBcHBsaWNhdGlvbiA9IGl0ZW1BcHBsaWNhdGlvbjtcclxuICAgICAgICB0aGlzLl9pdGVtID0gaXRlbUFwcGxpY2F0aW9uLml0ZW07XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBpdGVtQXBwbGljYXRpb24uaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZS5pZGVudGl0eS5wYXJ0SWQ7XHJcbiAgICAgICAgdGhpcy5fY3JhZnRpbmdTeXN0ZW0gPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldFN5c3RlbUJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICAgICAgdGhpcy5fcmVjaXBlID0gdGhpcy5fY3JhZnRpbmdTeXN0ZW0uZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXQoc2hlZXRIdG1sOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwgPSBzaGVldEh0bWw7XHJcbiAgICAgICAgdGhpcy5hZGRUYWJUb0l0ZW1TaGVldChzaGVldEh0bWwpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGU6IEhUTUxFbGVtZW50ID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLnJlY2lwZVRhYiwge3JlY2lwZTogdGhpcy5fcmVjaXBlLCBpdGVtOiB0aGlzLl9pdGVtLCBzeXN0ZW06IHRoaXMuX2NyYWZ0aW5nU3lzdGVtfSk7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3NoZWV0SHRtbC5maW5kKCcucmVjaXBlLXRhYi1jb250ZW50Jyk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy50YWIuZmFicmljYXRlLXJlY2lwZScpLmFwcGVuZCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZUl0ZW1TaGVldEV2ZW50cygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc3VwcHJlc3NlZEluTmF2ICYmICF0aGlzLmlzQWN0aXZlSW5OYXYoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaGVldEFwcGxpY2F0aW9uLl90YWJzWzBdLmFjdGl2YXRlKEl0ZW1SZWNpcGVUYWIudGFiS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVGFiVG9JdGVtU2hlZXQoc2hlZXRIdG1sOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0YWJzID0gc2hlZXRIdG1sLmZpbmQoYC50YWJzW2RhdGEtZ3JvdXA9XCJwcmltYXJ5XCJdYCk7XHJcbiAgICAgICAgdGFicy5hcHBlbmQoJChcclxuICAgICAgICAgICAgYDxhIGNsYXNzPVwiaXRlbSBmYWJyaWNhdGUtcmVjaXBlXCIgZGF0YS10YWI9XCIke0l0ZW1SZWNpcGVUYWIudGFiS2V5fVwiPlJlY2lwZTwvYT5gXHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgICQoc2hlZXRIdG1sLmZpbmQoYC5zaGVldC1ib2R5YCkpLmFwcGVuZCgkKFxyXG4gICAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhYiBmYWJyaWNhdGUtcmVjaXBlXCIgZGF0YS1ncm91cD1cInByaW1hcnlcIiBkYXRhLXRhYj1cIiR7SXRlbVJlY2lwZVRhYi50YWJLZXl9XCI+PC9kaXY+YFxyXG4gICAgICAgICkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlSXRlbVNoZWV0RXZlbnRzKCk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNyYWZ0LWJ1dHRvbicpLmNsaWNrKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdG9ySWQ6IHN0cmluZyA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0b3ItaWQnKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0b3I6IEFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnk6IEludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcihhY3RvcklkKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fY3JhZnRpbmdTeXN0ZW0uY3JhZnQoYWN0b3IsIGludmVudG9yeSwgdGhpcy5fcmVjaXBlKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5vcGVuLWNvbXBlbmRpdW0taXRlbScpLmNsaWNrKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcnQtaWQnKTtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zeXN0ZW0taWQnKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcGVuZGl1bTogQ29tcGVuZGl1bSA9IGdhbWUucGFja3MuZ2V0KHN5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5OiBFbnRpdHkgPSBhd2FpdCBjb21wZW5kaXVtLmdldEVudGl0eShwYXJ0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIGVudGl0eS5wZXJtaXNzaW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB2aWV3IHRoZSBkZXRhaWxzIG9mIGEgQ3JhZnRpbmcgQ29tcG9uZW50IHRoYXQgeW91IGhhdmUgbm8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FjY2VzcyB0by4gQXNrIHlvdXIgR00gb3JhbiBhZG1pbmlzdHJhdG9yIHRvIGdyYW50IHlvdSBhY2Nlc3MgdG8gdGhlIGl0ZW1zIGluIHRoZSBjb21wZW5kaXVtIGZvciAnICtcclxuICAgICAgICAgICAgICAgICAgICAndGhlIENyYWZ0aW5nIFN5c3RlbSBcIicgKyB0aGlzLl9jcmFmdGluZ1N5c3RlbS5uYW1lICsgJ1wiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50aXR5LnNoZWV0LnJlbmRlcih0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0FjdGl2ZUluTmF2KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMuX3NoZWV0SHRtbCkuZmluZChgYS5mYWJyaWNhdGUtcmVjaXBlW2RhdGEtdGFiPVwiJHtJdGVtUmVjaXBlVGFiLnRhYktleX1cIl1gKS5oYXNDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7SXRlbVJlY2lwZVRhYn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/ItemRecipeTab.ts\n");

/***/ }),

/***/ "./src/scripts/module.ts":
/*!*******************************!*\
  !*** ./src/scripts/module.ts ***!
  \*******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./application/FabricateLifecycle */ \"./src/scripts/application/FabricateLifecycle.ts\");\n/* harmony import */ var _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/CraftingSystemFactory */ \"./src/scripts/core/CraftingSystemFactory.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nHooks.once('ready', loadCraftingSystems);\r\nHooks.once('ready', () => {\r\n    _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].init();\r\n});\r\n/**\r\n * Loads all Crafting Systems with a System Specification declared with the Crafting System Registry.\r\n * */\r\nfunction loadCraftingSystems() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const systemSpecifications = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.systemSpecifications;\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpecifications.length} crafting systems. `);\r\n        systemSpecifications.forEach(_application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].registerCraftingSystemSettings);\r\n        systemSpecifications.forEach(loadCraftingSystem);\r\n        const systemNames = systemSpecifications.map((systemSpec) => systemSpec.name);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpecifications.length} crafting systems: ${systemNames.join(', ')} `);\r\n    });\r\n}\r\n/**\r\n * Loads a single Crafting System from a System Specification, which must include a Compendium Pack Key. Item data from\r\n * the Compendium Pack is used to load the Recipes and Crafting Components into the system from the compendium. The\r\n * Fabricator, supported systems and name provided in the spec are all preserved.\r\n *\r\n * @param systemSpec `CraftingSystemSpecification` that determines how a system behaves and which compendium pack content\r\n * for the system should be loaded from.\r\n * */\r\nfunction loadCraftingSystem(systemSpec) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpec.name} from Compendium pack ${systemSpec.compendiumPackKey}. `);\r\n        if (systemSpec.supportedGameSystems.indexOf(game.system.id) < 0) {\r\n            console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | ${systemSpec.name} does not support ${game.system.id}! `);\r\n            return;\r\n        }\r\n        const craftingSystemFactory = new _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__[\"CompendiumImportingCraftingSystemFactory\"](systemSpec);\r\n        const craftingSystem = yield craftingSystemFactory.make();\r\n        craftingSystem.enabled = game.settings.get(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey));\r\n        _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.register(craftingSystem);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpec.name}. `);\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tb2R1bGUudHM/NTk0MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzQztBQUM4QjtBQUV5QztBQUN2QztBQUd0RSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3pDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtJQUNyQixrRkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQztBQUVIOztLQUVLO0FBQ0wsU0FBZSxtQkFBbUI7O1FBQzlCLE1BQU0sb0JBQW9CLEdBQUcseUVBQW9CLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQy9FLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGNBQWMsb0JBQW9CLENBQUMsTUFBTSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RHLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrRkFBa0IsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1FBQ2hGLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQXVDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxhQUFhLG9CQUFvQixDQUFDLE1BQU0sc0JBQXNCLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25JLENBQUM7Q0FBQTtBQUVEOzs7Ozs7O0tBT0s7QUFDTCxTQUFlLGtCQUFrQixDQUFDLFVBQXVDOztRQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLFVBQVUsQ0FBQyxJQUFJLHlCQUF5QixVQUFVLENBQUMsaUJBQWlCLElBQUksQ0FBQyxDQUFDO1FBQzlILElBQUksVUFBVSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxNQUFNLFVBQVUsQ0FBQyxJQUFJLHFCQUFxQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEcsT0FBTztTQUNWO1FBQ0QsTUFBTSxxQkFBcUIsR0FBMEIsSUFBSSxvR0FBd0MsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RyxNQUFNLGNBQWMsR0FBRyxNQUFNLHFCQUFxQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELGNBQWMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsbURBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLG1EQUFVLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUNqSix5RUFBb0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGFBQWEsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7SUFDNUUsQ0FBQztDQUFBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvbW9kdWxlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0gZnJvbSBcIi4vYXBwbGljYXRpb24vRmFicmljYXRlTGlmZWN5Y2xlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge0NvbXBlbmRpdW1JbXBvcnRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnksIENyYWZ0aW5nU3lzdGVtRmFjdG9yeX0gZnJvbSBcIi4vY29yZS9DcmFmdGluZ1N5c3RlbUZhY3RvcnlcIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5cclxuSG9va3Mub25jZSgncmVhZHknLCBsb2FkQ3JhZnRpbmdTeXN0ZW1zKTtcclxuSG9va3Mub25jZSgncmVhZHknLCAoKSA9PiB7XHJcbiAgICBGYWJyaWNhdGVMaWZlY3ljbGUuaW5pdCgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBMb2FkcyBhbGwgQ3JhZnRpbmcgU3lzdGVtcyB3aXRoIGEgU3lzdGVtIFNwZWNpZmljYXRpb24gZGVjbGFyZWQgd2l0aCB0aGUgQ3JhZnRpbmcgU3lzdGVtIFJlZ2lzdHJ5LlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW1zKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc3lzdGVtU3BlY2lmaWNhdGlvbnMgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLnN5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgY29uc29sZS5sb2coYCR7UHJvcGVydGllcy5tb2R1bGUubGFiZWx9IHwgTG9hZGluZyAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtcy4gYCk7XHJcbiAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5mb3JFYWNoKEZhYnJpY2F0ZUxpZmVjeWNsZS5yZWdpc3RlckNyYWZ0aW5nU3lzdGVtU2V0dGluZ3MpO1xyXG4gICAgc3lzdGVtU3BlY2lmaWNhdGlvbnMuZm9yRWFjaChsb2FkQ3JhZnRpbmdTeXN0ZW0pO1xyXG4gICAgY29uc3Qgc3lzdGVtTmFtZXMgPSBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5tYXAoKHN5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbikgPT4gc3lzdGVtU3BlYy5uYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8IExvYWRlZCAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtczogJHtzeXN0ZW1OYW1lcy5qb2luKCcsICcpfSBgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGEgc2luZ2xlIENyYWZ0aW5nIFN5c3RlbSBmcm9tIGEgU3lzdGVtIFNwZWNpZmljYXRpb24sIHdoaWNoIG11c3QgaW5jbHVkZSBhIENvbXBlbmRpdW0gUGFjayBLZXkuIEl0ZW0gZGF0YSBmcm9tXHJcbiAqIHRoZSBDb21wZW5kaXVtIFBhY2sgaXMgdXNlZCB0byBsb2FkIHRoZSBSZWNpcGVzIGFuZCBDcmFmdGluZyBDb21wb25lbnRzIGludG8gdGhlIHN5c3RlbSBmcm9tIHRoZSBjb21wZW5kaXVtLiBUaGVcclxuICogRmFicmljYXRvciwgc3VwcG9ydGVkIHN5c3RlbXMgYW5kIG5hbWUgcHJvdmlkZWQgaW4gdGhlIHNwZWMgYXJlIGFsbCBwcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBzeXN0ZW1TcGVjIGBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25gIHRoYXQgZGV0ZXJtaW5lcyBob3cgYSBzeXN0ZW0gYmVoYXZlcyBhbmQgd2hpY2ggY29tcGVuZGl1bSBwYWNrIGNvbnRlbnRcclxuICogZm9yIHRoZSBzeXN0ZW0gc2hvdWxkIGJlIGxvYWRlZCBmcm9tLlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW0oc3lzdGVtU3BlYzogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkaW5nICR7c3lzdGVtU3BlYy5uYW1lfSBmcm9tIENvbXBlbmRpdW0gcGFjayAke3N5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXl9LiBgKTtcclxuICAgIGlmIChzeXN0ZW1TcGVjLnN1cHBvcnRlZEdhbWVTeXN0ZW1zLmluZGV4T2YoZ2FtZS5zeXN0ZW0uaWQpIDwgMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8ICR7c3lzdGVtU3BlYy5uYW1lfSBkb2VzIG5vdCBzdXBwb3J0ICR7Z2FtZS5zeXN0ZW0uaWR9ISBgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUZhY3Rvcnk6IENyYWZ0aW5nU3lzdGVtRmFjdG9yeSA9IG5ldyBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5KHN5c3RlbVNwZWMpO1xyXG4gICAgY29uc3QgY3JhZnRpbmdTeXN0ZW0gPSBhd2FpdCBjcmFmdGluZ1N5c3RlbUZhY3RvcnkubWFrZSgpO1xyXG4gICAgY3JhZnRpbmdTeXN0ZW0uZW5hYmxlZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuc2V0dGluZ3NLZXlzLmNyYWZ0aW5nU3lzdGVtLmVuYWJsZWQoc3lzdGVtU3BlYy5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5yZWdpc3RlcihjcmFmdGluZ1N5c3RlbSk7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkZWQgJHtzeXN0ZW1TcGVjLm5hbWV9LiBgKTtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/module.ts\n");

/***/ }),

/***/ "./src/scripts/registries/CraftingSystemRegistry.ts":
/*!**********************************************************!*\
  !*** ./src/scripts/registries/CraftingSystemRegistry.ts ***!
  \**********************************************************/
/*! exports provided: CraftingSystemRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemRegistry\", function() { return CraftingSystemRegistry; });\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./system_definitions/AlchemistsSuppliesV16 */ \"./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n\r\n\r\n\r\n\r\nclass CraftingSystemRegistry {\r\n    constructor() {\r\n        this._craftingSystemsByCompendiumKey = new Map();\r\n        this._craftingSystemsByPartId = new Map();\r\n        this._systemSpecifications = CraftingSystemRegistry.systemSpecifications();\r\n    }\r\n    register(system) {\r\n        this._craftingSystemsByCompendiumKey.set(system.compendiumPackKey, system);\r\n        this._craftingSystemsByPartId = this.resolvePartsForSystem(system, this._craftingSystemsByPartId);\r\n    }\r\n    resolvePartsForSystem(system, parts) {\r\n        const recipeLinks = new Map(system.recipes.map((recipe) => [recipe.partId, system]));\r\n        const componentLinks = new Map(system.components.map((component) => [component.partId, system]));\r\n        const systemParts = new Map([...recipeLinks, ...componentLinks]);\r\n        if (systemParts.size !== (recipeLinks.size + componentLinks.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} contains duplicate Part IDs. `);\r\n        }\r\n        const mergedParts = new Map([...parts, ...systemParts]);\r\n        if (mergedParts.size !== (systemParts.size + parts.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} shares ${(systemParts.size + parts.size) - mergedParts.size} Part IDs with already registered systems. `);\r\n        }\r\n        return mergedParts;\r\n    }\r\n    getSystemByCompendiumPackKey(id) {\r\n        if (this._craftingSystemsByCompendiumKey.has(id)) {\r\n            return this._craftingSystemsByCompendiumKey.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Compendium Pack Key ${id}. `);\r\n    }\r\n    getSystemByPartId(id) {\r\n        if (this._craftingSystemsByPartId.has(id)) {\r\n            return this._craftingSystemsByPartId.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Recipe ${id}. `);\r\n    }\r\n    getAllSystems() {\r\n        return Array.from(this._craftingSystemsByCompendiumKey.values());\r\n    }\r\n    get systemSpecifications() {\r\n        return this._systemSpecifications;\r\n    }\r\n    declareSpecification(spec) {\r\n        this._systemSpecifications.push(spec);\r\n    }\r\n    static systemSpecifications() {\r\n        const systemSpecifications = [];\r\n        const testSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemSpecification\"].builder()\r\n            .withName('Child\\'s Play')\r\n            .withEnableHint('Enable the test Crafting System for Fabricate?')\r\n            .withDescription('A simple tech demo used for the early development of Fabricate. ')\r\n            .withCompendiumPackKey('fabricate.fabricate-test')\r\n            .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__[\"GameSystemType\"].DND5E)\r\n            .withFabricator(new _core_Fabricator__WEBPACK_IMPORTED_MODULE_3__[\"Fabricator\"]())\r\n            .build();\r\n        systemSpecifications.push(testSystemSpec);\r\n        systemSpecifications.push(_system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__[\"AlchemistsSuppliesSystemSpec\"]);\r\n        return systemSpecifications;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0NyYWZ0aW5nU3lzdGVtUmVnaXN0cnkudHM/MTlmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBc0Q7QUFDMEI7QUFDUTtBQUUxQztBQUU5QyxNQUFNLHNCQUFzQjtJQUE1QjtRQUVZLG9DQUErQixHQUFnQyxJQUFJLEdBQUcsRUFBMEIsQ0FBQztRQUNqRyw2QkFBd0IsR0FBZ0MsSUFBSSxHQUFHLEVBQTBCLENBQUM7UUFDMUYsMEJBQXFCLEdBQWtDLHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFrRWpILENBQUM7SUFoRVUsUUFBUSxDQUFDLE1BQXNCO1FBQ2xDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQ3RHLENBQUM7SUFFTyxxQkFBcUIsQ0FBQyxNQUFzQixFQUFFLEtBQWtDO1FBQ3BGLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxSCxNQUFNLGNBQWMsR0FBZ0MsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pKLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxFQUFFLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLFdBQVcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMvRCxNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixNQUFNLENBQUMsaUJBQWlCLGdDQUFnQyxDQUFDLENBQUM7U0FDNUc7UUFDRCxNQUFNLFdBQVcsR0FBZ0MsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEQsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsTUFBTSxDQUFDLGlCQUFpQixXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsV0FBVyxDQUFDLElBQUksNkNBQTZDLENBQUMsQ0FBQztTQUN0TDtRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSw0QkFBNEIsQ0FBQyxFQUFTO1FBQ3pDLElBQUksSUFBSSxDQUFDLCtCQUErQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUM5QyxPQUFPLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDdkQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLCtFQUErRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxFQUFTO1FBQzlCLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUN2QyxPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtFQUFrRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlGLENBQUM7SUFFTSxhQUFhO1FBQ2hCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsSUFBVyxvQkFBb0I7UUFDM0IsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQUVNLG9CQUFvQixDQUFDLElBQWlDO1FBQ3pELElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxvQkFBb0I7UUFFOUIsTUFBTSxvQkFBb0IsR0FBa0MsRUFBRSxDQUFDO1FBRS9ELE1BQU0sY0FBYyxHQUFnQyw2RkFBMkIsQ0FBQyxPQUFPLEVBQUU7YUFDcEYsUUFBUSxDQUFDLGVBQWUsQ0FBQzthQUN6QixjQUFjLENBQUMsZ0RBQWdELENBQUM7YUFDaEUsZUFBZSxDQUFDLGtFQUFrRSxDQUFDO2FBQ25GLHFCQUFxQixDQUFDLDBCQUEwQixDQUFDO2FBQ2pELHVCQUF1QixDQUFDLG1FQUFjLENBQUMsS0FBSyxDQUFDO2FBQzdDLGNBQWMsQ0FBQyxJQUFJLDJEQUFVLEVBQUUsQ0FBQzthQUNoQyxLQUFLLEVBQUUsQ0FBQztRQUNiLG9CQUFvQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUUxQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsc0dBQTRCLENBQUMsQ0FBQztRQUV4RCxPQUFPLG9CQUFvQixDQUFDO0lBQ2hDLENBQUM7Q0FFSjtBQUU4QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvQ3JhZnRpbmdTeXN0ZW1SZWdpc3RyeS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi4vY29yZS9SZWNpcGVcIjtcclxuaW1wb3J0IHtHYW1lU3lzdGVtVHlwZX0gZnJvbSBcIi4uL2NvcmUvR2FtZVN5c3RlbVR5cGVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb259IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge0FsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWN9IGZyb20gXCIuL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTZcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdG9yfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdG9yXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5IHtcclxuXHJcbiAgICBwcml2YXRlIF9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXk6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4oKTtcclxuICAgIHByaXZhdGUgX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwPHN0cmluZywgQ3JhZnRpbmdTeXN0ZW0+KCk7XHJcbiAgICBwcml2YXRlIF9zeXN0ZW1TcGVjaWZpY2F0aW9uczogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10gPSBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5LnN5c3RlbVNwZWNpZmljYXRpb25zKCk7XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVyKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXkuc2V0KHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSwgc3lzdGVtKTtcclxuICAgICAgICB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeVBhcnRJZCA9IHRoaXMucmVzb2x2ZVBhcnRzRm9yU3lzdGVtKHN5c3RlbSwgdGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlQYXJ0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzb2x2ZVBhcnRzRm9yU3lzdGVtKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0sIHBhcnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4pOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4ge1xyXG4gICAgICAgIGNvbnN0IHJlY2lwZUxpbmtzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwKHN5c3RlbS5yZWNpcGVzLm1hcCgocmVjaXBlOiBSZWNpcGUpID0+IFtyZWNpcGUucGFydElkLCBzeXN0ZW1dKSk7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50TGlua3M6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoc3lzdGVtLmNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBbY29tcG9uZW50LnBhcnRJZCwgc3lzdGVtXSkpO1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbVBhcnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwKFsuLi5yZWNpcGVMaW5rcywgLi4uY29tcG9uZW50TGlua3NdKTtcclxuICAgICAgICBpZiAoc3lzdGVtUGFydHMuc2l6ZSAhPT0gKHJlY2lwZUxpbmtzLnNpemUgKyBjb21wb25lbnRMaW5rcy5zaXplKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBDcmFmdGluZyBTeXN0ZW0gd2l0aCBJRCAke3N5c3RlbS5jb21wZW5kaXVtUGFja0tleX0gY29udGFpbnMgZHVwbGljYXRlIFBhcnQgSURzLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWVyZ2VkUGFydHM6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoWy4uLnBhcnRzLCAuLi5zeXN0ZW1QYXJ0c10pO1xyXG4gICAgICAgIGlmIChtZXJnZWRQYXJ0cy5zaXplICE9PSAoc3lzdGVtUGFydHMuc2l6ZSArIHBhcnRzLnNpemUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIENyYWZ0aW5nIFN5c3RlbSB3aXRoIElEICR7c3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fSBzaGFyZXMgJHsoc3lzdGVtUGFydHMuc2l6ZSArIHBhcnRzLnNpemUpIC0gbWVyZ2VkUGFydHMuc2l6ZX0gUGFydCBJRHMgd2l0aCBhbHJlYWR5IHJlZ2lzdGVyZWQgc3lzdGVtcy4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXJnZWRQYXJ0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShpZDpzdHJpbmcpOiBDcmFmdGluZ1N5c3RlbSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS5oYXMoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXkuZ2V0KGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBDcmFmdGluZyBzeXN0ZW0gaXMgcmVnaXN0ZXJlZCB3aXRoIEZhYnJpY2F0ZSBmb3IgdGhlIENvbXBlbmRpdW0gUGFjayBLZXkgJHtpZH0uIGApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW1CeVBhcnRJZChpZDpzdHJpbmcpOiBDcmFmdGluZ1N5c3RlbSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkLmhhcyhpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkLmdldChpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gQ3JhZnRpbmcgc3lzdGVtIGlzIHJlZ2lzdGVyZWQgd2l0aCBGYWJyaWNhdGUgZm9yIHRoZSBSZWNpcGUgJHtpZH0uIGApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBbGxTeXN0ZW1zKCk6IENyYWZ0aW5nU3lzdGVtW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS52YWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzeXN0ZW1TcGVjaWZpY2F0aW9ucygpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWNsYXJlU3BlY2lmaWNhdGlvbihzcGVjOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1TcGVjaWZpY2F0aW9ucy5wdXNoKHNwZWMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgc3lzdGVtU3BlY2lmaWNhdGlvbnMoKTogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10ge1xyXG5cclxuICAgICAgICBjb25zdCBzeXN0ZW1TcGVjaWZpY2F0aW9uczogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVzdFN5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbiA9IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhOYW1lKCdDaGlsZFxcJ3MgUGxheScpXHJcbiAgICAgICAgICAgIC53aXRoRW5hYmxlSGludCgnRW5hYmxlIHRoZSB0ZXN0IENyYWZ0aW5nIFN5c3RlbSBmb3IgRmFicmljYXRlPycpXHJcbiAgICAgICAgICAgIC53aXRoRGVzY3JpcHRpb24oJ0Egc2ltcGxlIHRlY2ggZGVtbyB1c2VkIGZvciB0aGUgZWFybHkgZGV2ZWxvcG1lbnQgb2YgRmFicmljYXRlLiAnKVxyXG4gICAgICAgICAgICAud2l0aENvbXBlbmRpdW1QYWNrS2V5KCdmYWJyaWNhdGUuZmFicmljYXRlLXRlc3QnKVxyXG4gICAgICAgICAgICAud2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW0oR2FtZVN5c3RlbVR5cGUuRE5ENUUpXHJcbiAgICAgICAgICAgIC53aXRoRmFicmljYXRvcihuZXcgRmFicmljYXRvcigpKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5wdXNoKHRlc3RTeXN0ZW1TcGVjKTtcclxuXHJcbiAgICAgICAgc3lzdGVtU3BlY2lmaWNhdGlvbnMucHVzaChBbGNoZW1pc3RzU3VwcGxpZXNTeXN0ZW1TcGVjKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/registries/CraftingSystemRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/InventoryRegistry.ts":
/*!*****************************************************!*\
  !*** ./src/scripts/registries/InventoryRegistry.ts ***!
  \*****************************************************/
/*! exports provided: InventoryRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRegistry\", function() { return InventoryRegistry; });\nclass InventoryRegistry {\r\n    constructor() {\r\n        this._managedInventories = new Map();\r\n    }\r\n    addFor(actorId, inventory) {\r\n        if (this._managedInventories.has(actorId)) {\r\n            throw new Error(`The Crafting Inventory for Actor ID ${actorId} is already managed by Fabricate and should not be overridden. `);\r\n        }\r\n        this._managedInventories.set(actorId, inventory);\r\n    }\r\n    getFor(actorId) {\r\n        return this._managedInventories.get(actorId);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5LnRzPzE4MzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBLE1BQU0saUJBQWlCO0lBQXZCO1FBRVksd0JBQW1CLEdBQTJCLElBQUksR0FBRyxFQUFxQixDQUFDO0lBYXZGLENBQUM7SUFYVSxNQUFNLENBQUMsT0FBZSxFQUFFLFNBQW9CO1FBQy9DLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLHVDQUF1QyxPQUFPLGlFQUFpRSxDQUFDLENBQUM7U0FDcEk7UUFDRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQWU7UUFDekIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pELENBQUM7Q0FFSjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvSW52ZW50b3J5UmVnaXN0cnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnlSZWdpc3RyeSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfbWFuYWdlZEludmVudG9yaWVzOiBNYXA8c3RyaW5nLCBJbnZlbnRvcnk+ID0gbmV3IE1hcDxzdHJpbmcsIEludmVudG9yeT4oKTtcclxuXHJcbiAgICBwdWJsaWMgYWRkRm9yKGFjdG9ySWQ6IHN0cmluZywgaW52ZW50b3J5OiBJbnZlbnRvcnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fbWFuYWdlZEludmVudG9yaWVzLmhhcyhhY3RvcklkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBDcmFmdGluZyBJbnZlbnRvcnkgZm9yIEFjdG9yIElEICR7YWN0b3JJZH0gaXMgYWxyZWFkeSBtYW5hZ2VkIGJ5IEZhYnJpY2F0ZSBhbmQgc2hvdWxkIG5vdCBiZSBvdmVycmlkZGVuLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbWFuYWdlZEludmVudG9yaWVzLnNldChhY3RvcklkLCBpbnZlbnRvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3IoYWN0b3JJZDogc3RyaW5nKTogSW52ZW50b3J5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFuYWdlZEludmVudG9yaWVzLmdldChhY3RvcklkKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7SW52ZW50b3J5UmVnaXN0cnl9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/registries/InventoryRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts":
/*!****************************************************************************!*\
  !*** ./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts ***!
  \****************************************************************************/
/*! exports provided: AlchemistsSuppliesSystemSpec */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemistsSuppliesSystemSpec\", function() { return AlchemistsSuppliesSystemSpec; });\n/* harmony import */ var _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/EssenceCombiner */ \"./src/scripts/core/EssenceCombiner.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../dnd5e/AlchemicalEffect5E */ \"./src/scripts/dnd5e/AlchemicalEffect5E.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n/* harmony import */ var _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst blinded = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'earth'], 'Release a burst of stinging dust. Affected targets are blinded for the next round. ');\r\nconst prone = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['water', 'water'], 'Release a puddle of slippery oil. Affected targets immediately fall prone. ');\r\nconst lightningDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['air', 'air'], 'Deal 1d4 lightning damage on contact. Double damage to targets touching a metal surface or using metal weapons or armor. ', { expression: '1d4', type: 'lightning' });\r\nconst fireDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'fire'], 'Deal 1d4 fire damage on contact. Double damage to targets with cloth or leather armor. ', { expression: '1d4', type: 'fire' });\r\nconst persistentDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'water'], 'Release gel that sticks to targets. Each round, any damage-dealing effects continue to ' +\r\n    'deal 1 damage each until an action is used to remove the gel with a DC 10 Dexterity check .');\r\nconst coldDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['water', 'air'], 'Deal 1d4 cold damage on contact. Reduce target speed by 10 feet for the next round. ', { expression: '1d4', type: 'cold' });\r\nconst aoeExtension = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"AoeExtension5e\"](['air', 'fire'], 'Release concentrated mist in all directions. Increase the radius of all effects by 5 feet. ', { units: 'ft', value: 5 });\r\nconst acidDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'earth'], 'Deal 1d8 acid damage on contact. ', { expression: '1d8', type: 'acid' });\r\nconst diceMultiplier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"DiceMultiplier5e\"](['positive-energy'], 'Roll double the number of all damage dice. ', 2);\r\nconst savingThrowModifier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"SavingThrowModifier5e\"](['negative-energy'], 'Increase the DC to avoid bomb effects by 2. ', 2);\r\nconst essenceCombiner = _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__[\"EssenceCombiner\"].builder()\r\n    .withMaxComponents(6)\r\n    .withMaxEssences(6)\r\n    .withAlchemicalEffect(blinded)\r\n    .withAlchemicalEffect(prone)\r\n    .withAlchemicalEffect(lightningDamage)\r\n    .withAlchemicalEffect(fireDamage)\r\n    .withAlchemicalEffect(persistentDamage)\r\n    .withAlchemicalEffect(coldDamage)\r\n    .withAlchemicalEffect(aoeExtension)\r\n    .withAlchemicalEffect(acidDamage)\r\n    .withAlchemicalEffect(diceMultiplier)\r\n    .withAlchemicalEffect(savingThrowModifier)\r\n    .build();\r\nconst alchemistsSuppliesV16 = 'fabricate.alchemists-supplies-v16';\r\nconst alchemySpecification = new _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"AlchemySpecification\"](essenceCombiner, _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].builder()\r\n    .withName('Alchemical Bomb')\r\n    .withImageUrl('systems/dnd5e/icons/items/inventory/bomb.jpg')\r\n    .withPartId('90z9nOwmGnP4aUUk')\r\n    .withSystemId(alchemistsSuppliesV16)\r\n    .withEssences([])\r\n    .build());\r\nconst fabricator = new _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"Fabricator\"](alchemySpecification);\r\nconst AlchemistsSuppliesSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__[\"CraftingSystemSpecification\"].builder()\r\n    .withName('Alchemist\\'s Supplies v1.6')\r\n    .withCompendiumPackKey(alchemistsSuppliesV16)\r\n    .withEnableHint('Enable the Alchemist\\'s Supplies v1.6 crafting system by /u/calculusChild?')\r\n    .withDescription('Alchemy is the skill of exploiting unique properties of certain plants, minerals, and ' +\r\n    'creature parts, combining them to produce fantastic substances. This allows even non-spellcasters to mimic ' +\r\n    'minor magical effects, although the creations themselves are nonmagical.')\r\n    .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__[\"GameSystemType\"].DND5E)\r\n    .withFabricator(fabricator)\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Earth', 'Elemental earth, one of the fundamental forces of nature', 'mountain'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Water', 'Elemental water, one of the fundamental forces of nature', 'tint'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Air', 'Elemental air, one of the fundamental forces of nature', 'wind'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Fire', 'Elemental fire, one of the fundamental forces of nature', 'fire'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Positive Energy', 'Positive Energy - The essence of life and creation', 'sun'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Negative Energy', 'Negative Energy - The essence of death and destruction', 'moon'))\r\n    .build();\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTYudHM/YjYyNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBMkQ7QUFDRjtBQUNNO0FBQ29CO0FBTzNDO0FBQytCO0FBQ1g7QUFFNUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxxRUFBVyxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUM5QyxxRkFBcUYsQ0FBQyxDQUFDO0FBRTNGLE1BQU0sS0FBSyxHQUFHLElBQUkscUVBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDNUMsNkVBQTZFLENBQUMsQ0FBQztBQUVuRixNQUFNLGVBQWUsR0FBRyxJQUFJLGtFQUFRLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQy9DLDJIQUEySCxFQUMzSCxFQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBQyxDQUFDLENBQUM7QUFFNUMsTUFBTSxVQUFVLEdBQUcsSUFBSSxrRUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUM1Qyx5RkFBeUYsRUFDekYsRUFBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0FBRXZDLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxxRUFBVyxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUN2RCx5RkFBeUY7SUFDekYsNkZBQTZGLENBQUMsQ0FBQztBQUVuRyxNQUFNLFVBQVUsR0FBRyxJQUFJLGtFQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQzVDLHNGQUFzRixFQUN0RixFQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7QUFF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QWlCLENBQUMsaUJBQWlCLEVBQUUsd0RBQXdELEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDdkgsS0FBSyxFQUFFLENBQUM7QUFFeUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTYudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Vzc2VuY2VDb21iaW5lcn0gZnJvbSBcIi4uLy4uL2NvcmUvRXNzZW5jZUNvbWJpbmVyXCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi8uLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi8uLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi4vLi4vY29yZS9DcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25cIjtcclxuaW1wb3J0IHtcclxuICAgIEFvZUV4dGVuc2lvbjVlLFxyXG4gICAgQ29uZGl0aW9uNWUsXHJcbiAgICBEYW1hZ2U1ZSxcclxuICAgIERpY2VNdWx0aXBsaWVyNWUsXHJcbiAgICBTYXZpbmdUaHJvd01vZGlmaWVyNWVcclxufSBmcm9tIFwiLi4vLi4vZG5kNWUvQWxjaGVtaWNhbEVmZmVjdDVFXCI7XHJcbmltcG9ydCB7QWxjaGVteVNwZWNpZmljYXRpb24sIEZhYnJpY2F0b3J9IGZyb20gXCIuLi8uLi9jb3JlL0ZhYnJpY2F0b3JcIjtcclxuaW1wb3J0IHtFc3NlbmNlRGVmaW5pdGlvbn0gZnJvbSBcIi4uLy4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuXHJcbmNvbnN0IGJsaW5kZWQgPSBuZXcgQ29uZGl0aW9uNWUoWydlYXJ0aCcsICdlYXJ0aCddLFxyXG4gICAgJ1JlbGVhc2UgYSBidXJzdCBvZiBzdGluZ2luZyBkdXN0LiBBZmZlY3RlZCB0YXJnZXRzIGFyZSBibGluZGVkIGZvciB0aGUgbmV4dCByb3VuZC4gJyk7XHJcblxyXG5jb25zdCBwcm9uZSA9IG5ldyBDb25kaXRpb241ZShbJ3dhdGVyJywgJ3dhdGVyJ10sXHJcbiAgICAnUmVsZWFzZSBhIHB1ZGRsZSBvZiBzbGlwcGVyeSBvaWwuIEFmZmVjdGVkIHRhcmdldHMgaW1tZWRpYXRlbHkgZmFsbCBwcm9uZS4gJyk7XHJcblxyXG5jb25zdCBsaWdodG5pbmdEYW1hZ2UgPSBuZXcgRGFtYWdlNWUoWydhaXInLCAnYWlyJ10sXHJcbiAgICAnRGVhbCAxZDQgbGlnaHRuaW5nIGRhbWFnZSBvbiBjb250YWN0LiBEb3VibGUgZGFtYWdlIHRvIHRhcmdldHMgdG91Y2hpbmcgYSBtZXRhbCBzdXJmYWNlIG9yIHVzaW5nIG1ldGFsIHdlYXBvbnMgb3IgYXJtb3IuICcsXHJcbiAgICB7ZXhwcmVzc2lvbjogJzFkNCcsIHR5cGU6ICdsaWdodG5pbmcnfSk7XHJcblxyXG5jb25zdCBmaXJlRGFtYWdlID0gbmV3IERhbWFnZTVlKFsnZmlyZScsICdmaXJlJ10sXHJcbiAgICAnRGVhbCAxZDQgZmlyZSBkYW1hZ2Ugb24gY29udGFjdC4gRG91YmxlIGRhbWFnZSB0byB0YXJnZXRzIHdpdGggY2xvdGggb3IgbGVhdGhlciBhcm1vci4gJyxcclxuICAgIHtleHByZXNzaW9uOiAnMWQ0JywgdHlwZTogJ2ZpcmUnfSk7XHJcblxyXG5jb25zdCBwZXJzaXN0ZW50RGFtYWdlID0gbmV3IENvbmRpdGlvbjVlKFsnZWFydGgnLCAnd2F0ZXInXSxcclxuICAgICdSZWxlYXNlIGdlbCB0aGF0IHN0aWNrcyB0byB0YXJnZXRzLiBFYWNoIHJvdW5kLCBhbnkgZGFtYWdlLWRlYWxpbmcgZWZmZWN0cyBjb250aW51ZSB0byAnICtcclxuICAgICdkZWFsIDEgZGFtYWdlIGVhY2ggdW50aWwgYW4gYWN0aW9uIGlzIHVzZWQgdG8gcmVtb3ZlIHRoZSBnZWwgd2l0aCBhIERDIDEwIERleHRlcml0eSBjaGVjayAuJyk7XHJcblxyXG5jb25zdCBjb2xkRGFtYWdlID0gbmV3IERhbWFnZTVlKFsnd2F0ZXInLCAnYWlyJ10sXHJcbiAgICAnRGVhbCAxZDQgY29sZCBkYW1hZ2Ugb24gY29udGFjdC4gUmVkdWNlIHRhcmdldCBzcGVlZCBieSAxMCBmZWV0IGZvciB0aGUgbmV4dCByb3VuZC4gJyxcclxuICAgIHtleHByZXNzaW9uOiAnMWQ0JywgdHlwZTogJ2NvbGQnfSk7XHJcblxyXG5jb25zdCBhb2VFeHRlbnNpb24gPSBuZXcgQW9lRXh0ZW5zaW9uNWUoWydhaXInLCAnZmlyZSddLFxyXG4gICAgJ1JlbGVhc2UgY29uY2VudHJhdGVkIG1pc3QgaW4gYWxsIGRpcmVjdGlvbnMuIEluY3JlYXNlIHRoZSByYWRpdXMgb2YgYWxsIGVmZmVjdHMgYnkgNSBmZWV0LiAnLFxyXG4gICAge3VuaXRzOiAnZnQnLCB2YWx1ZTogNX0pO1xyXG5cclxuY29uc3QgYWNpZERhbWFnZSA9IG5ldyBEYW1hZ2U1ZShbJ2ZpcmUnLCAnZWFydGgnXSxcclxuICAgICdEZWFsIDFkOCBhY2lkIGRhbWFnZSBvbiBjb250YWN0LiAnLFxyXG4gICAge2V4cHJlc3Npb246ICcxZDgnLCB0eXBlOiAnYWNpZCd9KTtcclxuXHJcbmNvbnN0IGRpY2VNdWx0aXBsaWVyID0gbmV3IERpY2VNdWx0aXBsaWVyNWUoWydwb3NpdGl2ZS1lbmVyZ3knXSxcclxuICAgICdSb2xsIGRvdWJsZSB0aGUgbnVtYmVyIG9mIGFsbCBkYW1hZ2UgZGljZS4gJyxcclxuICAgIDIpO1xyXG5cclxuY29uc3Qgc2F2aW5nVGhyb3dNb2RpZmllciA9IG5ldyBTYXZpbmdUaHJvd01vZGlmaWVyNWUoWyduZWdhdGl2ZS1lbmVyZ3knXSxcclxuICAgICdJbmNyZWFzZSB0aGUgREMgdG8gYXZvaWQgYm9tYiBlZmZlY3RzIGJ5IDIuICcsXHJcbiAgICAyKTtcclxuXHJcbmNvbnN0IGVzc2VuY2VDb21iaW5lcjogRXNzZW5jZUNvbWJpbmVyPEl0ZW1EYXRhNWU+ID0gRXNzZW5jZUNvbWJpbmVyLmJ1aWxkZXI8SXRlbURhdGE1ZT4oKVxyXG4gICAgLndpdGhNYXhDb21wb25lbnRzKDYpXHJcbiAgICAud2l0aE1heEVzc2VuY2VzKDYpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoYmxpbmRlZClcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChwcm9uZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChsaWdodG5pbmdEYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoZmlyZURhbWFnZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChwZXJzaXN0ZW50RGFtYWdlKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KGNvbGREYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoYW9lRXh0ZW5zaW9uKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KGFjaWREYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoZGljZU11bHRpcGxpZXIpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3Qoc2F2aW5nVGhyb3dNb2RpZmllcilcclxuICAgIC5idWlsZCgpO1xyXG5cclxuY29uc3QgYWxjaGVtaXN0c1N1cHBsaWVzVjE2ID0gJ2ZhYnJpY2F0ZS5hbGNoZW1pc3RzLXN1cHBsaWVzLXYxNic7XHJcblxyXG5jb25zdCBhbGNoZW15U3BlY2lmaWNhdGlvbiA9IG5ldyBBbGNoZW15U3BlY2lmaWNhdGlvbihlc3NlbmNlQ29tYmluZXIsIENyYWZ0aW5nQ29tcG9uZW50LmJ1aWxkZXIoKVxyXG4gICAgLndpdGhOYW1lKCdBbGNoZW1pY2FsIEJvbWInKVxyXG4gICAgLndpdGhJbWFnZVVybCgnc3lzdGVtcy9kbmQ1ZS9pY29ucy9pdGVtcy9pbnZlbnRvcnkvYm9tYi5qcGcnKVxyXG4gICAgLndpdGhQYXJ0SWQoJzkwejluT3dtR25QNGFVVWsnKVxyXG4gICAgLndpdGhTeXN0ZW1JZChhbGNoZW1pc3RzU3VwcGxpZXNWMTYpXHJcbiAgICAud2l0aEVzc2VuY2VzKFtdKVxyXG4gICAgLmJ1aWxkKCkpO1xyXG5cclxuY29uc3QgZmFicmljYXRvcjogRmFicmljYXRvcjxJdGVtRGF0YTVlPiA9IG5ldyBGYWJyaWNhdG9yPEl0ZW1EYXRhNWU+KGFsY2hlbXlTcGVjaWZpY2F0aW9uKTtcclxuXHJcbmNvbnN0IEFsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbiA9IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5idWlsZGVyKClcclxuICAgIC53aXRoTmFtZSgnQWxjaGVtaXN0XFwncyBTdXBwbGllcyB2MS42JylcclxuICAgIC53aXRoQ29tcGVuZGl1bVBhY2tLZXkoYWxjaGVtaXN0c1N1cHBsaWVzVjE2KVxyXG4gICAgLndpdGhFbmFibGVIaW50KCdFbmFibGUgdGhlIEFsY2hlbWlzdFxcJ3MgU3VwcGxpZXMgdjEuNiBjcmFmdGluZyBzeXN0ZW0gYnkgL3UvY2FsY3VsdXNDaGlsZD8nKVxyXG4gICAgLndpdGhEZXNjcmlwdGlvbignQWxjaGVteSBpcyB0aGUgc2tpbGwgb2YgZXhwbG9pdGluZyB1bmlxdWUgcHJvcGVydGllcyBvZiBjZXJ0YWluIHBsYW50cywgbWluZXJhbHMsIGFuZCAnICtcclxuICAgICAgICAnY3JlYXR1cmUgcGFydHMsIGNvbWJpbmluZyB0aGVtIHRvIHByb2R1Y2UgZmFudGFzdGljIHN1YnN0YW5jZXMuIFRoaXMgYWxsb3dzIGV2ZW4gbm9uLXNwZWxsY2FzdGVycyB0byBtaW1pYyAnICtcclxuICAgICAgICAnbWlub3IgbWFnaWNhbCBlZmZlY3RzLCBhbHRob3VnaCB0aGUgY3JlYXRpb25zIHRoZW1zZWx2ZXMgYXJlIG5vbm1hZ2ljYWwuJylcclxuICAgIC53aXRoU3VwcG9ydGVkR2FtZVN5c3RlbShHYW1lU3lzdGVtVHlwZS5ETkQ1RSlcclxuICAgIC53aXRoRmFicmljYXRvcihmYWJyaWNhdG9yKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignRWFydGgnLCAnRWxlbWVudGFsIGVhcnRoLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAnbW91bnRhaW4nKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ1dhdGVyJywgJ0VsZW1lbnRhbCB3YXRlciwgb25lIG9mIHRoZSBmdW5kYW1lbnRhbCBmb3JjZXMgb2YgbmF0dXJlJywgJ3RpbnQnKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ0FpcicsICdFbGVtZW50YWwgYWlyLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAnd2luZCcpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignRmlyZScsICdFbGVtZW50YWwgZmlyZSwgb25lIG9mIHRoZSBmdW5kYW1lbnRhbCBmb3JjZXMgb2YgbmF0dXJlJywgJ2ZpcmUnKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ1Bvc2l0aXZlIEVuZXJneScsICdQb3NpdGl2ZSBFbmVyZ3kgLSBUaGUgZXNzZW5jZSBvZiBsaWZlIGFuZCBjcmVhdGlvbicsICdzdW4nKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ05lZ2F0aXZlIEVuZXJneScsICdOZWdhdGl2ZSBFbmVyZ3kgLSBUaGUgZXNzZW5jZSBvZiBkZWF0aCBhbmQgZGVzdHJ1Y3Rpb24nLCAnbW9vbicpKVxyXG4gICAgLmJ1aWxkKCk7XHJcblxyXG5leHBvcnQge0FsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWN9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\n");

/***/ })

/******/ });