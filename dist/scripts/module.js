/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "E:\\Projects\\Foundry Development\\dev-modules\\fabricate\\module\\scripts";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/scripts/module.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJwYWNrLXN0cmVhbS9ub2RlX21vZHVsZXMvbm9kZS1saWJzLWJyb3dzZXIvbW9jay9lbXB0eS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\n");

/***/ }),

/***/ "./src/scripts/Properties.ts":
/*!***********************************!*\
  !*** ./src/scripts/Properties.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\nconst Properties = {\r\n    module: {\r\n        name: 'fabricate',\r\n        label: 'Fabricate',\r\n        templates: {\r\n            recipeTab: 'modules/fabricate/templates/recipe-tab.html',\r\n            craftingTab: 'modules/fabricate/templates/crafting-tab.html',\r\n            craftingMessage: 'modules/fabricate/templates/chat-message.html'\r\n        }\r\n    },\r\n    types: {\r\n        recipe: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].RECIPE,\r\n        component: _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT,\r\n        allowableItems: ['consumable', 'loot', 'scroll', 'trinket']\r\n    },\r\n    flagKeys: {\r\n        actor: {\r\n            selectedCraftingSystem: 'crafting.selectedSystemId',\r\n            selectedRecipe: 'crafting.selectedRecipeId',\r\n            hopperForSystem: (systemId) => `crafting.${systemId}.hopper`,\r\n            knownRecipesForSystem: (systemId) => `crafting.${systemId}.knownRecipes`,\r\n        },\r\n        item: {\r\n            identity: 'identity',\r\n            partId: 'identity.partId',\r\n            systemId: 'identity.systemId',\r\n            fabricateItemType: 'type',\r\n        }\r\n    },\r\n    settingsKeys: {\r\n        craftingSystem: {\r\n            enabled: (systemId) => `${systemId}.enabled`\r\n        }\r\n    }\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Properties);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9Qcm9wZXJ0aWVzLnRzPzkwMWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUF3RDtBQUV4RCxNQUFNLFVBQVUsR0FBRztJQUNmLE1BQU0sRUFBRTtRQUNKLElBQUksRUFBRSxXQUFXO1FBQ2pCLEtBQUssRUFBRSxXQUFXO1FBQ2xCLFNBQVMsRUFBRTtZQUNQLFNBQVMsRUFBRSw2Q0FBNkM7WUFDeEQsV0FBVyxFQUFFLCtDQUErQztZQUM1RCxlQUFlLEVBQUUsK0NBQStDO1NBQ25FO0tBQ0o7SUFDRCxLQUFLLEVBQUU7UUFDSCxNQUFNLEVBQUUsc0VBQWlCLENBQUMsTUFBTTtRQUNoQyxTQUFTLEVBQUUsc0VBQWlCLENBQUMsU0FBUztRQUN0QyxjQUFjLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUM7S0FDOUQ7SUFDRCxRQUFRLEVBQUU7UUFDTixLQUFLLEVBQUU7WUFDSCxzQkFBc0IsRUFBRSwyQkFBMkI7WUFDbkQsY0FBYyxFQUFFLDJCQUEyQjtZQUMzQyxlQUFlLEVBQUUsQ0FBQyxRQUFnQixFQUFFLEVBQUUsQ0FBQyxZQUFZLFFBQVEsU0FBUztZQUNwRSxxQkFBcUIsRUFBRSxDQUFDLFFBQWdCLEVBQUUsRUFBRSxDQUFDLFlBQVksUUFBUSxlQUFlO1NBQ25GO1FBQ0QsSUFBSSxFQUFFO1lBQ0YsUUFBUSxFQUFFLFVBQVU7WUFDcEIsTUFBTSxFQUFFLGlCQUFpQjtZQUN6QixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLGlCQUFpQixFQUFFLE1BQU07U0FDNUI7S0FDSjtJQUNELFlBQVksRUFBRTtRQUNWLGNBQWMsRUFBRTtZQUNaLE9BQU8sRUFBRSxDQUFDLFFBQWdCLEVBQUUsRUFBRSxDQUFDLEdBQUcsUUFBUSxVQUFVO1NBQ3ZEO0tBQ0o7Q0FDSixDQUFDO0FBRWEseUVBQVUsRUFBQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL1Byb3BlcnRpZXMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcblxyXG5jb25zdCBQcm9wZXJ0aWVzID0ge1xyXG4gICAgbW9kdWxlOiB7XHJcbiAgICAgICAgbmFtZTogJ2ZhYnJpY2F0ZScsXHJcbiAgICAgICAgbGFiZWw6ICdGYWJyaWNhdGUnLFxyXG4gICAgICAgIHRlbXBsYXRlczoge1xyXG4gICAgICAgICAgICByZWNpcGVUYWI6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvcmVjaXBlLXRhYi5odG1sJyxcclxuICAgICAgICAgICAgY3JhZnRpbmdUYWI6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvY3JhZnRpbmctdGFiLmh0bWwnLFxyXG4gICAgICAgICAgICBjcmFmdGluZ01lc3NhZ2U6ICdtb2R1bGVzL2ZhYnJpY2F0ZS90ZW1wbGF0ZXMvY2hhdC1tZXNzYWdlLmh0bWwnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHR5cGVzOiB7XHJcbiAgICAgICAgcmVjaXBlOiBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEUsXHJcbiAgICAgICAgY29tcG9uZW50OiBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQsXHJcbiAgICAgICAgYWxsb3dhYmxlSXRlbXM6IFsnY29uc3VtYWJsZScsICdsb290JywgJ3Njcm9sbCcsICd0cmlua2V0J11cclxuICAgIH0sXHJcbiAgICBmbGFnS2V5czoge1xyXG4gICAgICAgIGFjdG9yOiB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW06ICdjcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkJyxcclxuICAgICAgICAgICAgc2VsZWN0ZWRSZWNpcGU6ICdjcmFmdGluZy5zZWxlY3RlZFJlY2lwZUlkJyxcclxuICAgICAgICAgICAgaG9wcGVyRm9yU3lzdGVtOiAoc3lzdGVtSWQ6IHN0cmluZykgPT4gYGNyYWZ0aW5nLiR7c3lzdGVtSWR9LmhvcHBlcmAsXHJcbiAgICAgICAgICAgIGtub3duUmVjaXBlc0ZvclN5c3RlbTogKHN5c3RlbUlkOiBzdHJpbmcpID0+IGBjcmFmdGluZy4ke3N5c3RlbUlkfS5rbm93blJlY2lwZXNgLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXRlbToge1xyXG4gICAgICAgICAgICBpZGVudGl0eTogJ2lkZW50aXR5JyxcclxuICAgICAgICAgICAgcGFydElkOiAnaWRlbnRpdHkucGFydElkJyxcclxuICAgICAgICAgICAgc3lzdGVtSWQ6ICdpZGVudGl0eS5zeXN0ZW1JZCcsXHJcbiAgICAgICAgICAgIGZhYnJpY2F0ZUl0ZW1UeXBlOiAndHlwZScsXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNldHRpbmdzS2V5czoge1xyXG4gICAgICAgIGNyYWZ0aW5nU3lzdGVtOiB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IChzeXN0ZW1JZDogc3RyaW5nKSA9PiBgJHtzeXN0ZW1JZH0uZW5hYmxlZGBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcm9wZXJ0aWVzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/Properties.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateApplication.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/application/FabricateApplication.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../registries/InventoryRegistry */ \"./src/scripts/registries/InventoryRegistry.ts\");\n/* harmony import */ var _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../registries/CraftingSystemRegistry */ \"./src/scripts/registries/CraftingSystemRegistry.ts\");\n\r\n\r\nclass FabricateApplication {\r\n    constructor() {\r\n        this._inventories = new _registries_InventoryRegistry__WEBPACK_IMPORTED_MODULE_0__[\"InventoryRegistry\"]();\r\n        this._systems = new _registries_CraftingSystemRegistry__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemRegistry\"]();\r\n    }\r\n    get inventories() {\r\n        return this._inventories;\r\n    }\r\n    get systems() {\r\n        return this._systems;\r\n    }\r\n}\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (new FabricateApplication());\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cz83NzE2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFrRTtBQUNVO0FBRTVFLE1BQU0sb0JBQW9CO0lBS3RCO1FBQ0ksSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLCtFQUFpQixFQUFFLENBQUM7UUFDNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLHlGQUFzQixFQUFFLENBQUM7SUFDakQsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7Q0FFSjtBQUVjLG1FQUFJLG9CQUFvQixFQUFFLEVBQUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVBcHBsaWNhdGlvbi50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW52ZW50b3J5UmVnaXN0cnl9IGZyb20gXCIuLi9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1SZWdpc3RyeX0gZnJvbSBcIi4uL3JlZ2lzdHJpZXMvQ3JhZnRpbmdTeXN0ZW1SZWdpc3RyeVwiO1xyXG5cclxuY2xhc3MgRmFicmljYXRlQXBwbGljYXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yaWVzOiBJbnZlbnRvcnlSZWdpc3RyeTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5faW52ZW50b3JpZXMgPSBuZXcgSW52ZW50b3J5UmVnaXN0cnkoKTtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1zID0gbmV3IENyYWZ0aW5nU3lzdGVtUmVnaXN0cnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW52ZW50b3JpZXMoKTogSW52ZW50b3J5UmVnaXN0cnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZlbnRvcmllcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtcygpOiBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtcztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBGYWJyaWNhdGVBcHBsaWNhdGlvbigpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateApplication.ts\n");

/***/ }),

/***/ "./src/scripts/application/FabricateLifecycle.ts":
/*!*******************************************************!*\
  !*** ./src/scripts/application/FabricateLifecycle.ts ***!
  \*******************************************************/
/*! exports provided: FabricateLifecycle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateLifecycle\", function() { return FabricateLifecycle; });\n/* harmony import */ var _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/ItemRecipeTab */ \"./src/scripts/interface/ItemRecipeTab.ts\");\n/* harmony import */ var _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interface/CraftingTab */ \"./src/scripts/interface/CraftingTab.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass FabricateLifecycle {\r\n    static init() {\r\n        this.registerHandlebarsHelperFunctions();\r\n        this.registerItemRecipeTab();\r\n        this.registerActorCraftingTab();\r\n        this.registerApplicationListeners();\r\n    }\r\n    static registerHandlebarsHelperFunctions() {\r\n        Handlebars.registerHelper('ifEquals', function (arg1, arg2, options) {\r\n            // @ts-ignore\r\n            return (arg1 == arg2) ? options.fn(this) : options.inverse(this);\r\n        });\r\n        const convertEssenceSlugToIconMarkup = (essenceSlug, systemId) => {\r\n            const system = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n            const essenceDefinition = system.getEssenceBySlug(essenceSlug);\r\n            if (essenceDefinition) {\r\n                return essenceDefinition.icon;\r\n            }\r\n            return essenceSlug;\r\n        };\r\n        Handlebars.registerHelper('essenceIcon', function (arg1, arg2) {\r\n            return convertEssenceSlugToIconMarkup(arg1, arg2);\r\n        });\r\n        // @ts-ignore\r\n        Handlebars.registerHelper('essenceIconSeries', function (arg1, arg2) {\r\n            return arg1.map((essence) => convertEssenceSlugToIconMarkup(essence, arg2)).join(', ');\r\n        });\r\n    }\r\n    static registerActorCraftingTab() {\r\n        Hooks.on('renderActorSheet5e', (sheetData, sheetHtml, eventData) => {\r\n            _interface_CraftingTab__WEBPACK_IMPORTED_MODULE_1__[\"CraftingTab\"].bind(sheetData, sheetHtml, eventData);\r\n        });\r\n    }\r\n    static registerItemRecipeTab() {\r\n        Hooks.on('renderItemSheet5e', (sheetData, sheetHtml) => {\r\n            _interface_ItemRecipeTab__WEBPACK_IMPORTED_MODULE_0__[\"ItemRecipeTab\"].bind(sheetData, sheetHtml);\r\n        });\r\n    }\r\n    static registerApplicationListeners() {\r\n        Hooks.on('createOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('deleteOwnedItem', (actor) => {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                inventory.update();\r\n            }\r\n        });\r\n        Hooks.on('updateOwnedItem', (actor, item, update) => __awaiter(this, void 0, void 0, function* () {\r\n            const inventory = _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n            if (inventory) {\r\n                if (typeof update.data !== 'undefined') {\r\n                    yield inventory.updateQuantityFor(item);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    static registerCraftingSystemSettings(systemSpec) {\r\n        game.settings.register(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey), {\r\n            name: systemSpec.name,\r\n            hint: systemSpec.enableHint,\r\n            scope: \"world\",\r\n            type: Boolean,\r\n            default: true,\r\n            config: true,\r\n            onChange: (enabled) => { _FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(systemSpec.compendiumPackKey).enabled = enabled; }\r\n        });\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9hcHBsaWNhdGlvbi9GYWJyaWNhdGVMaWZlY3ljbGUudHM/OTA0ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDSjtBQUdkO0FBQ21CO0FBRzFELE1BQU0sa0JBQWtCO0lBRWIsTUFBTSxDQUFDLElBQUk7UUFDZCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsQ0FBQztRQUN6QyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNoQyxJQUFJLENBQUMsNEJBQTRCLEVBQUU7SUFDdkMsQ0FBQztJQUVPLE1BQU0sQ0FBQyxpQ0FBaUM7UUFFNUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsVUFBUyxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU87WUFDOUQsYUFBYTtZQUNiLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLDhCQUE4QixHQUFHLENBQUMsV0FBbUIsRUFBRSxRQUFnQixFQUFFLEVBQUU7WUFDN0UsTUFBTSxNQUFNLEdBQXVCLDZEQUFvQixDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RyxNQUFNLGlCQUFpQixHQUFzQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDbEYsSUFBSSxpQkFBaUIsRUFBRTtnQkFDbkIsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7YUFDakM7WUFDRCxPQUFPLFdBQVcsQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRixVQUFVLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxVQUFT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T0FBTyxDQUFDLDRCQUE0QixDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQ2hKLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjtBQUUwQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUxpZmVjeWNsZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SXRlbVJlY2lwZVRhYn0gZnJvbSBcIi4uL2ludGVyZmFjZS9JdGVtUmVjaXBlVGFiXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdUYWJ9IGZyb20gXCIuLi9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCBGYWJyaWNhdGVBcHBsaWNhdGlvbiBmcm9tIFwiLi9GYWJyaWNhdGVBcHBsaWNhdGlvblwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtLCBFc3NlbmNlRGVmaW5pdGlvbn0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuXHJcbmNsYXNzIEZhYnJpY2F0ZUxpZmVjeWNsZSB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3Rlckl0ZW1SZWNpcGVUYWIoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQWN0b3JDcmFmdGluZ1RhYigpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJBcHBsaWNhdGlvbkxpc3RlbmVycygpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJIYW5kbGViYXJzSGVscGVyRnVuY3Rpb25zKCkge1xyXG5cclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkVxdWFscycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXR1cm4gKGFyZzEgPT0gYXJnMikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAgPSAoZXNzZW5jZVNsdWc6IHN0cmluZywgc3lzdGVtSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW06IENyYWZ0aW5nU3lzdGVtPHt9PiA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZWZpbml0aW9uOiBFc3NlbmNlRGVmaW5pdGlvbiA9IHN5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2VTbHVnKTtcclxuICAgICAgICAgICAgaWYgKGVzc2VuY2VEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXNzZW5jZURlZmluaXRpb24uaWNvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXNzZW5jZVNsdWc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZXNzZW5jZUljb24nLCBmdW5jdGlvbihhcmcxLCBhcmcyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0RXNzZW5jZVNsdWdUb0ljb25NYXJrdXAoYXJnMSwgYXJnMik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlc3NlbmNlSWNvblNlcmllcycsIGZ1bmN0aW9uKGFyZzEsIGFyZzIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZzEubWFwKChlc3NlbmNlOiBzdHJpbmcpID0+IGNvbnZlcnRFc3NlbmNlU2x1Z1RvSWNvbk1hcmt1cChlc3NlbmNlLCBhcmcyKSkuam9pbignLCAnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJBY3RvckNyYWZ0aW5nVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldDVlJywgKHNoZWV0RGF0YTogSXRlbVNoZWV0LCBzaGVldEh0bWw6IGFueSwgZXZlbnREYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgQ3JhZnRpbmdUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCwgZXZlbnREYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJJdGVtUmVjaXBlVGFiKCkge1xyXG5cclxuICAgICAgICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0NWUnLCAoc2hlZXREYXRhOiBJdGVtU2hlZXQsIHNoZWV0SHRtbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIuYmluZChzaGVldERhdGEsIHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyQXBwbGljYXRpb25MaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAgIEhvb2tzLm9uKCdjcmVhdGVPd25lZEl0ZW0nLCAoYWN0b3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnkudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgSG9va3Mub24oJ2RlbGV0ZU93bmVkSXRlbScsIChhY3RvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcihhY3Rvci5pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbnZlbnRvcnkpIHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeS51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBIb29rcy5vbigndXBkYXRlT3duZWRJdGVtJywgYXN5bmMgKGFjdG9yOiBhbnksIGl0ZW06IGFueSwgdXBkYXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5OiBJbnZlbnRvcnkgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5pbnZlbnRvcmllcy5nZXRGb3IoYWN0b3IuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52ZW50b3J5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZS5kYXRhICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGludmVudG9yeS51cGRhdGVRdWFudGl0eUZvcihpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyQ3JhZnRpbmdTeXN0ZW1TZXR0aW5ncyhzeXN0ZW1TcGVjOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+KSB7XHJcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLnNldHRpbmdzS2V5cy5jcmFmdGluZ1N5c3RlbS5lbmFibGVkKHN5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXkpLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN5c3RlbVNwZWMubmFtZSxcclxuICAgICAgICAgICAgaGludDogc3lzdGVtU3BlYy5lbmFibGVIaW50LFxyXG4gICAgICAgICAgICBzY29wZTogXCJ3b3JsZFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoZW5hYmxlZDogYm9vbGVhbikgPT4ge0ZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShzeXN0ZW1TcGVjLmNvbXBlbmRpdW1QYWNrS2V5KS5lbmFibGVkID0gZW5hYmxlZDsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/application/FabricateLifecycle.ts\n");

/***/ }),

/***/ "./src/scripts/core/AlchemicalEffect.ts":
/*!**********************************************!*\
  !*** ./src/scripts/core/AlchemicalEffect.ts ***!
  \**********************************************/
/*! exports provided: BaseAlchemicalEffect, AlchemicalEffectType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseAlchemicalEffect\", function() { return BaseAlchemicalEffect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemicalEffectType\", function() { return AlchemicalEffectType; });\nvar AlchemicalEffectType;\r\n(function (AlchemicalEffectType) {\r\n    AlchemicalEffectType[AlchemicalEffectType[\"MODIFIER\"] = 1] = \"MODIFIER\";\r\n    AlchemicalEffectType[AlchemicalEffectType[\"BASIC\"] = 0] = \"BASIC\";\r\n})(AlchemicalEffectType || (AlchemicalEffectType = {}));\r\nclass BaseAlchemicalEffect {\r\n    constructor(essenceCombination, description, type) {\r\n        this._essenceCombination = essenceCombination;\r\n        this._description = description;\r\n        this._type = type;\r\n    }\r\n    get essenceCombination() {\r\n        return this._essenceCombination;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHM/ODdkNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFLLG9CQUdKO0FBSEQsV0FBSyxvQkFBb0I7SUFDckIsdUVBQVk7SUFDWixpRUFBUztBQUNiLENBQUMsRUFISSxvQkFBb0IsS0FBcEIsb0JBQW9CLFFBR3hCO0FBU0QsTUFBZSxvQkFBb0I7SUFNL0IsWUFBc0Isa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxJQUEwQjtRQUMvRixJQUFJLENBQUMsbUJBQW1CLEdBQUcsa0JBQWtCLENBQUM7UUFDOUMsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUM7UUFDaEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksa0JBQWtCO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFb0UiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0FsY2hlbWljYWxFZmZlY3QudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJlbnVtIEFsY2hlbWljYWxFZmZlY3RUeXBlIHtcclxuICAgIE1PRElGSUVSID0gMSxcclxuICAgIEJBU0lDID0gMCxcclxufVxyXG5cclxuaW50ZXJmYWNlIEFsY2hlbWljYWxFZmZlY3Q8VD4ge1xyXG4gICAgZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXTtcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBBbGNoZW1pY2FsRWZmZWN0VHlwZTtcclxuICAgIGFwcGx5VG8oaXRlbURhdGE6IFQpOiBUO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDxUPiBpbXBsZW1lbnRzIEFsY2hlbWljYWxFZmZlY3Q8VD57XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3R5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlO1xyXG4gICAgYWJzdHJhY3QgYXBwbHlUbyhpdGVtRGF0YTogVCk6IFQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHR5cGU6IEFsY2hlbWljYWxFZmZlY3RUeXBlKSB7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZUNvbWJpbmF0aW9uID0gZXNzZW5jZUNvbWJpbmF0aW9uO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VDb21iaW5hdGlvbigpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VDb21iaW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGUoKTogQWxjaGVtaWNhbEVmZmVjdFR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtBbGNoZW1pY2FsRWZmZWN0LCBCYXNlQWxjaGVtaWNhbEVmZmVjdCwgQWxjaGVtaWNhbEVmZmVjdFR5cGV9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/AlchemicalEffect.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingComponent.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/CraftingComponent.ts ***!
  \***********************************************/
/*! exports provided: CraftingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingComponent\", function() { return CraftingComponent; });\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass CraftingComponent extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._essences = builder.essences;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingComponent.Builder();\r\n    }\r\n    static fromFlags(fabricateFlags, name, imageUrl) {\r\n        if (fabricateFlags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_0__[\"FabricateItemType\"].COMPONENT) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Crafting Component from ${fabricateFlags.type} data. `);\r\n        }\r\n        return CraftingComponent.builder()\r\n            .withName(name)\r\n            .withSystemId(fabricateFlags.identity.systemId)\r\n            .withPartId(fabricateFlags.identity.partId)\r\n            .withEssences(fabricateFlags.component.essences)\r\n            .withImageUrl(imageUrl)\r\n            .build();\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && other.name === this.name\r\n            && other.imageUrl === this.imageUrl\r\n            && other.essences.length === this.essences.length\r\n            && other.essences.every((essence) => this.essences.includes(essence));\r\n    }\r\n    isValid() {\r\n        return (this.name != null && this.name.length > 0)\r\n            && (this.essences != null)\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (CraftingComponent) {\r\n    class Builder {\r\n        constructor() {\r\n            this.essences = [];\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new CraftingComponent(this);\r\n        }\r\n    }\r\n    CraftingComponent.Builder = Builder;\r\n})(CraftingComponent || (CraftingComponent = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50LnRzPzlhZjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUc7QUFDckQ7QUFFOUMsTUFBTSxpQkFBa0IsU0FBUSw0REFBYTtJQUd6QyxZQUFZLE9BQWtDO1FBQzFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUF1QyxFQUFFLElBQVksRUFBRSxRQUFnQjtRQUMzRixJQUFJLGNBQWMsQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsU0FBUyxFQUFFO1lBQ3JELE1BQU0sSUFBSSxLQUFLLENBQUMsdUVBQXVFLGNBQWMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ3hIO1FBQ0QsT0FBTyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7YUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQzthQUNkLFlBQVksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQzthQUM5QyxVQUFVLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7YUFDMUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO2FBQy9DLFlBQVksQ0FBQyxRQUFRLENBQUM7YUFDdEIsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUF3QjtRQUNsQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLEtBQUssQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7ZUFDeEIsS0FBSyxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsUUFBUTtlQUNoQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU07ZUFDOUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDdEYsQ0FBQztJQUVNLE9BQU87UUFDVixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2VBQzNDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUM7ZUFDdkIsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FFSjtBQUVELFdBQVUsaUJBQWlCO0lBQ3ZCLE1BQWEsT0FBTztRQUFwQjtZQUdXLGFBQVEsR0FBYSxFQUFFLENBQUM7UUF1Q25DLENBQUM7UUFsQ1UsUUFBUSxDQUFDLEtBQWE7WUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFhO1lBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxVQUFVLENBQUMsS0FBYTtZQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQWU7WUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFdBQVcsQ0FBQyxLQUFhO1lBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QyxDQUFDO0tBRUo7SUExQ1kseUJBQU8sVUEwQ25CO0FBQ0wsQ0FBQyxFQTVDUyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBNEMxQjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdDb21wb25lbnQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBlbmRpdW1FbnRyeSwgRmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIENyYWZ0aW5nQ29tcG9uZW50IGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlczogc3RyaW5nW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogQ3JhZnRpbmdDb21wb25lbnQuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuc3lzdGVtSWQsIGJ1aWxkZXIucGFydElkLCBidWlsZGVyLmltYWdlVXJsLCBidWlsZGVyLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VzID0gYnVpbGRlci5lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NvbXBvbmVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tRmxhZ3MoZmFicmljYXRlRmxhZ3M6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhLCBuYW1lOiBzdHJpbmcsIGltYWdlVXJsOiBzdHJpbmcpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgaWYgKGZhYnJpY2F0ZUZsYWdzLnR5cGUgIT09IEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgYSBGYWJyaWNhdGUgQ3JhZnRpbmcgQ29tcG9uZW50IGZyb20gJHtmYWJyaWNhdGVGbGFncy50eXBlfSBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nQ29tcG9uZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLndpdGhTeXN0ZW1JZChmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZClcclxuICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkKVxyXG4gICAgICAgICAgICAud2l0aEVzc2VuY2VzKGZhYnJpY2F0ZUZsYWdzLmNvbXBvbmVudC5lc3NlbmNlcylcclxuICAgICAgICAgICAgLndpdGhJbWFnZVVybChpbWFnZVVybClcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVxdWFscyhvdGhlcjogQ3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoIW90aGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcmVzVHlwZShvdGhlcilcclxuICAgICAgICAgICAgJiYgb3RoZXIubmFtZSA9PT0gdGhpcy5uYW1lXHJcbiAgICAgICAgICAgICYmIG90aGVyLmltYWdlVXJsID09PSB0aGlzLmltYWdlVXJsXHJcbiAgICAgICAgICAgICYmIG90aGVyLmVzc2VuY2VzLmxlbmd0aCA9PT0gdGhpcy5lc3NlbmNlcy5sZW5ndGhcclxuICAgICAgICAgICAgJiYgb3RoZXIuZXNzZW5jZXMuZXZlcnkoKGVzc2VuY2U6IHN0cmluZykgPT4gdGhpcy5lc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgJiYgKHRoaXMuZXNzZW5jZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgJiYgc3VwZXIuaXNWYWxpZCgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nQ29tcG9uZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgY29tcGVuZGl1bUVudHJ5ITogQ29tcGVuZGl1bUVudHJ5O1xyXG4gICAgICAgIHB1YmxpYyBlc3NlbmNlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgaW1hZ2VVcmw6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgc3lzdGVtSWQ6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFydElkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTmFtZSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhQYXJ0SWQodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRJZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IHN0cmluZ1tdKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEVzc2VuY2UodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingComponent.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystem.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/CraftingSystem.ts ***!
  \********************************************/
/*! exports provided: CraftingSystem, EssenceDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystem\", function() { return CraftingSystem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceDefinition\", function() { return EssenceDefinition; });\n/* harmony import */ var _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/CraftingChatMessage */ \"./src/scripts/interface/CraftingChatMessage.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _error_CraftingError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/CraftingError */ \"./src/scripts/error/CraftingError.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass EssenceDefinition {\r\n    constructor(name, description, iconCode) {\r\n        this._name = name;\r\n        this._slug = name.toLowerCase().replace(' ', '-');\r\n        this._description = description;\r\n        this._iconCode = iconCode;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get iconCode() {\r\n        return this._iconCode;\r\n    }\r\n    get icon() {\r\n        if (this.iconCode) {\r\n            return `<i class=\"fas fa-${this._iconCode}\" title=\"${this.description}\"></i>`;\r\n        }\r\n        return this.name;\r\n    }\r\n    get slug() {\r\n        return this._slug;\r\n    }\r\n}\r\nclass CraftingSystem {\r\n    constructor(builder) {\r\n        this._recipesById = new Map();\r\n        this._componentsById = new Map();\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._essencesBySlug = new Map();\r\n        this._name = builder.name;\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._fabricator = builder.fabricator;\r\n        this._recipesById = builder.recipes;\r\n        this._componentsById = builder.components;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._enabled = builder.enabled;\r\n        this._enableHint = builder.enableHint;\r\n        this._description = builder.description;\r\n        this._essences = builder.essences;\r\n        this._essencesBySlug = new Map(builder.essences.map((essence) => [essence.slug, essence]));\r\n    }\r\n    static builder() {\r\n        return new CraftingSystem.Builder();\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(value) {\r\n        this._enabled = value;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    getEssenceBySlug(slug) {\r\n        return this._essencesBySlug.get(slug);\r\n    }\r\n    craft(actor, inventory, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let chatMessage;\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromRecipe(inventory, recipe);\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationOutcome(fabricationOutcome);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (err) {\r\n                if (err instanceof _error_CraftingError__WEBPACK_IMPORTED_MODULE_2__[\"CraftingError\"]) {\r\n                    const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationError(err);\r\n                    chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                }\r\n                else {\r\n                    const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromUnexpectedError(err);\r\n                    chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                    console.error(err);\r\n                }\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n            }\r\n        });\r\n    }\r\n    craftWithComponents(actor, inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let chatMessage;\r\n            try {\r\n                const fabricationOutcome = yield this.fabricator.fabricateFromComponents(inventory, components);\r\n                const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationOutcome(fabricationOutcome);\r\n                chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n                return fabricationOutcome;\r\n            }\r\n            catch (err) {\r\n                if (err instanceof _error_CraftingError__WEBPACK_IMPORTED_MODULE_2__[\"CraftingError\"]) {\r\n                    const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromFabricationError(err);\r\n                    chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                }\r\n                else {\r\n                    const message = _interface_CraftingChatMessage__WEBPACK_IMPORTED_MODULE_0__[\"CraftingChatMessage\"].fromUnexpectedError(err);\r\n                    chatMessage = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_1__[\"default\"].module.templates.craftingMessage, message);\r\n                    console.error(err);\r\n                }\r\n                ChatMessage.create({ user: game.user, speaker: actor, content: chatMessage });\r\n            }\r\n        });\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._recipesById.values());\r\n    }\r\n    get components() {\r\n        return Array.from(this._componentsById.values());\r\n    }\r\n    getComponentByPartId(entryId) {\r\n        return this._componentsById.get(entryId);\r\n    }\r\n    supports(gameSystem) {\r\n        if (!this._supportedGameSystems || this._supportedGameSystems.length == 0) {\r\n            return true;\r\n        }\r\n        return this._supportedGameSystems.indexOf(gameSystem) > -1;\r\n    }\r\n    getRecipeByPartId(partId) {\r\n        return this._recipesById.get(partId);\r\n    }\r\n}\r\n(function (CraftingSystem) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.recipes = new Map();\r\n            this.components = new Map();\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystem(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withRecipes(value) {\r\n            this.recipes = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipes.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponent(value) {\r\n            this.components.set(value.partId, value);\r\n            return this;\r\n        }\r\n        withComponents(value) {\r\n            this.components = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystem.Builder = Builder;\r\n})(CraftingSystem || (CraftingSystem = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtLnRzPzQ2ZGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBS3FFO0FBQzlCO0FBQ2M7QUFFckQsTUFBTSxpQkFBaUI7SUFPbkIsWUFBWSxJQUFZLEVBQUUsV0FBbUIsRUFBRSxRQUFpQjtRQUM1RCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixPQUFPLG9CQUFvQixJQUFJLENBQUMsU0FBUyxZQUFZLElBQUksQ0FBQyxXQUFXLFFBQVEsQ0FBQztTQUNqRjtRQUNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNyQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7Q0FDSjtBQUVELE1BQU0sY0FBYztJQWNoQixZQUFZLE9BQTBDO1FBVnJDLGlCQUFZLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7UUFDOUMsb0JBQWUsR0FBbUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUM1RCwwQkFBcUIs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QjtZQUN2QyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQTBCO1lBQzFDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7S0FFSjtJQXZGWSxzQkFBTyxVQXVGbkI7QUFDTCxDQUFDLEVBMUZTLGNBQWMsS0FBZCxjQUFjLFFBMEZ2QjtBQUUwQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW0udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0b3J9IGZyb20gXCIuL0ZhYnJpY2F0b3JcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuL1JlY2lwZVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25PdXRjb21lfSBmcm9tIFwiLi9GYWJyaWNhdGlvbk91dGNvbWVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NoYXRNZXNzYWdlfSBmcm9tIFwiLi4vaW50ZXJmYWNlL0NyYWZ0aW5nQ2hhdE1lc3NhZ2VcIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0Vycm9yfSBmcm9tIFwiLi4vZXJyb3IvQ3JhZnRpbmdFcnJvclwiO1xyXG5cclxuY2xhc3MgRXNzZW5jZURlZmluaXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NsdWc6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Rlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pY29uQ29kZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgaWNvbkNvZGU/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9zbHVnID0gbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJyAnLCAnLScpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5faWNvbkNvZGUgPSBpY29uQ29kZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWNvbkNvZGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faWNvbkNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGljb24oKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5pY29uQ29kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYDxpIGNsYXNzPVwiZmFzIGZhLSR7dGhpcy5faWNvbkNvZGV9XCIgdGl0bGU9XCIke3RoaXMuZGVzY3JpcHRpb259XCI+PC9pPmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNsdWcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2x1ZztcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ3JhZnRpbmdTeXN0ZW0ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbmFtZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcGVuZGl1bVBhY2tLZXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZhYnJpY2F0b3I6IEZhYnJpY2F0b3I8SXRlbS5EYXRhPjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3JlY2lwZXNCeUlkOiBNYXA8c3RyaW5nLCBSZWNpcGU+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50c0J5SWQ6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50PiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N1cHBvcnRlZEdhbWVTeXN0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZW5hYmxlSGludDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VzOiBFc3NlbmNlRGVmaW5pdGlvbltdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlc0J5U2x1ZzogTWFwPHN0cmluZywgRXNzZW5jZURlZmluaXRpb24+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHByaXZhdGUgX2VuYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogQ3JhZnRpbmdTeXN0ZW0uQnVpbGRlcjxJdGVtLkRhdGE+KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGJ1aWxkZXIubmFtZTtcclxuICAgICAgICB0aGlzLl9jb21wZW5kaXVtUGFja0tleSA9IGJ1aWxkZXIuY29tcGVuZGl1bVBhY2tLZXk7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRvciA9IGJ1aWxkZXIuZmFicmljYXRvcjtcclxuICAgICAgICB0aGlzLl9yZWNpcGVzQnlJZCA9IGJ1aWxkZXIucmVjaXBlcztcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRzQnlJZCA9IGJ1aWxkZXIuY29tcG9uZW50cztcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IGJ1aWxkZXIuc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGJ1aWxkZXIuZW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9lbmFibGVIaW50ID0gYnVpbGRlci5lbmFibGVIaW50O1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gYnVpbGRlci5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZXNCeVNsdWcgPSBuZXcgTWFwKGJ1aWxkZXIuZXNzZW5jZXMubWFwKChlc3NlbmNlOiBFc3NlbmNlRGVmaW5pdGlvbikgPT4gW2Vzc2VuY2Uuc2x1ZywgZXNzZW5jZV0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ1N5c3RlbS5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZW5hYmxlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlSGludCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVIaW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogRXNzZW5jZURlZmluaXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVzc2VuY2VCeVNsdWcoc2x1Zzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzQnlTbHVnLmdldChzbHVnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JhZnQoYWN0b3I6IEFjdG9yLCBpbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+LCByZWNpcGU6IFJlY2lwZSk6IFByb21pc2U8RmFicmljYXRpb25PdXRjb21lPiB7XHJcbiAgICAgICAgbGV0IGNoYXRNZXNzYWdlOiBIVE1MRWxlbWVudDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWJyaWNhdGlvbk91dGNvbWU6IEZhYnJpY2F0aW9uT3V0Y29tZSA9IGF3YWl0IHRoaXMuZmFicmljYXRvci5mYWJyaWNhdGVGcm9tUmVjaXBlKGludmVudG9yeSwgcmVjaXBlKTtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogQ3JhZnRpbmdDaGF0TWVzc2FnZSA9IENyYWZ0aW5nQ2hhdE1lc3NhZ2UuZnJvbUZhYnJpY2F0aW9uT3V0Y29tZShmYWJyaWNhdGlvbk91dGNvbWUpO1xyXG4gICAgICAgICAgICBjaGF0TWVzc2FnZSA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFByb3BlcnRpZXMubW9kdWxlLnRlbXBsYXRlcy5jcmFmdGluZ01lc3NhZ2UsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGNoYXRNZXNzYWdlfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWJyaWNhdGlvbk91dGNvbWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDcmFmdGluZ0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBDcmFmdGluZ0NoYXRNZXNzYWdlID0gQ3JhZnRpbmdDaGF0TWVzc2FnZS5mcm9tRmFicmljYXRpb25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMuY3JhZnRpbmdNZXNzYWdlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IENyYWZ0aW5nQ2hhdE1lc3NhZ2UgPSBDcmFmdGluZ0NoYXRNZXNzYWdlLmZyb21VbmV4cGVjdGVkRXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nTWVzc2FnZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHt1c2VyOiBnYW1lLnVzZXIsIHNwZWFrZXI6IGFjdG9yLCBjb250ZW50OiBjaGF0TWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JhZnRXaXRoQ29tcG9uZW50cyhhY3RvcjogQWN0b3IsIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4sIGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10pOiBQcm9taXNlPEZhYnJpY2F0aW9uT3V0Y29tZT4ge1xyXG4gICAgICAgIGxldCBjaGF0TWVzc2FnZTogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZmFicmljYXRpb25PdXRjb21lOiBGYWJyaWNhdGlvbk91dGNvbWUgPSBhd2FpdCB0aGlzLmZhYnJpY2F0b3IuZmFicmljYXRlRnJvbUNvbXBvbmVudHMoaW52ZW50b3J5LCBjb21wb25lbnRzKTtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogQ3JhZnRpbmdDaGF0TWVzc2FnZSA9IENyYWZ0aW5nQ2hhdE1lc3NhZ2UuZnJvbUZhYnJpY2F0aW9uT3V0Y29tZShmYWJyaWNhdGlvbk91dGNvbWUpO1xyXG4gICAgICAgICAgICBjaGF0TWVzc2FnZSA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFByb3BlcnRpZXMubW9kdWxlLnRlbXBsYXRlcy5jcmFmdGluZ01lc3NhZ2UsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe3VzZXI6IGdhbWUudXNlciwgc3BlYWtlcjogYWN0b3IsIGNvbnRlbnQ6IGNoYXRNZXNzYWdlfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWJyaWNhdGlvbk91dGNvbWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBDcmFmdGluZ0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBDcmFmdGluZ0NoYXRNZXNzYWdlID0gQ3JhZnRpbmdDaGF0TWVzc2FnZS5mcm9tRmFicmljYXRpb25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMuY3JhZnRpbmdNZXNzYWdlLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IENyYWZ0aW5nQ2hhdE1lc3NhZ2UgPSBDcmFmdGluZ0NoYXRNZXNzYWdlLmZyb21VbmV4cGVjdGVkRXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUHJvcGVydGllcy5tb2R1bGUudGVtcGxhdGVzLmNyYWZ0aW5nTWVzc2FnZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHt1c2VyOiBnYW1lLnVzZXIsIHNwZWFrZXI6IGFjdG9yLCBjb250ZW50OiBjaGF0TWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcGVuZGl1bVBhY2tLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tcGVuZGl1bVBhY2tLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0b3IoKTogRmFicmljYXRvcjxJdGVtLkRhdGE+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3VwcG9ydGVkR2FtZVN5c3RlbXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVjaXBlcygpOiBSZWNpcGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fcmVjaXBlc0J5SWQudmFsdWVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRzKCk6IENyYWZ0aW5nQ29tcG9uZW50W10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2NvbXBvbmVudHNCeUlkLnZhbHVlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29tcG9uZW50QnlQYXJ0SWQoZW50cnlJZDogc3RyaW5nKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzQnlJZC5nZXQoZW50cnlJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1cHBvcnRzKGdhbWVTeXN0ZW06IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgfHwgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcy5pbmRleE9mKGdhbWVTeXN0ZW0pID4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkOiBzdHJpbmcpOiBSZWNpcGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNpcGVzQnlJZC5nZXQocGFydElkKTtcclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nU3lzdGVtIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQnVpbGRlcjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBuYW1lITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBjb21wZW5kaXVtUGFja0tleSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRvciE6IEZhYnJpY2F0b3I8VD47XHJcbiAgICAgICAgcHVibGljIHN1cHBvcnRlZEdhbWVTeXN0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyByZWNpcGVzOiBNYXA8c3RyaW5nLCBSZWNpcGU+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHB1YmxpYyBjb21wb25lbnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ0NvbXBvbmVudD4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIGVuYWJsZUhpbnQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uITogc3RyaW5nO1xyXG4gICAgICAgIHB1YmxpYyBlc3NlbmNlczogRXNzZW5jZURlZmluaXRpb25bXSA9IFtdO1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKSA6IENyYWZ0aW5nU3lzdGVte1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhOYW1lKHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhDb21wZW5kaXVtUGFja0tleSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGVuZGl1bVBhY2tLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEZhYnJpY2F0b3IodmFsdWU6IEZhYnJpY2F0b3I8VD4pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5mYWJyaWNhdG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtcyh2YWx1ZTogc3RyaW5nW10pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3VwcG9ydGVkR2FtZVN5c3RlbSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkR2FtZVN5c3RlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhSZWNpcGVzKHZhbHVlOiBNYXA8c3RyaW5nLCBSZWNpcGU+KTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjaXBlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUmVjaXBlKHZhbHVlOiBSZWNpcGUpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWNpcGVzLnNldCh2YWx1ZS5wYXJ0SWQsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBvbmVudCh2YWx1ZTogQ3JhZnRpbmdDb21wb25lbnQpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnNldCh2YWx1ZS5wYXJ0SWQsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aENvbXBvbmVudHModmFsdWU6IE1hcDxzdHJpbmcsIENyYWZ0aW5nQ29tcG9uZW50Pik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaXNFbmFibGVkKHZhbHVlOiBib29sZWFuKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRW5hYmxlSGludCh2YWx1ZTogc3RyaW5nKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSGludCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRGVzY3JpcHRpb24odmFsdWU6IHN0cmluZyk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFc3NlbmNlKHZhbHVlOiBFc3NlbmNlRGVmaW5pdGlvbik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IEVzc2VuY2VEZWZpbml0aW9uW10pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nU3lzdGVtLCBFc3NlbmNlRGVmaW5pdGlvbn07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystem.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemFactory.ts":
/*!***************************************************!*\
  !*** ./src/scripts/core/CraftingSystemFactory.ts ***!
  \***************************************************/
/*! exports provided: FileReadingCraftingSystemFactory, CompendiumImportingCraftingSystemFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FileReadingCraftingSystemFactory\", function() { return FileReadingCraftingSystemFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CompendiumImportingCraftingSystemFactory\", function() { return CompendiumImportingCraftingSystemFactory; });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"./node_modules/webpack-stream/node_modules/node-libs-browser/mock/empty.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _Recipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Recipe */ \"./src/scripts/core/Recipe.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification) {\r\n        this._systemSpecification = systemSpecification;\r\n    }\r\n    get systemSpecification() {\r\n        return this._systemSpecification;\r\n    }\r\n    make() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const basicSystemData = yield this.prepare();\r\n            const componentErrors = [];\r\n            basicSystemData.components.forEach((craftingComponent) => {\r\n                if (!craftingComponent.isValid()) {\r\n                    componentErrors.push(`Crafting Component ${craftingComponent.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (componentErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading Crafting Components: ${componentErrors}. `);\r\n            }\r\n            const componentDictionary = new Map(basicSystemData.components.map((component) => [component.partId, component]));\r\n            const recipeErrors = [];\r\n            const populatedRecipes = basicSystemData.recipes.map((recipe) => {\r\n                const populatedIngredients = recipe.ingredients.map((ingredient) => {\r\n                    const craftingComponent = componentDictionary.get(ingredient.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified an Ingredient that was not found in the Crafting System: ${ingredient.compendiumEntry}.`);\r\n                    }\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_4__[\"Ingredient\"].builder()\r\n                        .withComponent(craftingComponent)\r\n                        .withQuantity(ingredient.quantity)\r\n                        .isConsumed(ingredient.consumed)\r\n                        .build();\r\n                });\r\n                const populatedCraftingResults = recipe.results.map((result) => {\r\n                    const craftingComponent = componentDictionary.get(result.partId);\r\n                    if (!craftingComponent) {\r\n                        throw new Error(`Recipe ${recipe.name} with ID ${recipe.partId} specified a Result that was not found in the Crafting System: ${result.compendiumEntry}.`);\r\n                    }\r\n                    return _FabricationAction__WEBPACK_IMPORTED_MODULE_5__[\"FabricationAction\"].builder()\r\n                        .withActionType(result.actionType)\r\n                        .withItemType(craftingComponent)\r\n                        .withQuantity(result.quantity)\r\n                        .withCustomItemData(result.customItemData)\r\n                        .build();\r\n                });\r\n                return _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].builder()\r\n                    .withName(recipe.name)\r\n                    .withPartId(recipe.partId)\r\n                    .withEssences(recipe.essences)\r\n                    .withSystemId(recipe.systemId)\r\n                    .withIngredients(populatedIngredients)\r\n                    .withResults(populatedCraftingResults)\r\n                    .build();\r\n            });\r\n            populatedRecipes.forEach((recipe) => {\r\n                if (!recipe.isValid()) {\r\n                    recipeErrors.push(`Recipe ${recipe.compendiumEntry} is invalid. `);\r\n                }\r\n            });\r\n            if (recipeErrors.length > 0) {\r\n                throw new Error(`Unable to build Crafting System ${this.systemSpecification.name}. There were one or more issues with reading populating Recipes: ${recipeErrors}. `);\r\n            }\r\n            return _CraftingSystem__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystem\"].builder()\r\n                .withRecipes(new Map(populatedRecipes.map((recipe) => [recipe.partId, recipe])))\r\n                .withName(this.systemSpecification.name)\r\n                .withComponents(componentDictionary)\r\n                .withEssences(this.systemSpecification.essences)\r\n                .withEnableHint(this.systemSpecification.enableHint)\r\n                .withFabricator(this.systemSpecification.fabricator)\r\n                .withDescription(this.systemSpecification.description)\r\n                .withCompendiumPackKey(this.systemSpecification.compendiumPackKey)\r\n                .withSupportedGameSystems(this.systemSpecification.supportedGameSystems)\r\n                .build();\r\n        });\r\n    }\r\n}\r\nclass CompendiumImportingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let systemPack = game.packs.get(this.systemSpecification.compendiumPackKey);\r\n            let content = yield this.loadCompendiumContent(systemPack, 10);\r\n            const systemData = {\r\n                recipes: [],\r\n                components: []\r\n            };\r\n            content.forEach((item) => {\r\n                let itemConfig = item.data.flags.fabricate;\r\n                switch (itemConfig.type) {\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                        systemData.components.push(_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                        systemData.recipes.push(_Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(itemConfig, item.name, item.img));\r\n                        break;\r\n                    default:\r\n                        throw new Error(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Unable to load item ${item.id}. Could not determine Fabricate Entity Type. `);\r\n                }\r\n            });\r\n            return systemData;\r\n        });\r\n    }\r\n    /**\r\n     * Fallback awaiter for loading compendium content, as this was observed to be unreliable during development after the\r\n     * game 'ready' Hook was fired\r\n     *\r\n     * @param compendium The Compendium from which to reliably load the Content\r\n     * @param maxAttempts The maximum number of times to attempt loading Compendium Content\r\n     * */\r\n    loadCompendiumContent(compendium, maxAttempts) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let content = yield compendium.getContent();\r\n            let attempts = 0;\r\n            while ((!content || (content.length === 0)) && (attempts <= maxAttempts)) {\r\n                console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_7__[\"default\"].module.label} | Waiting for content in Compendium Pack ${compendium.id} (Attempt ${attempts} of ${maxAttempts}. `);\r\n                yield this.wait(1000);\r\n                attempts++;\r\n                content = yield compendium.getContent();\r\n            }\r\n            return content;\r\n        });\r\n    }\r\n    /**\r\n     * Simple async awaiter delay function\r\n     *\r\n     * @param delay The number of millis to wait before resolving\r\n     * @return a promise that resolves once the delay period has elapsed\r\n     * */\r\n    wait(delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise(resolve => setTimeout(resolve, delay));\r\n        });\r\n    }\r\n}\r\nclass FileReadingCraftingSystemFactory extends AbstractCraftingSystemFactory {\r\n    constructor(systemSpecification, filePath) {\r\n        super(systemSpecification);\r\n        this._fileErrorsByLineNumber = new Map();\r\n        this._filePath = filePath;\r\n    }\r\n    get filePath() {\r\n        return this._filePath;\r\n    }\r\n    get fileErrorsByLineNumber() {\r\n        return this._fileErrorsByLineNumber;\r\n    }\r\n    prepare() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const lines = yield this.readFile(this.filePath);\r\n            return this.parseFileData(lines);\r\n        });\r\n    }\r\n    readFile(path) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const contents = yield fs__WEBPACK_IMPORTED_MODULE_0__[\"promises\"].readFile(path, 'utf-8');\r\n            return contents.split('\\n');\r\n        });\r\n    }\r\n    recordError(lineNumber, error) {\r\n        if (this._fileErrorsByLineNumber.has(lineNumber)) {\r\n            this._fileErrorsByLineNumber.get(lineNumber).push(error);\r\n        }\r\n        this._fileErrorsByLineNumber.set(lineNumber, [error]);\r\n    }\r\n    parseFileData(lines) {\r\n        const systemData = {\r\n            recipes: [],\r\n            components: []\r\n        };\r\n        lines.forEach((line, index) => {\r\n            const lineNumber = index + 1;\r\n            let json;\r\n            try {\r\n                json = JSON.parse(line);\r\n            }\r\n            catch (err) {\r\n                this.recordError(lineNumber, `Line is not valid JSON. `);\r\n                return;\r\n            }\r\n            if (!json.flags) {\r\n                this.recordError(lineNumber, `No flag data was present. `);\r\n                return;\r\n            }\r\n            const fabricateFlags = json.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate flags were set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity) {\r\n                this.recordError(lineNumber, `Flag data was present, but no Fabricate Item identity was set. `);\r\n                return;\r\n            }\r\n            if (!fabricateFlags.identity.partId || !fabricateFlags.identity.systemId) {\r\n                this.recordError(lineNumber, `An invalid Fabricate Item identity was set with Part ID '${fabricateFlags.identity.partId}' and System ID '${fabricateFlags.identity.systemId}' `);\r\n                return;\r\n            }\r\n            let fabricateItem;\r\n            switch (fabricateFlags.type) {\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].COMPONENT:\r\n                    if (!fabricateFlags.component) {\r\n                        this.recordError(lineNumber, `No Component definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const craftingComponent = _CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = craftingComponent;\r\n                    systemData.components.push(craftingComponent);\r\n                    break;\r\n                case _game_CompendiumData__WEBPACK_IMPORTED_MODULE_6__[\"FabricateItemType\"].RECIPE:\r\n                    if (!fabricateFlags.recipe) {\r\n                        this.recordError(lineNumber, `No Recipe definition was provided. `);\r\n                        return;\r\n                    }\r\n                    const recipe = _Recipe__WEBPACK_IMPORTED_MODULE_3__[\"Recipe\"].fromFlags(fabricateFlags, json.name, json.img);\r\n                    fabricateItem = recipe;\r\n                    systemData.recipes.push(recipe);\r\n                    break;\r\n                default:\r\n                    this.recordError(lineNumber, `The Fabricate Item type ${fabricateFlags.type} was not \r\n                        recognized. Allowable values are COMPONENT or RECIPE`);\r\n                    return;\r\n            }\r\n            if (fabricateItem.partId !== json._id) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} part ID '${fabricateItem.partId}' did not match Compendium Entity ID '${json._id}. '`);\r\n            }\r\n            if (fabricateItem.name !== json.name) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} name '${fabricateItem.name}' did not match Compendium Entity name '${json.name}. '`);\r\n            }\r\n            if (fabricateItem.imageUrl !== json.img) {\r\n                this.recordError(lineNumber, `${fabricateFlags.type} image URL '${fabricateItem.imageUrl}' did not match Compendium Entity image URL '${json.img}. '`);\r\n            }\r\n        });\r\n        if (this.fileErrorsByLineNumber.size === 0) {\r\n            return systemData;\r\n        }\r\n        const lineErrorDetails = [];\r\n        this.fileErrorsByLineNumber.forEach((errors, line) => lineErrorDetails.push(`Line ${line}: ${errors.join(', ')} \\n`));\r\n        throw new Error(`Encountered ${this.fileErrorsByLineNumber.size} errors when processing file data for system ${this.systemSpecification.compendiumPackKey}. Errors: \\n ${lineErrorDetails}`);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtRmFjdG9yeS50cz9lN2YwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUV3QjtBQUVNO0FBQ3RCO0FBQ1E7QUFDYztBQUM0QjtBQUMzQztBQWF2QyxNQUFlLDZCQUE2QjtJQUd4QyxZQUFZLG1CQUFvRDtRQUM1RCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ25CLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ3JDLENBQUM7SUFFSyxJQUFJOztZQUNOLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdDLE1BQU0sZUFBZSxHQUFhLEVBQUUsQ0FBQztZQUNyQyxlQUFlLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGlCQUFvQyxFQUFFLEVBQUU7Z0JBQ3hFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDOUIsZUFBZSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsaUJBQWlCLENBQUMsZUFBZSxlQUFlLENBQUMsQ0FBQztpQkFDaEc7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUNILElBQUksZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsbUNBQW1DLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLHFFQUFxRSxlQUFlLElBQUksQ0FBQyxDQUFDO2FBQzdLO1lBQ0QsTUFBTSxtQkFBbUIsR0FBbUMsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JLLE1BQU0s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TSxJQUFJLEtBQUssQ0FBQyxlQUFlLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLGdEQUFnRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLGdCQUFnQixnQkFBZ0IsRUFBRSxDQUFDLENBQUM7SUFDak0sQ0FBQztDQUVKO0FBRXlHIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9DcmFmdGluZ1N5c3RlbUZhY3RvcnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcydcclxuXHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi9DcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25cIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4vQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuL1JlY2lwZVwiO1xyXG5pbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCBQcm9wZXJ0aWVzIGZyb20gXCIuLi9Qcm9wZXJ0aWVzXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuaW50ZXJmYWNlIENyYWZ0aW5nU3lzdGVtRmFjdG9yeSB7XHJcbiAgICBzeXN0ZW1TcGVjaWZpY2F0aW9uOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+O1xyXG4gICAgbWFrZSgpOiBQcm9taXNlPENyYWZ0aW5nU3lzdGVtPHt9Pj47XHJcbn1cclxuXHJcbmludGVyZmFjZSBCYXNpY1N5c3RlbURhdGEge1xyXG4gICAgcmVjaXBlczogUmVjaXBlW107XHJcbiAgICBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBBYnN0cmFjdENyYWZ0aW5nU3lzdGVtRmFjdG9yeSBpbXBsZW1lbnRzIENyYWZ0aW5nU3lzdGVtRmFjdG9yeSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zeXN0ZW1TcGVjaWZpY2F0aW9uOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN5c3RlbVNwZWNpZmljYXRpb246IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbjx7fT4pIHtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1TcGVjaWZpY2F0aW9uID0gc3lzdGVtU3BlY2lmaWNhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtU3BlY2lmaWNhdGlvbigpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtU3BlY2lmaWNhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlKCk6IFByb21pc2U8Q3JhZnRpbmdTeXN0ZW08e30+PiB7XHJcbiAgICAgICAgY29uc3QgYmFzaWNTeXN0ZW1EYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlKCk7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50RXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGJhc2ljU3lzdGVtRGF0YS5jb21wb25lbnRzLmZvckVhY2goKGNyYWZ0aW5nQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNyYWZ0aW5nQ29tcG9uZW50LmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50RXJyb3JzLnB1c2goYENyYWZ0aW5nIENvbXBvbmVudCAke2NyYWZ0aW5nQ29tcG9uZW50LmNvbXBlbmRpdW1FbnRyeX0gaXMgaW52YWxpZC4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoY29tcG9uZW50RXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYnVpbGQgQ3JhZnRpbmcgU3lzdGVtICR7dGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLm5hbWV9LiBUaGVyZSB3ZXJlIG9uZSBvciBtb3JlIGlzc3VlcyB3aXRoIHJlYWRpbmcgQ3JhZnRpbmcgQ29tcG9uZW50czogJHtjb21wb25lbnRFcnJvcnN9LiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50RGljdGlvbmFyeTogTWFwPHN0cmluZywgQ3JhZnRpbmdDb21wb25lbnQ+ID0gbmV3IE1hcChiYXNpY1N5c3RlbURhdGEuY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IFtjb21wb25lbnQucGFydElkLCBjb21wb25lbnRdKSk7XHJcbiAgICAgICAgY29uc3QgcmVjaXBlRXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHBvcHVsYXRlZFJlY2lwZXM6IFJlY2lwZVtdID0gYmFzaWNTeXN0ZW1EYXRhLnJlY2lwZXMubWFwKChyZWNpcGU6IFJlY2lwZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwb3B1bGF0ZWRJbmdyZWRpZW50czogSW5ncmVkaWVudFtdID0gcmVjaXBlLmluZ3JlZGllbnRzLm1hcCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnQgPSBjb21wb25lbnREaWN0aW9uYXJ5LmdldChpbmdyZWRpZW50LnBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNyYWZ0aW5nQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZWNpcGUgJHtyZWNpcGUubmFtZX0gd2l0aCBJRCAke3JlY2lwZS5wYXJ0SWR9IHNwZWNpZmllZCBhbiBJbmdyZWRpZW50IHRoYXQgd2FzIG5vdCBmb3VuZCBpbiB0aGUgQ3JhZnRpbmcgU3lzdGVtOiAke2luZ3JlZGllbnQuY29tcGVuZGl1bUVudHJ5fS5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBJbmdyZWRpZW50LmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQ29tcG9uZW50KGNyYWZ0aW5nQ29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoaW5ncmVkaWVudC5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAuaXNDb25zdW1lZChpbmdyZWRpZW50LmNvbnN1bWVkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgcG9wdWxhdGVkQ3JhZnRpbmdSZXN1bHRzID0gcmVjaXBlLnJlc3VsdHMubWFwKChyZXN1bHQ6IEZhYnJpY2F0aW9uQWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudCA9IGNvbXBvbmVudERpY3Rpb25hcnkuZ2V0KHJlc3VsdC5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVjaXBlICR7cmVjaXBlLm5hbWV9IHdpdGggSUQgJHtyZWNpcGUucGFydElkfSBzcGVjaWZpZWQgYSBSZXN1bHQgdGhhdCB3YXMgbm90IGZvdW5kIGluIHRoZSBDcmFmdGluZyBTeXN0ZW06ICR7cmVzdWx0LmNvbXBlbmRpdW1FbnRyeX0uYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKHJlc3VsdC5hY3Rpb25UeXBlKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoY3JhZnRpbmdDb21wb25lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhRdWFudGl0eShyZXN1bHQucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgLndpdGhDdXN0b21JdGVtRGF0YShyZXN1bHQuY3VzdG9tSXRlbURhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gUmVjaXBlLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgLndpdGhOYW1lKHJlY2lwZS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLndpdGhQYXJ0SWQocmVjaXBlLnBhcnRJZClcclxuICAgICAgICAgICAgICAgIC53aXRoRXNzZW5jZXMocmVjaXBlLmVzc2VuY2VzKVxyXG4gICAgICAgICAgICAgICAgLndpdGhTeXN0ZW1JZChyZWNpcGUuc3lzdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aEluZ3JlZGllbnRzKHBvcHVsYXRlZEluZ3JlZGllbnRzKVxyXG4gICAgICAgICAgICAgICAgLndpdGhSZXN1bHRzKHBvcHVsYXRlZENyYWZ0aW5nUmVzdWx0cylcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBvcHVsYXRlZFJlY2lwZXMuZm9yRWFjaCgocmVjaXBlOiBSZWNpcGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZWNpcGUuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZWNpcGVFcnJvcnMucHVzaChgUmVjaXBlICR7cmVjaXBlLmNvbXBlbmRpdW1FbnRyeX0gaXMgaW52YWxpZC4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVjaXBlRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYnVpbGQgQ3JhZnRpbmcgU3lzdGVtICR7dGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLm5hbWV9LiBUaGVyZSB3ZXJlIG9uZSBvciBtb3JlIGlzc3VlcyB3aXRoIHJlYWRpbmcgcG9wdWxhdGluZyBSZWNpcGVzOiAke3JlY2lwZUVycm9yc30uIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ3JhZnRpbmdTeXN0ZW0uYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC53aXRoUmVjaXBlcyhuZXcgTWFwKHBvcHVsYXRlZFJlY2lwZXMubWFwKChyZWNpcGU6IFJlY2lwZSkgPT4gW3JlY2lwZS5wYXJ0SWQsIHJlY2lwZV0pKSlcclxuICAgICAgICAgICAgLndpdGhOYW1lKHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5uYW1lKVxyXG4gICAgICAgICAgICAud2l0aENvbXBvbmVudHMoY29tcG9uZW50RGljdGlvbmFyeSlcclxuICAgICAgICAgICAgLndpdGhFc3NlbmNlcyh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uZXNzZW5jZXMpXHJcbiAgICAgICAgICAgIC53aXRoRW5hYmxlSGludCh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uZW5hYmxlSGludClcclxuICAgICAgICAgICAgLndpdGhGYWJyaWNhdG9yKHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5mYWJyaWNhdG9yKVxyXG4gICAgICAgICAgICAud2l0aERlc2NyaXB0aW9uKHRoaXMuc3lzdGVtU3BlY2lmaWNhdGlvbi5kZXNjcmlwdGlvbilcclxuICAgICAgICAgICAgLndpdGhDb21wZW5kaXVtUGFja0tleSh0aGlzLnN5c3RlbVNwZWNpZmljYXRpb24uY29tcGVuZGl1bVBhY2tLZXkpXHJcbiAgICAgICAgICAgIC53aXRoU3VwcG9ydGVkR2FtZVN5c3RlbXModGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLnN1cHBvcnRlZEdhbWVTeXN0ZW1zKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCBwcmVwYXJlKCk6IFByb21pc2U8QmFzaWNTeXN0ZW1EYXRhPjtcclxuXHJcbn1cclxuXHJcbmNsYXNzIENvbXBlbmRpdW1JbXBvcnRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnkgZXh0ZW5kcyBBYnN0cmFjdENyYWZ0aW5nU3lzdGVtRmFjdG9yeSB7XHJcblxyXG4gICAgYXN5bmMgcHJlcGFyZSgpOiBQcm9taXNlPEJhc2ljU3lzdGVtRGF0YT4ge1xyXG4gICAgICAgIGxldCBzeXN0ZW1QYWNrOiBDb21wZW5kaXVtID0gZ2FtZS5wYWNrcy5nZXQodGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmNvbXBlbmRpdW1QYWNrS2V5KTtcclxuICAgICAgICBsZXQgY29udGVudCA9IGF3YWl0IHRoaXMubG9hZENvbXBlbmRpdW1Db250ZW50KHN5c3RlbVBhY2ssIDEwKTtcclxuICAgICAgICBjb25zdCBzeXN0ZW1EYXRhOiBCYXNpY1N5c3RlbURhdGEgPSB7XHJcbiAgICAgICAgICAgIHJlY2lwZXM6IFtdLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29udGVudC5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1Db25maWc6IEZhYnJpY2F0ZUNvbXBlbmRpdW1EYXRhID0gaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZTtcclxuICAgICAgICAgICAgc3dpdGNoIChpdGVtQ29uZmlnLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRmFicmljYXRlSXRlbVR5cGUuQ09NUE9ORU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbURhdGEuY29tcG9uZW50cy5wdXNoKENyYWZ0aW5nQ29tcG9uZW50LmZyb21GbGFncyhpdGVtQ29uZmlnLCBpdGVtLm5hbWUsIGl0ZW0uaW1nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLnJlY2lwZXMucHVzaChSZWNpcGUuZnJvbUZsYWdzKGl0ZW1Db25maWcsIGl0ZW0ubmFtZSwgaXRlbS5pbWcpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8IFVuYWJsZSB0byBsb2FkIGl0ZW0gJHtpdGVtLmlkfS4gQ291bGQgbm90IGRldGVybWluZSBGYWJyaWNhdGUgRW50aXR5IFR5cGUuIGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHN5c3RlbURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGYWxsYmFjayBhd2FpdGVyIGZvciBsb2FkaW5nIGNvbXBlbmRpdW0gY29udGVudCwgYXMgdGhpcyB3YXMgb2JzZXJ2ZWQgdG8gYmUgdW5yZWxpYWJsZSBkdXJpbmcgZGV2ZWxvcG1lbnQgYWZ0ZXIgdGhlXHJcbiAgICAgKiBnYW1lICdyZWFkeScgSG9vayB3YXMgZmlyZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcGVuZGl1bSBUaGUgQ29tcGVuZGl1bSBmcm9tIHdoaWNoIHRvIHJlbGlhYmx5IGxvYWQgdGhlIENvbnRlbnRcclxuICAgICAqIEBwYXJhbSBtYXhBdHRlbXB0cyBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGltZXMgdG8gYXR0ZW1wdCBsb2FkaW5nIENvbXBlbmRpdW0gQ29udGVudFxyXG4gICAgICogKi9cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZENvbXBlbmRpdW1Db250ZW50KGNvbXBlbmRpdW06IENvbXBlbmRpdW0sIG1heEF0dGVtcHRzOiBudW1iZXIpOiBQcm9taXNlPEVudGl0eVtdPiB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQ6IEVudGl0eVtdID0gYXdhaXQgY29tcGVuZGl1bS5nZXRDb250ZW50KCk7XHJcbiAgICAgICAgbGV0IGF0dGVtcHRzOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIHdoaWxlICgoIWNvbnRlbnQgfHwgKGNvbnRlbnQubGVuZ3RoID09PSAwKSkgJiYgKGF0dGVtcHRzIDw9IG1heEF0dGVtcHRzKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBXYWl0aW5nIGZvciBjb250ZW50IGluIENvbXBlbmRpdW0gUGFjayAke2NvbXBlbmRpdW0uaWR9IChBdHRlbXB0ICR7YXR0ZW1wdHN9IG9mICR7bWF4QXR0ZW1wdHN9LiBgKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0KDEwMDApO1xyXG4gICAgICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgICAgICAgICBjb250ZW50ID0gYXdhaXQgY29tcGVuZGl1bS5nZXRDb250ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2ltcGxlIGFzeW5jIGF3YWl0ZXIgZGVsYXkgZnVuY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVsYXkgVGhlIG51bWJlciBvZiBtaWxsaXMgdG8gd2FpdCBiZWZvcmUgcmVzb2x2aW5nXHJcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIGRlbGF5IHBlcmlvZCBoYXMgZWxhcHNlZFxyXG4gICAgICogKi9cclxuICAgIHByaXZhdGUgYXN5bmMgd2FpdChkZWxheTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgRmlsZVJlYWRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnkgZXh0ZW5kcyBBYnN0cmFjdENyYWZ0aW5nU3lzdGVtRmFjdG9yeSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZmlsZVBhdGg6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZpbGVFcnJvcnNCeUxpbmVOdW1iZXI6IE1hcDxudW1iZXIsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW1TcGVjaWZpY2F0aW9uOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb248e30+LCBmaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoc3lzdGVtU3BlY2lmaWNhdGlvbik7XHJcbiAgICAgICAgdGhpcy5fZmlsZVBhdGggPSBmaWxlUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZmlsZVBhdGgoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZVBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZpbGVFcnJvcnNCeUxpbmVOdW1iZXIoKTogTWFwPG51bWJlciwgc3RyaW5nW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZUVycm9yc0J5TGluZU51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwcmVwYXJlKCk6IFByb21pc2U8QmFzaWNTeXN0ZW1EYXRhPiB7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKHRoaXMuZmlsZVBhdGgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlRmlsZURhdGEobGluZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmVhZEZpbGUocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUocGF0aCwgJ3V0Zi04Jyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRzLnNwbGl0KCdcXG4nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlY29yZEVycm9yKGxpbmVOdW1iZXI6IG51bWJlciwgZXJyb3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyLmhhcyhsaW5lTnVtYmVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9maWxlRXJyb3JzQnlMaW5lTnVtYmVyLmdldChsaW5lTnVtYmVyKS5wdXNoKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZmlsZUVycm9yc0J5TGluZU51bWJlci5zZXQobGluZU51bWJlcixbZXJyb3JdKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUZpbGVEYXRhKGxpbmVzOiBzdHJpbmdbXSk6IEJhc2ljU3lzdGVtRGF0YSB7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtRGF0YTogQmFzaWNTeXN0ZW1EYXRhID0ge1xyXG4gICAgICAgICAgICByZWNpcGVzOiBbXSxcclxuICAgICAgICAgICAgY29tcG9uZW50czogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICBsZXQganNvbjogYW55O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UobGluZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgTGluZSBpcyBub3QgdmFsaWQgSlNPTi4gYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFqc29uLmZsYWdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBObyBmbGFnIGRhdGEgd2FzIHByZXNlbnQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGpzb24uZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBGbGFnIGRhdGEgd2FzIHByZXNlbnQsIGJ1dCBubyBGYWJyaWNhdGUgZmxhZ3Mgd2VyZSBzZXQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYEZsYWcgZGF0YSB3YXMgcHJlc2VudCwgYnV0IG5vIEZhYnJpY2F0ZSBJdGVtIGlkZW50aXR5IHdhcyBzZXQuIGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZmFicmljYXRlRmxhZ3MuaWRlbnRpdHkucGFydElkIHx8ICFmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgQW4gaW52YWxpZCBGYWJyaWNhdGUgSXRlbSBpZGVudGl0eSB3YXMgc2V0IHdpdGggUGFydCBJRCAnJHtmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5wYXJ0SWR9JyBhbmQgU3lzdGVtIElEICcke2ZhYnJpY2F0ZUZsYWdzLmlkZW50aXR5LnN5c3RlbUlkfScgYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGZhYnJpY2F0ZUl0ZW06IEZhYnJpY2F0ZUl0ZW07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZmFicmljYXRlRmxhZ3MudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWJyaWNhdGVGbGFncy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgTm8gQ29tcG9uZW50IGRlZmluaXRpb24gd2FzIHByb3ZpZGVkLiBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmFmdGluZ0NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQgPSBDcmFmdGluZ0NvbXBvbmVudC5mcm9tRmxhZ3MoZmFicmljYXRlRmxhZ3MsIGpzb24ubmFtZSwganNvbi5pbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhYnJpY2F0ZUl0ZW0gPSBjcmFmdGluZ0NvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLmNvbXBvbmVudHMucHVzaChjcmFmdGluZ0NvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzLnJlY2lwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBObyBSZWNpcGUgZGVmaW5pdGlvbiB3YXMgcHJvdmlkZWQuIGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwZTogUmVjaXBlID0gUmVjaXBlLmZyb21GbGFncyhmYWJyaWNhdGVGbGFncywganNvbi5uYW1lLCBqc29uLmltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFicmljYXRlSXRlbSA9IHJlY2lwZTtcclxuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1EYXRhLnJlY2lwZXMucHVzaChyZWNpcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGxpbmVOdW1iZXIsIGBUaGUgRmFicmljYXRlIEl0ZW0gdHlwZSAke2ZhYnJpY2F0ZUZsYWdzLnR5cGV9IHdhcyBub3QgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZWQuIEFsbG93YWJsZSB2YWx1ZXMgYXJlIENPTVBPTkVOVCBvciBSRUNJUEVgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZhYnJpY2F0ZUl0ZW0ucGFydElkICE9PSBqc29uLl9pZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgJHtmYWJyaWNhdGVGbGFncy50eXBlfSBwYXJ0IElEICcke2ZhYnJpY2F0ZUl0ZW0ucGFydElkfScgZGlkIG5vdCBtYXRjaCBDb21wZW5kaXVtIEVudGl0eSBJRCAnJHtqc29uLl9pZH0uICdgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmFicmljYXRlSXRlbS5uYW1lICE9PSBqc29uLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkRXJyb3IobGluZU51bWJlciwgYCR7ZmFicmljYXRlRmxhZ3MudHlwZX0gbmFtZSAnJHtmYWJyaWNhdGVJdGVtLm5hbWV9JyBkaWQgbm90IG1hdGNoIENvbXBlbmRpdW0gRW50aXR5IG5hbWUgJyR7anNvbi5uYW1lfS4gJ2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmYWJyaWNhdGVJdGVtLmltYWdlVXJsICE9PSBqc29uLmltZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRFcnJvcihsaW5lTnVtYmVyLCBgJHtmYWJyaWNhdGVGbGFncy50eXBlfSBpbWFnZSBVUkwgJyR7ZmFicmljYXRlSXRlbS5pbWFnZVVybH0nIGRpZCBub3QgbWF0Y2ggQ29tcGVuZGl1bSBFbnRpdHkgaW1hZ2UgVVJMICcke2pzb24uaW1nfS4gJ2ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzeXN0ZW1EYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsaW5lRXJyb3JEZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5mb3JFYWNoKChlcnJvcnM6IHN0cmluZ1tdLCBsaW5lOiBudW1iZXIpID0+IGxpbmVFcnJvckRldGFpbHMucHVzaChgTGluZSAke2xpbmV9OiAke2Vycm9ycy5qb2luKCcsICcpfSBcXG5gKSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbmNvdW50ZXJlZCAke3RoaXMuZmlsZUVycm9yc0J5TGluZU51bWJlci5zaXplfSBlcnJvcnMgd2hlbiBwcm9jZXNzaW5nIGZpbGUgZGF0YSBmb3Igc3lzdGVtICR7dGhpcy5zeXN0ZW1TcGVjaWZpY2F0aW9uLmNvbXBlbmRpdW1QYWNrS2V5fS4gRXJyb3JzOiBcXG4gJHtsaW5lRXJyb3JEZXRhaWxzfWApO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbUZhY3RvcnksIEZpbGVSZWFkaW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5LCBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemFactory.ts\n");

/***/ }),

/***/ "./src/scripts/core/CraftingSystemSpecification.ts":
/*!*********************************************************!*\
  !*** ./src/scripts/core/CraftingSystemSpecification.ts ***!
  \*********************************************************/
/*! exports provided: CraftingSystemSpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemSpecification\", function() { return CraftingSystemSpecification; });\nclass CraftingSystemSpecification {\r\n    constructor(builder) {\r\n        this._supportedGameSystems = [];\r\n        this._essences = [];\r\n        this._compendiumPackKey = builder.compendiumPackKey;\r\n        this._name = builder.name;\r\n        this._description = builder.description;\r\n        this._enableHint = builder.enableHint;\r\n        this._enabled = builder.enabled;\r\n        this._supportedGameSystems = builder.supportedGameSystems;\r\n        this._fabricator = builder.fabricator;\r\n        this._essences = builder.essences;\r\n    }\r\n    static builder() {\r\n        return new CraftingSystemSpecification.Builder();\r\n    }\r\n    get compendiumPackKey() {\r\n        return this._compendiumPackKey;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get description() {\r\n        return this._description;\r\n    }\r\n    get enableHint() {\r\n        return this._enableHint;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get fabricator() {\r\n        return this._fabricator;\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n}\r\n(function (CraftingSystemSpecification) {\r\n    class Builder {\r\n        constructor() {\r\n            this.supportedGameSystems = [];\r\n            this.essences = [];\r\n        }\r\n        build() {\r\n            return new CraftingSystemSpecification(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withCompendiumPackKey(value) {\r\n            this.compendiumPackKey = value;\r\n            return this;\r\n        }\r\n        withFabricator(value) {\r\n            this.fabricator = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystems(value) {\r\n            this.supportedGameSystems = value;\r\n            return this;\r\n        }\r\n        withSupportedGameSystem(value) {\r\n            this.supportedGameSystems.push(value);\r\n            return this;\r\n        }\r\n        withEnableHint(value) {\r\n            this.enableHint = value;\r\n            return this;\r\n        }\r\n        isEnabled(value) {\r\n            this.enabled = value;\r\n            return this;\r\n        }\r\n        withDescription(value) {\r\n            this.description = value;\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(value) {\r\n            this.essences = value;\r\n            return this;\r\n        }\r\n    }\r\n    CraftingSystemSpecification.Builder = Builder;\r\n})(CraftingSystemSpecification || (CraftingSystemSpecification = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi50cz9mNTI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxNQUFNLDJCQUEyQjtJQVU3QixZQUFZLE9BQTRDO1FBSnZDLDBCQUFxQixHQUFhLEVBQUUsQ0FBQztRQUVyQyxjQUFTLEdBQXdCLEVBQUUsQ0FBQztRQUdqRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO1FBQ3BELElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNoQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSwyQkFBMkIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7Q0FFSjtBQUVELFdBQVUsMkJBQTJCO0lBRWpDLE1BQWEsT0FBTztRQUFwQjtZQU9XLHlCQUFvQixHQUFhLEVBQUUsQ0FBQztZQUVwQyxhQUFRLEdBQXdCLEVBQUUsQ0FBQztRQXdEOUMsQ0FBQztRQXREVSxLQUFLO1lBQ1IsT0FBTyxJQUFJLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFFTSxRQUFRLENBQUMsS0FBYTtZQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0scUJBQXFCLENBQUMsS0FBYTtZQUN0QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1lBQy9CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBNEI7WUFDOUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7WUFDeEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLHdCQUF3QixDQUFDLEtBQWU7WUFDM0MsSUFBSSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sdUJBQXVCLENBQUMsS0FBYTtZQUN4QyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxjQUFjLENBQUMsS0FBYTtZQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUN4QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sU0FBUyxDQUFDLEtBQWM7WUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELGVBQWUsQ0FBQyxLQUFhO1lBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxXQUFXLENBQUMsS0FBd0I7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUEwQjtZQUMxQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBRUo7SUFqRVksbUNBQU8sVUFpRW5CO0FBRUwsQ0FBQyxFQXJFUywyQkFBMkIsS0FBM0IsMkJBQTJCLFFBcUVwQztBQUVtQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdG9yfSBmcm9tIFwiLi9GYWJyaWNhdG9yXCI7XHJcbmltcG9ydCB7RXNzZW5jZURlZmluaXRpb259IGZyb20gXCIuL0NyYWZ0aW5nU3lzdGVtXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcGVuZGl1bVBhY2tLZXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hbWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Rlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVIaW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmFibGVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3VwcG9ydGVkR2FtZVN5c3RlbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdG9yOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YT47XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlczogRXNzZW5jZURlZmluaXRpb25bXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5CdWlsZGVyKSB7XHJcbiAgICAgICAgdGhpcy5fY29tcGVuZGl1bVBhY2tLZXkgPSBidWlsZGVyLmNvbXBlbmRpdW1QYWNrS2V5O1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBidWlsZGVyLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSBidWlsZGVyLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuX2VuYWJsZUhpbnQgPSBidWlsZGVyLmVuYWJsZUhpbnQ7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGJ1aWxkZXIuZW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IGJ1aWxkZXIuc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRvciA9IGJ1aWxkZXIuZmFicmljYXRvcjtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCk6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5CdWlsZGVyIHtcclxuICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBlbmRpdW1QYWNrS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBlbmRpdW1QYWNrS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbmFibGVIaW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZUhpbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN1cHBvcnRlZEdhbWVTeXN0ZW1zKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0b3IoKTogRmFicmljYXRvcjxJdGVtLkRhdGE+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXNzZW5jZXMoKTogRXNzZW5jZURlZmluaXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vzc2VuY2VzO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubmFtZXNwYWNlIENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbiB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXJ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb21wZW5kaXVtUGFja0tleSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb24hOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZUhpbnQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIGVuYWJsZWQhOiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBzdXBwb3J0ZWRHYW1lU3lzdGVtczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRvciE6IEZhYnJpY2F0b3I8SXRlbS5EYXRhPjtcclxuICAgICAgICBwdWJsaWMgZXNzZW5jZXM6IEVzc2VuY2VEZWZpbml0aW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCkgOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTmFtZSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcGVuZGl1bVBhY2tLZXkodmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBlbmRpdW1QYWNrS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWJyaWNhdG9yKHZhbHVlOiBGYWJyaWNhdG9yPEl0ZW0uRGF0YT4pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5mYWJyaWNhdG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhTdXBwb3J0ZWRHYW1lU3lzdGVtcyh2YWx1ZTogc3RyaW5nW10pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoU3VwcG9ydGVkR2FtZVN5c3RlbSh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkR2FtZVN5c3RlbXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFbmFibGVIaW50KHZhbHVlOiBzdHJpbmcpOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVIaW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGlzRW5hYmxlZCh2YWx1ZTogYm9vbGVhbik6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoRGVzY3JpcHRpb24odmFsdWU6IHN0cmluZyk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhFc3NlbmNlKHZhbHVlOiBFc3NlbmNlRGVmaW5pdGlvbik6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLmVzc2VuY2VzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRXNzZW5jZXModmFsdWU6IEVzc2VuY2VEZWZpbml0aW9uW10pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb259Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/CraftingSystemSpecification.ts\n");

/***/ }),

/***/ "./src/scripts/core/EssenceCombiner.ts":
/*!*********************************************!*\
  !*** ./src/scripts/core/EssenceCombiner.ts ***!
  \*********************************************/
/*! exports provided: EssenceCombiner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EssenceCombiner\", function() { return EssenceCombiner; });\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n/* harmony import */ var _error_AlchemyError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/AlchemyError */ \"./src/scripts/error/AlchemyError.ts\");\n\r\n\r\nclass EssenceCombiner {\r\n    constructor(builder) {\r\n        this._effectsByEssenceCombinationIdentity = new Map();\r\n        this._essenceIdentities = new Map();\r\n        this._maxComponents = builder.maxComponents;\r\n        this._maxEssences = builder.maxEssences;\r\n        this._effects = builder.effects;\r\n        this._essenceMatchSizes = this.effects.map((effect) => effect.essenceCombination.length)\r\n            .filter((count, index, essenceCounts) => essenceCounts.indexOf(count) === index);\r\n        const uniqueEssences = this.effects.map((effect) => effect.essenceCombination)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        this._essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssences);\r\n        this.effects.forEach((effect) => this._effectsByEssenceCombinationIdentity.set(_FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(effect.essenceCombination, this._essenceIdentities), effect));\r\n    }\r\n    static builder() {\r\n        return new EssenceCombiner.Builder();\r\n    }\r\n    get maxComponents() {\r\n        return this._maxComponents;\r\n    }\r\n    get maxEssences() {\r\n        return this._maxEssences;\r\n    }\r\n    get effects() {\r\n        return this._effects;\r\n    }\r\n    combine(components, baseItemData) {\r\n        this.validate(components);\r\n        const effects = this.determineAlchemicalEffectsForComponents(components);\r\n        if (!effects || effects.length === 0) {\r\n            throw new _error_AlchemyError__WEBPACK_IMPORTED_MODULE_1__[\"AlchemyError\"]('No Alchemical Effects were produced by mixing the provided Components. ', components, true);\r\n        }\r\n        const orderedEffects = this.orderAlchemicalEffects(effects);\r\n        return this.applyEffectsToBaseItem(orderedEffects, baseItemData);\r\n    }\r\n    validate(components) {\r\n        if ((this._maxComponents > 0) && (this._maxComponents < components.length)) {\r\n            throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxComponents} components. `);\r\n        }\r\n        if (this._maxEssences > 0) {\r\n            const essenceCount = components.map((component) => component.essences.length)\r\n                .reduce((left, right) => left + right, 0);\r\n            if (essenceCount > this._maxEssences) {\r\n                throw new Error(`The Essence Combiner for this system supports a maximum of ${this._maxEssences} essences. `);\r\n            }\r\n        }\r\n    }\r\n    applyEffectsToBaseItem(effects, baseItem) {\r\n        effects.forEach((effect) => effect.applyTo(baseItem));\r\n        return baseItem;\r\n    }\r\n    determineAlchemicalEffectsForComponents(components) {\r\n        if (components.length === 0 || this.effects.length === 0) {\r\n            return [];\r\n        }\r\n        return components.filter((component) => this._essenceMatchSizes.includes(component.essences.length))\r\n            .map((component) => {\r\n            const essenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_0__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, this._essenceIdentities);\r\n            return this._effectsByEssenceCombinationIdentity.get(essenceCombinationIdentity);\r\n        })\r\n            .filter((effect) => effect !== null && typeof effect !== 'undefined');\r\n    }\r\n    orderAlchemicalEffects(effects) {\r\n        return effects.sort((left, right) => {\r\n            return left.type.valueOf() - right.type.valueOf();\r\n        });\r\n    }\r\n}\r\n(function (EssenceCombiner) {\r\n    class Builder {\r\n        constructor() {\r\n            this.effects = [];\r\n        }\r\n        withMaxComponents(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withMaxEssences(value) {\r\n            this.maxComponents = value;\r\n            return this;\r\n        }\r\n        withAlchemicalEffect(value) {\r\n            this.effects.push(value);\r\n            return this;\r\n        }\r\n        withAlchemicalEffects(value) {\r\n            this.effects = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new EssenceCombiner(this);\r\n        }\r\n    }\r\n    EssenceCombiner.Builder = Builder;\r\n})(EssenceCombiner || (EssenceCombiner = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0Vzc2VuY2VDb21iaW5lci50cz8xOTQxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQXNEO0FBQ0g7QUFFbkQsTUFBTSxlQUFlO0lBU2pCLFlBQW1CLE9BQW1DO1FBSHJDLHlDQUFvQyxHQUFxQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ25GLHVCQUFrQixHQUF3QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBR2pFLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBRWhDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQTJCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUM7YUFDeEcsTUFBTSxDQUFDLENBQUMsS0FBYSxFQUFFLEtBQWEsRUFBRSxhQUF1QixFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBRS9HLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBMkIsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDO2FBQzlGLE1BQU0sQ0FBQyxDQUFDLElBQWMsRUFBRSxLQUFlLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDO2FBQ25FLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBZSxFQUFFLEtBQWEsRUFBRSxRQUFrQixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8s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Q0FBQyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxxQkFBcUIsQ0FBQyxLQUE0QjtZQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sS0FBSztZQUNSLE9BQU8sSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsQ0FBQztLQUVKO0lBL0JZLHVCQUFPLFVBK0JuQjtBQUVMLENBQUMsRUFuQ1MsZUFBZSxLQUFmLGVBQWUsUUFtQ3hCO0FBRXVCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9Fc3NlbmNlQ29tYmluZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0FsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0gZnJvbSBcIi4vRmFicmljYXRpb25IZWxwZXJcIjtcclxuaW1wb3J0IHtBbGNoZW15RXJyb3J9IGZyb20gXCIuLi9lcnJvci9BbGNoZW15RXJyb3JcIjtcclxuXHJcbmNsYXNzIEVzc2VuY2VDb21iaW5lcjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhDb21wb25lbnRzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9tYXhFc3NlbmNlczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VNYXRjaFNpemVzOiBudW1iZXJbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5OiBNYXA8bnVtYmVyLCBBbGNoZW1pY2FsRWZmZWN0PFQ+PiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihidWlsZGVyOiBFc3NlbmNlQ29tYmluZXIuQnVpbGRlcjxUPikge1xyXG4gICAgICAgIHRoaXMuX21heENvbXBvbmVudHMgPSBidWlsZGVyLm1heENvbXBvbmVudHM7XHJcbiAgICAgICAgdGhpcy5fbWF4RXNzZW5jZXMgPSBidWlsZGVyLm1heEVzc2VuY2VzO1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdHMgPSBidWlsZGVyLmVmZmVjdHM7XHJcblxyXG4gICAgICAgIHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzID0gdGhpcy5lZmZlY3RzLm1hcCgoZWZmZWN0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiBlZmZlY3QuZXNzZW5jZUNvbWJpbmF0aW9uLmxlbmd0aClcclxuICAgICAgICAgICAgLmZpbHRlcigoY291bnQ6IG51bWJlciwgaW5kZXg6IG51bWJlciwgZXNzZW5jZUNvdW50czogbnVtYmVyW10pID0+IGVzc2VuY2VDb3VudHMuaW5kZXhPZihjb3VudCkgPT09IGluZGV4KTtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pcXVlRXNzZW5jZXMgPSB0aGlzLmVmZmVjdHMubWFwKChlZmZlY3Q6IEFsY2hlbWljYWxFZmZlY3Q8VD4pID0+IGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24pXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IHN0cmluZ1tdLCByaWdodDogc3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKChlc3NlbmNlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGVzc2VuY2VzOiBzdHJpbmdbXSkgPT4gZXNzZW5jZXMuaW5kZXhPZihlc3NlbmNlKSA9PT0gaW5kZXgpKTtcclxuICAgICAgICB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyA9IEZhYnJpY2F0aW9uSGVscGVyLmFzc2lnbkVzc2VuY2VJZGVudGl0aWVzKHVuaXF1ZUVzc2VuY2VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5lZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gdGhpcy5fZWZmZWN0c0J5RXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkuc2V0KEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGVmZmVjdC5lc3NlbmNlQ29tYmluYXRpb24sIHRoaXMuX2Vzc2VuY2VJZGVudGl0aWVzKSwgZWZmZWN0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyPFQgZXh0ZW5kcyBJdGVtLkRhdGE+KCk6IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEVzc2VuY2VDb21iaW5lci5CdWlsZGVyPFQ+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heENvbXBvbmVudHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4Q29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF4RXNzZW5jZXMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4RXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVmZmVjdHMoKTogQWxjaGVtaWNhbEVmZmVjdDxUPltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWZmZWN0cztcclxuICAgIH1cclxuXHJcbiAgICBjb21iaW5lKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGJhc2VJdGVtRGF0YTogVCk6IFQge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50cyk7XHJcbiAgICAgICAgY29uc3QgZWZmZWN0czogQWxjaGVtaWNhbEVmZmVjdDxUPltdID0gdGhpcy5kZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50cyk7XHJcbiAgICAgICAgaWYgKCFlZmZlY3RzIHx8ZWZmZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFsY2hlbXlFcnJvcignTm8gQWxjaGVtaWNhbCBFZmZlY3RzIHdlcmUgcHJvZHVjZWQgYnkgbWl4aW5nIHRoZSBwcm92aWRlZCBDb21wb25lbnRzLiAnLCBjb21wb25lbnRzLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3JkZXJlZEVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSA9IHRoaXMub3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUVmZmVjdHNUb0Jhc2VJdGVtKG9yZGVyZWRFZmZlY3RzLCBiYXNlSXRlbURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGUoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSkge1xyXG4gICAgICAgIGlmICgodGhpcy5fbWF4Q29tcG9uZW50cyA+IDApICYmICh0aGlzLl9tYXhDb21wb25lbnRzIDwgY29tcG9uZW50cy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heENvbXBvbmVudHN9IGNvbXBvbmVudHMuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbWF4RXNzZW5jZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VDb3VudCA9IGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBjb21wb25lbnQuZXNzZW5jZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyKSA9PiBsZWZ0ICsgcmlnaHQsIDApO1xyXG4gICAgICAgICAgICBpZiAoZXNzZW5jZUNvdW50ID4gdGhpcy5fbWF4RXNzZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIEVzc2VuY2UgQ29tYmluZXIgZm9yIHRoaXMgc3lzdGVtIHN1cHBvcnRzIGEgbWF4aW11bSBvZiAke3RoaXMuX21heEVzc2VuY2VzfSBlc3NlbmNlcy4gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseUVmZmVjdHNUb0Jhc2VJdGVtKGVmZmVjdHM6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSwgYmFzZUl0ZW06IFQpOiBUIHtcclxuICAgICAgICBlZmZlY3RzLmZvckVhY2goKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0LmFwcGx5VG8oYmFzZUl0ZW0pKTtcclxuICAgICAgICByZXR1cm4gYmFzZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVBbGNoZW1pY2FsRWZmZWN0c0ZvckNvbXBvbmVudHMoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID09PSAwIHx8IHRoaXMuZWZmZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50cy5maWx0ZXIoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IHRoaXMuX2Vzc2VuY2VNYXRjaFNpemVzLmluY2x1ZGVzKGNvbXBvbmVudC5lc3NlbmNlcy5sZW5ndGgpKVxyXG4gICAgICAgICAgICAubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSA9IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGNvbXBvbmVudC5lc3NlbmNlcywgdGhpcy5fZXNzZW5jZUlkZW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VmZmVjdHNCeUVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5LmdldChlc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKGVmZmVjdDogQWxjaGVtaWNhbEVmZmVjdDxUPikgPT4gZWZmZWN0ICE9PSBudWxsICYmIHR5cGVvZiBlZmZlY3QhPT0gJ3VuZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3JkZXJBbGNoZW1pY2FsRWZmZWN0cyhlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10pOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10ge1xyXG4gICAgICAgIHJldHVybiBlZmZlY3RzLnNvcnQoKGxlZnQ6IEFsY2hlbWljYWxFZmZlY3Q8VD4sIHJpZ2h0OiBBbGNoZW1pY2FsRWZmZWN0PFQ+KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUudmFsdWVPZigpIC0gcmlnaHQudHlwZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBFc3NlbmNlQ29tYmluZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyPFQgZXh0ZW5kcyBJdGVtLkRhdGE+IHtcclxuXHJcbiAgICAgICAgcHVibGljIG1heENvbXBvbmVudHM6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgbWF4RXNzZW5jZXM6IG51bWJlclxyXG4gICAgICAgIHB1YmxpYyBlZmZlY3RzOiBBbGNoZW1pY2FsRWZmZWN0PFQ+W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgYmFzZUl0ZW06IFQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4Q29tcG9uZW50cyh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4Q29tcG9uZW50cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoTWF4RXNzZW5jZXModmFsdWU6IG51bWJlcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLm1heENvbXBvbmVudHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFsY2hlbWljYWxFZmZlY3QodmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD4pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5lZmZlY3RzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQWxjaGVtaWNhbEVmZmVjdHModmFsdWU6IEFsY2hlbWljYWxFZmZlY3Q8VD5bXSk6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmVmZmVjdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRXNzZW5jZUNvbWJpbmVyPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFc3NlbmNlQ29tYmluZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7RXNzZW5jZUNvbWJpbmVyfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/EssenceCombiner.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricateItem.ts":
/*!*******************************************!*\
  !*** ./src/scripts/core/FabricateItem.ts ***!
  \*******************************************/
/*! exports provided: FabricateItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItem\", function() { return FabricateItem; });\nclass FabricateItem {\r\n    constructor(systemId, partId, imageUrl, name) {\r\n        this._systemId = systemId;\r\n        this._partId = partId;\r\n        this._imageUrl = imageUrl;\r\n        this._name = name;\r\n    }\r\n    get partId() {\r\n        return this._partId;\r\n    }\r\n    get systemId() {\r\n        return this._systemId;\r\n    }\r\n    get compendiumEntry() {\r\n        return `${this.systemId}.${this.partId}`;\r\n    }\r\n    get imageUrl() {\r\n        return this._imageUrl;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    sharesType(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.partId === other.partId\r\n            && this.systemId === other.systemId;\r\n    }\r\n    isValid() {\r\n        return this.partId && this.partId.length > 0\r\n            && this.systemId && this.systemId.length > 0\r\n            && this.imageUrl != null && this.imageUrl.length > 0\r\n            && this.name != null && this.name.length > 0;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHM/YzkxZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUEsTUFBZSxhQUFhO0lBTXhCLFlBQXNCLFFBQWdCLEVBQUUsTUFBYyxFQUFFLFFBQWdCLEVBQUUsSUFBWTtRQUNsRixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksZUFBZTtRQUNmLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7SUFDNUMsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxVQUFVLENBQUMsS0FBb0I7UUFDM0IsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNSLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxLQUFLLEtBQUssQ0FBQyxNQUFNO2VBQzVCLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUM1QyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ3JDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztlQUN6QyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDO2VBQ2pELElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0o7QUFFcUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0ZUl0ZW0udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhYnN0cmFjdCBjbGFzcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfc3lzdGVtSWQ6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBfcGFydElkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbWFnZVVybDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihzeXN0ZW1JZDogc3RyaW5nLCBwYXJ0SWQ6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc3lzdGVtSWQgPSBzeXN0ZW1JZDtcclxuICAgICAgICB0aGlzLl9wYXJ0SWQgPSBwYXJ0SWQ7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBpbWFnZVVybDtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFydElkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3lzdGVtSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3lzdGVtSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBlbmRpdW1FbnRyeSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLnN5c3RlbUlkfS4ke3RoaXMucGFydElkfWBcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW1hZ2VVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW1hZ2VVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzaGFyZXNUeXBlKG90aGVyOiBGYWJyaWNhdGVJdGVtKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRJZCA9PT0gb3RoZXIucGFydElkXHJcbiAgICAgICAgICAgICYmIHRoaXMuc3lzdGVtSWQgPT09IG90aGVyLnN5c3RlbUlkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydElkICYmIHRoaXMucGFydElkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5zeXN0ZW1JZCAmJiB0aGlzLnN5c3RlbUlkLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgJiYgdGhpcy5pbWFnZVVybCAhPSBudWxsICYmIHRoaXMuaW1hZ2VVcmwubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAmJiB0aGlzLm5hbWUgIT0gbnVsbCAmJiB0aGlzLm5hbWUubGVuZ3RoID4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGVJdGVtfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricateItem.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationAction.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationAction.ts ***!
  \***********************************************/
/*! exports provided: FabricationAction, FabricationActionType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationAction\", function() { return FabricationAction; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationActionType\", function() { return FabricationActionType; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nvar FabricationActionType;\r\n(function (FabricationActionType) {\r\n    FabricationActionType[\"ADD\"] = \"ADD\";\r\n    FabricationActionType[\"REMOVE\"] = \"REMOVE\";\r\n})(FabricationActionType || (FabricationActionType = {}));\r\nclass FabricationAction extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.itemType.systemId, builder.itemType.partId, builder.itemType.imageUrl, builder.itemType.name);\r\n        this._itemType = builder.itemType;\r\n        this._quantity = builder.quantity;\r\n        this._actionType = builder.actionType;\r\n        this._customItemData = builder.customItemData;\r\n    }\r\n    static builder() {\r\n        return new FabricationAction.Builder();\r\n    }\r\n    get itemType() {\r\n        return this._itemType;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get actionType() {\r\n        return this._actionType;\r\n    }\r\n    get customItemData() {\r\n        return this._customItemData;\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .withActionType(flags.action)\r\n            .withQuantity(flags.quantity)\r\n            .withItemType(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => FabricationAction.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && (this.actionType != null)\r\n            && (this.actionType == FabricationActionType.ADD || this.actionType == FabricationActionType.REMOVE)\r\n            && this.itemType.isValid()\r\n            && super.isValid();\r\n    }\r\n}\r\n(function (FabricationAction) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationAction(this);\r\n        }\r\n        withItemType(value) {\r\n            this.itemType = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        withActionType(value) {\r\n            this.actionType = value;\r\n            return this;\r\n        }\r\n        withCustomItemData(value) {\r\n            this.customItemData = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationAction.Builder = Builder;\r\n})(FabricationAction || (FabricationAction = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uQWN0aW9uLnRzP2YzZDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUVSO0FBRTlDLElBQUsscUJBR0o7QUFIRCxXQUFLLHFCQUFxQjtJQUN0QixvQ0FBVztJQUNYLDBDQUFpQjtBQUNyQixDQUFDLEVBSEkscUJBQXFCLEtBQXJCLHFCQUFxQixRQUd6QjtBQUVELE1BQU0saUJBQXVDLFNBQVEsNERBQWE7SUFNOUQsWUFBWSxPQUFxQztRQUM3QyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1RyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7UUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUM7SUFDbEQsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUssQ0FBQztJQUM5QyxDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBSSxjQUFjO1FBQ2QsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO0lBQ2hDLENBQUM7SUFFTSxNQUFNLENBQUMsU0FBUyxDQUFzQixLQUEyQixFQUFFLFFBQWdCO1FBQ3RGLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBSzthQUNuQixjQUFjLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQzthQUM1QixZQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQzthQUM1QixZQUFZLENBQUMsb0VBQWlCLENBQUMsT0FBTyxFQUFFO2FBQ3BDLFlBQVksQ0FBQyxRQUFRLENBQUM7YUFDdEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7YUFDeEIsS0FBSyxFQUFFLENBQUM7YUFDWixLQUFLLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRU0sTUFBTSxDQUFDLGFBQWEsQ0FBc0IsS0FBNkIsRUFBRSxRQUFnQjtRQUM1RixPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBSSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUN2RixDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztlQUM1QyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDO2VBQ3pCLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxxQkFBcUIsQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxxQkFBcUIsQ0FBQyxNQUFNLENBQUM7ZUFDakcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUU7ZUFDdkIsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzNCLENBQUM7Q0FDSjtBQUVELFdBQVUsaUJBQWlCO0lBRXZCLE1BQWEsT0FBTztRQU9ULEtBQUs7WUFDUixPQUFPLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFvQjtZQUNwQyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sWUFBWSxDQUFDLEtBQWE7WUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGNBQWMsQ0FBQyxLQUE0QjtZQUM5QyxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUN4QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsa0JBQWtCLENBQUMsS0FBUTtZQUN2QixJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztZQUM1QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBRUo7SUEvQlkseUJBQU8sVUErQm5CO0FBQ0wsQ0FBQyxFQWxDUyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBa0MxQjtBQUVnRCIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvRmFicmljYXRpb25BY3Rpb24udHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZVJlc3VsdEZsYWdzfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmVudW0gRmFicmljYXRpb25BY3Rpb25UeXBlIHtcclxuICAgIEFERCA9ICdBREQnLFxyXG4gICAgUkVNT1ZFID0gJ1JFTU9WRSdcclxufVxyXG5cclxuY2xhc3MgRmFicmljYXRpb25BY3Rpb248VCBleHRlbmRzIEl0ZW0uRGF0YT4gZXh0ZW5kcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2l0ZW1UeXBlOiBGYWJyaWNhdGVJdGVtO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcXVhbnRpdHk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdGlvblR5cGU6IEZhYnJpY2F0aW9uQWN0aW9uVHlwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2N1c3RvbUl0ZW1EYXRhOiBUO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IEZhYnJpY2F0aW9uQWN0aW9uLkJ1aWxkZXI8VD4pIHtcclxuICAgICAgICBzdXBlcihidWlsZGVyLml0ZW1UeXBlLnN5c3RlbUlkLCBidWlsZGVyLml0ZW1UeXBlLnBhcnRJZCwgYnVpbGRlci5pdGVtVHlwZS5pbWFnZVVybCwgYnVpbGRlci5pdGVtVHlwZS5uYW1lKTtcclxuICAgICAgICB0aGlzLl9pdGVtVHlwZSA9IGJ1aWxkZXIuaXRlbVR5cGU7XHJcbiAgICAgICAgdGhpcy5fcXVhbnRpdHkgPSBidWlsZGVyLnF1YW50aXR5O1xyXG4gICAgICAgIHRoaXMuX2FjdGlvblR5cGUgPSBidWlsZGVyLmFjdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy5fY3VzdG9tSXRlbURhdGEgPSBidWlsZGVyLmN1c3RvbUl0ZW1EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcjxUIGV4dGVuZHMgSXRlbS5EYXRhPigpOiBGYWJyaWNhdGlvbkFjdGlvbi5CdWlsZGVyPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEZhYnJpY2F0aW9uQWN0aW9uLkJ1aWxkZXI8VD4oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXRlbVR5cGUoKTogRmFicmljYXRlSXRlbSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBxdWFudGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9xdWFudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aW9uVHlwZSgpOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXN0b21JdGVtRGF0YSgpOiBJdGVtLkRhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21JdGVtRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFnczxUIGV4dGVuZHMgSXRlbS5EYXRhPihmbGFnczogRmFicmljYXRlUmVzdWx0RmxhZ3MsIHN5c3RlbUlkOiBzdHJpbmcpOiBGYWJyaWNhdGlvbkFjdGlvbjxUPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlcjxUPigpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9uVHlwZShmbGFncy5hY3Rpb24pXHJcbiAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoZmxhZ3MucXVhbnRpdHkpXHJcbiAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoQ3JhZnRpbmdDb21wb25lbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aFN5c3RlbUlkKHN5c3RlbUlkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhQYXJ0SWQoZmxhZ3MucGFydElkKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCkpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbWFueUZyb21GbGFnczxUIGV4dGVuZHMgSXRlbS5EYXRhPihmbGFnczogRmFicmljYXRlUmVzdWx0RmxhZ3NbXSwgc3lzdGVtSWQ6IHN0cmluZyk6IEZhYnJpY2F0aW9uQWN0aW9uPFQ+W10ge1xyXG4gICAgICAgIHJldHVybiBmbGFncy5tYXAoKGZsYWdEYXRhKSA9PiBGYWJyaWNhdGlvbkFjdGlvbi5mcm9tRmxhZ3M8VD4oZmxhZ0RhdGEsIHN5c3RlbUlkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMucXVhbnRpdHkgIT0gbnVsbCAmJiB0aGlzLnF1YW50aXR5ID4gMClcclxuICAgICAgICAgICAgJiYgKHRoaXMuYWN0aW9uVHlwZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAmJiAodGhpcy5hY3Rpb25UeXBlID09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQgfHwgdGhpcy5hY3Rpb25UeXBlID09IEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkUpXHJcbiAgICAgICAgICAgICYmIHRoaXMuaXRlbVR5cGUuaXNWYWxpZCgpXHJcbiAgICAgICAgICAgICYmIHN1cGVyLmlzVmFsaWQoKTtcclxuICAgIH1cclxufVxyXG5cclxubmFtZXNwYWNlIEZhYnJpY2F0aW9uQWN0aW9uIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQnVpbGRlcjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpdGVtVHlwZSE6IEZhYnJpY2F0ZUl0ZW07XHJcbiAgICAgICAgcHVibGljIHF1YW50aXR5ITogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBhY3Rpb25UeXBlITogRmFicmljYXRpb25BY3Rpb25UeXBlO1xyXG4gICAgICAgIHB1YmxpYyBjdXN0b21JdGVtRGF0YTogVDtcclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCk6IEZhYnJpY2F0aW9uQWN0aW9uPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWJyaWNhdGlvbkFjdGlvbih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoSXRlbVR5cGUodmFsdWU6IEZhYnJpY2F0ZUl0ZW0pOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtVHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUXVhbnRpdHkodmFsdWU6IG51bWJlcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLnF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhBY3Rpb25UeXBlKHZhbHVlOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUpOiBCdWlsZGVyPFQ+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25UeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEN1c3RvbUl0ZW1EYXRhKHZhbHVlOiBUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tSXRlbURhdGEgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbkFjdGlvbiwgRmFicmljYXRpb25BY3Rpb25UeXBlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationAction.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationHelper.ts":
/*!***********************************************!*\
  !*** ./src/scripts/core/FabricationHelper.ts ***!
  \***********************************************/
/*! exports provided: FabricationHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationHelper\", function() { return FabricationHelper; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass FabricationHelper {\r\n    static asCraftingResults(components, action) {\r\n        const componentsById = new Map();\r\n        components.forEach((component) => {\r\n            const identicalComponents = componentsById.get(component.partId);\r\n            if (!identicalComponents) {\r\n                componentsById.set(component.partId, [component]);\r\n            }\r\n            else {\r\n                identicalComponents.push(component);\r\n            }\r\n        });\r\n        if (Object.keys(componentsById).length === components.length) {\r\n            return components.map((component) => {\r\n                return _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                    .withItemType(component)\r\n                    .withQuantity(1)\r\n                    .withActionType(action)\r\n                    .build();\r\n            });\r\n        }\r\n        const results = [];\r\n        componentsById.forEach((componentsOfType) => {\r\n            const craftingResult = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                .withItemType(componentsOfType[0])\r\n                .withQuantity(componentsOfType.length)\r\n                .withActionType(action)\r\n                .build();\r\n            results.push(craftingResult);\r\n        });\r\n        return results;\r\n    }\r\n    ;\r\n    static essenceCombinationIdentity(essences, essenceIdentities) {\r\n        return essences.map((essence) => {\r\n            if (!essenceIdentities.has(essence)) {\r\n                throw new Error(`No known essence is registered for the slug '${essence}'. Known essences are: ${Array.from(essenceIdentities.keys()).join(', ')}`);\r\n            }\r\n            return essenceIdentities.get(essence);\r\n        })\r\n            .reduce((left, right) => left * right);\r\n    }\r\n    static assignEssenceIdentities(essences) {\r\n        const uniqueEssences = essences.filter((essence, index, collection) => collection.indexOf(essence) === index);\r\n        const primes = this.generatePrimes(uniqueEssences.length);\r\n        const essenceIdentities = new Map();\r\n        uniqueEssences.forEach((value, index) => essenceIdentities.set(value, primes[index]));\r\n        return essenceIdentities;\r\n    }\r\n    static generatePrimes(quantity) {\r\n        if (quantity <= FabricationHelper.primes.length) {\r\n            return FabricationHelper.primes.slice(0, quantity);\r\n        }\r\n        let candidate = 98;\r\n        while (FabricationHelper.primes.length < quantity) {\r\n            if (FabricationHelper.primes.every((p) => candidate % p)) {\r\n                FabricationHelper.primes.push(candidate);\r\n            }\r\n            candidate++;\r\n        }\r\n        return FabricationHelper.primes;\r\n    }\r\n    static asComponentCombinations(availableIngredients, limit) {\r\n        const denormalizedComponents = [];\r\n        availableIngredients.forEach((ingredient) => {\r\n            const ceiling = ingredient.quantity < limit ? ingredient.quantity : limit;\r\n            for (let i = 0; i < ceiling; i++) {\r\n                denormalizedComponents.push(ingredient.component);\r\n            }\r\n        });\r\n        const combinations = [];\r\n        const iterations = Math.pow(2, denormalizedComponents.length);\r\n        for (let i = 0; i < iterations; i++) {\r\n            const combination = [];\r\n            for (let j = 0; j < denormalizedComponents.length; j++) {\r\n                if (i & Math.pow(2, j)) {\r\n                    combination.push(denormalizedComponents[j]);\r\n                }\r\n            }\r\n            if (combination.length > 0) {\r\n                combinations.push(combination);\r\n            }\r\n        }\r\n        return combinations.sort((left, right) => left.length - right.length);\r\n    }\r\n    static applyResults(actions, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const action of actions) {\r\n                switch (action.actionType) {\r\n                    case _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD:\r\n                        if (action.customItemData) {\r\n                            yield inventory.add(action.itemType, action.quantity, action.customItemData);\r\n                        }\r\n                        else {\r\n                            yield inventory.add(action.itemType, action.quantity);\r\n                        }\r\n                        break;\r\n                    case _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE:\r\n                        yield inventory.remove(action.itemType, action.quantity);\r\n                        break;\r\n                    default:\r\n                        throw new Error(`The Crafting Action Type ${action.actionType} is not supported. Allowable values are: ADD, REMOVE. `);\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n}\r\nFabricationHelper.primes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97];\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uSGVscGVyLnRzPzQyZmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQzZFO0FBSzdFLE1BQU0saUJBQWlCO0lBSVosTUFBTSxDQUFDLGlCQUFpQixDQUFDLFVBQStCLEVBQUUsTUFBNkI7UUFDMUYsTUFBTSxjQUFjLEdBQXFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDbkUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQTRCLEVBQUUsRUFBRTtZQUNoRCxNQUFNLG1CQUFtQixHQUF3QixjQUFjLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0RixJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQ3RCLGNBQWMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7YUFDckQ7aUJBQU07Z0JBQ0gsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3ZDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxLQUFLLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDMUQsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBNEIsRUFBRSxFQUFFO2dCQUNuRCxPQUFPLG9FQUFpQixDQUFDLE9BQU8sRUFBRTtxQkFDN0IsWUFBWSxDQUFDLFNBQVMsQ0FBQztxQkFDdkIsWUFBWSxDQUFDLENBQUMsQ0FBQztxQkFDZixjQUFjLENBQUMsTUFBTSxDQUFDO3FCQUN0QixLQUFLLEVBQUUsQ0FBQztZQUNqQixDQUFDLENBQUMsQ0FBQztTQUNOO1FBQ0QsTUFBTSxPQUFPLEdBQXdCLEVBQUUsQ0FBQztRQUN4QyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsZ0JBQXFDLEVBQUUsRUFBRTtZQUM3RCxNQUFNLGNBQWMsR0FBRyxvRUFBaUIsQ0FBQyxPQUFPLEVBQUU7aUJBQzdDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDakMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQztpQkFDckMsY0FBYyxDQUFDLE1BQU0sQ0FBQztpQkFDdEIsS0FBSyxFQUFFLENBQUM7WUFDYixPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQUFBLENBQUM7SUFFSyxNQUFNLENBQUMsMEJBQTBCLENBQUMsUUFBa0IsRUFBRSxpQkFBc0M7UUFDL0YsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBZSxFQUFFLEVBQUU7WUFDcEMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxnREFBZ0QsT0FBTywwQkFBMEIsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDdko7WUFDRCxPQUFPLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQUM7YUFDRyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVNLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxRQUFrQjtRQUNwRCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBZSxFQUFFLEtBQWEsRUFBRSxVQUFvQixFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBQ3hJLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFELE1BQU0saUJBQWlCLEdBQXdCLElBQUksR0FBRyxFQUFFLENBQUM7UUFDekQsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RixPQUFPLGlCQUFpQixDQUFDO0lBQzdCLENBQUM7SUFFTSxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQWdCO1FBQ3pDLElBQUksUUFBUSxJQUFJLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFDN0MsT0FBTyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUN0RDtRQUNELElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNuQixPQUFPLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsUUFBUSxFQUFFO1lBQy9DLElBQUksaUJBQWlCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUN0RCxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzVDO1lBQ0QsU0FBUyxFQUFFLENBQUM7U0FDZjtRQUNELE9BQU8saUJBQWlCLENBQUMsTUFBTSxDQUFDO0lBQ3BDLENBQUM7SUFFTSxNQUFNLENBQUMsdUJBQXVCLENBQUMsb0JBQWtDLEVBQUUsS0FBYTtRQUNuRixNQUFNLHNCQUFzQixHQUF3QixFQUFFLENBQUM7UUFDdkQsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBc0IsRUFBRSxFQUFFO1lBQ3BELE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDMUUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDOUIsc0JBQXNCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUNyRDtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxZQUFZLEdBQTBCLEVBQUUsQ0FBQztRQUMvQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU5RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLE1BQU0sV0FBVyxHQUF3QixFQUFFLENBQUM7WUFDNUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLHNCQUFzQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDcEQsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7b0JBQ3BCLFdBQVcsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDL0M7YUFDSjtZQUNELElBQUksV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3hCLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDbEM7U0FDSjtRQUNELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFTSxNQUFNLENBQU8sWUFBWSxDQUFDLE9BQTRCLEVBQUUsU0FBb0I7O1lBQy9FLEtBQUssTUFBTSxNQUFNLElBQUksT0FBTyxFQUFFO2dCQUMxQixRQUFRLE1BQU0sQ0FBQyxVQUFVLEVBQUU7b0JBQ3ZCLEtBQUssd0VBQXFCLENBQUMsR0FBRzt3QkFDMUIsSUFBSSxNQUFNLENBQUMsY0FBYyxFQUFFOzRCQUN2QixNQUFNLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQzt5QkFDaEY7NkJBQU07NEJBQ0gsTUFBTSxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3lCQUN6RDt3QkFDRCxNQUFNO29CQUNWLEtBQUssd0VBQXFCLENBQUMsTUFBTTt3QkFDN0IsTUFBTSxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUN6RCxNQUFNO29CQUNWO3dCQUNJLE1BQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLE1BQU0sQ0FBQyxVQUFVLHdEQUF3RCxDQUFDLENBQUM7aUJBQzlIO2FBQ0o7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBQUE7O0FBNUd1Qix3QkFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFnSDVHIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9GYWJyaWNhdGlvbkhlbHBlci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb24sIEZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuXHJcblxyXG5jbGFzcyBGYWJyaWNhdGlvbkhlbHBlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgcHJpbWVzID0gWzIsIDMsIDUsIDcsIDExLCAxMywgMTcsIDE5LCAyMywgMjksIDMxLCAzNywgNDEsIDQzLCA0NywgNTMsIDU5LCA2MSwgNjcsIDcxLCA3MywgNzksIDgzLCA4OSwgOTddO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXNDcmFmdGluZ1Jlc3VsdHMoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSwgYWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvblR5cGUpOiBGYWJyaWNhdGlvbkFjdGlvbltdIHtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzQnlJZDogTWFwPHN0cmluZywgQ3JhZnRpbmdDb21wb25lbnRbXT4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkZW50aWNhbENvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10gPSBjb21wb25lbnRzQnlJZC5nZXQoY29tcG9uZW50LnBhcnRJZCk7XHJcbiAgICAgICAgICAgIGlmICghaWRlbnRpY2FsQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50c0J5SWQuc2V0KGNvbXBvbmVudC5wYXJ0SWQsIFtjb21wb25lbnRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlkZW50aWNhbENvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNvbXBvbmVudHNCeUlkKS5sZW5ndGggPT09IGNvbXBvbmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnRzLm1hcCgoY29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoY29tcG9uZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoMSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0czogRmFicmljYXRpb25BY3Rpb25bXSA9IFtdO1xyXG4gICAgICAgIGNvbXBvbmVudHNCeUlkLmZvckVhY2goKGNvbXBvbmVudHNPZlR5cGU6IENyYWZ0aW5nQ29tcG9uZW50W10pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdSZXN1bHQgPSBGYWJyaWNhdGlvbkFjdGlvbi5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoY29tcG9uZW50c09mVHlwZVswXSlcclxuICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoY29tcG9uZW50c09mVHlwZS5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChjcmFmdGluZ1Jlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkoZXNzZW5jZXM6IHN0cmluZ1tdLCBlc3NlbmNlSWRlbnRpdGllczogTWFwPHN0cmluZywgbnVtYmVyPik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGVzc2VuY2VzLm1hcCgoZXNzZW5jZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXNzZW5jZUlkZW50aXRpZXMuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGtub3duIGVzc2VuY2UgaXMgcmVnaXN0ZXJlZCBmb3IgdGhlIHNsdWcgJyR7ZXNzZW5jZX0nLiBLbm93biBlc3NlbmNlcyBhcmU6ICR7QXJyYXkuZnJvbShlc3NlbmNlSWRlbnRpdGllcy5rZXlzKCkpLmpvaW4oJywgJyl9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGVzc2VuY2VJZGVudGl0aWVzLmdldChlc3NlbmNlKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCAqIHJpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzc2lnbkVzc2VuY2VJZGVudGl0aWVzKGVzc2VuY2VzOiBzdHJpbmdbXSk6IE1hcDxzdHJpbmcsIG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUVzc2VuY2VzID0gZXNzZW5jZXMuZmlsdGVyKChlc3NlbmNlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGNvbGxlY3Rpb246IHN0cmluZ1tdKSA9PiBjb2xsZWN0aW9uLmluZGV4T2YoZXNzZW5jZSkgPT09IGluZGV4KTtcclxuICAgICAgICBjb25zdCBwcmltZXMgPSB0aGlzLmdlbmVyYXRlUHJpbWVzKHVuaXF1ZUVzc2VuY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdW5pcXVlRXNzZW5jZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiBlc3NlbmNlSWRlbnRpdGllcy5zZXQodmFsdWUsIHByaW1lc1tpbmRleF0pKTtcclxuICAgICAgICByZXR1cm4gZXNzZW5jZUlkZW50aXRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVByaW1lcyhxdWFudGl0eTogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGlmIChxdWFudGl0eSA8PSBGYWJyaWNhdGlvbkhlbHBlci5wcmltZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkhlbHBlci5wcmltZXMuc2xpY2UoMCwgcXVhbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY2FuZGlkYXRlID0gOTg7XHJcbiAgICAgICAgd2hpbGUgKEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcy5sZW5ndGggPCBxdWFudGl0eSkge1xyXG4gICAgICAgICAgICBpZiAoRmFicmljYXRpb25IZWxwZXIucHJpbWVzLmV2ZXJ5KChwKSA9PiBjYW5kaWRhdGUgJSBwKSkge1xyXG4gICAgICAgICAgICAgICAgRmFicmljYXRpb25IZWxwZXIucHJpbWVzLnB1c2goY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYW5kaWRhdGUrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uSGVscGVyLnByaW1lcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzQ29tcG9uZW50Q29tYmluYXRpb25zKGF2YWlsYWJsZUluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10sIGxpbWl0OiBudW1iZXIpOiBDcmFmdGluZ0NvbXBvbmVudFtdW10ge1xyXG4gICAgICAgIGNvbnN0IGRlbm9ybWFsaXplZENvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10gPSBbXTtcclxuICAgICAgICBhdmFpbGFibGVJbmdyZWRpZW50cy5mb3JFYWNoKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlaWxpbmcgPSBpbmdyZWRpZW50LnF1YW50aXR5IDwgbGltaXQgPyBpbmdyZWRpZW50LnF1YW50aXR5IDogbGltaXQ7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VpbGluZzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkZW5vcm1hbGl6ZWRDb21wb25lbnRzLnB1c2goaW5ncmVkaWVudC5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY29tYmluYXRpb25zOiBDcmFmdGluZ0NvbXBvbmVudFtdW10gPSBbXTtcclxuICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gTWF0aC5wb3coMiwgZGVub3JtYWxpemVkQ29tcG9uZW50cy5sZW5ndGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb21iaW5hdGlvbjogQ3JhZnRpbmdDb21wb25lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRlbm9ybWFsaXplZENvbXBvbmVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpICYgTWF0aC5wb3coMiwgaikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21iaW5hdGlvbi5wdXNoKGRlbm9ybWFsaXplZENvbXBvbmVudHNbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb21iaW5hdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb21iaW5hdGlvbnMucHVzaChjb21iaW5hdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbWJpbmF0aW9ucy5zb3J0KChsZWZ0LCByaWdodCkgPT4gbGVmdC5sZW5ndGggLSByaWdodC5sZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYXBwbHlSZXN1bHRzKGFjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uW10sIGludmVudG9yeTogSW52ZW50b3J5KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5jdXN0b21JdGVtRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnZlbnRvcnkuYWRkKGFjdGlvbi5pdGVtVHlwZSwgYWN0aW9uLnF1YW50aXR5LCBhY3Rpb24uY3VzdG9tSXRlbURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGludmVudG9yeS5hZGQoYWN0aW9uLml0ZW1UeXBlLCBhY3Rpb24ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRmFicmljYXRpb25BY3Rpb25UeXBlLlJFTU9WRTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnZlbnRvcnkucmVtb3ZlKGFjdGlvbi5pdGVtVHlwZSwgYWN0aW9uLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgQ3JhZnRpbmcgQWN0aW9uIFR5cGUgJHthY3Rpb24uYWN0aW9uVHlwZX0gaXMgbm90IHN1cHBvcnRlZC4gQWxsb3dhYmxlIHZhbHVlcyBhcmU6IEFERCwgUkVNT1ZFLiBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7RmFicmljYXRpb25IZWxwZXJ9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationHelper.ts\n");

/***/ }),

/***/ "./src/scripts/core/FabricationOutcome.ts":
/*!************************************************!*\
  !*** ./src/scripts/core/FabricationOutcome.ts ***!
  \************************************************/
/*! exports provided: FabricationOutcome, OutcomeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricationOutcome\", function() { return FabricationOutcome; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OutcomeType\", function() { return OutcomeType; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n\r\nvar OutcomeType;\r\n(function (OutcomeType) {\r\n    OutcomeType[\"SUCCESS\"] = \"SUCCESS\";\r\n    OutcomeType[\"FAILURE\"] = \"FAILURE\";\r\n})(OutcomeType || (OutcomeType = {}));\r\nclass FabricationOutcome {\r\n    constructor(builder) {\r\n        this._type = builder.type;\r\n        this._recipe = builder.recipe;\r\n        this._actions = builder.actions;\r\n        this._failureDetails = builder.failureDetails;\r\n    }\r\n    static builder() {\r\n        return new FabricationOutcome.Builder();\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    get title() {\r\n        switch (this.type) {\r\n            case OutcomeType.SUCCESS:\r\n                return 'Crafting success ';\r\n            case OutcomeType.FAILURE:\r\n                return 'Crafting failure ';\r\n        }\r\n    }\r\n    get description() {\r\n        switch (this.type) {\r\n            case OutcomeType.SUCCESS:\r\n                if (this._recipe) {\r\n                    return `Successfully crafted \"${this._recipe.name}\". `;\r\n                }\r\n                else {\r\n                    return 'Your alchemical combination worked. ';\r\n                }\r\n            case OutcomeType.FAILURE:\r\n                if (this._recipe) {\r\n                    return `Failed to craft ${this._recipe.name}. `;\r\n                }\r\n                else {\r\n                    return 'Your alchemical combination failed to produce any results. ';\r\n                }\r\n        }\r\n    }\r\n    get failureDetails() {\r\n        return this._failureDetails;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n    get removedComponents() {\r\n        return this._actions.filter((action) => action.actionType === _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE)\r\n            .map((action) => `${action.quantity} ${action.itemType.name}`);\r\n    }\r\n    get addedItems() {\r\n        return this._actions.filter((action) => action.actionType === _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD);\r\n    }\r\n}\r\n(function (FabricationOutcome) {\r\n    class Builder {\r\n        build() {\r\n            return new FabricationOutcome(this);\r\n        }\r\n        withOutcomeType(value) {\r\n            this.type = value;\r\n            return this;\r\n        }\r\n        withRecipe(value) {\r\n            this.recipe = value;\r\n            return this;\r\n        }\r\n        withActions(value) {\r\n            this.actions = value;\r\n            return this;\r\n        }\r\n        withFailureDetails(value) {\r\n            this.failureDetails = value;\r\n            return this;\r\n        }\r\n    }\r\n    FabricationOutcome.Builder = Builder;\r\n})(FabricationOutcome || (FabricationOutcome = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZS50cz9jMDEwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQTZFO0FBRzdFLElBQUssV0FHSjtBQUhELFdBQUssV0FBVztJQUNaLGtDQUFtQjtJQUNuQixrQ0FBbUI7QUFDdkIsQ0FBQyxFQUhJLFdBQVcsS0FBWCxXQUFXLFFBR2Y7QUFFRCxNQUFNLGtCQUFrQjtJQU9wQixZQUFZLE9BQW1DO1FBQzNDLElBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDOUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQztJQUNsRCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVDLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNmLEtBQUssV0FBVyxDQUFDLE9BQU87Z0JBQ3BCLE9BQU8sbUJBQW1CLENBQUM7WUFDL0IsS0FBSyxXQUFXLENBQUMsT0FBTztnQkFDcEIsT0FBTyxtQkFBbUIsQ0FBQztTQUNsQztJQUNMLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZixLQUFLLFdBQVcsQ0FBQyxPQUFPO2dCQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQ2QsT0FBTyx5QkFBeUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQztpQkFDMUQ7cUJBQU07b0JBQ0gsT0FBTyxzQ0FBc0MsQ0FBQztpQkFDakQ7WUFDTCxLQUFLLFdBQVcsQ0FBQyxPQUFPO2dCQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQ2QsT0FBTyxtQkFBbUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQztpQkFDbkQ7cUJBQU07b0JBQ0gsT0FBTyw2REFBNkQsQ0FBQztpQkFDeEU7U0FDUjtJQUNMLENBQUM7SUFFRCxJQUFJLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksT0FBTztRQUNQLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFDakIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQW9DLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEtBQUssd0VBQXFCLENBQUMsTUFBTSxDQUFDO2FBQ3BILEdBQUcsQ0FBQyxDQUFDLE1BQW9DLEVBQUUsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLFFBQVEsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFFLENBQUM7SUFDdEcsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFvQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLHdFQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNILENBQUM7Q0FFSjtBQUVELFdBQVUsa0JBQWtCO0lBRXhCLE1BQWEsT0FBTztRQU9ULEtBQUs7WUFDUixPQUFPLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVNLGVBQWUsQ0FBQyxLQUFrQjtZQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sVUFBVSxDQUFDLEtBQWE7WUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFdBQVcsQ0FBQyxLQUFxQztZQUNwRCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sa0JBQWtCLENBQUMsS0FBYTtZQUNuQyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztZQUM1QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBQ0o7SUE5QlksMEJBQU8sVUE4Qm5CO0FBRUwsQ0FBQyxFQWxDUyxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBa0MzQjtBQUV1QyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvRmFicmljYXRpb25PdXRjb21lLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbiwgRmFicmljYXRpb25BY3Rpb25UeXBlfSBmcm9tIFwiLi9GYWJyaWNhdGlvbkFjdGlvblwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4vUmVjaXBlXCI7XHJcblxyXG5lbnVtIE91dGNvbWVUeXBlIHtcclxuICAgIFNVQ0NFU1MgPSAnU1VDQ0VTUycsXHJcbiAgICBGQUlMVVJFID0gJ0ZBSUxVUkUnXHJcbn1cclxuXHJcbmNsYXNzIEZhYnJpY2F0aW9uT3V0Y29tZSB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdHlwZTogT3V0Y29tZVR5cGU7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWNpcGU6IFJlY2lwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdGlvbnM6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZhaWx1cmVEZXRhaWxzOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogRmFicmljYXRpb25PdXRjb21lLkJ1aWxkZXIpIHtcclxuICAgICAgICB0aGlzLl90eXBlID0gYnVpbGRlci50eXBlO1xyXG4gICAgICAgIHRoaXMuX3JlY2lwZSA9IGJ1aWxkZXIucmVjaXBlO1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMgPSBidWlsZGVyLmFjdGlvbnM7XHJcbiAgICAgICAgdGhpcy5fZmFpbHVyZURldGFpbHMgPSBidWlsZGVyLmZhaWx1cmVEZXRhaWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcigpOiBGYWJyaWNhdGlvbk91dGNvbWUuQnVpbGRlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGYWJyaWNhdGlvbk91dGNvbWUuQnVpbGRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCk6IE91dGNvbWVUeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGl0bGUoKTogc3RyaW5nIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIE91dGNvbWVUeXBlLlNVQ0NFU1M6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0NyYWZ0aW5nIHN1Y2Nlc3MgJztcclxuICAgICAgICAgICAgY2FzZSBPdXRjb21lVHlwZS5GQUlMVVJFOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdDcmFmdGluZyBmYWlsdXJlICc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgT3V0Y29tZVR5cGUuU1VDQ0VTUzpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWNpcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFN1Y2Nlc3NmdWxseSBjcmFmdGVkIFwiJHt0aGlzLl9yZWNpcGUubmFtZX1cIi4gYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdZb3VyIGFsY2hlbWljYWwgY29tYmluYXRpb24gd29ya2VkLiAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE91dGNvbWVUeXBlLkZBSUxVUkU6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVjaXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBGYWlsZWQgdG8gY3JhZnQgJHt0aGlzLl9yZWNpcGUubmFtZX0uIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnWW91ciBhbGNoZW1pY2FsIGNvbWJpbmF0aW9uIGZhaWxlZCB0byBwcm9kdWNlIGFueSByZXN1bHRzLiAnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgZmFpbHVyZURldGFpbHMoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFpbHVyZURldGFpbHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGlvbnMoKTogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVtb3ZlZENvbXBvbmVudHMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25zLmZpbHRlcigoYWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+KSA9PiBhY3Rpb24uYWN0aW9uVHlwZSA9PT0gRmFicmljYXRpb25BY3Rpb25UeXBlLlJFTU9WRSlcclxuICAgICAgICAgICAgLm1hcCgoYWN0aW9uOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+KSA9PiBgJHthY3Rpb24ucXVhbnRpdHl9ICR7YWN0aW9uLml0ZW1UeXBlLm5hbWV9YCApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhZGRlZEl0ZW1zKCk6IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT5bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbnMuZmlsdGVyKChhY3Rpb246IEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YT4pID0+IGFjdGlvbi5hY3Rpb25UeXBlID09PSBGYWJyaWNhdGlvbkFjdGlvblR5cGUuQUREKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBGYWJyaWNhdGlvbk91dGNvbWUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHR5cGU6IE91dGNvbWVUeXBlO1xyXG4gICAgICAgIHB1YmxpYyByZWNpcGU6IFJlY2lwZTtcclxuICAgICAgICBwdWJsaWMgYWN0aW9uczogRmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPltdO1xyXG4gICAgICAgIHB1YmxpYyBmYWlsdXJlRGV0YWlsczogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogRmFicmljYXRpb25PdXRjb21lIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWJyaWNhdGlvbk91dGNvbWUodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aE91dGNvbWVUeXBlKHZhbHVlOiBPdXRjb21lVHlwZSk6IEJ1aWxkZXIge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aFJlY2lwZSh2YWx1ZTogUmVjaXBlKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjaXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhBY3Rpb25zKHZhbHVlOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10pOiBCdWlsZGVyIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWlsdXJlRGV0YWlscyh2YWx1ZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZURldGFpbHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtGYWJyaWNhdGlvbk91dGNvbWUsIE91dGNvbWVUeXBlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/FabricationOutcome.ts\n");

/***/ }),

/***/ "./src/scripts/core/Fabricator.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Fabricator.ts ***!
  \****************************************/
/*! exports provided: Fabricator, AlchemySpecification */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fabricator\", function() { return Fabricator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemySpecification\", function() { return AlchemySpecification; });\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationHelper */ \"./src/scripts/core/FabricationHelper.ts\");\n/* harmony import */ var _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _error_AlchemyError__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../error/AlchemyError */ \"./src/scripts/error/AlchemyError.ts\");\n/* harmony import */ var _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error/CraftingError */ \"./src/scripts/error/CraftingError.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar EssenceMatchType;\r\n(function (EssenceMatchType) {\r\n    EssenceMatchType[\"EXACT\"] = \"EXACT\";\r\n    EssenceMatchType[\"SUPERSET\"] = \"SUPERSET\";\r\n    EssenceMatchType[\"NONE\"] = \"NONE\";\r\n})(EssenceMatchType || (EssenceMatchType = {}));\r\nclass CraftingComponentCombination {\r\n    constructor(components, essenceIdentities) {\r\n        this._essenceIdentities = new Map();\r\n        this._components = [];\r\n        this._components = components;\r\n        this._essenceIdentities = essenceIdentities;\r\n        this._combinationIdentity = components.map((component) => _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(component.essences, essenceIdentities))\r\n            .reduce((left, right) => left * right, 1);\r\n    }\r\n    get components() {\r\n        return this._components;\r\n    }\r\n    get combinationIdentity() {\r\n        return this._combinationIdentity;\r\n    }\r\n    essenceMatchType(requiredEssences) {\r\n        const requiredEssenceCombinationIdentity = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].essenceCombinationIdentity(requiredEssences, this._essenceIdentities);\r\n        if (requiredEssenceCombinationIdentity === this._combinationIdentity) {\r\n            return EssenceMatchType.EXACT;\r\n        }\r\n        if (requiredEssenceCombinationIdentity > this._combinationIdentity) {\r\n            return EssenceMatchType.NONE;\r\n        }\r\n        const testResult = this._combinationIdentity % requiredEssenceCombinationIdentity;\r\n        if (testResult === 0) {\r\n            return EssenceMatchType.SUPERSET;\r\n        }\r\n        return EssenceMatchType.NONE;\r\n    }\r\n}\r\nclass AlchemySpecification {\r\n    constructor(essenceCombiner, baseComponent) {\r\n        if (!essenceCombiner || !baseComponent) {\r\n            throw new Error('Alchemy Specifications require an Essence Combiner and a Base Crafting Component. ');\r\n        }\r\n        this._essenceCombiner = essenceCombiner;\r\n        this._baseComponent = baseComponent;\r\n    }\r\n    get essenceCombiner() {\r\n        return this._essenceCombiner;\r\n    }\r\n    get baseComponent() {\r\n        return this._baseComponent;\r\n    }\r\n    getBaseItemData() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._baseItemData) {\r\n                return this._baseItemData;\r\n            }\r\n            const compendium = game.packs.get(this.baseComponent.systemId);\r\n            // @ts-ignore\r\n            const entity = yield compendium.getEntity(this.baseComponent.partId);\r\n            this._baseItemData = entity.data.data;\r\n            return this._baseItemData;\r\n        });\r\n    }\r\n}\r\nclass Fabricator {\r\n    constructor(alchemySpecification) {\r\n        this._alchemySpecification = alchemySpecification;\r\n    }\r\n    fabricateFromComponents(inventory, components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._alchemySpecification) {\r\n                throw new Error(`No Alchemy Specification has been provided for this system. You may only craft from Recipes. `);\r\n            }\r\n            const removeSuppliedComponents = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(components, _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE);\r\n            try {\r\n                const baseItemData = yield this._alchemySpecification.getBaseItemData();\r\n                const alchemicallyModifiedItemData = this._alchemySpecification.essenceCombiner.combine(components, duplicate(baseItemData));\r\n                const resultantComponentType = this._alchemySpecification.baseComponent;\r\n                const addComponent = _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                    .withActionType(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].ADD)\r\n                    .withQuantity(1)\r\n                    .withCustomItemData(alchemicallyModifiedItemData)\r\n                    .withItemType(resultantComponentType)\r\n                    .build();\r\n                const actions = removeSuppliedComponents.concat(addComponent);\r\n                yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(actions, inventory);\r\n                return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                    .withActions(actions)\r\n                    .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS)\r\n                    .build();\r\n            }\r\n            catch (error) {\r\n                if (error instanceof _error_AlchemyError__WEBPACK_IMPORTED_MODULE_4__[\"AlchemyError\"]) {\r\n                    const alchemyError = error;\r\n                    const actions = [];\r\n                    if (alchemyError.componentsConsumed) {\r\n                        actions.push(...removeSuppliedComponents);\r\n                        yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(removeSuppliedComponents, inventory);\r\n                    }\r\n                    return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                        .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].FAILURE)\r\n                        .withFailureDetails(alchemyError.message)\r\n                        .withActions(actions)\r\n                        .build();\r\n                }\r\n                throw error;\r\n            }\r\n        });\r\n    }\r\n    fabricateFromRecipe(inventory, recipe) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const ownedComponents = inventory.components.filter((record) => record.fabricateItem.systemId === recipe.systemId);\r\n            const input = [];\r\n            const namedIngredientsByPartId = new Map();\r\n            if (recipe.ingredients && recipe.ingredients.length > 0) {\r\n                recipe.ingredients.forEach((ingredient) => {\r\n                    namedIngredientsByPartId.set(ingredient.partId, ingredient);\r\n                    if (ingredient.consumed) {\r\n                        input.push(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationAction\"].builder()\r\n                            .withQuantity(ingredient.quantity)\r\n                            .withItemType(ingredient.component)\r\n                            .withActionType(_FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE)\r\n                            .build());\r\n                    }\r\n                });\r\n            }\r\n            if (recipe.essences && recipe.essences.length > 0) {\r\n                const availableIngredients = ownedComponents.map((componentRecord) => {\r\n                    if (namedIngredientsByPartId.has(componentRecord.fabricateItem.partId)) {\r\n                        const namedIngredient = namedIngredientsByPartId.get(componentRecord.fabricateItem.partId);\r\n                        const availableQuantityForEssenceExtraction = componentRecord.totalQuantity > namedIngredient.quantity ? componentRecord.totalQuantity - namedIngredient.quantity : 0;\r\n                        return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                            .isConsumed(namedIngredient.consumed)\r\n                            .withComponent(componentRecord.fabricateItem)\r\n                            .withQuantity(availableQuantityForEssenceExtraction)\r\n                            .build();\r\n                    }\r\n                    return _Ingredient__WEBPACK_IMPORTED_MODULE_3__[\"Ingredient\"].builder()\r\n                        .isConsumed(true)\r\n                        .withComponent(componentRecord.fabricateItem)\r\n                        .withQuantity(componentRecord.totalQuantity)\r\n                        .build();\r\n                });\r\n                if (!this.isCraftableFromEssencesInIngredients(recipe, availableIngredients)) {\r\n                    throw new _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__[\"CraftingError\"](`You don't have enough ingredients available to craft ${recipe.name}. Go shopping, try foraging or even just asking your GM nicely. `, false);\r\n                }\r\n                const craftingComponentCombinations = this.analyzeCombinationsForEssences(availableIngredients, recipe.essences);\r\n                const selectedCombination = this.selectBestCombinationFrom(recipe, craftingComponentCombinations);\r\n                if (!selectedCombination || selectedCombination.length === 0) {\r\n                    throw new _error_CraftingError__WEBPACK_IMPORTED_MODULE_5__[\"CraftingError\"](`You don't have enough ingredients available to craft ${recipe.name}. Go shopping, try foraging or even just asking your GM nicely. `, false);\r\n                }\r\n                const consumedComponents = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asCraftingResults(selectedCombination, _FabricationAction__WEBPACK_IMPORTED_MODULE_0__[\"FabricationActionType\"].REMOVE);\r\n                input.push(...consumedComponents);\r\n            }\r\n            const output = recipe.results;\r\n            const actions = output.concat(input);\r\n            yield _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].applyResults(actions, inventory);\r\n            return _FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"FabricationOutcome\"].builder()\r\n                .withRecipe(recipe)\r\n                .withActions(actions)\r\n                .withOutcomeType(_FabricationOutcome__WEBPACK_IMPORTED_MODULE_2__[\"OutcomeType\"].SUCCESS)\r\n                .build();\r\n        });\r\n    }\r\n    analyzeCombinationsForEssences(availableIngredients, requiredEssences) {\r\n        const usableIngredients = availableIngredients.filter((ingredient) => ingredient.component.essences.filter((essence) => requiredEssences.includes(essence)).length > 0);\r\n        const uniqueEssencesInUsableComponents = usableIngredients.map((ingredient) => ingredient.component.essences)\r\n            .reduce((left, right) => left.concat(right), [])\r\n            .filter(((essence, index, essences) => essences.indexOf(essence) === index));\r\n        const essenceIdentities = _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].assignEssenceIdentities(uniqueEssencesInUsableComponents);\r\n        return _FabricationHelper__WEBPACK_IMPORTED_MODULE_1__[\"FabricationHelper\"].asComponentCombinations(usableIngredients, requiredEssences.length)\r\n            .map((combination) => {\r\n            return new CraftingComponentCombination(combination, essenceIdentities);\r\n        });\r\n    }\r\n    selectBestCombinationFrom(recipe, combinations) {\r\n        const exactMatches = [];\r\n        const supersets = [];\r\n        combinations.forEach((combination) => {\r\n            const essenceMatchType = combination.essenceMatchType(recipe.essences);\r\n            switch (essenceMatchType) {\r\n                case EssenceMatchType.EXACT:\r\n                    exactMatches.push(combination);\r\n                    break;\r\n                case EssenceMatchType.SUPERSET:\r\n                    supersets.push(combination);\r\n                    break;\r\n            }\r\n        });\r\n        const selectFewestComponents = (combinations) => {\r\n            return combinations.sort((left, right) => left.components.length - right.components.length)\r\n                .find(() => true)\r\n                .components;\r\n        };\r\n        if (exactMatches.length === 0 && supersets.length === 0) {\r\n            return [];\r\n        }\r\n        return exactMatches.length > 0 ? selectFewestComponents(exactMatches) : selectFewestComponents(supersets);\r\n    }\r\n    filterCraftableRecipesFor(craftingComponents, recipes) {\r\n        return recipes.filter((recipe) => this.isCraftableFromEssencesInComponents(recipe, craftingComponents));\r\n    }\r\n    isCraftableFromEssencesInComponents(recipe, components) {\r\n        const essences = components.map((component) => component.essences)\r\n            .reduce((left, right) => left.concat(right), []);\r\n        return essences.every((essence) => recipe.essences.includes(essence)\r\n            && (essences.filter((essence) => essence === essence).length >= recipe.essences.filter((essence) => essence === essence).length));\r\n    }\r\n    isCraftableFromEssencesInIngredients(recipe, ingredients) {\r\n        const essenceCount = ingredients.filter((ingredient) => ingredient.component.essences.some((essence) => recipe.essences.includes(essence)))\r\n            .map((ingredient) => new Map(ingredient.component.essences.map((essence) => [essence, ingredient.quantity])))\r\n            .reduce((left, right) => {\r\n            const allEssenceKeys = Array.from(left.keys()).concat(Array.from(right.keys()))\r\n                .filter(((essence, index, mergedKeys) => mergedKeys.indexOf(essence) === index));\r\n            const merged = new Map();\r\n            allEssenceKeys.forEach((essence) => {\r\n                const leftCount = left.has(essence) ? left.get(essence) : 0;\r\n                const rightCount = right.has(essence) ? right.get(essence) : 0;\r\n                merged.set(essence, leftCount + rightCount);\r\n            });\r\n            return merged;\r\n        }, new Map());\r\n        for (let i = 0; i < recipe.essences.length; i++) {\r\n            const essence = recipe.essences[i];\r\n            if (!essenceCount.has(essence)) {\r\n                return false;\r\n            }\r\n            const count = essenceCount.get(essence);\r\n            if (count <= 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0b3IudHM/Zjk1OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDNkU7QUFFdkI7QUFFZTtBQUc3QjtBQUNXO0FBQ0U7QUFFckQsSUFBSyxnQkFJSjtBQUpELFdBQUssZ0JBQWdCO0lBQ2pCLG1DQUFlO0lBQ2YseUNBQXFCO0lBQ3JCLGlDQUFhO0FBQ2pCLENBQUMsRUFKSSxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBSXBCO0FBRUQsTUFBTSw0QkFBNEI7SUFNOUIsWUFBWSxVQUErQixFQUFFLGlCQUFzQztRQUpsRSx1QkFBa0IsR0FBd0IsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNwRCxnQkFBVyxHQUF3QixFQUFFLENBQUM7UUFJbkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGlCQUFpQixDQUFDO1FBQzVDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBNEIsRUFBRSxFQUFFLENBQUMsb0VBQWlCLENBQUMsMEJBQTBCLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO2FBQzVKLE1BQU0sQ0FBQyxDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDO0lBRUQsSUFBSSxtQkFBbUI7UUFDbkIsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDckMsQ0FBQztJQUVNLGdCQUFnQixDQUFDLGdCQUEwQjtRQUM5QyxNQUFNLGtDQUFrQyxHQUFHLG9FQUFpQixDQUFDLDBCQUEwQixDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxrQkFBa0Is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Q0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNwRSxNQUFNLFVBQVUsR0FBVyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZFLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLFNBQVMsR0FBRyxVQUFVLENBQUMsQ0FBQztZQUNoRCxDQUFDLENBQUMsQ0FBQztZQUNILE9BQU8sTUFBTSxDQUFDO1FBQ2xCLENBQUMsRUFBRSxJQUFJLEdBQUcsRUFBa0IsQ0FBQyxDQUFDO1FBQ2xDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxNQUFNLE9BQU8sR0FBVyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUM1QixPQUFPLEtBQUssQ0FBQzthQUNoQjtZQUNELE1BQU0sS0FBSyxHQUFXLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDaEQsSUFBSSxLQUFLLElBQUksQ0FBQyxFQUFFO2dCQUNaLE9BQU8sS0FBSyxDQUFDO2FBQ2hCO1NBQ0o7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBRUo7QUFFeUMiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0ZhYnJpY2F0b3IudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4vUmVjaXBlXCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb24sIEZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4vQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkhlbHBlcn0gZnJvbSBcIi4vRmFicmljYXRpb25IZWxwZXJcIjtcclxuaW1wb3J0IHtFc3NlbmNlQ29tYmluZXJ9IGZyb20gXCIuL0Vzc2VuY2VDb21iaW5lclwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uT3V0Y29tZSwgT3V0Y29tZVR5cGV9IGZyb20gXCIuL0ZhYnJpY2F0aW9uT3V0Y29tZVwiO1xyXG5pbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7SW52ZW50b3J5UmVjb3JkfSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlSZWNvcmRcIjtcclxuaW1wb3J0IHtJbmdyZWRpZW50fSBmcm9tIFwiLi9JbmdyZWRpZW50XCI7XHJcbmltcG9ydCB7QWxjaGVteUVycm9yfSBmcm9tIFwiLi4vZXJyb3IvQWxjaGVteUVycm9yXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdFcnJvcn0gZnJvbSBcIi4uL2Vycm9yL0NyYWZ0aW5nRXJyb3JcIjtcclxuXHJcbmVudW0gRXNzZW5jZU1hdGNoVHlwZSB7XHJcbiAgICBFWEFDVCA9ICdFWEFDVCcsXHJcbiAgICBTVVBFUlNFVCA9ICdTVVBFUlNFVCcsXHJcbiAgICBOT05FID0gJ05PTkUnXHJcbn1cclxuXHJcbmNsYXNzIENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb24ge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Vzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tYmluYXRpb25JZGVudGl0eTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIGVzc2VuY2VJZGVudGl0aWVzOiBNYXA8c3RyaW5nLCBudW1iZXI+KSB7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XHJcbiAgICAgICAgdGhpcy5fZXNzZW5jZUlkZW50aXRpZXMgPSBlc3NlbmNlSWRlbnRpdGllcztcclxuICAgICAgICB0aGlzLl9jb21iaW5hdGlvbklkZW50aXR5ID0gY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQpID0+IEZhYnJpY2F0aW9uSGVscGVyLmVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5KGNvbXBvbmVudC5lc3NlbmNlcywgZXNzZW5jZUlkZW50aXRpZXMpKVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIpID0+IGxlZnQgKiByaWdodCwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudHMoKTogQ3JhZnRpbmdDb21wb25lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbWJpbmF0aW9uSWRlbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXNzZW5jZU1hdGNoVHlwZShyZXF1aXJlZEVzc2VuY2VzOiBzdHJpbmdbXSk6IEVzc2VuY2VNYXRjaFR5cGUge1xyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkgPSBGYWJyaWNhdGlvbkhlbHBlci5lc3NlbmNlQ29tYmluYXRpb25JZGVudGl0eShyZXF1aXJlZEVzc2VuY2VzLCB0aGlzLl9lc3NlbmNlSWRlbnRpdGllcyk7XHJcbiAgICAgICAgaWYgKHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHkgPT09IHRoaXMuX2NvbWJpbmF0aW9uSWRlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVzc2VuY2VNYXRjaFR5cGUuRVhBQ1Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXF1aXJlZEVzc2VuY2VDb21iaW5hdGlvbklkZW50aXR5ID4gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eSkge1xyXG4gICAgICAgICAgICByZXR1cm4gRXNzZW5jZU1hdGNoVHlwZS5OT05FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gdGhpcy5fY29tYmluYXRpb25JZGVudGl0eSAlIHJlcXVpcmVkRXNzZW5jZUNvbWJpbmF0aW9uSWRlbnRpdHk7XHJcbiAgICAgICAgaWYgKHRlc3RSZXN1bHQgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVzc2VuY2VNYXRjaFR5cGUuU1VQRVJTRVQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBFc3NlbmNlTWF0Y2hUeXBlLk5PTkU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBbGNoZW15U3BlY2lmaWNhdGlvbjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lc3NlbmNlQ29tYmluZXI6IEVzc2VuY2VDb21iaW5lcjxUPjtcclxuICAgIHByaXZhdGUgX2Jhc2VJdGVtRGF0YTogVDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jhc2VDb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5lcjogRXNzZW5jZUNvbWJpbmVyPFQ+LCBiYXNlQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgIGlmICghZXNzZW5jZUNvbWJpbmVyIHx8ICFiYXNlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQWxjaGVteSBTcGVjaWZpY2F0aW9ucyByZXF1aXJlIGFuIEVzc2VuY2UgQ29tYmluZXIgYW5kIGEgQmFzZSBDcmFmdGluZyBDb21wb25lbnQuICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lc3NlbmNlQ29tYmluZXIgPSBlc3NlbmNlQ29tYmluZXI7XHJcbiAgICAgICAgdGhpcy5fYmFzZUNvbXBvbmVudCA9IGJhc2VDb21wb25lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VDb21iaW5lcigpOiBFc3NlbmNlQ29tYmluZXI8VD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lc3NlbmNlQ29tYmluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJhc2VDb21wb25lbnQoKTogQ3JhZnRpbmdDb21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9iYXNlQ29tcG9uZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEJhc2VJdGVtRGF0YSgpOiBQcm9taXNlPFQ+IHtcclxuICAgICAgICBpZiAodGhpcy5fYmFzZUl0ZW1EYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlSXRlbURhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldCh0aGlzLmJhc2VDb21wb25lbnQuc3lzdGVtSWQpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBlbnRpdHk6IEVudGl0eTxUPiA9IGF3YWl0IGNvbXBlbmRpdW0uZ2V0RW50aXR5KHRoaXMuYmFzZUNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIHRoaXMuX2Jhc2VJdGVtRGF0YSA9IGVudGl0eS5kYXRhLmRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VJdGVtRGF0YTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRmFicmljYXRvcjxUIGV4dGVuZHMgSXRlbS5EYXRhPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hbGNoZW15U3BlY2lmaWNhdGlvbjogQWxjaGVteVNwZWNpZmljYXRpb248VD47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYWxjaGVteVNwZWNpZmljYXRpb24/OiBBbGNoZW15U3BlY2lmaWNhdGlvbjxUPikge1xyXG4gICAgICAgIHRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uID0gYWxjaGVteVNwZWNpZmljYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGZhYnJpY2F0ZUZyb21Db21wb25lbnRzKGludmVudG9yeTogSW52ZW50b3J5PFQ+LCBjb21wb25lbnRzOiBDcmFmdGluZ0NvbXBvbmVudFtdKTogUHJvbWlzZTxGYWJyaWNhdGlvbk91dGNvbWU+IHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FsY2hlbXlTcGVjaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gQWxjaGVteSBTcGVjaWZpY2F0aW9uIGhhcyBiZWVuIHByb3ZpZGVkIGZvciB0aGlzIHN5c3RlbS4gWW91IG1heSBvbmx5IGNyYWZ0IGZyb20gUmVjaXBlcy4gYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZW1vdmVTdXBwbGllZENvbXBvbmVudHM6IEZhYnJpY2F0aW9uQWN0aW9uPFQ+W10gPSBGYWJyaWNhdGlvbkhlbHBlci5hc0NyYWZ0aW5nUmVzdWx0cyhjb21wb25lbnRzLCBGYWJyaWNhdGlvbkFjdGlvblR5cGUuUkVNT1ZFKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYmFzZUl0ZW1EYXRhOiBUID0gYXdhaXQgdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24uZ2V0QmFzZUl0ZW1EYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsY2hlbWljYWxseU1vZGlmaWVkSXRlbURhdGE6IFQgPSB0aGlzLl9hbGNoZW15U3BlY2lmaWNhdGlvbi5lc3NlbmNlQ29tYmluZXIuY29tYmluZShjb21wb25lbnRzLCBkdXBsaWNhdGUoYmFzZUl0ZW1EYXRhKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFudENvbXBvbmVudFR5cGU6IENyYWZ0aW5nQ29tcG9uZW50ID0gdGhpcy5fYWxjaGVteVNwZWNpZmljYXRpb24uYmFzZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgY29uc3QgYWRkQ29tcG9uZW50OiBGYWJyaWNhdGlvbkFjdGlvbjxUPiA9IEZhYnJpY2F0aW9uQWN0aW9uLmJ1aWxkZXI8VD4oKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KDEpXHJcbiAgICAgICAgICAgICAgICAud2l0aEN1c3RvbUl0ZW1EYXRhKGFsY2hlbWljYWxseU1vZGlmaWVkSXRlbURhdGEpXHJcbiAgICAgICAgICAgICAgICAud2l0aEl0ZW1UeXBlKHJlc3VsdGFudENvbXBvbmVudFR5cGUpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0aW9uczogRmFicmljYXRpb25BY3Rpb248VD5bXSA9IHJlbW92ZVN1cHBsaWVkQ29tcG9uZW50cy5jb25jYXQoYWRkQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgYXdhaXQgRmFicmljYXRpb25IZWxwZXIuYXBwbHlSZXN1bHRzKGFjdGlvbnMsIGludmVudG9yeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWJyaWNhdGlvbk91dGNvbWUuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEFjdGlvbnMoYWN0aW9ucylcclxuICAgICAgICAgICAgICAgIC53aXRoT3V0Y29tZVR5cGUoT3V0Y29tZVR5cGUuU1VDQ0VTUylcclxuICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQWxjaGVteUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbGNoZW15RXJyb3I6IEFsY2hlbXlFcnJvciA9IDxBbGNoZW15RXJyb3I+ZXJyb3I7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zOiBGYWJyaWNhdGlvbkFjdGlvbjxUPltdID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxjaGVteUVycm9yLmNvbXBvbmVudHNDb25zdW1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnMucHVzaCguLi5yZW1vdmVTdXBwbGllZENvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IEZhYnJpY2F0aW9uSGVscGVyLmFwcGx5UmVzdWx0cyhyZW1vdmVTdXBwbGllZENvbXBvbmVudHMsIGludmVudG9yeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25PdXRjb21lLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3V0Y29tZVR5cGUoT3V0Y29tZVR5cGUuRkFJTFVSRSlcclxuICAgICAgICAgICAgICAgICAgICAud2l0aEZhaWx1cmVEZXRhaWxzKGFsY2hlbXlFcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQWN0aW9ucyhhY3Rpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZmFicmljYXRlRnJvbVJlY2lwZShpbnZlbnRvcnk6IEludmVudG9yeTxUPiwgcmVjaXBlOiBSZWNpcGUpOiBQcm9taXNlPEZhYnJpY2F0aW9uT3V0Y29tZT4ge1xyXG4gICAgICAgIGNvbnN0IG93bmVkQ29tcG9uZW50czogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PltdID0gaW52ZW50b3J5LmNvbXBvbmVudHMuZmlsdGVyKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHJlY29yZC5mYWJyaWNhdGVJdGVtLnN5c3RlbUlkID09PSByZWNpcGUuc3lzdGVtSWQpO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dDogRmFicmljYXRpb25BY3Rpb248VD5bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG5hbWVkSW5ncmVkaWVudHNCeVBhcnRJZDogTWFwPHN0cmluZywgSW5ncmVkaWVudD4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgaWYgKHJlY2lwZS5pbmdyZWRpZW50cyAmJiByZWNpcGUuaW5ncmVkaWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZWNpcGUuaW5ncmVkaWVudHMuZm9yRWFjaCgoaW5ncmVkaWVudDogSW5ncmVkaWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmFtZWRJbmdyZWRpZW50c0J5UGFydElkLnNldChpbmdyZWRpZW50LnBhcnRJZCwgaW5ncmVkaWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5ncmVkaWVudC5jb25zdW1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2goRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcjxUPigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoaW5ncmVkaWVudC5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhJdGVtVHlwZShpbmdyZWRpZW50LmNvbXBvbmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5SRU1PVkUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVjaXBlLmVzc2VuY2VzICYmIHJlY2lwZS5lc3NlbmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZUluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10gPSBvd25lZENvbXBvbmVudHMubWFwKChjb21wb25lbnRSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lZEluZ3JlZGllbnRzQnlQYXJ0SWQuaGFzKGNvbXBvbmVudFJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lZEluZ3JlZGllbnQ6IEluZ3JlZGllbnQgPSBuYW1lZEluZ3JlZGllbnRzQnlQYXJ0SWQuZ2V0KGNvbXBvbmVudFJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlUXVhbnRpdHlGb3JFc3NlbmNlRXh0cmFjdGlvbjogbnVtYmVyID0gY29tcG9uZW50UmVjb3JkLnRvdGFsUXVhbnRpdHkgPiBuYW1lZEluZ3JlZGllbnQucXVhbnRpdHkgPyBjb21wb25lbnRSZWNvcmQudG90YWxRdWFudGl0eSAtIG5hbWVkSW5ncmVkaWVudC5xdWFudGl0eSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEluZ3JlZGllbnQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pc0NvbnN1bWVkKG5hbWVkSW5ncmVkaWVudC5jb25zdW1lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhDb21wb25lbnQoY29tcG9uZW50UmVjb3JkLmZhYnJpY2F0ZUl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoYXZhaWxhYmxlUXVhbnRpdHlGb3JFc3NlbmNlRXh0cmFjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5ncmVkaWVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAuaXNDb25zdW1lZCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQ29tcG9uZW50KGNvbXBvbmVudFJlY29yZC5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aXRoUXVhbnRpdHkoY29tcG9uZW50UmVjb3JkLnRvdGFsUXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDcmFmdGFibGVGcm9tRXNzZW5jZXNJbkluZ3JlZGllbnRzKHJlY2lwZSwgYXZhaWxhYmxlSW5ncmVkaWVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ3JhZnRpbmdFcnJvcihgWW91IGRvbid0IGhhdmUgZW5vdWdoIGluZ3JlZGllbnRzIGF2YWlsYWJsZSB0byBjcmFmdCAke3JlY2lwZS5uYW1lfS4gR28gc2hvcHBpbmcsIHRyeSBmb3JhZ2luZyBvciBldmVuIGp1c3QgYXNraW5nIHlvdXIgR00gbmljZWx5LiBgLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbnMgPSB0aGlzLmFuYWx5emVDb21iaW5hdGlvbnNGb3JFc3NlbmNlcyhhdmFpbGFibGVJbmdyZWRpZW50cywgcmVjaXBlLmVzc2VuY2VzKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb21iaW5hdGlvbjogQ3JhZnRpbmdDb21wb25lbnRbXSA9IHRoaXMuc2VsZWN0QmVzdENvbWJpbmF0aW9uRnJvbShyZWNpcGUsIGNyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25zKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvbWJpbmF0aW9uIHx8IHNlbGVjdGVkQ29tYmluYXRpb24ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ3JhZnRpbmdFcnJvcihgWW91IGRvbid0IGhhdmUgZW5vdWdoIGluZ3JlZGllbnRzIGF2YWlsYWJsZSB0byBjcmFmdCAke3JlY2lwZS5uYW1lfS4gR28gc2hvcHBpbmcsIHRyeSBmb3JhZ2luZyBvciBldmVuIGp1c3QgYXNraW5nIHlvdXIgR00gbmljZWx5LiBgLCBmYWxzZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjb25zdW1lZENvbXBvbmVudHMgPSBGYWJyaWNhdGlvbkhlbHBlci5hc0NyYWZ0aW5nUmVzdWx0cyhzZWxlY3RlZENvbWJpbmF0aW9uLCBGYWJyaWNhdGlvbkFjdGlvblR5cGUuUkVNT1ZFKTtcclxuICAgICAgICAgICAgaW5wdXQucHVzaCguLi5jb25zdW1lZENvbXBvbmVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgb3V0cHV0OiBGYWJyaWNhdGlvbkFjdGlvbjxUPltdID0gcmVjaXBlLnJlc3VsdHM7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uczogRmFicmljYXRpb25BY3Rpb248VD5bXSA9IG91dHB1dC5jb25jYXQoaW5wdXQpO1xyXG5cclxuICAgICAgICBhd2FpdCBGYWJyaWNhdGlvbkhlbHBlci5hcHBseVJlc3VsdHMoYWN0aW9ucywgaW52ZW50b3J5KTtcclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25PdXRjb21lLmJ1aWxkZXIoKVxyXG4gICAgICAgICAgICAud2l0aFJlY2lwZShyZWNpcGUpXHJcbiAgICAgICAgICAgIC53aXRoQWN0aW9ucyhhY3Rpb25zKVxyXG4gICAgICAgICAgICAud2l0aE91dGNvbWVUeXBlKE91dGNvbWVUeXBlLlNVQ0NFU1MpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYW5hbHl6ZUNvbWJpbmF0aW9uc0ZvckVzc2VuY2VzKGF2YWlsYWJsZUluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10sIHJlcXVpcmVkRXNzZW5jZXM6IHN0cmluZ1tdKTogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdIHtcclxuICAgICAgICBjb25zdCB1c2FibGVJbmdyZWRpZW50czogSW5ncmVkaWVudFtdID0gYXZhaWxhYmxlSW5ncmVkaWVudHMuZmlsdGVyKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNvbXBvbmVudC5lc3NlbmNlcy5maWx0ZXIoKGVzc2VuY2U6IHN0cmluZykgPT4gcmVxdWlyZWRFc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSkubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgY29uc3QgdW5pcXVlRXNzZW5jZXNJblVzYWJsZUNvbXBvbmVudHM6IHN0cmluZ1tdID0gdXNhYmxlSW5ncmVkaWVudHMubWFwKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNvbXBvbmVudC5lc3NlbmNlcylcclxuICAgICAgICAgICAgLnJlZHVjZSgobGVmdDogc3RyaW5nW10scmlnaHQ6c3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKChlc3NlbmNlLCBpbmRleCwgZXNzZW5jZXMpID0+IGVzc2VuY2VzLmluZGV4T2YoZXNzZW5jZSkgPT09IGluZGV4KSk7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZUlkZW50aXRpZXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBGYWJyaWNhdGlvbkhlbHBlci5hc3NpZ25Fc3NlbmNlSWRlbnRpdGllcyh1bmlxdWVFc3NlbmNlc0luVXNhYmxlQ29tcG9uZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIEZhYnJpY2F0aW9uSGVscGVyLmFzQ29tcG9uZW50Q29tYmluYXRpb25zKHVzYWJsZUluZ3JlZGllbnRzLCByZXF1aXJlZEVzc2VuY2VzLmxlbmd0aClcclxuICAgICAgICAgICAgLm1hcCgoY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50W10pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uKGNvbWJpbmF0aW9uLCBlc3NlbmNlSWRlbnRpdGllcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3RCZXN0Q29tYmluYXRpb25Gcm9tKHJlY2lwZTogUmVjaXBlLCBjb21iaW5hdGlvbnM6IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb25bXSk6IENyYWZ0aW5nQ29tcG9uZW50W10ge1xyXG4gICAgICAgIGNvbnN0IGV4YWN0TWF0Y2hlczogQ3JhZnRpbmdDb21wb25lbnRDb21iaW5hdGlvbltdID0gW107XHJcbiAgICAgICAgY29uc3Qgc3VwZXJzZXRzOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uW10gPSBbXTtcclxuICAgICAgICBjb21iaW5hdGlvbnMuZm9yRWFjaCgoY29tYmluYXRpb246IENyYWZ0aW5nQ29tcG9uZW50Q29tYmluYXRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXNzZW5jZU1hdGNoVHlwZTogRXNzZW5jZU1hdGNoVHlwZSA9IGNvbWJpbmF0aW9uLmVzc2VuY2VNYXRjaFR5cGUocmVjaXBlLmVzc2VuY2VzKTtcclxuICAgICAgICAgICAgc3dpdGNoIChlc3NlbmNlTWF0Y2hUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVzc2VuY2VNYXRjaFR5cGUuRVhBQ1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhY3RNYXRjaGVzLnB1c2goY29tYmluYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFc3NlbmNlTWF0Y2hUeXBlLlNVUEVSU0VUOlxyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyc2V0cy5wdXNoKGNvbWJpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdEZld2VzdENvbXBvbmVudHMgPSAoY29tYmluYXRpb25zOiBDcmFmdGluZ0NvbXBvbmVudENvbWJpbmF0aW9uW10pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmF0aW9ucy5zb3J0KChsZWZ0LCByaWdodCkgPT4gbGVmdC5jb21wb25lbnRzLmxlbmd0aCAtIHJpZ2h0LmNvbXBvbmVudHMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jb21wb25lbnRzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGV4YWN0TWF0Y2hlcy5sZW5ndGggPT09IDAgJiYgc3VwZXJzZXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleGFjdE1hdGNoZXMubGVuZ3RoID4gMCA/IHNlbGVjdEZld2VzdENvbXBvbmVudHMoZXhhY3RNYXRjaGVzKSA6IHNlbGVjdEZld2VzdENvbXBvbmVudHMoc3VwZXJzZXRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZmlsdGVyQ3JhZnRhYmxlUmVjaXBlc0ZvcihjcmFmdGluZ0NvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10sIHJlY2lwZXM6IFJlY2lwZVtdKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlY2lwZXMuZmlsdGVyKChyZWNpcGU6IFJlY2lwZSkgPT4gdGhpcy5pc0NyYWZ0YWJsZUZyb21Fc3NlbmNlc0luQ29tcG9uZW50cyhyZWNpcGUsIGNyYWZ0aW5nQ29tcG9uZW50cykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDcmFmdGFibGVGcm9tRXNzZW5jZXNJbkNvbXBvbmVudHMocmVjaXBlOiBSZWNpcGUsIGNvbXBvbmVudHM6IENyYWZ0aW5nQ29tcG9uZW50W10pOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBlc3NlbmNlcyA9IGNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBjb21wb25lbnQuZXNzZW5jZXMpXHJcbiAgICAgICAgICAgIC5yZWR1Y2UoKGxlZnQ6IHN0cmluZ1tdLCByaWdodDogc3RyaW5nW10pID0+IGxlZnQuY29uY2F0KHJpZ2h0KSwgW10pO1xyXG4gICAgICAgIHJldHVybiBlc3NlbmNlcy5ldmVyeSgoZXNzZW5jZTogc3RyaW5nKSA9PiByZWNpcGUuZXNzZW5jZXMuaW5jbHVkZXMoZXNzZW5jZSlcclxuICAgICAgICAgICAgJiYgIChlc3NlbmNlcy5maWx0ZXIoKGVzc2VuY2U6c3RyaW5nKSA9PiBlc3NlbmNlID09PSBlc3NlbmNlKS5sZW5ndGggPj0gcmVjaXBlLmVzc2VuY2VzLmZpbHRlcigoZXNzZW5jZTpzdHJpbmcpID0+IGVzc2VuY2UgPT09IGVzc2VuY2UpLmxlbmd0aCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNDcmFmdGFibGVGcm9tRXNzZW5jZXNJbkluZ3JlZGllbnRzKHJlY2lwZTogUmVjaXBlLCBpbmdyZWRpZW50czogSW5ncmVkaWVudFtdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZXNzZW5jZUNvdW50OiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gaW5ncmVkaWVudHMuZmlsdGVyKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNvbXBvbmVudC5lc3NlbmNlcy5zb21lKChlc3NlbmNlOiBzdHJpbmcpID0+IHJlY2lwZS5lc3NlbmNlcy5pbmNsdWRlcyhlc3NlbmNlKSkpXHJcbiAgICAgICAgICAgIC5tYXAoKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IG5ldyBNYXAoaW5ncmVkaWVudC5jb21wb25lbnQuZXNzZW5jZXMubWFwKChlc3NlbmNlOiBzdHJpbmcpID0+IFtlc3NlbmNlLCBpbmdyZWRpZW50LnF1YW50aXR5XSkpKVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBNYXA8c3RyaW5nLCBudW1iZXI+LCByaWdodDogTWFwPHN0cmluZywgbnVtYmVyPikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsRXNzZW5jZUtleXM6IHN0cmluZ1tdID0gQXJyYXkuZnJvbShsZWZ0LmtleXMoKSkuY29uY2F0KEFycmF5LmZyb20ocmlnaHQua2V5cygpKSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCgoZXNzZW5jZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBtZXJnZWRLZXlzOiBzdHJpbmdbXSkgPT4gbWVyZ2VkS2V5cy5pbmRleE9mKGVzc2VuY2UpID09PSBpbmRleCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICAgICAgYWxsRXNzZW5jZUtleXMuZm9yRWFjaCgoZXNzZW5jZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdENvdW50OiBudW1iZXIgPSBsZWZ0Lmhhcyhlc3NlbmNlKSA/IGxlZnQuZ2V0KGVzc2VuY2UpIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodENvdW50OiBudW1iZXIgPSByaWdodC5oYXMoZXNzZW5jZSkgPyByaWdodC5nZXQoZXNzZW5jZSkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZC5zZXQoZXNzZW5jZSwgbGVmdENvdW50ICsgcmlnaHRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XHJcbiAgICAgICAgICAgIH0sIG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCkpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjaXBlLmVzc2VuY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2U6IHN0cmluZyA9IHJlY2lwZS5lc3NlbmNlc1tpXTtcclxuICAgICAgICAgICAgaWYgKCFlc3NlbmNlQ291bnQuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY291bnQ6IG51bWJlciA9IGVzc2VuY2VDb3VudC5nZXQoZXNzZW5jZSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0ZhYnJpY2F0b3IsIEFsY2hlbXlTcGVjaWZpY2F0aW9ufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/Fabricator.ts\n");

/***/ }),

/***/ "./src/scripts/core/GameSystemType.ts":
/*!********************************************!*\
  !*** ./src/scripts/core/GameSystemType.ts ***!
  \********************************************/
/*! exports provided: GameSystemType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameSystemType\", function() { return GameSystemType; });\nvar GameSystemType;\r\n(function (GameSystemType) {\r\n    GameSystemType[\"DND5E\"] = \"dnd5e\";\r\n})(GameSystemType || (GameSystemType = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzPzdkODciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLElBQVksY0FFWDtBQUZELFdBQVksY0FBYztJQUN0QixpQ0FBZTtBQUNuQixDQUFDLEVBRlcsY0FBYyxLQUFkLGNBQWMsUUFFekIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb3JlL0dhbWVTeXN0ZW1UeXBlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gR2FtZVN5c3RlbVR5cGUge1xyXG4gICAgRE5ENUUgPSAnZG5kNWUnXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/core/GameSystemType.ts\n");

/***/ }),

/***/ "./src/scripts/core/Ingredient.ts":
/*!****************************************!*\
  !*** ./src/scripts/core/Ingredient.ts ***!
  \****************************************/
/*! exports provided: Ingredient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ingredient\", function() { return Ingredient; });\n/* harmony import */ var _CraftingComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\nclass Ingredient extends _FabricateItem__WEBPACK_IMPORTED_MODULE_1__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.component.systemId, builder.component.partId, builder.component.imageUrl, builder.component.name);\r\n        this._component = builder.component;\r\n        this._quantity = builder.quantity;\r\n        this._consumed = builder.consumed;\r\n    }\r\n    static builder() {\r\n        return new Ingredient.Builder();\r\n    }\r\n    get component() {\r\n        return this._component;\r\n    }\r\n    get quantity() {\r\n        return this._quantity;\r\n    }\r\n    get consumed() {\r\n        return this._consumed;\r\n    }\r\n    equals(other) {\r\n        if (!other) {\r\n            return false;\r\n        }\r\n        return this.sharesType(other)\r\n            && (this.quantity === other.quantity)\r\n            && (this.consumed === other.consumed);\r\n    }\r\n    static fromFlags(flags, systemId) {\r\n        return this.builder()\r\n            .isConsumed(flags.consumed)\r\n            .withQuantity(flags.quantity)\r\n            .withComponent(_CraftingComponent__WEBPACK_IMPORTED_MODULE_0__[\"CraftingComponent\"].builder()\r\n            .withSystemId(systemId)\r\n            .withPartId(flags.partId)\r\n            .build())\r\n            .build();\r\n    }\r\n    static manyFromFlags(flags, systemId) {\r\n        return flags.map((flagData) => Ingredient.fromFlags(flagData, systemId));\r\n    }\r\n    isValid() {\r\n        return (this.quantity != null && this.quantity > 0)\r\n            && this.component.isValid();\r\n    }\r\n}\r\n(function (Ingredient) {\r\n    class Builder {\r\n        withComponent(value) {\r\n            this.component = value;\r\n            return this;\r\n        }\r\n        withQuantity(value) {\r\n            this.quantity = value;\r\n            return this;\r\n        }\r\n        isConsumed(value) {\r\n            this.consumed = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new Ingredient(this);\r\n        }\r\n    }\r\n    Ingredient.Builder = Builder;\r\n})(Ingredient || (Ingredient = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL0luZ3JlZGllbnQudHM/N2JjNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFzRDtBQUVSO0FBRTlDLE1BQU0sVUFBVyxTQUFRLDREQUFhO0lBS2xDLFlBQVksT0FBMkI7UUFDbkMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEgsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDdEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFPO1FBQ2pCLE9BQU8sSUFBSSxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDMUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFpQjtRQUMzQixJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO2VBQ3RCLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDO2VBQ2xDLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBK0IsRUFBRSxRQUFnQjtRQUNyRSxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUU7YUFDaEIsVUFBVSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDMUIsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7YUFDNUIsYUFBYSxDQUFDLG9FQUFpQixDQUFDLE9BQU8sRUFBRTthQUNyQyxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO2FBQ3hCLEtBQUssRUFBRSxDQUFDO2FBQ1osS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBaUMsRUFBRSxRQUFnQjtRQUMzRSxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBRyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7ZUFDL0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0NBQ0o7QUFFRCxXQUFVLFVBQVU7SUFDaEIsTUFBYSxPQUFPO1FBS1QsYUFBYSxDQUFDLEtBQXdCO1lBQ3pDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxZQUFZLENBQUMsS0FBYTtZQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sVUFBVSxDQUFDLEtBQWM7WUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLEtBQUs7WUFDUixPQUFPLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLENBQUM7S0FDSjtJQXZCWSxrQkFBTyxVQXVCbkI7QUFDTCxDQUFDLEVBekJTLFVBQVUsS0FBVixVQUFVLFFBeUJuQjtBQUVxQiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2NvcmUvSW5ncmVkaWVudC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7RmFicmljYXRlSW5ncmVkaWVudEZsYWdzfSBmcm9tIFwiLi4vZ2FtZS9Db21wZW5kaXVtRGF0YVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUl0ZW19IGZyb20gXCIuL0ZhYnJpY2F0ZUl0ZW1cIjtcclxuXHJcbmNsYXNzIEluZ3JlZGllbnQgZXh0ZW5kcyBGYWJyaWNhdGVJdGVtIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9xdWFudGl0eTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29uc3VtZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogSW5ncmVkaWVudC5CdWlsZGVyKSB7XHJcbiAgICAgICAgc3VwZXIoYnVpbGRlci5jb21wb25lbnQuc3lzdGVtSWQsIGJ1aWxkZXIuY29tcG9uZW50LnBhcnRJZCwgYnVpbGRlci5jb21wb25lbnQuaW1hZ2VVcmwsIGJ1aWxkZXIuY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudCA9IGJ1aWxkZXIuY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuX3F1YW50aXR5ID0gYnVpbGRlci5xdWFudGl0eTtcclxuICAgICAgICB0aGlzLl9jb25zdW1lZCA9IGJ1aWxkZXIuY29uc3VtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5ncmVkaWVudC5CdWlsZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBvbmVudCgpOiBDcmFmdGluZ0NvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcXVhbnRpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnN1bWVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25zdW1lZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiBJbmdyZWRpZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFvdGhlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYXJlc1R5cGUob3RoZXIpXHJcbiAgICAgICAgICAgICYmICh0aGlzLnF1YW50aXR5ID09PSBvdGhlci5xdWFudGl0eSlcclxuICAgICAgICAgICAgJiYgKHRoaXMuY29uc3VtZWQgPT09IG90aGVyLmNvbnN1bWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlSW5ncmVkaWVudEZsYWdzLCBzeXN0ZW1JZDogc3RyaW5nKTogSW5ncmVkaWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC5pc0NvbnN1bWVkKGZsYWdzLmNvbnN1bWVkKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGZsYWdzLnF1YW50aXR5KVxyXG4gICAgICAgICAgICAud2l0aENvbXBvbmVudChDcmFmdGluZ0NvbXBvbmVudC5idWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoc3lzdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAud2l0aFBhcnRJZChmbGFncy5wYXJ0SWQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBtYW55RnJvbUZsYWdzKGZsYWdzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSwgc3lzdGVtSWQ6IHN0cmluZyk6IEluZ3JlZGllbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIGZsYWdzLm1hcCgoZmxhZ0RhdGEpID0+IEluZ3JlZGllbnQuZnJvbUZsYWdzKGZsYWdEYXRhLCBzeXN0ZW1JZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnF1YW50aXR5IT0gbnVsbCAmJiB0aGlzLnF1YW50aXR5ID4gMClcclxuICAgICAgICAmJiB0aGlzLmNvbXBvbmVudC5pc1ZhbGlkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbmdyZWRpZW50IHtcclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuICAgICAgICBwdWJsaWMgY29tcG9uZW50ITogQ3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgcHVibGljIHF1YW50aXR5ITogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdW1lZCE6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoQ29tcG9uZW50KHZhbHVlOiBDcmFmdGluZ0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoUXVhbnRpdHkodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLnF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGlzQ29uc3VtZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zdW1lZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmdyZWRpZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgSW5ncmVkaWVudCB9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/core/Ingredient.ts\n");

/***/ }),

/***/ "./src/scripts/core/Recipe.ts":
/*!************************************!*\
  !*** ./src/scripts/core/Recipe.ts ***!
  \************************************/
/*! exports provided: Recipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Recipe\", function() { return Recipe; });\n/* harmony import */ var _Ingredient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ingredient */ \"./src/scripts/core/Ingredient.ts\");\n/* harmony import */ var _FabricationAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _FabricateItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FabricateItem */ \"./src/scripts/core/FabricateItem.ts\");\n\r\n\r\n\r\n\r\nclass Recipe extends _FabricateItem__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItem\"] {\r\n    constructor(builder) {\r\n        super(builder.systemId, builder.partId, builder.imageUrl, builder.name);\r\n        this._ingredients = builder.ingredients;\r\n        this._essences = builder.essences;\r\n        this._results = builder.results;\r\n    }\r\n    static fromFlags(flags, name, imageUrl) {\r\n        if (flags.type !== _game_CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE) {\r\n            throw new Error(`Error attempting to instantiate a Fabricate Recipe from ${flags.type} data. `);\r\n        }\r\n        return Recipe.builder()\r\n            .withName(name)\r\n            .withImageUrl(imageUrl)\r\n            .withPartId(flags.identity.partId)\r\n            .withEssences(flags.recipe.essences)\r\n            .withSystemId(flags.identity.systemId)\r\n            .withResults(_FabricationAction__WEBPACK_IMPORTED_MODULE_1__[\"FabricationAction\"].manyFromFlags(flags.recipe.results, flags.identity.systemId))\r\n            .withIngredients(_Ingredient__WEBPACK_IMPORTED_MODULE_0__[\"Ingredient\"].manyFromFlags(flags.recipe.ingredients, flags.identity.systemId))\r\n            .build();\r\n    }\r\n    get ingredients() {\r\n        return this._ingredients;\r\n    }\r\n    get results() {\r\n        return this._results;\r\n    }\r\n    get essences() {\r\n        return this._essences;\r\n    }\r\n    static builder() {\r\n        return new Recipe.Builder();\r\n    }\r\n    isValid() {\r\n        const nameValid = this.name != null && this.name.length > 0;\r\n        const idValid = this.partId && this.systemId;\r\n        let ingredientsValid = true;\r\n        this.ingredients.forEach((ingredient) => {\r\n            if (!ingredient.isValid()) {\r\n                ingredientsValid = false;\r\n            }\r\n        });\r\n        let resultsValid = true;\r\n        this.results.forEach((result) => {\r\n            if (!result.isValid()) {\r\n                resultsValid = false;\r\n            }\r\n        });\r\n        const essencesValid = this.essences !== null;\r\n        const hasInputSpecified = this.essences.length > 0 || this.ingredients.length > 0;\r\n        return nameValid && idValid && ingredientsValid && resultsValid && essencesValid && hasInputSpecified;\r\n    }\r\n}\r\n(function (Recipe) {\r\n    class Builder {\r\n        constructor() {\r\n            this.ingredients = [];\r\n            this.essences = [];\r\n            this.results = [];\r\n        }\r\n        build() {\r\n            return new Recipe(this);\r\n        }\r\n        withName(value) {\r\n            this.name = value;\r\n            return this;\r\n        }\r\n        withIngredient(value) {\r\n            this.ingredients.push(value);\r\n            return this;\r\n        }\r\n        withIngredients(value) {\r\n            this.ingredients.push(...value);\r\n            return this;\r\n        }\r\n        withEssence(value) {\r\n            this.essences.push(value);\r\n            return this;\r\n        }\r\n        withEssences(values) {\r\n            this.essences.push(...values);\r\n            return this;\r\n        }\r\n        withResult(value) {\r\n            this.results.push(value);\r\n            return this;\r\n        }\r\n        withResults(value) {\r\n            this.results = value;\r\n            return this;\r\n        }\r\n        withSystemId(value) {\r\n            this.systemId = value;\r\n            return this;\r\n        }\r\n        withPartId(value) {\r\n            this.partId = value;\r\n            return this;\r\n        }\r\n        withImageUrl(value) {\r\n            this.imageUrl = value;\r\n            return this;\r\n        }\r\n    }\r\n    Recipe.Builder = Builder;\r\n})(Recipe || (Recipe = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb3JlL1JlY2lwZS50cz81N2VkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF3QztBQUNjO0FBQzRCO0FBQ3BDO0FBRTlDLE1BQU0sTUFBTyxTQUFRLDREQUFhO0lBSzlCLFlBQVksT0FBdUI7UUFDL0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUNwQyxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUE4QixFQUFFLElBQVksRUFBRSxRQUFnQjtRQUNsRixJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssc0VBQWlCLENBQUMsTUFBTSxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsMkRBQTJELEtBQUssQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQ25HO1FBQ0QsT0FBTyxNQUFNLENBQUMsT0FBTyxFQUFFO2FBQ2xCLFFBQVEsQ0FBQyxJQUFJLENBQUM7YUFDZCxZQUFZLENBQUMsUUFBUSxDQUFDO2FBQ3RCLFVBQVUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQzthQUNqQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7YUFDbkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2FBQ3JDLFdBQVcsQ0FBQyxvRUFBaUIsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVB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SUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUM5QixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQXdCO1lBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxXQUFXLENBQUMsS0FBMEI7WUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELFlBQVksQ0FBQyxLQUFhO1lBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSztZQUNyQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRUQsVUFBVSxDQUFDLEtBQWE7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLO1lBQ25CLE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxZQUFZLENBQUMsS0FBYTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUs7WUFDckIsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztLQUVKO0lBaEVZLGNBQU8sVUFnRW5CO0FBQ0wsQ0FBQyxFQW5FUyxNQUFNLEtBQU4sTUFBTSxRQW1FZjtBQUVlIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvY29yZS9SZWNpcGUudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luZ3JlZGllbnR9IGZyb20gXCIuL0luZ3JlZGllbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGlvbkFjdGlvbn0gZnJvbSBcIi4vRmFicmljYXRpb25BY3Rpb25cIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4vRmFicmljYXRlSXRlbVwiO1xyXG5cclxuY2xhc3MgUmVjaXBlIGV4dGVuZHMgRmFicmljYXRlSXRlbSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbmdyZWRpZW50czogSW5ncmVkaWVudFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZXNzZW5jZXM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVzdWx0czogRmFicmljYXRpb25BY3Rpb25bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWlsZGVyOiBSZWNpcGUuQnVpbGRlcikge1xyXG4gICAgICAgIHN1cGVyKGJ1aWxkZXIuc3lzdGVtSWQsIGJ1aWxkZXIucGFydElkLCBidWlsZGVyLmltYWdlVXJsLCBidWlsZGVyLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2luZ3JlZGllbnRzID0gYnVpbGRlci5pbmdyZWRpZW50cztcclxuICAgICAgICB0aGlzLl9lc3NlbmNlcyA9IGJ1aWxkZXIuZXNzZW5jZXM7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0cyA9IGJ1aWxkZXIucmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GbGFncyhmbGFnczogRmFicmljYXRlQ29tcGVuZGl1bURhdGEsIG5hbWU6IHN0cmluZywgaW1hZ2VVcmw6IHN0cmluZyk6IFJlY2lwZSB7XHJcbiAgICAgICAgaWYgKGZsYWdzLnR5cGUgIT09IEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgYSBGYWJyaWNhdGUgUmVjaXBlIGZyb20gJHtmbGFncy50eXBlfSBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFJlY2lwZS5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhOYW1lKG5hbWUpXHJcbiAgICAgICAgICAgIC53aXRoSW1hZ2VVcmwoaW1hZ2VVcmwpXHJcbiAgICAgICAgICAgIC53aXRoUGFydElkKGZsYWdzLmlkZW50aXR5LnBhcnRJZClcclxuICAgICAgICAgICAgLndpdGhFc3NlbmNlcyhmbGFncy5yZWNpcGUuZXNzZW5jZXMpXHJcbiAgICAgICAgICAgIC53aXRoU3lzdGVtSWQoZmxhZ3MuaWRlbnRpdHkuc3lzdGVtSWQpXHJcbiAgICAgICAgICAgIC53aXRoUmVzdWx0cyhGYWJyaWNhdGlvbkFjdGlvbi5tYW55RnJvbUZsYWdzKGZsYWdzLnJlY2lwZS5yZXN1bHRzLCBmbGFncy5pZGVudGl0eS5zeXN0ZW1JZCkpXHJcbiAgICAgICAgICAgIC53aXRoSW5ncmVkaWVudHMoSW5ncmVkaWVudC5tYW55RnJvbUZsYWdzKGZsYWdzLnJlY2lwZS5pbmdyZWRpZW50cywgZmxhZ3MuaWRlbnRpdHkuc3lzdGVtSWQpKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5ncmVkaWVudHMoKTogSW5ncmVkaWVudFtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5ncmVkaWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlc3VsdHMoKTogRmFicmljYXRpb25BY3Rpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGVzc2VuY2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXNzZW5jZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVjaXBlLkJ1aWxkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IG5hbWVWYWxpZCA9IHRoaXMubmFtZSAhPSBudWxsICYmIHRoaXMubmFtZS5sZW5ndGggPiAwO1xyXG4gICAgICAgIGNvbnN0IGlkVmFsaWQgPSB0aGlzLnBhcnRJZCAmJiB0aGlzLnN5c3RlbUlkO1xyXG4gICAgICAgIGxldCBpbmdyZWRpZW50c1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmluZ3JlZGllbnRzLmZvckVhY2goKGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpbmdyZWRpZW50LmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgaW5ncmVkaWVudHNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlc3VsdHNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXN1bHRzLmZvckVhY2goKHJlc3VsdDogRmFicmljYXRpb25BY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGVzc2VuY2VzVmFsaWQ6IGJvb2xlYW4gPSB0aGlzLmVzc2VuY2VzICE9PSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGhhc0lucHV0U3BlY2lmaWVkOiBib29sZWFuID0gdGhpcy5lc3NlbmNlcy5sZW5ndGggPiAwIHx8IHRoaXMuaW5ncmVkaWVudHMubGVuZ3RoID4gMDtcclxuICAgICAgICByZXR1cm4gbmFtZVZhbGlkICYmIGlkVmFsaWQgJiYgaW5ncmVkaWVudHNWYWxpZCAmJiByZXN1bHRzVmFsaWQgJiYgZXNzZW5jZXNWYWxpZCAmJiBoYXNJbnB1dFNwZWNpZmllZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm5hbWVzcGFjZSBSZWNpcGUge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgZXNzZW5jZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgcHVibGljIHJlc3VsdHM6IEZhYnJpY2F0aW9uQWN0aW9uW10gPSBbXTtcclxuICAgICAgICBwdWJsaWMgbmFtZSE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgc3lzdGVtSWQhOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHBhcnRJZCE6IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgaW1hZ2VVcmw6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlY2lwZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhOYW1lKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2l0aEluZ3JlZGllbnQodmFsdWU6IEluZ3JlZGllbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmdyZWRpZW50cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoSW5ncmVkaWVudHModmFsdWU6IEluZ3JlZGllbnRbXSkge1xyXG4gICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRzLnB1c2goLi4udmFsdWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhFc3NlbmNlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5lc3NlbmNlcy5wdXNoKHZhbHVlKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhFc3NlbmNlcyh2YWx1ZXM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXNzZW5jZXMucHVzaCguLi52YWx1ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhSZXN1bHQodmFsdWU6IEZhYnJpY2F0aW9uQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoUmVzdWx0cyh2YWx1ZTogRmFicmljYXRpb25BY3Rpb25bXSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoU3lzdGVtSWQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnN5c3RlbUlkID0gdmFsdWVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aXRoUGFydElkKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0SWQgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpdGhJbWFnZVVybCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1JlY2lwZX07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/core/Recipe.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/AlchemicalEffect5E.ts":
/*!*************************************************!*\
  !*** ./src/scripts/dnd5e/AlchemicalEffect5E.ts ***!
  \*************************************************/
/*! exports provided: Damage5e, Condition5e, AoeExtension5e, SavingThrowModifier5e, DiceMultiplier5e */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Damage5e\", function() { return Damage5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Condition5e\", function() { return Condition5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AoeExtension5e\", function() { return AoeExtension5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SavingThrowModifier5e\", function() { return SavingThrowModifier5e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DiceMultiplier5e\", function() { return DiceMultiplier5e; });\n/* harmony import */ var _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/AlchemicalEffect */ \"./src/scripts/core/AlchemicalEffect.ts\");\n\r\nclass BaseAlchemicalEffect5e extends _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"BaseAlchemicalEffect\"] {\r\n    constructor(essenceCombination, description, type) {\r\n        super(essenceCombination, description, type);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e.description.value += `<p>${this.description}</p>`;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Damage5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, damage) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._damage = damage;\r\n    }\r\n    get damage() {\r\n        return this._damage;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts.push([this._damage.expression, this._damage.type]);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass Condition5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        return itemData5e;\r\n    }\r\n}\r\nclass AoeExtension5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, aoeExtension) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._aoeExtension = aoeExtension;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        if (itemData5e.target.units !== this._aoeExtension.units) {\r\n            throw new Error(`You may not mix units in Alchemical Effects AoE Extensions. Found ${itemData5e.target.units}, expected ${this._aoeExtension.units}`);\r\n        }\r\n        itemData5e.target.value += this._aoeExtension.value;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass SavingThrowModifier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, savingThrowModifier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].BASIC);\r\n        this._savingThrowModifier = savingThrowModifier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.save.dc += this._savingThrowModifier;\r\n        return itemData5e;\r\n    }\r\n}\r\nclass DiceMultiplier5e extends BaseAlchemicalEffect5e {\r\n    constructor(essenceCombination, description, diceMultiplier) {\r\n        super(essenceCombination, description, _core_AlchemicalEffect__WEBPACK_IMPORTED_MODULE_0__[\"AlchemicalEffectType\"].MODIFIER);\r\n        this._diceMultiplier = diceMultiplier;\r\n    }\r\n    applyTo(itemData5e) {\r\n        itemData5e = super.applyTo(itemData5e);\r\n        itemData5e.damage.parts = itemData5e.damage.parts\r\n            .map((damagePart) => {\r\n            // @ts-ignore\r\n            const parsed = DiceTerm.fromExpression(damagePart[0]);\r\n            parsed.number = parsed.number * this._diceMultiplier;\r\n            return [parsed.expression, damagePart[1]];\r\n        });\r\n        return itemData5e;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9BbGNoZW1pY2FsRWZmZWN0NUUudHM/MjRkYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFvRjtBQVlwRixNQUFlLHNCQUF1QixTQUFRLDJFQUFnQztJQUUxRSxZQUFzQixrQkFBNEIsRUFBRSxXQUFtQixFQUFFLElBQTBCO1FBQy9GLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxNQUFNLElBQUksQ0FBQyxXQUFXLE1BQU0sQ0FBQztRQUM3RCxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBQ0o7QUFFRCxNQUFNLFFBQVMsU0FBUSxzQkFBc0I7SUFHekMsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLE1BQWM7UUFDekUsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ04sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxPQUFPLENBQUMsVUFBc0I7UUFDMUIsVUFBVSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdkMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzNFLE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0sV0FBWSxTQUFRLHNCQUFzQjtJQUU1QyxZQUFZLGtCQUE0QixFQUFFLFdBQW1CO1FBQ3pELEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0NBRUo7QUFFRCxNQUFNLGNBQWUsU0FBUSxzQkFBc0I7SUFHL0MsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLFlBQTBCO1FBQ3JGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkUsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7SUFDdEMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFO1lBQ3RELE1BQU0sSUFBSSxLQUFLLENBQUMscUVBQXFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUN6SjtRQUNELFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1FBQ3BELE9BQU8sVUFBVSxDQUFDO0lBQ3RCLENBQUM7Q0FFSjtBQUVELE1BQU0scUJBQXNCLFNBQVEsc0JBQXNCO0lBR3RELFlBQVksa0JBQTRCLEVBQUUsV0FBbUIsRUFBRSxtQkFBMkI7UUFDdEYsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSwyRUFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsbUJBQW1CLENBQUM7SUFDcEQsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUM7UUFDaEQsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBRUQsTUFBTSxnQkFBaUIsU0FBUSxzQkFBc0I7SUFHakQsWUFBWSxrQkFBNEIsRUFBRSxXQUFtQixFQUFFLGNBQXNCO1FBQ2pGLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsMkVBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLENBQUM7SUFDMUMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFzQjtRQUMxQixVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDNUMsR0FBRyxDQUFDLENBQUMsVUFBa0MsRUFBRSxFQUFFO1lBQ3hDLGFBQWE7WUFDYixNQUFNLE1BQU0sR0FBYSxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQ3JELE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBQ1AsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUVKO0FBSXNGIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZG5kNWUvQWxjaGVtaWNhbEVmZmVjdDVFLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBbGNoZW1pY2FsRWZmZWN0VHlwZSwgQmFzZUFsY2hlbWljYWxFZmZlY3R9IGZyb20gXCIuLi9jb3JlL0FsY2hlbWljYWxFZmZlY3RcIjtcclxuXHJcbmludGVyZmFjZSBBb2VFeHRlbnNpb24ge1xyXG4gICAgdW5pdHM6IFRhcmdldFVuaXRUeXBlNWU7XHJcbiAgICB2YWx1ZTogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRGFtYWdlIHtcclxuICAgIGV4cHJlc3Npb246IHN0cmluZztcclxuICAgIHR5cGU6IERhbWFnZVR5cGU1ZTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0PEl0ZW1EYXRhNWU+IHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgdHlwZTogQWxjaGVtaWNhbEVmZmVjdFR5cGUpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlLmRlc2NyaXB0aW9uLnZhbHVlICs9IGA8cD4ke3RoaXMuZGVzY3JpcHRpb259PC9wPmA7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERhbWFnZTVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kYW1hZ2U6IERhbWFnZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkYW1hZ2U6IERhbWFnZSkge1xyXG4gICAgICAgIHN1cGVyKGVzc2VuY2VDb21iaW5hdGlvbiwgZGVzY3JpcHRpb24sIEFsY2hlbWljYWxFZmZlY3RUeXBlLkJBU0lDKTtcclxuICAgICAgICB0aGlzLl9kYW1hZ2UgPSBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRhbWFnZSgpOiBEYW1hZ2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5kYW1hZ2UucGFydHMucHVzaChbdGhpcy5fZGFtYWdlLmV4cHJlc3Npb24sIHRoaXMuX2RhbWFnZS50eXBlXSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb25kaXRpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBBb2VFeHRlbnNpb241ZSBleHRlbmRzIEJhc2VBbGNoZW1pY2FsRWZmZWN0NWUge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXNzZW5jZUNvbWJpbmF0aW9uOiBzdHJpbmdbXSwgZGVzY3JpcHRpb246IHN0cmluZywgYW9lRXh0ZW5zaW9uOiBBb2VFeHRlbnNpb24pIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fYW9lRXh0ZW5zaW9uID0gYW9lRXh0ZW5zaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5VG8oaXRlbURhdGE1ZTogSXRlbURhdGE1ZSk6IEl0ZW1EYXRhNWUge1xyXG4gICAgICAgIGl0ZW1EYXRhNWUgPSBzdXBlci5hcHBseVRvKGl0ZW1EYXRhNWUpO1xyXG4gICAgICAgIGlmIChpdGVtRGF0YTVlLnRhcmdldC51bml0cyAhPT0gdGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG1heSBub3QgbWl4IHVuaXRzIGluIEFsY2hlbWljYWwgRWZmZWN0cyBBb0UgRXh0ZW5zaW9ucy4gRm91bmQgJHtpdGVtRGF0YTVlLnRhcmdldC51bml0c30sIGV4cGVjdGVkICR7dGhpcy5fYW9lRXh0ZW5zaW9uLnVuaXRzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpdGVtRGF0YTVlLnRhcmdldC52YWx1ZSArPSB0aGlzLl9hb2VFeHRlbnNpb24udmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTYXZpbmdUaHJvd01vZGlmaWVyNWUgZXh0ZW5kcyBCYXNlQWxjaGVtaWNhbEVmZmVjdDVlIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NhdmluZ1Rocm93TW9kaWZpZXI6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihlc3NlbmNlQ29tYmluYXRpb246IHN0cmluZ1tdLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBzYXZpbmdUaHJvd01vZGlmaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5CQVNJQyk7XHJcbiAgICAgICAgdGhpcy5fc2F2aW5nVGhyb3dNb2RpZmllciA9IHNhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlUbyhpdGVtRGF0YTVlOiBJdGVtRGF0YTVlKTogSXRlbURhdGE1ZSB7XHJcbiAgICAgICAgaXRlbURhdGE1ZSA9IHN1cGVyLmFwcGx5VG8oaXRlbURhdGE1ZSk7XHJcbiAgICAgICAgaXRlbURhdGE1ZS5zYXZlLmRjICs9IHRoaXMuX3NhdmluZ1Rocm93TW9kaWZpZXI7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBEaWNlTXVsdGlwbGllcjVlIGV4dGVuZHMgQmFzZUFsY2hlbWljYWxFZmZlY3Q1ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kaWNlTXVsdGlwbGllcjogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVzc2VuY2VDb21iaW5hdGlvbjogc3RyaW5nW10sIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGRpY2VNdWx0aXBsaWVyOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihlc3NlbmNlQ29tYmluYXRpb24sIGRlc2NyaXB0aW9uLCBBbGNoZW1pY2FsRWZmZWN0VHlwZS5NT0RJRklFUik7XHJcbiAgICAgICAgdGhpcy5fZGljZU11bHRpcGxpZXIgPSBkaWNlTXVsdGlwbGllcjtcclxuICAgIH1cclxuXHJcbiAgICBhcHBseVRvKGl0ZW1EYXRhNWU6IEl0ZW1EYXRhNWUpOiBJdGVtRGF0YTVlIHtcclxuICAgICAgICBpdGVtRGF0YTVlID0gc3VwZXIuYXBwbHlUbyhpdGVtRGF0YTVlKTtcclxuICAgICAgICBpdGVtRGF0YTVlLmRhbWFnZS5wYXJ0cyA9IGl0ZW1EYXRhNWUuZGFtYWdlLnBhcnRzXHJcbiAgICAgICAgICAgIC5tYXAoKGRhbWFnZVBhcnQ6IFtzdHJpbmcsIERhbWFnZVR5cGU1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZDogRGljZVRlcm0gPSBEaWNlVGVybS5mcm9tRXhwcmVzc2lvbihkYW1hZ2VQYXJ0WzBdKTtcclxuICAgICAgICAgICAgICAgIHBhcnNlZC5udW1iZXIgPSBwYXJzZWQubnVtYmVyICogdGhpcy5fZGljZU11bHRpcGxpZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3BhcnNlZC5leHByZXNzaW9uLCBkYW1hZ2VQYXJ0WzFdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhNWU7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCB7RGFtYWdlNWUsIENvbmRpdGlvbjVlLCBBb2VFeHRlbnNpb241ZSwgU2F2aW5nVGhyb3dNb2RpZmllcjVlLCBEaWNlTXVsdGlwbGllcjVlfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/AlchemicalEffect5E.ts\n");

/***/ }),

/***/ "./src/scripts/dnd5e/Inventory5E.ts":
/*!******************************************!*\
  !*** ./src/scripts/dnd5e/Inventory5E.ts ***!
  \******************************************/
/*! exports provided: Inventory5E */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Inventory5E\", function() { return Inventory5E; });\n/* harmony import */ var _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game/CraftingInventory */ \"./src/scripts/game/CraftingInventory.ts\");\n/* harmony import */ var _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../game/InventoryRecord */ \"./src/scripts/game/InventoryRecord.ts\");\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game/CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n/* harmony import */ var _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/FabricationAction */ \"./src/scripts/core/FabricationAction.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Inventory5E extends _game_CraftingInventory__WEBPACK_IMPORTED_MODULE_0__[\"CraftingInventory\"] {\r\n    constructor(actor) {\r\n        super(actor);\r\n        this._partDirectory = new Map();\r\n        this._supportedGameSystems = [_core_GameSystemType__WEBPACK_IMPORTED_MODULE_5__[\"GameSystemType\"].DND5E];\r\n        this.index();\r\n    }\r\n    index() {\r\n        if (!this._actor) {\r\n            throw new Error(`No Actor was set for this Inventory to index`);\r\n        }\r\n        const items = Array.from(this._actor.items.values());\r\n        this._partDirectory.clear();\r\n        const candidateItems = items.filter(this.shouldIndex(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].types.allowableItems));\r\n        const uniqueComponentTypes = candidateItems.map((item) => item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId))\r\n            .filter((partId, index, partIds) => partIds.indexOf(partId) === index);\r\n        uniqueComponentTypes.forEach((partId) => {\r\n            const inventoryRecord = candidateItems.filter((candidateItem) => candidateItem.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.partId) === partId)\r\n                .map((item) => {\r\n                const fabricateItemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n                return _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withItem(item)\r\n                    .withActor(this.actor)\r\n                    .withTotalQuantity(item.data.data.quantity)\r\n                    .withFabricateItemType(fabricateItemType)\r\n                    .withFabricateItem(this.lookUp(item))\r\n                    .build();\r\n            })\r\n                .reduce((left, right) => left.combineWith(right));\r\n            this._partDirectory.set(partId, inventoryRecord);\r\n        });\r\n    }\r\n    shouldIndex(allowableItems) {\r\n        return (item) => {\r\n            if (allowableItems.indexOf(item.type) < 0) {\r\n                return false;\r\n            }\r\n            const type = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_2__[\"default\"].flagKeys.item.fabricateItemType);\r\n            if (!type) {\r\n                return false;\r\n            }\r\n            return type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT || type === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE;\r\n        };\r\n    }\r\n    add(fabricateItem, amountToAdd = 1, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (customData) {\r\n                return this.addCustomItem(fabricateItem, amountToAdd, customData);\r\n            }\r\n            if (!this._partDirectory.has(fabricateItem.partId)) {\r\n                return this.addNewRecord(fabricateItem, amountToAdd);\r\n            }\r\n            else {\r\n                const existingRecord = this._partDirectory.get(fabricateItem.partId);\r\n                return this.updateExistingRecord(fabricateItem, existingRecord, amountToAdd);\r\n            }\r\n        });\r\n    }\r\n    addNewRecord(fabricateItem, amountToAdd) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const compendium = game.packs.get(fabricateItem.systemId);\r\n            const item = yield compendium.getEntity(fabricateItem.partId);\r\n            item.data.data.quantity = amountToAdd;\r\n            const createdItemData = yield this._actor.createEmbeddedEntity('OwnedItem', item);\r\n            const createdItem = this._actor.getOwnedItem(createdItemData._id);\r\n            const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                .withActor(this._actor)\r\n                .withItem(createdItem)\r\n                .withTotalQuantity(createdItem.data.data.quantity)\r\n                .withFabricateItem(fabricateItem)\r\n                .withFabricateItemType(_game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT) // Todo - this prevents the addNewRecord method from supporting recipes. It doesn't need to yet, but it probably should\r\n                .build();\r\n            this._partDirectory.set(fabricateItem.partId, inventoryRecord);\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(fabricateItem)\r\n                .withQuantity(amountToAdd)\r\n                .withActionType(_core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationActionType\"].ADD)\r\n                .build();\r\n        });\r\n    }\r\n    updateExistingRecord(fabricateItem, record, amountToAdd) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            record.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n            const itemToModify = record.itemsOfType[0];\r\n            const updatedQuantityForItem = itemToModify.data.data.quantity + amountToAdd;\r\n            // @ts-ignore\r\n            const updatedItem = yield this.actor.updateEmbeddedEntity('OwnedItem', { _id: itemToModify._id, data: { quantity: updatedQuantityForItem } });\r\n            record.totalQuantity = record.totalQuantity + amountToAdd;\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(fabricateItem)\r\n                .withQuantity(amountToAdd)\r\n                .withActionType(_core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationActionType\"].ADD)\r\n                .build();\r\n        });\r\n    }\r\n    addCustomItem(fabricateItem, amountToAdd, customData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const compendium = game.packs.get(fabricateItem.systemId);\r\n            const compendiumBaseItem = yield compendium.getEntity(fabricateItem.partId);\r\n            const baseItemData = duplicate(compendiumBaseItem.data);\r\n            mergeObject(baseItemData.data, customData);\r\n            const createdItemData = yield this._actor.createEmbeddedEntity('OwnedItem', baseItemData);\r\n            const createdItem = this._actor.getOwnedItem(createdItemData._id);\r\n            const existingRecord = this._partDirectory.get(fabricateItem.partId);\r\n            if (existingRecord) {\r\n                existingRecord.totalQuantity = existingRecord.totalQuantity + amountToAdd;\r\n                return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                    .withItemType(fabricateItem)\r\n                    .withQuantity(amountToAdd)\r\n                    .withActionType(_core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationActionType\"].ADD)\r\n                    .build();\r\n            }\r\n            else {\r\n                const inventoryRecord = _game_InventoryRecord__WEBPACK_IMPORTED_MODULE_1__[\"InventoryRecord\"].builder()\r\n                    .withActor(this._actor)\r\n                    .withItem(createdItem)\r\n                    .withTotalQuantity(createdItem.data.data.quantity)\r\n                    .withFabricateItem(_core_CraftingComponent__WEBPACK_IMPORTED_MODULE_4__[\"CraftingComponent\"].fromFlags(compendiumBaseItem.data.flags.fabricate, createdItem.data.name, createdItem.img))\r\n                    .build();\r\n                this._partDirectory.set(fabricateItem.partId, inventoryRecord);\r\n                return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                    .withItemType(fabricateItem)\r\n                    .withQuantity(amountToAdd)\r\n                    .withActionType(_core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationActionType\"].ADD)\r\n                    .build();\r\n            }\r\n        });\r\n    }\r\n    get contents() {\r\n        const recipes = this.recipes;\r\n        const components = this.components;\r\n        return recipes.concat(components);\r\n    }\r\n    remove(component, amountToRemove = 1) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.containsPart(component.partId, amountToRemove)) {\r\n                throw new Error(`Cannot remove ${amountToRemove} ${component.name} from Inventory for Actor ${this.actorId} - \r\n                there is not enough of the component in their inventory! `);\r\n            }\r\n            const recordForType = this._partDirectory.get(component.partId);\r\n            recordForType.itemsOfType = recordForType.itemsOfType.sort((left, right) => left.data.data.quantity - right.data.data.quantity);\r\n            let removed = 0;\r\n            let currentItemIndex = 0;\r\n            const modifiedItems = [];\r\n            while (removed < amountToRemove) {\r\n                const thisItem = recordForType.itemsOfType[currentItemIndex];\r\n                modifiedItems.push(thisItem);\r\n                const remaining = amountToRemove - removed;\r\n                if (remaining < thisItem.data.data.quantity) {\r\n                    const updatedQuantity = thisItem.data.data.quantity - remaining;\r\n                    // @ts-ignore\r\n                    yield this.actor.updateEmbeddedEntity('OwnedItem', {\r\n                        _id: thisItem.id,\r\n                        data: { quantity: updatedQuantity }\r\n                    });\r\n                    recordForType.totalQuantity = updatedQuantity;\r\n                    removed += amountToRemove;\r\n                }\r\n                else {\r\n                    const amountRemoved = thisItem.data.data.quantity;\r\n                    // @ts-ignore\r\n                    yield this.actor.deleteEmbeddedEntity('OwnedItem', thisItem.id);\r\n                    removed += amountRemoved;\r\n                    recordForType.totalQuantity = recordForType.totalQuantity - amountRemoved;\r\n                }\r\n                currentItemIndex++;\r\n            }\r\n            const remainingItems = recordForType.itemsOfType.filter((item) => item.data.data.quantity > 0);\r\n            recordForType.itemsOfType = remainingItems;\r\n            if (remainingItems.length === 0) {\r\n                this._partDirectory.delete(component.partId);\r\n            }\r\n            return _core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationAction\"].builder()\r\n                .withItemType(component)\r\n                .withQuantity(amountToRemove)\r\n                .withActionType(_core_FabricationAction__WEBPACK_IMPORTED_MODULE_6__[\"FabricationActionType\"].REMOVE)\r\n                .build();\r\n        });\r\n    }\r\n    updateQuantityFor(itemData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!itemData) {\r\n                throw new Error('Unable to update Inventory quantity for null Item. ');\r\n            }\r\n            const fabricateFlags = itemData.flags.fabricate;\r\n            if (!fabricateFlags) {\r\n                return false; // Not a Fabricate Item\r\n            }\r\n            const partId = fabricateFlags.identity.partId;\r\n            if (!partId) {\r\n                throw new Error(`Unable to update Inventory quantity for Item ${itemData._id} with no Fabricate Part ID set in flag data. `);\r\n            }\r\n            let inventoryRecordForType = this._partDirectory.get(partId);\r\n            if (!inventoryRecordForType) {\r\n                yield this.update();\r\n                return true;\r\n            }\r\n            if (inventoryRecordForType.itemsOfType.length === 1) {\r\n                inventoryRecordForType.totalQuantity = itemData.data.quantity;\r\n                return true;\r\n            }\r\n            const totalExcludingChanged = inventoryRecordForType.itemsOfType.filter((managedItem) => managedItem.id !== itemData._id)\r\n                .map((managedItem) => managedItem.data.data.quantity)\r\n                .reduce((left, right) => left + right, 0);\r\n            inventoryRecordForType.totalQuantity = totalExcludingChanged + itemData.data.quantity;\r\n            return true;\r\n        });\r\n    }\r\n    update() {\r\n        this.index();\r\n    }\r\n    get components() {\r\n        return Array.from(this._partDirectory.values())\r\n            .filter((record) => record.fabricateItemType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].COMPONENT);\r\n    }\r\n    get recipes() {\r\n        return Array.from(this._partDirectory.values())\r\n            .filter((record) => record.fabricateItemType === _game_CompendiumData__WEBPACK_IMPORTED_MODULE_3__[\"FabricateItemType\"].RECIPE);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kbmQ1ZS9JbnZlbnRvcnk1RS50cz9iMzcxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNKO0FBQ2pCO0FBQzJDO0FBQ3RCO0FBQ047QUFHNkI7QUFFbkYsTUFBTSxXQUFZLFNBQVEseUVBQXdDO0lBRzlELFlBQVksS0FBVTtRQUNsQixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFIQSxtQkFBYyxHQUFnRCxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBSXJGLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLG1FQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFTyxLQUFLO1FBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZCxNQUFNLElBQUksS0FBSyxDQUFDLDhDQUE4QyxDQUFDLENBQUM7U0FDbkU7UUFDRCxNQUFNLEtBQUssR0FBUSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUU1QixNQUFNLGNBQWMsR0FBVyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsbURBQVUsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUMvRixNQUFNLG9CQUFvQixHQUFhLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFVLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsbURBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLG1EQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUMzSSxNQUFNLENBQUMsQ0FBQyxNQUFjLEVBQUUsS0FBYSxF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QyxDQUFDLE1BQXNDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsS0FBSyxzRUFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuSCxDQUFDO0NBQ0o7QUFFbUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9kbmQ1ZS9JbnZlbnRvcnk1RS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5XCI7XHJcbmltcG9ydCB7SW52ZW50b3J5UmVjb3JkfSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlSZWNvcmRcIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSwgRmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuLi9nYW1lL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi4vY29yZS9SZWNpcGVcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVJdGVtfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGVJdGVtXCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb24sIEZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRpb25BY3Rpb25cIjtcclxuXHJcbmNsYXNzIEludmVudG9yeTVFIGV4dGVuZHMgQ3JhZnRpbmdJbnZlbnRvcnk8SXRlbS5EYXRhPEl0ZW1EYXRhNWU+PiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9wYXJ0RGlyZWN0b3J5OiBNYXA8c3RyaW5nLCBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFjdG9yOiBhbnkpIHtcclxuICAgICAgICBzdXBlcihhY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXMgPSBbR2FtZVN5c3RlbVR5cGUuRE5ENUVdO1xyXG4gICAgICAgIHRoaXMuaW5kZXgoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluZGV4KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBBY3RvciB3YXMgc2V0IGZvciB0aGlzIEludmVudG9yeSB0byBpbmRleGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpdGVtczogYW55ID0gQXJyYXkuZnJvbSh0aGlzLl9hY3Rvci5pdGVtcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgdGhpcy5fcGFydERpcmVjdG9yeS5jbGVhcigpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5kaWRhdGVJdGVtczogSXRlbVtdID0gaXRlbXMuZmlsdGVyKHRoaXMuc2hvdWxkSW5kZXgoUHJvcGVydGllcy50eXBlcy5hbGxvd2FibGVJdGVtcykpO1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUNvbXBvbmVudFR5cGVzOiBzdHJpbmdbXSA9IGNhbmRpZGF0ZUl0ZW1zLm1hcCgoaXRlbTogSXRlbSkgPT4gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5wYXJ0SWQpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChwYXJ0SWQ6IHN0cmluZywgaW5kZXg6IG51bWJlciwgcGFydElkczogc3RyaW5nW10pID0+IHBhcnRJZHMuaW5kZXhPZihwYXJ0SWQpID09PSBpbmRleCk7XHJcblxyXG4gICAgICAgIHVuaXF1ZUNvbXBvbmVudFR5cGVzLmZvckVhY2goKHBhcnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+ID0gY2FuZGlkYXRlSXRlbXMuZmlsdGVyKChjYW5kaWRhdGVJdGVtOiBJdGVtKSA9PiBjYW5kaWRhdGVJdGVtLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5pdGVtLnBhcnRJZCkgPT09IHBhcnRJZClcclxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW06IEl0ZW08SXRlbURhdGE1ZT4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWJyaWNhdGVJdGVtVHlwZSA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uZmFicmljYXRlSXRlbVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnZlbnRvcnlSZWNvcmQuYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoSXRlbShpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aEFjdG9yKHRoaXMuYWN0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoVG90YWxRdWFudGl0eShpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhGYWJyaWNhdGVJdGVtVHlwZShmYWJyaWNhdGVJdGVtVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhGYWJyaWNhdGVJdGVtKHRoaXMubG9va1VwKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAucmVkdWNlKChsZWZ0OiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4sIHJpZ2h0OiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4pID0+IGxlZnQuY29tYmluZVdpdGgocmlnaHQpKTtcclxuICAgICAgICAgICAgdGhpcy5fcGFydERpcmVjdG9yeS5zZXQocGFydElkLCBpbnZlbnRvcnlSZWNvcmQpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRJbmRleChhbGxvd2FibGVJdGVtczogc3RyaW5nW10pIHtcclxuICAgICAgICByZXR1cm4gKGl0ZW06IEl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGFsbG93YWJsZUl0ZW1zLmluZGV4T2YoaXRlbS50eXBlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5mYWJyaWNhdGVJdGVtVHlwZSk7XHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5DT01QT05FTlQgfHwgdHlwZSA9PT0gRmFicmljYXRlSXRlbVR5cGUuUkVDSVBFO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWRkKGZhYnJpY2F0ZUl0ZW06IEZhYnJpY2F0ZUl0ZW0sIGFtb3VudFRvQWRkOiBudW1iZXIgPSAxLCBjdXN0b21EYXRhPzogYW55KTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgaWYgKGN1c3RvbURhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ3VzdG9tSXRlbShmYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZCwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fcGFydERpcmVjdG9yeS5oYXMoZmFicmljYXRlSXRlbS5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE5ld1JlY29yZChmYWJyaWNhdGVJdGVtLCBhbW91bnRUb0FkZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPiA9IHRoaXMuX3BhcnREaXJlY3RvcnkuZ2V0KGZhYnJpY2F0ZUl0ZW0ucGFydElkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlRXhpc3RpbmdSZWNvcmQoZmFicmljYXRlSXRlbSwgZXhpc3RpbmdSZWNvcmQsIGFtb3VudFRvQWRkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGROZXdSZWNvcmQoZmFicmljYXRlSXRlbTogRmFicmljYXRlSXRlbSwgYW1vdW50VG9BZGQ6IG51bWJlcik6IFByb21pc2U8RmFicmljYXRpb25BY3Rpb248SXRlbS5EYXRhPEl0ZW1EYXRhNWU+Pj4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldChmYWJyaWNhdGVJdGVtLnN5c3RlbUlkKTtcclxuICAgICAgICBjb25zdCBpdGVtOiBFbnRpdHk8SXRlbURhdGE1ZT4gPSBhd2FpdCBjb21wZW5kaXVtLmdldEVudGl0eShmYWJyaWNhdGVJdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgaXRlbS5kYXRhLmRhdGEucXVhbnRpdHkgPSBhbW91bnRUb0FkZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkSXRlbURhdGE6IEVudGl0eS5EYXRhPEl0ZW1EYXRhNWU+ID0gYXdhaXQgdGhpcy5fYWN0b3IuY3JlYXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIGl0ZW0pO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRJdGVtOiBJdGVtPEl0ZW1EYXRhNWU+ID0gdGhpcy5fYWN0b3IuZ2V0T3duZWRJdGVtKGNyZWF0ZWRJdGVtRGF0YS5faWQpO1xyXG4gICAgICAgIGNvbnN0IGludmVudG9yeVJlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+ID0gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8RmFicmljYXRlSXRlbT4oKVxyXG4gICAgICAgICAgICAud2l0aEFjdG9yKHRoaXMuX2FjdG9yKVxyXG4gICAgICAgICAgICAud2l0aEl0ZW0oY3JlYXRlZEl0ZW0pXHJcbiAgICAgICAgICAgIC53aXRoVG90YWxRdWFudGl0eShjcmVhdGVkSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkpXHJcbiAgICAgICAgICAgIC53aXRoRmFicmljYXRlSXRlbShmYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVCkvLyBUb2RvIC0gdGhpcyBwcmV2ZW50cyB0aGUgYWRkTmV3UmVjb3JkIG1ldGhvZCBmcm9tIHN1cHBvcnRpbmcgcmVjaXBlcy4gSXQgZG9lc24ndCBuZWVkIHRvIHlldCwgYnV0IGl0IHByb2JhYmx5IHNob3VsZFxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICB0aGlzLl9wYXJ0RGlyZWN0b3J5LnNldChmYWJyaWNhdGVJdGVtLnBhcnRJZCwgaW52ZW50b3J5UmVjb3JkKTtcclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoZmFicmljYXRlSXRlbSlcclxuICAgICAgICAgICAgLndpdGhRdWFudGl0eShhbW91bnRUb0FkZClcclxuICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgIC5idWlsZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlRXhpc3RpbmdSZWNvcmQoZmFicmljYXRlSXRlbTogRmFicmljYXRlSXRlbSwgcmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4sIGFtb3VudFRvQWRkOiBudW1iZXIpOiBQcm9taXNlPEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YTxJdGVtRGF0YTVlPj4+IHtcclxuICAgICAgICByZWNvcmQuaXRlbXNPZlR5cGUuc29ydCgobGVmdDogSXRlbTxJdGVtRGF0YTVlPiwgcmlnaHQ6IEl0ZW08SXRlbURhdGE1ZT4pID0+IGxlZnQuZGF0YS5kYXRhLnF1YW50aXR5IC0gcmlnaHQuZGF0YS5kYXRhLnF1YW50aXR5KTtcclxuICAgICAgICBjb25zdCBpdGVtVG9Nb2RpZnk6IEl0ZW08SXRlbURhdGE1ZT4gPSByZWNvcmQuaXRlbXNPZlR5cGVbMF07XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZFF1YW50aXR5Rm9ySXRlbSA9IGl0ZW1Ub01vZGlmeS5kYXRhLmRhdGEucXVhbnRpdHkgKyBhbW91bnRUb0FkZDtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEl0ZW06IEl0ZW08SXRlbURhdGE1ZT4gPSBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRW50aXR5KCdPd25lZEl0ZW0nLCB7X2lkOiBpdGVtVG9Nb2RpZnkuX2lkLCBkYXRhOiB7cXVhbnRpdHk6IHVwZGF0ZWRRdWFudGl0eUZvckl0ZW19fSk7XHJcbiAgICAgICAgcmVjb3JkLnRvdGFsUXVhbnRpdHkgPSByZWNvcmQudG90YWxRdWFudGl0eSArIGFtb3VudFRvQWRkO1xyXG4gICAgICAgIHJldHVybiBGYWJyaWNhdGlvbkFjdGlvbi5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhJdGVtVHlwZShmYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGFtb3VudFRvQWRkKVxyXG4gICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoRmFicmljYXRpb25BY3Rpb25UeXBlLkFERClcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRDdXN0b21JdGVtKGZhYnJpY2F0ZUl0ZW06IEZhYnJpY2F0ZUl0ZW0sIGFtb3VudFRvQWRkOiBudW1iZXIsIGN1c3RvbURhdGE6IEl0ZW1EYXRhNWUpOiBQcm9taXNlPEZhYnJpY2F0aW9uQWN0aW9uPEl0ZW0uRGF0YTxJdGVtRGF0YTVlPj4+IHtcclxuICAgICAgICBjb25zdCBjb21wZW5kaXVtOiBDb21wZW5kaXVtID0gZ2FtZS5wYWNrcy5nZXQoZmFicmljYXRlSXRlbS5zeXN0ZW1JZCk7XHJcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bUJhc2VJdGVtOiBFbnRpdHk8SXRlbURhdGE1ZT4gPSBhd2FpdCBjb21wZW5kaXVtLmdldEVudGl0eShmYWJyaWNhdGVJdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgY29uc3QgYmFzZUl0ZW1EYXRhOiBFbnRpdHkuRGF0YTxJdGVtRGF0YTVlPiA9IGR1cGxpY2F0ZShjb21wZW5kaXVtQmFzZUl0ZW0uZGF0YSk7XHJcbiAgICAgICAgbWVyZ2VPYmplY3QoYmFzZUl0ZW1EYXRhLmRhdGEsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRJdGVtRGF0YTogRW50aXR5LkRhdGE8SXRlbURhdGE1ZT4gPSBhd2FpdCB0aGlzLl9hY3Rvci5jcmVhdGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywgYmFzZUl0ZW1EYXRhKTtcclxuICAgICAgICBjb25zdCBjcmVhdGVkSXRlbTogSXRlbTxJdGVtRGF0YTVlPiA9IHRoaXMuX2FjdG9yLmdldE93bmVkSXRlbShjcmVhdGVkSXRlbURhdGEuX2lkKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1JlY29yZDogSW52ZW50b3J5UmVjb3JkPEZhYnJpY2F0ZUl0ZW0+ID0gdGhpcy5fcGFydERpcmVjdG9yeS5nZXQoZmFicmljYXRlSXRlbS5wYXJ0SWQpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ1JlY29yZCkge1xyXG4gICAgICAgICAgICBleGlzdGluZ1JlY29yZC50b3RhbFF1YW50aXR5ID0gZXhpc3RpbmdSZWNvcmQudG90YWxRdWFudGl0eSArIGFtb3VudFRvQWRkO1xyXG4gICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEl0ZW1UeXBlKGZhYnJpY2F0ZUl0ZW0pXHJcbiAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGFtb3VudFRvQWRkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4gPSBJbnZlbnRvcnlSZWNvcmQuYnVpbGRlcjxDcmFmdGluZ0NvbXBvbmVudD4oKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rvcih0aGlzLl9hY3RvcilcclxuICAgICAgICAgICAgICAgIC53aXRoSXRlbShjcmVhdGVkSXRlbSlcclxuICAgICAgICAgICAgICAgIC53aXRoVG90YWxRdWFudGl0eShjcmVhdGVkSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0oQ3JhZnRpbmdDb21wb25lbnQuZnJvbUZsYWdzKGNvbXBlbmRpdW1CYXNlSXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZSwgY3JlYXRlZEl0ZW0uZGF0YS5uYW1lLCBjcmVhdGVkSXRlbS5pbWcpKVxyXG4gICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnREaXJlY3Rvcnkuc2V0KGZhYnJpY2F0ZUl0ZW0ucGFydElkLCBpbnZlbnRvcnlSZWNvcmQpO1xyXG4gICAgICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aEl0ZW1UeXBlKGZhYnJpY2F0ZUl0ZW0pXHJcbiAgICAgICAgICAgICAgICAud2l0aFF1YW50aXR5KGFtb3VudFRvQWRkKVxyXG4gICAgICAgICAgICAgICAgLndpdGhBY3Rpb25UeXBlKEZhYnJpY2F0aW9uQWN0aW9uVHlwZS5BREQpXHJcbiAgICAgICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRlbnRzKCk6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPltdIHtcclxuICAgICAgICBjb25zdCByZWNpcGVzOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXSA9IHRoaXMucmVjaXBlcztcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT5bXSA9IHRoaXMuY29tcG9uZW50cztcclxuICAgICAgICByZXR1cm4gcmVjaXBlcy5jb25jYXQoY29tcG9uZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVtb3ZlKGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQsIGFtb3VudFRvUmVtb3ZlOiBudW1iZXIgPSAxKTogUHJvbWlzZTxGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE8SXRlbURhdGE1ZT4+PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zUGFydChjb21wb25lbnQucGFydElkLCBhbW91bnRUb1JlbW92ZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVtb3ZlICR7YW1vdW50VG9SZW1vdmV9ICR7Y29tcG9uZW50Lm5hbWV9IGZyb20gSW52ZW50b3J5IGZvciBBY3RvciAke3RoaXMuYWN0b3JJZH0gLSBcclxuICAgICAgICAgICAgICAgIHRoZXJlIGlzIG5vdCBlbm91Z2ggb2YgdGhlIGNvbXBvbmVudCBpbiB0aGVpciBpbnZlbnRvcnkhIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZWNvcmRGb3JUeXBlOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4gPSB0aGlzLl9wYXJ0RGlyZWN0b3J5LmdldChjb21wb25lbnQucGFydElkKTtcclxuICAgICAgICByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlID0gcmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZS5zb3J0KChsZWZ0OiBJdGVtPEl0ZW1EYXRhNWU+LCByaWdodDogSXRlbTxJdGVtRGF0YTVlPikgPT4gbGVmdC5kYXRhLmRhdGEucXVhbnRpdHkgLSByaWdodC5kYXRhLmRhdGEucXVhbnRpdHkpO1xyXG4gICAgICAgIGxldCByZW1vdmVkOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGxldCBjdXJyZW50SXRlbUluZGV4ID0gMDtcclxuICAgICAgICBjb25zdCBtb2RpZmllZEl0ZW1zOiBJdGVtPEl0ZW1EYXRhNWU+W10gPSBbXTtcclxuICAgICAgICB3aGlsZSAocmVtb3ZlZCA8IGFtb3VudFRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoaXNJdGVtOiBhbnkgPSByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlW2N1cnJlbnRJdGVtSW5kZXhdO1xyXG4gICAgICAgICAgICBtb2RpZmllZEl0ZW1zLnB1c2godGhpc0l0ZW0pO1xyXG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBhbW91bnRUb1JlbW92ZSAtIHJlbW92ZWQ7XHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPCB0aGlzSXRlbS5kYXRhLmRhdGEucXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRRdWFudGl0eSA9IHRoaXNJdGVtLmRhdGEuZGF0YS5xdWFudGl0eSAtIHJlbWFpbmluZztcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIHtcclxuICAgICAgICAgICAgICAgICAgICBfaWQ6IHRoaXNJdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtxdWFudGl0eTogdXBkYXRlZFF1YW50aXR5fVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZWNvcmRGb3JUeXBlLnRvdGFsUXVhbnRpdHkgPSB1cGRhdGVkUXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkICs9IGFtb3VudFRvUmVtb3ZlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW1vdW50UmVtb3ZlZDogbnVtYmVyID0gdGhpc0l0ZW0uZGF0YS5kYXRhLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5kZWxldGVFbWJlZGRlZEVudGl0eSgnT3duZWRJdGVtJywgdGhpc0l0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZCArPSBhbW91bnRSZW1vdmVkO1xyXG4gICAgICAgICAgICAgICAgcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gcmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5IC0gYW1vdW50UmVtb3ZlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50SXRlbUluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0l0ZW1zOiBJdGVtW10gPSByZWNvcmRGb3JUeXBlLml0ZW1zT2ZUeXBlLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLmRhdGEuZGF0YS5xdWFudGl0eSA+IDApO1xyXG4gICAgICAgIHJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUgPSByZW1haW5pbmdJdGVtcztcclxuICAgICAgICBpZiAocmVtYWluaW5nSXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcnREaXJlY3RvcnkuZGVsZXRlKGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmFicmljYXRpb25BY3Rpb24uYnVpbGRlcigpXHJcbiAgICAgICAgICAgIC53aXRoSXRlbVR5cGUoY29tcG9uZW50KVxyXG4gICAgICAgICAgICAud2l0aFF1YW50aXR5KGFtb3VudFRvUmVtb3ZlKVxyXG4gICAgICAgICAgICAud2l0aEFjdGlvblR5cGUoRmFicmljYXRpb25BY3Rpb25UeXBlLlJFTU9WRSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZVF1YW50aXR5Rm9yKGl0ZW1EYXRhOiBJdGVtLkRhdGE8SXRlbURhdGE1ZT4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAoIWl0ZW1EYXRhKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHVwZGF0ZSBJbnZlbnRvcnkgcXVhbnRpdHkgZm9yIG51bGwgSXRlbS4gJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW1EYXRhLmZsYWdzLmZhYnJpY2F0ZTtcclxuICAgICAgICBpZiAoIWZhYnJpY2F0ZUZsYWdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IGEgRmFicmljYXRlIEl0ZW1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5wYXJ0SWQ7XHJcbiAgICAgICAgaWYgKCFwYXJ0SWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gdXBkYXRlIEludmVudG9yeSBxdWFudGl0eSBmb3IgSXRlbSAke2l0ZW1EYXRhLl9pZH0gd2l0aCBubyBGYWJyaWNhdGUgUGFydCBJRCBzZXQgaW4gZmxhZyBkYXRhLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGludmVudG9yeVJlY29yZEZvclR5cGU6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPiA9IHRoaXMuX3BhcnREaXJlY3RvcnkuZ2V0KHBhcnRJZCk7XHJcbiAgICAgICAgaWYgKCFpbnZlbnRvcnlSZWNvcmRGb3JUeXBlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW52ZW50b3J5UmVjb3JkRm9yVHlwZS5pdGVtc09mVHlwZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5UmVjb3JkRm9yVHlwZS50b3RhbFF1YW50aXR5ID0gaXRlbURhdGEuZGF0YS5xdWFudGl0eTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvdGFsRXhjbHVkaW5nQ2hhbmdlZCA9IGludmVudG9yeVJlY29yZEZvclR5cGUuaXRlbXNPZlR5cGUuZmlsdGVyKChtYW5hZ2VkSXRlbTogSXRlbTxJdGVtRGF0YTVlPikgPT4gbWFuYWdlZEl0ZW0uaWQgIT09IGl0ZW1EYXRhLl9pZClcclxuICAgICAgICAgICAgLm1hcCgobWFuYWdlZEl0ZW06IGFueSkgPT4gbWFuYWdlZEl0ZW0uZGF0YS5kYXRhLnF1YW50aXR5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgICAgICBpbnZlbnRvcnlSZWNvcmRGb3JUeXBlLnRvdGFsUXVhbnRpdHkgPSB0b3RhbEV4Y2x1ZGluZ0NoYW5nZWQgKyBpdGVtRGF0YS5kYXRhLnF1YW50aXR5O1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluZGV4KClcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcG9uZW50cygpOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+W10ge1xyXG4gICAgICAgIHJldHVybiA8SW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PltdPkFycmF5LmZyb20odGhpcy5fcGFydERpcmVjdG9yeS52YWx1ZXMoKSlcclxuICAgICAgICAgICAgLmZpbHRlcigocmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4pID0+IHJlY29yZC5mYWJyaWNhdGVJdGVtVHlwZSA9PT0gRmFicmljYXRlSXRlbVR5cGUuQ09NUE9ORU5UKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVjaXBlcygpOiBJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlPltdIHtcclxuICAgICAgICByZXR1cm4gPEludmVudG9yeVJlY29yZDxSZWNpcGU+W10+QXJyYXkuZnJvbSh0aGlzLl9wYXJ0RGlyZWN0b3J5LnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPikgPT4gcmVjb3JkLmZhYnJpY2F0ZUl0ZW1UeXBlID09PSBGYWJyaWNhdGVJdGVtVHlwZS5SRUNJUEUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0ludmVudG9yeTVFfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/dnd5e/Inventory5E.ts\n");

/***/ }),

/***/ "./src/scripts/error/AlchemyError.ts":
/*!*******************************************!*\
  !*** ./src/scripts/error/AlchemyError.ts ***!
  \*******************************************/
/*! exports provided: AlchemyError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemyError\", function() { return AlchemyError; });\n/* harmony import */ var _CraftingError__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CraftingError */ \"./src/scripts/error/CraftingError.ts\");\n\r\nclass AlchemyError extends _CraftingError__WEBPACK_IMPORTED_MODULE_0__[\"CraftingError\"] {\r\n    constructor(message, componentMix, componentsConsumed) {\r\n        super(message, componentsConsumed);\r\n        this._componentMix = componentMix;\r\n    }\r\n    get componentMix() {\r\n        return this._componentMix;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lcnJvci9BbGNoZW15RXJyb3IudHM/MDAxYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBOEM7QUFHOUMsTUFBTSxZQUFhLFNBQVEsNERBQWE7SUFJcEMsWUFBWSxPQUFlLEVBQUUsWUFBaUMsRUFBRSxrQkFBMkI7UUFDdkYsS0FBSyxDQUFDLE9BQU8sRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFJLFlBQVk7UUFDWixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUIsQ0FBQztDQUVKO0FBRW9CIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZXJyb3IvQWxjaGVteUVycm9yLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDcmFmdGluZ0Vycm9yfSBmcm9tIFwiLi9DcmFmdGluZ0Vycm9yXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcblxyXG5jbGFzcyBBbGNoZW15RXJyb3IgZXh0ZW5kcyBDcmFmdGluZ0Vycm9yIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb25lbnRNaXg6IENyYWZ0aW5nQ29tcG9uZW50W107XHJcblxyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb21wb25lbnRNaXg6IENyYWZ0aW5nQ29tcG9uZW50W10sIGNvbXBvbmVudHNDb25zdW1lZDogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIGNvbXBvbmVudHNDb25zdW1lZCk7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50TWl4ID0gY29tcG9uZW50TWl4O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRNaXgoKTogQ3JhZnRpbmdDb21wb25lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudE1peDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7QWxjaGVteUVycm9yfSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/error/AlchemyError.ts\n");

/***/ }),

/***/ "./src/scripts/error/CraftingError.ts":
/*!********************************************!*\
  !*** ./src/scripts/error/CraftingError.ts ***!
  \********************************************/
/*! exports provided: CraftingError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingError\", function() { return CraftingError; });\nclass CraftingError extends Error {\r\n    constructor(message, componentsConsumed) {\r\n        super(message);\r\n        this._componentsConsumed = componentsConsumed;\r\n    }\r\n    get componentsConsumed() {\r\n        return this._componentsConsumed;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lcnJvci9DcmFmdGluZ0Vycm9yLnRzP2Y5YTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLE1BQU0sYUFBYyxTQUFRLEtBQUs7SUFJN0IsWUFBWSxPQUFlLEVBQUUsa0JBQTJCO1FBQ3BELEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxrQkFBa0IsQ0FBQztJQUNsRCxDQUFDO0lBRUQsSUFBSSxrQkFBa0I7UUFDbEIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDcEMsQ0FBQztDQUVKO0FBRXFCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvZXJyb3IvQ3JhZnRpbmdFcnJvci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENyYWZ0aW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29tcG9uZW50c0NvbnN1bWVkOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29tcG9uZW50c0NvbnN1bWVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5fY29tcG9uZW50c0NvbnN1bWVkID0gY29tcG9uZW50c0NvbnN1bWVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRzQ29uc3VtZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNDb25zdW1lZDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdFcnJvcn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/error/CraftingError.ts\n");

/***/ }),

/***/ "./src/scripts/game/CompendiumData.ts":
/*!********************************************!*\
  !*** ./src/scripts/game/CompendiumData.ts ***!
  \********************************************/
/*! exports provided: FabricateItemType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FabricateItemType\", function() { return FabricateItemType; });\nvar FabricateItemType;\r\n(function (FabricateItemType) {\r\n    FabricateItemType[\"RECIPE\"] = \"RECIPE\";\r\n    FabricateItemType[\"COMPONENT\"] = \"COMPONENT\";\r\n})(FabricateItemType || (FabricateItemType = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NvbXBlbmRpdW1EYXRhLnRzPzBlMTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBLElBQUssaUJBR0o7QUFIRCxXQUFLLGlCQUFpQjtJQUNsQixzQ0FBaUI7SUFDakIsNENBQXVCO0FBQzNCLENBQUMsRUFISSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBR3JCO0FBa0M0SSIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2dhbWUvQ29tcGVuZGl1bURhdGEudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9uVHlwZX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRpb25BY3Rpb25cIjtcclxuXHJcbmVudW0gRmFicmljYXRlSXRlbVR5cGUge1xyXG4gICAgUkVDSVBFID0gJ1JFQ0lQRScsXHJcbiAgICBDT01QT05FTlQgPSAnQ09NUE9ORU5UJ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ29tcGVuZGl1bUVudHJ5IHtcclxuICAgIHN5c3RlbUlkOiBzdHJpbmc7XHJcbiAgICBwYXJ0SWQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZUNvbXBvbmVudEZsYWdzIHtcclxuICAgIGVzc2VuY2VzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZUluZ3JlZGllbnRGbGFncyB7XHJcbiAgICBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgY29uc3VtZWQ6IGJvb2xlYW4sXHJcbiAgICBwYXJ0SWQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEZhYnJpY2F0ZVJlc3VsdEZsYWdzIHtcclxuICAgIGFjdGlvbjogRmFicmljYXRpb25BY3Rpb25UeXBlLFxyXG4gICAgcGFydElkOiBzdHJpbmcsXHJcbiAgICBxdWFudGl0eTogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSB7XHJcbiAgICB0eXBlOiBGYWJyaWNhdGVJdGVtVHlwZTtcclxuICAgIGlkZW50aXR5OiBDb21wZW5kaXVtRW50cnk7XHJcbiAgICByZWNpcGU/OiB7XHJcbiAgICAgICAgZXNzZW5jZXM6IHN0cmluZ1tdLFxyXG4gICAgICAgIGluZ3JlZGllbnRzOiBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3NbXSxcclxuICAgICAgICByZXN1bHRzOiBGYWJyaWNhdGVSZXN1bHRGbGFnc1tdXHJcbiAgICB9O1xyXG4gICAgY29tcG9uZW50PzogRmFicmljYXRlQ29tcG9uZW50RmxhZ3M7XHJcbn1cclxuXHJcbmV4cG9ydCB7RmFicmljYXRlQ29tcGVuZGl1bURhdGEsIEZhYnJpY2F0ZUl0ZW1UeXBlLCBGYWJyaWNhdGVJbmdyZWRpZW50RmxhZ3MsIEZhYnJpY2F0ZVJlc3VsdEZsYWdzLCBGYWJyaWNhdGVDb21wb25lbnRGbGFncywgQ29tcGVuZGl1bUVudHJ5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/CompendiumData.ts\n");

/***/ }),

/***/ "./src/scripts/game/CraftingInventory.ts":
/*!***********************************************!*\
  !*** ./src/scripts/game/CraftingInventory.ts ***!
  \***********************************************/
/*! exports provided: CraftingInventory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingInventory\", function() { return CraftingInventory; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\n/* harmony import */ var _CompendiumData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CompendiumData */ \"./src/scripts/game/CompendiumData.ts\");\n\r\n\r\n\r\nclass CraftingInventory {\r\n    constructor(actor) {\r\n        this._actor = actor;\r\n        this._supportedGameSystems = [];\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get actorId() {\r\n        return this._actor.id;\r\n    }\r\n    get supportedGameSystems() {\r\n        return this._supportedGameSystems;\r\n    }\r\n    get size() {\r\n        return this.contents.length;\r\n    }\r\n    get componentCount() {\r\n        return this.components.map((componentRecord) => componentRecord.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n    }\r\n    supportsGameSystem(gameSystem) {\r\n        return this._supportedGameSystems.some((supported) => supported === gameSystem);\r\n    }\r\n    containsIngredient(ingredient) {\r\n        const quantity = this.components.filter((candidate) => candidate.fabricateItem.sharesType(ingredient))\r\n            .map((candidate) => candidate.totalQuantity)\r\n            .reduce((left, right) => left + right, 0);\r\n        return ingredient.quantity <= quantity;\r\n    }\r\n    containsPart(partId, quantity = 1) {\r\n        const match = this.contents.find((itemRecord) => itemRecord.fabricateItem.partId === partId);\r\n        return match ? match.totalQuantity >= quantity : false;\r\n    }\r\n    containsAll(components) {\r\n        const componentCountById = new Map();\r\n        components.forEach((component) => {\r\n            if (componentCountById.has(component.partId)) {\r\n                const currentCount = componentCountById.get(component.partId);\r\n                componentCountById.set(component.partId, currentCount + 1);\r\n            }\r\n            else {\r\n                componentCountById.set(component.partId, 1);\r\n            }\r\n        });\r\n        componentCountById.forEach((amountRequired, partId) => {\r\n            const inventoryRecordForType = this.components.find((record) => record.fabricateItem.partId === partId);\r\n            if (!inventoryRecordForType || inventoryRecordForType.totalQuantity < amountRequired) {\r\n                return false;\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    hasAllIngredientsFor(recipe) {\r\n        return this.hasAllNamedIngredients(recipe) && this.hasAllEssences(recipe);\r\n    }\r\n    hasAllEssences(recipe) {\r\n        const outstandingEssencesByType = new Map();\r\n        if (!recipe.essences || recipe.essences.length === 0) {\r\n            return true;\r\n        }\r\n        recipe.essences.forEach((essence) => {\r\n            if (outstandingEssencesByType.has(essence)) {\r\n                outstandingEssencesByType.set(essence, outstandingEssencesByType.get(essence) + 1);\r\n            }\r\n            else {\r\n                outstandingEssencesByType.set(essence, 1);\r\n            }\r\n        });\r\n        for (let i = 0; i < this.components.length; i++) {\r\n            const thisRecord = this.components[i];\r\n            if (thisRecord.fabricateItem.essences) {\r\n                thisRecord.fabricateItem.essences.forEach((essence) => {\r\n                    if (outstandingEssencesByType.has(essence)) {\r\n                        const remaining = outstandingEssencesByType.get(essence);\r\n                        const contribution = thisRecord.totalQuantity;\r\n                        if (remaining <= contribution) {\r\n                            outstandingEssencesByType.delete(essence);\r\n                        }\r\n                        else {\r\n                            outstandingEssencesByType.set(essence, remaining - contribution);\r\n                        }\r\n                    }\r\n                });\r\n                if (outstandingEssencesByType.size === 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    hasAllNamedIngredients(recipe) {\r\n        const ingredientsByType = new Map();\r\n        let failedToFind = false;\r\n        let duplicatedIngredient = false;\r\n        recipe.ingredients.forEach((ingredient) => {\r\n            const present = this.containsIngredient(ingredient);\r\n            if (!present) {\r\n                failedToFind = true;\r\n                return;\r\n            }\r\n            const occurrences = ingredientsByType.get(ingredient.component.partId) + 1;\r\n            ingredientsByType.set(ingredient.component.partId, occurrences);\r\n            if (occurrences > 1) {\r\n                duplicatedIngredient = true;\r\n            }\r\n        });\r\n        if (duplicatedIngredient) {\r\n            throw new Error(`One or more ingredients were duplicated in a call to CraftingInventory.containsMany(ingredients: Ingredient[]). \r\n            Recipe[name='${recipe.name}',id='${recipe.partId}'] seems to be mis-configured! Recipes should be specified as \r\n            Ingredient[Mud, 2], not [Ingredient[Mud, 1], Ingredient[Mud 1]]. `);\r\n        }\r\n        return !failedToFind;\r\n    }\r\n    getOwningCraftingSystemForItem(item) {\r\n        const systemId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.systemId);\r\n        const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(systemId);\r\n        if (!craftingSystem) {\r\n            throw new Error(`Unable to look up crafting System '${systemId}' when indexing Item '${item._id}'. `);\r\n        }\r\n        return craftingSystem;\r\n    }\r\n    lookUp(item) {\r\n        const craftingSystem = this.getOwningCraftingSystemForItem(item);\r\n        const itemType = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.fabricateItemType);\r\n        const partId = item.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.item.partId);\r\n        switch (itemType) {\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].RECIPE:\r\n                const recipe = craftingSystem.getRecipeByPartId(partId);\r\n                if (recipe) {\r\n                    return recipe;\r\n                }\r\n                throw new Error(`Unable to look up Recipe with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            case _CompendiumData__WEBPACK_IMPORTED_MODULE_2__[\"FabricateItemType\"].COMPONENT:\r\n                const craftingComponent = craftingSystem.getComponentByPartId(partId);\r\n                if (craftingComponent) {\r\n                    return craftingComponent;\r\n                }\r\n                throw new Error(`Unable to look up Crafting Component with Part ID '${partId}' from Crafting System \r\n                    '${craftingSystem.compendiumPackKey}. '`);\r\n            default:\r\n                throw new Error(`Unrecognized Fabricate Item Type of '${itemType}' for Item '${item._id}'. \r\n                    The allowable values are 'COMPONENT' and 'RECIPE'. `);\r\n        }\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5LnRzP2Q3N2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF1QztBQUNnQztBQUNwQjtBQUluRCxNQUFlLGlCQUFpQjtJQUs1QixZQUFzQixLQUFZO1FBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxPQUFPO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxvQkFBb0I7UUFDcEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQVFELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxlQUFtRCxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDO2FBQzdHLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVNLGtCQUFrQixDQUFDLFVBQTBCO1FBQ2hELE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLFNBQXlCLEVBQUUsRUFBRSxDQUFDLFNBQVMsS0FBSyxVQUFVLENBQUMsQ0FBQztJQUNwRyxDQUFDO0lBRUQsa0JBQWtCLENBQUMsVUFBc0I7UUFDckMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVB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cy9nYW1lL0NyYWZ0aW5nSW52ZW50b3J5LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZH0gZnJvbSBcIi4vSW52ZW50b3J5UmVjb3JkXCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7SW5ncmVkaWVudH0gZnJvbSBcIi4uL2NvcmUvSW5ncmVkaWVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4uL2NvcmUvUmVjaXBlXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbX0gZnJvbSBcIi4uL2NvcmUvRmFicmljYXRlSXRlbVwiO1xyXG5pbXBvcnQgUHJvcGVydGllcyBmcm9tIFwiLi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcbmltcG9ydCB7RmFicmljYXRlSXRlbVR5cGV9IGZyb20gXCIuL0NvbXBlbmRpdW1EYXRhXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7RmFicmljYXRpb25BY3Rpb259IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0aW9uQWN0aW9uXCI7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBDcmFmdGluZ0ludmVudG9yeTxUIGV4dGVuZHMgSXRlbS5EYXRhPiBpbXBsZW1lbnRzIEludmVudG9yeTxUPiB7XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9hY3RvcjogYW55O1xyXG4gICAgcHJvdGVjdGVkIF9zdXBwb3J0ZWRHYW1lU3lzdGVtczogR2FtZVN5c3RlbVR5cGVbXTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoYWN0b3I6IEFjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvcjtcclxuICAgICAgICB0aGlzLl9zdXBwb3J0ZWRHYW1lU3lzdGVtcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcigpOiBBY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcklkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdXBwb3J0ZWRHYW1lU3lzdGVtcygpOiBHYW1lU3lzdGVtVHlwZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwcG9ydGVkR2FtZVN5c3RlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0IGNvbnRlbnRzKCk6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPltdO1xyXG5cclxuICAgIGFic3RyYWN0IGdldCBjb21wb25lbnRzKCk6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD5bXTtcclxuXHJcbiAgICBhYnN0cmFjdCBnZXQgcmVjaXBlcygpOiBJbnZlbnRvcnlSZWNvcmQ8UmVjaXBlPltdO1xyXG5cclxuICAgIGdldCBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21wb25lbnRDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMubWFwKChjb21wb25lbnRSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IGNvbXBvbmVudFJlY29yZC50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VwcG9ydHNHYW1lU3lzdGVtKGdhbWVTeXN0ZW06IEdhbWVTeXN0ZW1UeXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cHBvcnRlZEdhbWVTeXN0ZW1zLnNvbWUoKHN1cHBvcnRlZDogR2FtZVN5c3RlbVR5cGUpID0+IHN1cHBvcnRlZCA9PT0gZ2FtZVN5c3RlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnNJbmdyZWRpZW50KGluZ3JlZGllbnQ6IEluZ3JlZGllbnQpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBxdWFudGl0eSA9IHRoaXMuY29tcG9uZW50cy5maWx0ZXIoKGNhbmRpZGF0ZTogSW52ZW50b3J5UmVjb3JkPENyYWZ0aW5nQ29tcG9uZW50PikgPT4gY2FuZGlkYXRlLmZhYnJpY2F0ZUl0ZW0uc2hhcmVzVHlwZShpbmdyZWRpZW50KSlcclxuICAgICAgICAgICAgLm1hcCgoY2FuZGlkYXRlOiBJbnZlbnRvcnlSZWNvcmQ8RmFicmljYXRlSXRlbT4pID0+IGNhbmRpZGF0ZS50b3RhbFF1YW50aXR5KVxyXG4gICAgICAgICAgICAucmVkdWNlKChsZWZ0LCByaWdodCkgPT4gbGVmdCArIHJpZ2h0LCAwKTtcclxuICAgICAgICByZXR1cm4gaW5ncmVkaWVudC5xdWFudGl0eSA8PSBxdWFudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluc1BhcnQocGFydElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIgPSAxKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmNvbnRlbnRzLmZpbmQoKGl0ZW1SZWNvcmQ6IEludmVudG9yeVJlY29yZDxGYWJyaWNhdGVJdGVtPikgPT4gaXRlbVJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCA9PT0gcGFydElkKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaC50b3RhbFF1YW50aXR5ID49IHF1YW50aXR5IDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbnNBbGwoY29tcG9uZW50czogQ3JhZnRpbmdDb21wb25lbnRbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudENvdW50QnlJZDogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgY29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRDb3VudEJ5SWQuaGFzKGNvbXBvbmVudC5wYXJ0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q291bnQgPSBjb21wb25lbnRDb3VudEJ5SWQuZ2V0KGNvbXBvbmVudC5wYXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50Q291bnRCeUlkLnNldChjb21wb25lbnQucGFydElkLCBjdXJyZW50Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudENvdW50QnlJZC5zZXQoY29tcG9uZW50LnBhcnRJZCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb21wb25lbnRDb3VudEJ5SWQuZm9yRWFjaCgoYW1vdW50UmVxdWlyZWQ6IG51bWJlciwgcGFydElkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5UmVjb3JkRm9yVHlwZSA9IHRoaXMuY29tcG9uZW50cy5maW5kKChyZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCA9PT0gcGFydElkKTtcclxuICAgICAgICAgICAgaWYgKCFpbnZlbnRvcnlSZWNvcmRGb3JUeXBlIHx8IGludmVudG9yeVJlY29yZEZvclR5cGUudG90YWxRdWFudGl0eSA8IGFtb3VudFJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNBbGxJbmdyZWRpZW50c0ZvcihyZWNpcGU6IFJlY2lwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc0FsbE5hbWVkSW5ncmVkaWVudHMocmVjaXBlKSAmJiB0aGlzLmhhc0FsbEVzc2VuY2VzKHJlY2lwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYXNBbGxFc3NlbmNlcyhyZWNpcGU6IFJlY2lwZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGU6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgIGlmICghcmVjaXBlLmVzc2VuY2VzIHx8IHJlY2lwZS5lc3NlbmNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlY2lwZS5lc3NlbmNlcy5mb3JFYWNoKChlc3NlbmNlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLnNldChlc3NlbmNlLCBvdXRzdGFuZGluZ0Vzc2VuY2VzQnlUeXBlLmdldChlc3NlbmNlKSArIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5zZXQoZXNzZW5jZSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0aGlzUmVjb3JkOiBJbnZlbnRvcnlSZWNvcmQ8Q3JhZnRpbmdDb21wb25lbnQ+ID0gdGhpcy5jb21wb25lbnRzW2ldO1xyXG4gICAgICAgICAgICBpZiAodGhpc1JlY29yZC5mYWJyaWNhdGVJdGVtLmVzc2VuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzUmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMuZm9yRWFjaCgoZXNzZW5jZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuaGFzKGVzc2VuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZzogbnVtYmVyID0gb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5nZXQoZXNzZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvbiA9IHRoaXNSZWNvcmQudG90YWxRdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSBjb250cmlidXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuZGVsZXRlKGVzc2VuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0c3RhbmRpbmdFc3NlbmNlc0J5VHlwZS5zZXQoZXNzZW5jZSwgcmVtYWluaW5nIC0gY29udHJpYnV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nRXNzZW5jZXNCeVR5cGUuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc0FsbE5hbWVkSW5ncmVkaWVudHMocmVjaXBlOiBSZWNpcGUpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBpbmdyZWRpZW50c0J5VHlwZSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICAgICAgbGV0IGZhaWxlZFRvRmluZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkdXBsaWNhdGVkSW5ncmVkaWVudDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIHJlY2lwZS5pbmdyZWRpZW50cy5mb3JFYWNoKChpbmdyZWRpZW50OiBJbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXNlbnQ6IGJvb2xlYW4gPSB0aGlzLmNvbnRhaW5zSW5ncmVkaWVudChpbmdyZWRpZW50KTtcclxuICAgICAgICAgICAgaWYgKCFwcmVzZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsZWRUb0ZpbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG9jY3VycmVuY2VzID0gaW5ncmVkaWVudHNCeVR5cGUuZ2V0KGluZ3JlZGllbnQuY29tcG9uZW50LnBhcnRJZCkgKyAxO1xyXG4gICAgICAgICAgICBpbmdyZWRpZW50c0J5VHlwZS5zZXQoaW5ncmVkaWVudC5jb21wb25lbnQucGFydElkLCBvY2N1cnJlbmNlcyk7XHJcbiAgICAgICAgICAgIGlmIChvY2N1cnJlbmNlcyA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZWRJbmdyZWRpZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChkdXBsaWNhdGVkSW5ncmVkaWVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9uZSBvciBtb3JlIGluZ3JlZGllbnRzIHdlcmUgZHVwbGljYXRlZCBpbiBhIGNhbGwgdG8gQ3JhZnRpbmdJbnZlbnRvcnkuY29udGFpbnNNYW55KGluZ3JlZGllbnRzOiBJbmdyZWRpZW50W10pLiBcclxuICAgICAgICAgICAgUmVjaXBlW25hbWU9JyR7cmVjaXBlLm5hbWV9JyxpZD0nJHtyZWNpcGUucGFydElkfSddIHNlZW1zIHRvIGJlIG1pcy1jb25maWd1cmVkISBSZWNpcGVzIHNob3VsZCBiZSBzcGVjaWZpZWQgYXMgXHJcbiAgICAgICAgICAgIEluZ3JlZGllbnRbTXVkLCAyXSwgbm90IFtJbmdyZWRpZW50W011ZCwgMV0sIEluZ3JlZGllbnRbTXVkIDFdXS4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAhZmFpbGVkVG9GaW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRPd25pbmdDcmFmdGluZ1N5c3RlbUZvckl0ZW0oaXRlbTogSXRlbSk6IENyYWZ0aW5nU3lzdGVtIHtcclxuICAgICAgICBjb25zdCBzeXN0ZW1JZCA9IGl0ZW0uZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLml0ZW0uc3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtID0gRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5nZXRTeXN0ZW1CeUNvbXBlbmRpdW1QYWNrS2V5KHN5c3RlbUlkKTtcclxuICAgICAgICBpZiAoIWNyYWZ0aW5nU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGxvb2sgdXAgY3JhZnRpbmcgU3lzdGVtICcke3N5c3RlbUlkfScgd2hlbiBpbmRleGluZyBJdGVtICcke2l0ZW0uX2lkfScuIGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JhZnRpbmdTeXN0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvb2tVcChpdGVtOiBJdGVtKTogRmFicmljYXRlSXRlbSB7XHJcbiAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW06IENyYWZ0aW5nU3lzdGVtID0gdGhpcy5nZXRPd25pbmdDcmFmdGluZ1N5c3RlbUZvckl0ZW0oaXRlbSk7XHJcbiAgICAgICAgY29uc3QgaXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlID0gaXRlbS5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuaXRlbS5mYWJyaWNhdGVJdGVtVHlwZSk7XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBpdGVtLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5pdGVtLnBhcnRJZCk7XHJcbiAgICAgICAgc3dpdGNoIChpdGVtVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLlJFQ0lQRTpcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2lwZTogUmVjaXBlID0gY3JhZnRpbmdTeXN0ZW0uZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWNpcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjaXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9vayB1cCBSZWNpcGUgd2l0aCBQYXJ0IElEICcke3BhcnRJZH0nIGZyb20gQ3JhZnRpbmcgU3lzdGVtIFxyXG4gICAgICAgICAgICAgICAgICAgICcke2NyYWZ0aW5nU3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fS4gJ2ApO1xyXG4gICAgICAgICAgICBjYXNlIEZhYnJpY2F0ZUl0ZW1UeXBlLkNPTVBPTkVOVDpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50OiBDcmFmdGluZ0NvbXBvbmVudCA9IGNyYWZ0aW5nU3lzdGVtLmdldENvbXBvbmVudEJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3JhZnRpbmdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JhZnRpbmdDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb29rIHVwIENyYWZ0aW5nIENvbXBvbmVudCB3aXRoIFBhcnQgSUQgJyR7cGFydElkfScgZnJvbSBDcmFmdGluZyBTeXN0ZW0gXHJcbiAgICAgICAgICAgICAgICAgICAgJyR7Y3JhZnRpbmdTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXl9LiAnYCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBGYWJyaWNhdGUgSXRlbSBUeXBlIG9mICcke2l0ZW1UeXBlfScgZm9yIEl0ZW0gJyR7aXRlbS5faWR9Jy4gXHJcbiAgICAgICAgICAgICAgICAgICAgVGhlIGFsbG93YWJsZSB2YWx1ZXMgYXJlICdDT01QT05FTlQnIGFuZCAnUkVDSVBFJy4gYClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHJlbW92ZShpdGVtOiBGYWJyaWNhdGVJdGVtLCBxdWFudGl0eT86IG51bWJlcik6IFByb21pc2U8RmFicmljYXRpb25BY3Rpb248VD4+O1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhZGQoaXRlbTogRmFicmljYXRlSXRlbSwgcXVhbnRpdHk/OiBudW1iZXIsIGN1c3RvbURhdGE/OiBhbnkpOiBQcm9taXNlPEZhYnJpY2F0aW9uQWN0aW9uPFQ+PjtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgdXBkYXRlKCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHVwZGF0ZVF1YW50aXR5Rm9yKGl0ZW06IGFueSk6IFByb21pc2U8Ym9vbGVhbj47XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nSW52ZW50b3J5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/game/CraftingInventory.ts\n");

/***/ }),

/***/ "./src/scripts/game/InventoryRecord.ts":
/*!*********************************************!*\
  !*** ./src/scripts/game/InventoryRecord.ts ***!
  \*********************************************/
/*! exports provided: InventoryRecord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRecord\", function() { return InventoryRecord; });\nclass InventoryRecord {\r\n    constructor(builder) {\r\n        this._actor = builder.actor;\r\n        this._itemsOfType = builder.itemsOfType;\r\n        this._totalQuantity = builder.totalQuantity;\r\n        this._fabricateItem = builder.fabricateItem;\r\n        this._fabricateItemType = builder.fabricateItemType;\r\n    }\r\n    static builder() {\r\n        return new InventoryRecord.Builder();\r\n    }\r\n    combineWith(other) {\r\n        if (!this.fabricateItem.sharesType(other.fabricateItem)) {\r\n            throw new Error(`Unable to combine Inventory Records for different Fabricate Item types: ${this.fabricateItem.partId} | ${other.fabricateItem.partId}`);\r\n        }\r\n        if (this.actor.id !== other.actor.id) {\r\n            throw new Error(`Unable to combine inventory records from different Actors: ${this.actor.id} | ${other.actor.id}`);\r\n        }\r\n        return InventoryRecord.builder()\r\n            .withFabricateItem(this.fabricateItem)\r\n            .withFabricateItemType(this.fabricateItemType)\r\n            .withActor(this.actor)\r\n            .withItems(this.itemsOfType)\r\n            .withItems(other.itemsOfType)\r\n            .withTotalQuantity(this.totalQuantity + other.totalQuantity)\r\n            .build();\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    get itemsOfType() {\r\n        return this._itemsOfType;\r\n    }\r\n    set itemsOfType(value) {\r\n        this._itemsOfType = value;\r\n    }\r\n    get totalQuantity() {\r\n        return this._totalQuantity;\r\n    }\r\n    set totalQuantity(value) {\r\n        this._totalQuantity = value;\r\n    }\r\n    get fabricateItem() {\r\n        return this._fabricateItem;\r\n    }\r\n    get fabricateItemType() {\r\n        return this._fabricateItemType;\r\n    }\r\n}\r\n(function (InventoryRecord) {\r\n    class Builder {\r\n        constructor() {\r\n            this.itemsOfType = [];\r\n        }\r\n        withActor(value) {\r\n            this.actor = value;\r\n            return this;\r\n        }\r\n        withItem(value) {\r\n            this.itemsOfType.push(value);\r\n            return this;\r\n        }\r\n        withItems(value) {\r\n            this.itemsOfType.push(...value);\r\n            return this;\r\n        }\r\n        withFabricateItem(value) {\r\n            this.fabricateItem = value;\r\n            return this;\r\n        }\r\n        withTotalQuantity(value) {\r\n            this.totalQuantity = value;\r\n            return this;\r\n        }\r\n        withFabricateItemType(value) {\r\n            this.fabricateItemType = value;\r\n            return this;\r\n        }\r\n        build() {\r\n            return new InventoryRecord(this);\r\n        }\r\n    }\r\n    InventoryRecord.Builder = Builder;\r\n})(InventoryRecord || (InventoryRecord = {}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nYW1lL0ludmVudG9yeVJlY29yZC50cz9lZDA1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0FBQUE7QUFBQSxNQUFNLGVBQWU7SUFPakIsWUFBWSxPQUFtQztRQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7UUFDNUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztJQUN4RCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU87UUFDakIsT0FBTyxJQUFJLGVBQWUsQ0FBQyxPQUFPLEVBQUssQ0FBQztJQUM1QyxDQUFDO0lBRU0sV0FBVyxDQUFDLEtBQXlCO1FBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDckQsTUFBTSxJQUFJLEtBQUssQ0FBQywyRUFBMkUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLE1BQU0sS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQzNKO1FBQ0QsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRTtZQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLDhEQUE4RCxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdEg7UUFDRCxPQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUs7YUFDOUIsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQzthQUNyQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUM7YUFDN0MsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7YUFDckIsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7YUFDM0IsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7YUFDNUIsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO2FBQzNELEtBQUssRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVELElBQUksV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxXQUFXLENBQUMsS0FBYTtRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxhQUFhO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFJLGFBQWEsQ0FBQyxLQUFhO1FBQzNCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQUksaUJBQWlCO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ25DLENBQUM7Q0FDSjtBQUVELFdBQVUsZUFBZTtJQUNyQixNQUFhLE9BQU87UUFBcEI7WUFFVyxnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQXVDcEMsQ0FBQztRQWxDVSxTQUFTLENBQUMsS0FBWTtZQUN6QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO1FBRU0sUUFBUSxDQUFDLEtBQVc7WUFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDN0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLFNBQVMsQ0FBQyxLQUFhO1lBQzFCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7WUFDaEMsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGlCQUFpQixDQUFDLEtBQVE7WUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLGlCQUFpQixDQUFDLEtBQWE7WUFDbEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLHFCQUFxQixDQUFDLEtBQXdCO1lBQ2pELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7WUFDL0IsT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVNLEtBQUs7WUFDUixPQUFPLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JDLENBQUM7S0FFSjtJQXpDWSx1QkFBTyxVQXlDbkI7QUFDTCxDQUFDLEVBM0NTLGVBQWUsS0FBZixlQUFlLFFBMkN4QjtBQUV1QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2dhbWUvSW52ZW50b3J5UmVjb3JkLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWJyaWNhdGVJdGVtVHlwZX0gZnJvbSBcIi4vQ29tcGVuZGl1bURhdGFcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVJdGVtfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGVJdGVtXCI7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnlSZWNvcmQ8VCBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdG9yOiBBY3RvcjtcclxuICAgIHByaXZhdGUgX2l0ZW1zT2ZUeXBlOiBJdGVtW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mYWJyaWNhdGVJdGVtOiBUO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZmFicmljYXRlSXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG4gICAgcHJpdmF0ZSBfdG90YWxRdWFudGl0eTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IEludmVudG9yeVJlY29yZC5CdWlsZGVyPFQ+KSB7XHJcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBidWlsZGVyLmFjdG9yO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zT2ZUeXBlID0gYnVpbGRlci5pdGVtc09mVHlwZTtcclxuICAgICAgICB0aGlzLl90b3RhbFF1YW50aXR5ID0gYnVpbGRlci50b3RhbFF1YW50aXR5O1xyXG4gICAgICAgIHRoaXMuX2ZhYnJpY2F0ZUl0ZW0gPSBidWlsZGVyLmZhYnJpY2F0ZUl0ZW07XHJcbiAgICAgICAgdGhpcy5fZmFicmljYXRlSXRlbVR5cGUgPSBidWlsZGVyLmZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRlcjxUIGV4dGVuZHMgRmFicmljYXRlSXRlbT4oKTogSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8VD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW52ZW50b3J5UmVjb3JkLkJ1aWxkZXI8VD4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29tYmluZVdpdGgob3RoZXI6IEludmVudG9yeVJlY29yZDxUPik6IEludmVudG9yeVJlY29yZDxUPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZhYnJpY2F0ZUl0ZW0uc2hhcmVzVHlwZShvdGhlci5mYWJyaWNhdGVJdGVtKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb21iaW5lIEludmVudG9yeSBSZWNvcmRzIGZvciBkaWZmZXJlbnQgRmFicmljYXRlIEl0ZW0gdHlwZXM6ICR7dGhpcy5mYWJyaWNhdGVJdGVtLnBhcnRJZH0gfCAke290aGVyLmZhYnJpY2F0ZUl0ZW0ucGFydElkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hY3Rvci5pZCAhPT0gb3RoZXIuYWN0b3IuaWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29tYmluZSBpbnZlbnRvcnkgcmVjb3JkcyBmcm9tIGRpZmZlcmVudCBBY3RvcnM6ICR7dGhpcy5hY3Rvci5pZH0gfCAke290aGVyLmFjdG9yLmlkfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSW52ZW50b3J5UmVjb3JkLmJ1aWxkZXI8VD4oKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW0odGhpcy5mYWJyaWNhdGVJdGVtKVxyXG4gICAgICAgICAgICAud2l0aEZhYnJpY2F0ZUl0ZW1UeXBlKHRoaXMuZmFicmljYXRlSXRlbVR5cGUpXHJcbiAgICAgICAgICAgIC53aXRoQWN0b3IodGhpcy5hY3RvcilcclxuICAgICAgICAgICAgLndpdGhJdGVtcyh0aGlzLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aEl0ZW1zKG90aGVyLml0ZW1zT2ZUeXBlKVxyXG4gICAgICAgICAgICAud2l0aFRvdGFsUXVhbnRpdHkodGhpcy50b3RhbFF1YW50aXR5ICsgb3RoZXIudG90YWxRdWFudGl0eSlcclxuICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdG9yKCk6IEFjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGl0ZW1zT2ZUeXBlKCk6IEl0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zT2ZUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpdGVtc09mVHlwZSh2YWx1ZTogSXRlbVtdKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXNPZlR5cGUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG90YWxRdWFudGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbFF1YW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0b3RhbFF1YW50aXR5KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl90b3RhbFF1YW50aXR5ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW0oKTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZhYnJpY2F0ZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZhYnJpY2F0ZUl0ZW1UeXBlKCk6IEZhYnJpY2F0ZUl0ZW1UeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmFicmljYXRlSXRlbVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBJbnZlbnRvcnlSZWNvcmQge1xyXG4gICAgZXhwb3J0IGNsYXNzIEJ1aWxkZXI8VCBleHRlbmRzIEZhYnJpY2F0ZUl0ZW0+IHtcclxuICAgICAgICBwdWJsaWMgYWN0b3IhOiBBY3RvcjtcclxuICAgICAgICBwdWJsaWMgaXRlbXNPZlR5cGU6IEl0ZW1bXSA9IFtdO1xyXG4gICAgICAgIHB1YmxpYyBmYWJyaWNhdGVJdGVtITogVDtcclxuICAgICAgICBwdWJsaWMgdG90YWxRdWFudGl0eSE6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgZmFicmljYXRlSXRlbVR5cGU6IEZhYnJpY2F0ZUl0ZW1UeXBlO1xyXG5cclxuICAgICAgICBwdWJsaWMgd2l0aEFjdG9yKHZhbHVlOiBBY3Rvcik6IEJ1aWxkZXI8VD4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJdGVtKHZhbHVlOiBJdGVtKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNPZlR5cGUucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhJdGVtcyh2YWx1ZTogSXRlbVtdKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNPZlR5cGUucHVzaCguLi52YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHdpdGhGYWJyaWNhdGVJdGVtKHZhbHVlOiBUKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFicmljYXRlSXRlbSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoVG90YWxRdWFudGl0eSh2YWx1ZTogbnVtYmVyKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxRdWFudGl0eSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aXRoRmFicmljYXRlSXRlbVR5cGUodmFsdWU6IEZhYnJpY2F0ZUl0ZW1UeXBlKTogQnVpbGRlcjxUPiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFicmljYXRlSXRlbVR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGQoKTogSW52ZW50b3J5UmVjb3JkPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnZlbnRvcnlSZWNvcmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtJbnZlbnRvcnlSZWNvcmR9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/game/InventoryRecord.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingChatMessage.ts":
/*!******************************************************!*\
  !*** ./src/scripts/interface/CraftingChatMessage.ts ***!
  \******************************************************/
/*! exports provided: CraftingChatMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingChatMessage\", function() { return CraftingChatMessage; });\n/* harmony import */ var _core_FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/FabricationOutcome */ \"./src/scripts/core/FabricationOutcome.ts\");\n\r\nclass CraftingChatMessage {\r\n    constructor(cardTitle, cardContent, cardFooterParts, addedItems, cardImageUrl, cardImageTitle) {\r\n        this._cardTitle = cardTitle;\r\n        this._cardContent = cardContent;\r\n        this._addedItems = addedItems;\r\n        this._cardFooterParts = cardFooterParts;\r\n        this._cardImageUrl = cardImageUrl;\r\n        this._cardImageTitle = cardImageTitle;\r\n    }\r\n    static fromFabricationError(error) {\r\n        return new CraftingChatMessage('Crafting error', error.message, [], [], CraftingChatMessage._craftingFailureIconUrl, 'Crafting ');\r\n    }\r\n    static fromUnexpectedError(error) {\r\n        return new CraftingChatMessage('Something went wrong', error.message, [], [], CraftingChatMessage._unexpectedErrorIconUrl, 'Oops!');\r\n    }\r\n    static fromFabricationOutcome(outcome) {\r\n        const footerParts = outcome.removedComponents && outcome.removedComponents.length > 0 ? ['Removed:'].concat(outcome.removedComponents) : ['No components were removed'];\r\n        const cardImageUrl = outcome.type === _core_FabricationOutcome__WEBPACK_IMPORTED_MODULE_0__[\"OutcomeType\"].SUCCESS ? CraftingChatMessage.randomCardImageUrl : CraftingChatMessage._craftingFailureIconUrl;\r\n        return new CraftingChatMessage(outcome.title, outcome.description, footerParts, outcome.addedItems, cardImageUrl);\r\n    }\r\n    get cardImageUrl() {\r\n        return this._cardImageUrl;\r\n    }\r\n    static get randomCardImageUrl() {\r\n        const selectedImageIndex = Math.floor(Math.random() * CraftingChatMessage._defaultImages.length);\r\n        return CraftingChatMessage._defaultImages[selectedImageIndex];\r\n    }\r\n    get cardImageTitle() {\r\n        if (this._cardImageTitle) {\r\n            return this._cardImageTitle;\r\n        }\r\n        return 'Fabricate Crafting';\r\n    }\r\n    get cardTitle() {\r\n        return this._cardTitle;\r\n    }\r\n    get footerParts() {\r\n        return this._cardFooterParts;\r\n    }\r\n    get description() {\r\n        return this._cardContent;\r\n    }\r\n    get results() {\r\n        return this._addedItems;\r\n    }\r\n    get hasResults() {\r\n        return this._addedItems && this._addedItems.length > 0;\r\n    }\r\n}\r\nCraftingChatMessage._unexpectedErrorIconUrl = 'modules/fabricate/assets/caution.svg';\r\nCraftingChatMessage._craftingFailureIconUrl = 'modules/fabricate/assets/fabricate-error.png';\r\nCraftingChatMessage._fabricateFireIconUrl = 'modules/fabricate/assets/fabricate-fire.png';\r\nCraftingChatMessage._fabricateEarthIconUrl = 'modules/fabricate/assets/fabricate-earth.png';\r\nCraftingChatMessage._fabricateWaterIconUrl = 'modules/fabricate/assets/fabricate-water.png';\r\nCraftingChatMessage._fabricateAirIconUrl = 'modules/fabricate/assets/fabricate-air.png';\r\nCraftingChatMessage._defaultImages = [\r\n    CraftingChatMessage._fabricateFireIconUrl,\r\n    CraftingChatMessage._fabricateEarthIconUrl,\r\n    CraftingChatMessage._fabricateWaterIconUrl,\r\n    CraftingChatMessage._fabricateAirIconUrl\r\n];\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdDaGF0TWVzc2FnZS50cz83N2M3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUEyRTtBQUkzRSxNQUFNLG1CQUFtQjtJQXNCckIsWUFBWSxTQUFpQixFQUNqQixXQUFtQixFQUNuQixlQUF5QixFQUN6QixVQUEyQyxFQUMzQyxZQUFxQixFQUNyQixjQUF1QjtRQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztRQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQztRQUNoQyxJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZUFBZSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDO0lBQzFDLENBQUM7SUFFTSxNQUFNLENBQUMsb0JBQW9CLENBQUMsS0FBb0I7UUFDbkQsT0FBTyxJQUFJLG1CQUFtQixDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyx1QkFBdUIsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN0SSxDQUFDO0lBRUQsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQVk7UUFDbkMsT0FBTyxJQUFJLG1CQUFtQixDQUFDLHNCQUFzQixFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQyx1QkFBdUIsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4SSxDQUFDO0lBRU0sTUFBTSxDQUFDLHNCQUFzQixDQUFDLE9BQTJCO1FBQzVELE1BQU0sV0FBVyxHQUFhLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxPQUFPLENBQUMsaUJBQWlCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQztRQUNsTCxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsSUFBSSxLQUFLLG9FQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsdUJBQXVCLENBQUM7UUFDakosT0FBTyxJQUFJLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN0SCxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFFRCxNQUFNLEtBQUssa0JBQWtCO1FBQ3pCLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsbUJBQW1CLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pHLE9BQU8sbUJBQW1CLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELElBQUksY0FBYztRQUNkLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN0QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7U0FDL0I7UUFDRCxPQUFPLG9CQUFvQixDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxVQUFVO0lBQzFCLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDWCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLE9BQU87UUFDUCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDM0QsQ0FBQzs7QUFsRnVCLDJDQUF1QixHQUFHLHNDQUFzQyxDQUFDO0FBQ2pFLDJDQUF1QixHQUFHLDhDQUE4QyxDQUFDO0FBQ3pFLHlDQUFxQixHQUFHLDZDQUE2QyxDQUFDO0FBQ3RFLDBDQUFzQixHQUFHLDhDQUE4QyxDQUFDO0FBQ3hFLDBDQUFzQixHQUFHLDhDQUE4QyxDQUFDO0FBQ3hFLHdDQUFvQixHQUFHLDRDQUE0QyxDQUFDO0FBQ3BFLGtDQUFjLEdBQWE7SUFDL0MsbUJBQW1CLENBQUMscUJBQXFCO0lBQ3pDLG1CQUFtQixDQUFDLHNCQUFzQjtJQUMxQyxtQkFBbUIsQ0FBQyxzQkFBc0I7SUFDMUMsbUJBQW1CLENBQUMsb0JBQW9CO0NBQzNDLENBQUM7QUEyRXNCIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvaW50ZXJmYWNlL0NyYWZ0aW5nQ2hhdE1lc3NhZ2UudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhYnJpY2F0aW9uT3V0Y29tZSwgT3V0Y29tZVR5cGV9IGZyb20gXCIuLi9jb3JlL0ZhYnJpY2F0aW9uT3V0Y29tZVwiO1xyXG5pbXBvcnQge0ZhYnJpY2F0aW9uQWN0aW9ufSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdGlvbkFjdGlvblwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nRXJyb3J9IGZyb20gXCIuLi9lcnJvci9DcmFmdGluZ0Vycm9yXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ0NoYXRNZXNzYWdlIHtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfdW5leHBlY3RlZEVycm9ySWNvblVybCA9ICdtb2R1bGVzL2ZhYnJpY2F0ZS9hc3NldHMvY2F1dGlvbi5zdmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2NyYWZ0aW5nRmFpbHVyZUljb25VcmwgPSAnbW9kdWxlcy9mYWJyaWNhdGUvYXNzZXRzL2ZhYnJpY2F0ZS1lcnJvci5wbmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2ZhYnJpY2F0ZUZpcmVJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtZmlyZS5wbmcnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgX2ZhYnJpY2F0ZUVhcnRoSWNvblVybCA9ICdtb2R1bGVzL2ZhYnJpY2F0ZS9hc3NldHMvZmFicmljYXRlLWVhcnRoLnBuZyc7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfZmFicmljYXRlV2F0ZXJJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtd2F0ZXIucG5nJztcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IF9mYWJyaWNhdGVBaXJJY29uVXJsID0gJ21vZHVsZXMvZmFicmljYXRlL2Fzc2V0cy9mYWJyaWNhdGUtYWlyLnBuZyc7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBfZGVmYXVsdEltYWdlczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fZmFicmljYXRlRmlyZUljb25VcmwsXHJcbiAgICAgICAgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fZmFicmljYXRlRWFydGhJY29uVXJsLFxyXG4gICAgICAgIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX2ZhYnJpY2F0ZVdhdGVySWNvblVybCxcclxuICAgICAgICBDcmFmdGluZ0NoYXRNZXNzYWdlLl9mYWJyaWNhdGVBaXJJY29uVXJsXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRUaXRsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2FyZENvbnRlbnQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRGb290ZXJQYXJ0czogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hZGRlZEl0ZW1zOiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jYXJkSW1hZ2VVcmw6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhcmRJbWFnZVRpdGxlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2FyZFRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBjYXJkQ29udGVudDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgY2FyZEZvb3RlclBhcnRzOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgICAgIGFkZGVkSXRlbXM/OiBGYWJyaWNhdGlvbkFjdGlvbjxJdGVtLkRhdGE+W10sXHJcbiAgICAgICAgICAgICAgICBjYXJkSW1hZ2VVcmw/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBjYXJkSW1hZ2VUaXRsZT86IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUaXRsZSA9IGNhcmRUaXRsZTtcclxuICAgICAgICB0aGlzLl9jYXJkQ29udGVudCA9IGNhcmRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2FkZGVkSXRlbXMgPSBhZGRlZEl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2NhcmRGb290ZXJQYXJ0cyA9IGNhcmRGb290ZXJQYXJ0cztcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2VVcmwgPSBjYXJkSW1hZ2VVcmw7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlVGl0bGUgPSBjYXJkSW1hZ2VUaXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21GYWJyaWNhdGlvbkVycm9yKGVycm9yOiBDcmFmdGluZ0Vycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDcmFmdGluZ0NoYXRNZXNzYWdlKCdDcmFmdGluZyBlcnJvcicsIGVycm9yLm1lc3NhZ2UsIFtdLCBbXSwgQ3JhZnRpbmdDaGF0TWVzc2FnZS5fY3JhZnRpbmdGYWlsdXJlSWNvblVybCwgJ0NyYWZ0aW5nICcpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tVW5leHBlY3RlZEVycm9yKGVycm9yOiBFcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdDaGF0TWVzc2FnZSgnU29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnJvci5tZXNzYWdlLCBbXSwgW10sIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX3VuZXhwZWN0ZWRFcnJvckljb25VcmwsICdPb3BzIScpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUZhYnJpY2F0aW9uT3V0Y29tZShvdXRjb21lOiBGYWJyaWNhdGlvbk91dGNvbWUpOiBDcmFmdGluZ0NoYXRNZXNzYWdlIHtcclxuICAgICAgICBjb25zdCBmb290ZXJQYXJ0czogc3RyaW5nW10gPSBvdXRjb21lLnJlbW92ZWRDb21wb25lbnRzICYmIG91dGNvbWUucmVtb3ZlZENvbXBvbmVudHMubGVuZ3RoID4gMCA/IFsnUmVtb3ZlZDonXS5jb25jYXQob3V0Y29tZS5yZW1vdmVkQ29tcG9uZW50cykgOiBbJ05vIGNvbXBvbmVudHMgd2VyZSByZW1vdmVkJ107XHJcbiAgICAgICAgY29uc3QgY2FyZEltYWdlVXJsID0gb3V0Y29tZS50eXBlID09PSBPdXRjb21lVHlwZS5TVUNDRVNTID8gQ3JhZnRpbmdDaGF0TWVzc2FnZS5yYW5kb21DYXJkSW1hZ2VVcmwgOiBDcmFmdGluZ0NoYXRNZXNzYWdlLl9jcmFmdGluZ0ZhaWx1cmVJY29uVXJsO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ3JhZnRpbmdDaGF0TWVzc2FnZShvdXRjb21lLnRpdGxlLCBvdXRjb21lLmRlc2NyaXB0aW9uLCBmb290ZXJQYXJ0cywgb3V0Y29tZS5hZGRlZEl0ZW1zLCBjYXJkSW1hZ2VVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjYXJkSW1hZ2VVcmwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZVVybDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IHJhbmRvbUNhcmRJbWFnZVVybCgpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZEltYWdlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDcmFmdGluZ0NoYXRNZXNzYWdlLl9kZWZhdWx0SW1hZ2VzLmxlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIENyYWZ0aW5nQ2hhdE1lc3NhZ2UuX2RlZmF1bHRJbWFnZXNbc2VsZWN0ZWRJbWFnZUluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FyZEltYWdlVGl0bGUoKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FyZEltYWdlVGl0bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZVRpdGxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJ0ZhYnJpY2F0ZSBDcmFmdGluZyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNhcmRUaXRsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkVGl0bGVcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9vdGVyUGFydHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRGb290ZXJQYXJ0cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZXN1bHRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRlZEl0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNSZXN1bHRzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRlZEl0ZW1zICYmIHRoaXMuX2FkZGVkSXRlbXMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7Q3JhZnRpbmdDaGF0TWVzc2FnZX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingChatMessage.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTab.ts":
/*!**********************************************!*\
  !*** ./src/scripts/interface/CraftingTab.ts ***!
  \**********************************************/
/*! exports provided: CraftingTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTab\", function() { return CraftingTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dnd5e/Inventory5E */ \"./src/scripts/dnd5e/Inventory5E.ts\");\n/* harmony import */ var _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CraftingTabData */ \"./src/scripts/interface/CraftingTabData.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass CraftingTab {\r\n    constructor(actorApplication, actor) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = actorApplication;\r\n        this._actor = actor;\r\n        let inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(actor.id);\r\n        if (inventory) {\r\n            this._inventory = inventory;\r\n        }\r\n        else {\r\n            inventory = new _dnd5e_Inventory5E__WEBPACK_IMPORTED_MODULE_1__[\"Inventory5E\"](actor);\r\n            _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.addFor(actor.id, inventory);\r\n            this._inventory = inventory;\r\n        }\r\n    }\r\n    static bind(actorApplication, sheetHtml, eventData) {\r\n        const actor = game.actors.get(eventData.actor._id);\r\n        if (!game.user.isGM || !actor.owner) {\r\n            return;\r\n        }\r\n        let tab = CraftingTab.tabs.get(actorApplication.id);\r\n        if (!tab) {\r\n            tab = new CraftingTab(actorApplication, actor);\r\n            CraftingTab.tabs.set(actorApplication.id, tab);\r\n        }\r\n        tab.init(sheetHtml);\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToCharacterSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const craftingTabDTO = new _CraftingTabData__WEBPACK_IMPORTED_MODULE_2__[\"CraftingTabData\"](_application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getAllSystems(), this._inventory, this._actor);\r\n            yield craftingTabDTO.init();\r\n            let template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.craftingTab, craftingTabDTO);\r\n            let element = this._sheetHtml.find('.crafting-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-crafting').append(template);\r\n            }\r\n            this.handleActorSheetEvents(craftingTabDTO);\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(CraftingTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToCharacterSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($('<a class=\"item fabricate-crafting\" data-tab=\"fabricate-crafting\">Crafting</a>'));\r\n        $(sheetHtml.find(`.sheet-body`)).append($('<div class=\"tab fabricate-crafting\" data-group=\"primary\" data-tab=\"fabricate-crafting\"></div>'));\r\n    }\r\n    handleActorSheetEvents(craftingTabDTO) {\r\n        this._sheetHtml.find('.add-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            if (!hopperContentsForSystem) {\r\n                hopperContentsForSystem = [];\r\n            }\r\n            const component = hopperContentsForSystem.find((item) => item.entryId === componentId);\r\n            if (!component) {\r\n                const component = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId).getComponentByPartId(componentId);\r\n                hopperContentsForSystem.push({ name: component.name, quantity: 1, imageUrl: component.imageUrl, entryId: component.partId });\r\n            }\r\n            else {\r\n                component.quantity = component.quantity + 1;\r\n            }\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, hopperContentsForSystem);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.remove-crafting-component').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const componentId = event.currentTarget.getAttribute('data-component-id');\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            let hopperContentsForSystem = this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            const matchingRecord = hopperContentsForSystem.find((recordData) => recordData.entryId === componentId);\r\n            matchingRecord.quantity = matchingRecord.quantity - 1;\r\n            const nonZeroRecords = hopperContentsForSystem.filter((recordData) => recordData.quantity > 0);\r\n            this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`, nonZeroRecords);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.clear-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.craft-from-components.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const craftingSystemId = craftingTabDTO.crafting.selectedSystemId;\r\n            const hopperContents = craftingTabDTO.inventory.preparedComponents;\r\n            if (!hopperContents || hopperContents.length === 0) {\r\n                return;\r\n            }\r\n            console.log(`Craft for system ${craftingSystemId} with ${hopperContents.length} components`);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByCompendiumPackKey(craftingSystemId);\r\n            const craftingComponents = hopperContents.map((hopperItem) => craftingSystem.getComponentByPartId(hopperItem.entryId));\r\n            yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, `crafting.${craftingSystemId}.hopper`);\r\n            yield craftingSystem.craftWithComponents(this._actor, _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id), craftingComponents);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedSystem\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const systemIdToActivate = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, systemIdToActivate);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('select[name=\"fabricate.crafting.selectedRecipe\"]').change((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const selectedRecipeId = event.target.value;\r\n            yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe, selectedRecipeId);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n        this._sheetHtml.find('.actor-recipe-crafting').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            const recipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.getSystemByPartId(recipeId);\r\n            const recipe = craftingSystem.getRecipeByPartId(recipeId);\r\n            const inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inventories.getFor(this._actor.id);\r\n            yield craftingSystem.craft(this._actor, inventory, recipe);\r\n            this._suppressedInNav = true;\r\n            this.render();\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-crafting[data-tab=\"${CraftingTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nCraftingTab.tabs = new Map();\r\nCraftingTab.tabKey = 'fabricate-crafting';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWIudHM/YzFlZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFFVTtBQUNDO0FBSXFCO0FBRXZFLE1BQU0sV0FBVztJQXVCYixZQUFZLGdCQUFxQixFQUFFLEtBQVk7UUFqQnZDLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQWtCdEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGdCQUFnQixDQUFDO1FBQzFDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksU0FBUyxHQUFHLHlFQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xFLElBQUksU0FBUyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDL0I7YUFBTTtZQUNILFNBQVMsR0FBRyxJQUFJLDhEQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMseUVBQW9CLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQzdELElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1NBQy9CO0lBQ0wsQ0FBQztJQXhCTSxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFxQixFQUFFLFNBQXNCLEVBQUUsU0FBYztRQUM1RSxNQUFNLEtBQUssR0FBVSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUc7WUFDbEMsT0FBTztTQUNWO1FBQ0QsSUFBSSxHQUFHLEdBQWdCLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVB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LENBQUMsQ0FBQztZQUMxRCxNQUFNLFNBQVMsR0FBRyx5RUFBb0IsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUUsTUFBTSxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFDN0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2xCLENBQUMsRUFBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLGFBQWE7UUFDakIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hILENBQUM7O0FBM0t1QixnQkFBSSxHQUE2QixJQUFJLEdBQUcsRUFBRSxDQUFDO0FBT3BELGtCQUFNLEdBQVcsb0JBQW9CLENBQUM7QUF1S3JDIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvaW50ZXJmYWNlL0NyYWZ0aW5nVGFiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge0ludmVudG9yeTVFfSBmcm9tIFwiLi4vZG5kNWUvSW52ZW50b3J5NUVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1RhYkRhdGF9IGZyb20gXCIuL0NyYWZ0aW5nVGFiRGF0YVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nQ29tcG9uZW50fSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ0NvbXBvbmVudFwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQge0ludmVudG9yeVJlY29yZERhdGF9IGZyb20gXCIuL0ludGVyZmFjZURhdGFUeXBlc1wiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1RhYiB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB0YWJzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1RhYj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hlZXRBcHBsaWNhdGlvbjogYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hlZXRIdG1sOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+O1xyXG4gICAgcHJpdmF0ZSBfc3VwcHJlc3NlZEluTmF2OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hY3RvcjogQWN0b3I7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0YWJLZXk6IHN0cmluZyA9ICdmYWJyaWNhdGUtY3JhZnRpbmcnO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYmluZChhY3RvckFwcGxpY2F0aW9uOiBhbnksIHNoZWV0SHRtbDogSFRNTEVsZW1lbnQsIGV2ZW50RGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYWN0b3I6IEFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGV2ZW50RGF0YS5hY3Rvci5faWQpO1xyXG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00gfHwgIWFjdG9yLm93bmVyICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0YWI6IENyYWZ0aW5nVGFiID0gQ3JhZnRpbmdUYWIudGFicy5nZXQoYWN0b3JBcHBsaWNhdGlvbi5pZCk7XHJcbiAgICAgICAgaWYgKCF0YWIpIHtcclxuICAgICAgICAgICAgdGFiID0gbmV3IENyYWZ0aW5nVGFiKGFjdG9yQXBwbGljYXRpb24sIGFjdG9yKTtcclxuICAgICAgICAgICAgQ3JhZnRpbmdUYWIudGFicy5zZXQoYWN0b3JBcHBsaWNhdGlvbi5pZCwgdGFiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFiLmluaXQoc2hlZXRIdG1sKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhY3RvckFwcGxpY2F0aW9uOiBhbnksIGFjdG9yOiBBY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3NoZWV0QXBwbGljYXRpb24gPSBhY3RvckFwcGxpY2F0aW9uO1xyXG4gICAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3I7XHJcbiAgICAgICAgbGV0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcihhY3Rvci5pZCk7XHJcbiAgICAgICAgaWYgKGludmVudG9yeSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5ID0gbmV3IEludmVudG9yeTVFKGFjdG9yKTtcclxuICAgICAgICAgICAgRmFicmljYXRlQXBwbGljYXRpb24uaW52ZW50b3JpZXMuYWRkRm9yKGFjdG9yLmlkLCBpbnZlbnRvcnkpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdChzaGVldEh0bWw6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbCA9IHNoZWV0SHRtbDtcclxuICAgICAgICB0aGlzLmFkZFRhYlRvQ2hhcmFjdGVyU2hlZXQoc2hlZXRIdG1sKTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGNyYWZ0aW5nVGFiRFRPID0gbmV3IENyYWZ0aW5nVGFiRGF0YShGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldEFsbFN5c3RlbXMoKSwgdGhpcy5faW52ZW50b3J5LCB0aGlzLl9hY3Rvcik7XHJcbiAgICAgICAgYXdhaXQgY3JhZnRpbmdUYWJEVE8uaW5pdCgpO1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZTogSFRNTEVsZW1lbnQgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMuY3JhZnRpbmdUYWIsIGNyYWZ0aW5nVGFiRFRPKTtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMuX3NoZWV0SHRtbC5maW5kKCcuY3JhZnRpbmctdGFiLWNvbnRlbnQnKTtcclxuICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlcGxhY2VXaXRoKHRlbXBsYXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLnRhYi5mYWJyaWNhdGUtY3JhZnRpbmcnKS5hcHBlbmQodGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVBY3RvclNoZWV0RXZlbnRzKGNyYWZ0aW5nVGFiRFRPKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3N1cHByZXNzZWRJbk5hdiAmJiAhdGhpcy5pc0FjdGl2ZUluTmF2KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRBcHBsaWNhdGlvbi5fdGFic1swXS5hY3RpdmF0ZShDcmFmdGluZ1RhYi50YWJLZXkpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVGFiVG9DaGFyYWN0ZXJTaGVldChzaGVldEh0bWw6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRhYnMgPSBzaGVldEh0bWwuZmluZChgLnRhYnNbZGF0YS1ncm91cD1cInByaW1hcnlcIl1gKTtcclxuICAgICAgICB0YWJzLmFwcGVuZCgkKFxyXG4gICAgICAgICAgICAnPGEgY2xhc3M9XCJpdGVtIGZhYnJpY2F0ZS1jcmFmdGluZ1wiIGRhdGEtdGFiPVwiZmFicmljYXRlLWNyYWZ0aW5nXCI+Q3JhZnRpbmc8L2E+J1xyXG4gICAgICAgICkpO1xyXG5cclxuICAgICAgICAkKHNoZWV0SHRtbC5maW5kKGAuc2hlZXQtYm9keWApKS5hcHBlbmQoJChcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0YWIgZmFicmljYXRlLWNyYWZ0aW5nXCIgZGF0YS1ncm91cD1cInByaW1hcnlcIiBkYXRhLXRhYj1cImZhYnJpY2F0ZS1jcmFmdGluZ1wiPjwvZGl2PidcclxuICAgICAgICApKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUFjdG9yU2hlZXRFdmVudHMoY3JhZnRpbmdUYWJEVE86IENyYWZ0aW5nVGFiRGF0YSk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmFkZC1jcmFmdGluZy1jb21wb25lbnQnKS5jbGljayhhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb21wb25lbnQtaWQnKTtcclxuICAgICAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW1JZDogc3RyaW5nID0gY3JhZnRpbmdUYWJEVE8uY3JhZnRpbmcuc2VsZWN0ZWRTeXN0ZW1JZDtcclxuXHJcbiAgICAgICAgICAgIGxldCBob3BwZXJDb250ZW50c0ZvclN5c3RlbTogSW52ZW50b3J5UmVjb3JkRGF0YVtdID0gdGhpcy5fYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBgY3JhZnRpbmcuJHtjcmFmdGluZ1N5c3RlbUlkfS5ob3BwZXJgKTtcclxuICAgICAgICAgICAgaWYgKCFob3BwZXJDb250ZW50c0ZvclN5c3RlbSkge1xyXG4gICAgICAgICAgICAgICAgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBob3BwZXJDb250ZW50c0ZvclN5c3RlbS5maW5kKChpdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhKSA9PiBpdGVtLmVudHJ5SWQgPT09IGNvbXBvbmVudElkKTtcclxuICAgICAgICAgICAgaWYgKCFjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudDogQ3JhZnRpbmdDb21wb25lbnQgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldFN5c3RlbUJ5Q29tcGVuZGl1bVBhY2tLZXkoY3JhZnRpbmdTeXN0ZW1JZCkuZ2V0Q29tcG9uZW50QnlQYXJ0SWQoY29tcG9uZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0ucHVzaCh7bmFtZTogY29tcG9uZW50Lm5hbWUsIHF1YW50aXR5OiAxLCBpbWFnZVVybDogY29tcG9uZW50LmltYWdlVXJsLCBlbnRyeUlkOiBjb21wb25lbnQucGFydElkfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5xdWFudGl0eSA9IGNvbXBvbmVudC5xdWFudGl0eSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCwgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5yZW1vdmUtY3JhZnRpbmctY29tcG9uZW50JykuY2xpY2soYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tcG9uZW50LWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtSWQ6IHN0cmluZyA9IGNyYWZ0aW5nVGFiRFRPLmNyYWZ0aW5nLnNlbGVjdGVkU3lzdGVtSWQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgaG9wcGVyQ29udGVudHNGb3JTeXN0ZW06IEludmVudG9yeVJlY29yZERhdGFbXSA9IHRoaXMuX2FjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUmVjb3JkID0gaG9wcGVyQ29udGVudHNGb3JTeXN0ZW0uZmluZCgocmVjb3JkRGF0YTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gcmVjb3JkRGF0YS5lbnRyeUlkID09PSBjb21wb25lbnRJZCk7XHJcbiAgICAgICAgICAgIG1hdGNoaW5nUmVjb3JkLnF1YW50aXR5ID0gbWF0Y2hpbmdSZWNvcmQucXVhbnRpdHkgLSAxO1xyXG4gICAgICAgICAgICBjb25zdCBub25aZXJvUmVjb3JkcyA9IGhvcHBlckNvbnRlbnRzRm9yU3lzdGVtLmZpbHRlcigocmVjb3JkRGF0YTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gcmVjb3JkRGF0YS5xdWFudGl0eSA+IDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYWN0b3Iuc2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBgY3JhZnRpbmcuJHtjcmFmdGluZ1N5c3RlbUlkfS5ob3BwZXJgLCBub25aZXJvUmVjb3Jkcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNsZWFyLWNvbXBvbmVudHMuY3JhZnQtYnV0dG9uJykuY2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUlkOiBzdHJpbmcgPSBjcmFmdGluZ1RhYkRUTy5jcmFmdGluZy5zZWxlY3RlZFN5c3RlbUlkO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3Rvci51bnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnLmNyYWZ0LWZyb20tY29tcG9uZW50cy5jcmFmdC1idXR0b24nKS5jbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtSWQ6IHN0cmluZyA9IGNyYWZ0aW5nVGFiRFRPLmNyYWZ0aW5nLnNlbGVjdGVkU3lzdGVtSWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvcHBlckNvbnRlbnRzOiBJbnZlbnRvcnlSZWNvcmREYXRhW10gPSBjcmFmdGluZ1RhYkRUTy5pbnZlbnRvcnkucHJlcGFyZWRDb21wb25lbnRzO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFob3BwZXJDb250ZW50cyB8fCBob3BwZXJDb250ZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYENyYWZ0IGZvciBzeXN0ZW0gJHtjcmFmdGluZ1N5c3RlbUlkfSB3aXRoICR7aG9wcGVyQ29udGVudHMubGVuZ3RofSBjb21wb25lbnRzYCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW0gPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldFN5c3RlbUJ5Q29tcGVuZGl1bVBhY2tLZXkoY3JhZnRpbmdTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nQ29tcG9uZW50cyA9IGhvcHBlckNvbnRlbnRzLm1hcCgoaG9wcGVySXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4gY3JhZnRpbmdTeXN0ZW0uZ2V0Q29tcG9uZW50QnlQYXJ0SWQoaG9wcGVySXRlbS5lbnRyeUlkKSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3Rvci51bnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgYGNyYWZ0aW5nLiR7Y3JhZnRpbmdTeXN0ZW1JZH0uaG9wcGVyYCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGNyYWZ0aW5nU3lzdGVtLmNyYWZ0V2l0aENvbXBvbmVudHModGhpcy5fYWN0b3IsIEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcih0aGlzLl9hY3Rvci5pZCksIGNyYWZ0aW5nQ29tcG9uZW50cyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdXBwcmVzc2VkSW5OYXYgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwuZmluZCgnc2VsZWN0W25hbWU9XCJmYWJyaWNhdGUuY3JhZnRpbmcuc2VsZWN0ZWRTeXN0ZW1cIl0nKS5jaGFuZ2UoYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtSWRUb0FjdGl2YXRlOiBzdHJpbmcgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZENyYWZ0aW5nU3lzdGVtLCBzeXN0ZW1JZFRvQWN0aXZhdGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3VwcHJlc3NlZEluTmF2ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJ3NlbGVjdFtuYW1lPVwiZmFicmljYXRlLmNyYWZ0aW5nLnNlbGVjdGVkUmVjaXBlXCJdJykuY2hhbmdlKGFzeW5jIChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUmVjaXBlSWQ6IHN0cmluZyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYWN0b3Iuc2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkUmVjaXBlLCBzZWxlY3RlZFJlY2lwZUlkKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCcuYWN0b3ItcmVjaXBlLWNyYWZ0aW5nJykuY2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZWNpcGVJZCA9IGF3YWl0IHRoaXMuX2FjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZFJlY2lwZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyYWZ0aW5nU3lzdGVtOiBDcmFmdGluZ1N5c3RlbSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlQYXJ0SWQocmVjaXBlSWQpO1xyXG4gICAgICAgICAgICBjb25zdCByZWNpcGUgPSBjcmFmdGluZ1N5c3RlbS5nZXRSZWNpcGVCeVBhcnRJZChyZWNpcGVJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVudG9yeSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLmludmVudG9yaWVzLmdldEZvcih0aGlzLl9hY3Rvci5pZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGNyYWZ0aW5nU3lzdGVtLmNyYWZ0KHRoaXMuX2FjdG9yLCBpbnZlbnRvcnksIHJlY2lwZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNBY3RpdmVJbk5hdigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gJCh0aGlzLl9zaGVldEh0bWwpLmZpbmQoYGEuZmFicmljYXRlLWNyYWZ0aW5nW2RhdGEtdGFiPVwiJHtDcmFmdGluZ1RhYi50YWJLZXl9XCJdYCkuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nVGFifSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTab.ts\n");

/***/ }),

/***/ "./src/scripts/interface/CraftingTabData.ts":
/*!**************************************************!*\
  !*** ./src/scripts/interface/CraftingTabData.ts ***!
  \**************************************************/
/*! exports provided: CraftingTabData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingTabData\", function() { return CraftingTabData; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass CraftingTabData {\r\n    constructor(craftingSystems, inventory, actor) {\r\n        this._craftingSystems = craftingSystems;\r\n        this._inventory = inventory;\r\n        this._actor = actor;\r\n    }\r\n    get crafting() {\r\n        return this._craftingSystemData;\r\n    }\r\n    get recipeCrafting() {\r\n        return this._recipeData;\r\n    }\r\n    get inventory() {\r\n        return this._inventoryContents;\r\n    }\r\n    get actor() {\r\n        return this._actor;\r\n    }\r\n    init() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._craftingSystemData = yield this.prepareCraftingSystemData(this._craftingSystems, this._actor);\r\n            if (this._craftingSystemData.hasEnabledSystems) {\r\n                const selectedCraftingSystem = this._craftingSystems.find((system) => system.compendiumPackKey === this._craftingSystemData.selectedSystemId);\r\n                this._recipeData = yield this.prepareRecipeDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n                this._inventoryContents = this.prepareInventoryDataForSystem(selectedCraftingSystem, this._actor, this._inventory);\r\n            }\r\n        });\r\n    }\r\n    prepareCraftingSystemData(craftingSystems, actor) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let enabledSystems = 0;\r\n            const craftingSystemsInfo = [];\r\n            const storedSystemId = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem);\r\n            craftingSystems.forEach((system) => {\r\n                if (system.enabled) {\r\n                    enabledSystems++;\r\n                }\r\n                craftingSystemsInfo.push({\r\n                    disabled: !system.enabled,\r\n                    compendiumPackKey: system.compendiumPackKey,\r\n                    name: system.name,\r\n                    selected: system.compendiumPackKey === storedSystemId\r\n                });\r\n            });\r\n            const hasEnabledSystems = enabledSystems > 0;\r\n            if (storedSystemId) {\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: storedSystemId\r\n                };\r\n            }\r\n            else if (hasEnabledSystems) {\r\n                const firstEnabledSystem = craftingSystemsInfo.find((systemInfo) => !systemInfo.disabled);\r\n                firstEnabledSystem.selected = true;\r\n                yield actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedCraftingSystem, firstEnabledSystem.compendiumPackKey);\r\n                return {\r\n                    systems: craftingSystemsInfo,\r\n                    hasEnabledSystems: hasEnabledSystems,\r\n                    selectedSystemId: firstEnabledSystem.compendiumPackKey\r\n                };\r\n            }\r\n        });\r\n    }\r\n    prepareRecipeDataForSystem(craftingSystem, actor, inventory) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const storedKnownRecipes = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.knownRecipesForSystem(craftingSystem.compendiumPackKey));\r\n            const knownRecipes = storedKnownRecipes ? storedKnownRecipes : [];\r\n            const enabledRecipes = new Map();\r\n            const disabledRecipes = [];\r\n            craftingSystem.recipes.forEach((recipe) => {\r\n                const isKnown = knownRecipes.includes(recipe.partId);\r\n                const isOwned = inventory.containsPart(recipe.partId);\r\n                const isCraftable = (isKnown || isOwned) ? inventory.hasAllIngredientsFor(recipe) : false;\r\n                if (isCraftable) {\r\n                    enabledRecipes.set(recipe.partId, {\r\n                        name: recipe.name,\r\n                        partId: recipe.partId,\r\n                        known: isKnown,\r\n                        owned: isOwned,\r\n                        craftable: isCraftable,\r\n                        selected: false\r\n                    });\r\n                }\r\n                else {\r\n                    disabledRecipes.push({\r\n                        name: recipe.name,\r\n                        partId: recipe.partId,\r\n                        known: isKnown,\r\n                        owned: isOwned,\r\n                        craftable: isCraftable,\r\n                        selected: false\r\n                    });\r\n                }\r\n            });\r\n            const storedRecipeId = yield this._actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n            if (enabledRecipes.has(storedRecipeId)) {\r\n                enabledRecipes.get(storedRecipeId).selected = true;\r\n                return {\r\n                    recipes: Array.from(enabledRecipes.values()).concat(disabledRecipes),\r\n                    hasCraftableRecipe: true\r\n                };\r\n            }\r\n            else {\r\n                yield this._actor.unsetFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe);\r\n                if (enabledRecipes.size === 0) {\r\n                    return {\r\n                        recipes: disabledRecipes,\r\n                        hasCraftableRecipe: false\r\n                    };\r\n                }\r\n                const craftableRecipes = Array.from(enabledRecipes.values());\r\n                const defaultRecipe = craftableRecipes[0];\r\n                defaultRecipe.selected = true;\r\n                yield this._actor.setFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.selectedRecipe, defaultRecipe.partId);\r\n                return {\r\n                    recipes: craftableRecipes.concat(disabledRecipes),\r\n                    hasCraftableRecipe: true\r\n                };\r\n            }\r\n        });\r\n    }\r\n    prepareInventoryDataForSystem(craftingSystem, actor, inventory) {\r\n        const inventoryContents = {\r\n            ownedComponents: [],\r\n            preparedComponents: []\r\n        };\r\n        inventory.components.filter((inventoryRecord) => (inventoryRecord.fabricateItem.systemId === craftingSystem.compendiumPackKey)\r\n            && (inventoryRecord.fabricateItem.essences && inventoryRecord.fabricateItem.essences.length > 0))\r\n            .forEach((inventoryRecord) => {\r\n            inventoryContents.ownedComponents.push({\r\n                name: inventoryRecord.fabricateItem.name,\r\n                entryId: inventoryRecord.fabricateItem.partId,\r\n                quantity: inventoryRecord.totalQuantity,\r\n                imageUrl: inventoryRecord.fabricateItem.imageUrl\r\n            });\r\n        });\r\n        const savedHopperContents = actor.getFlag(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flagKeys.actor.hopperForSystem(craftingSystem.compendiumPackKey));\r\n        if (savedHopperContents) {\r\n            inventoryContents.preparedComponents = savedHopperContents;\r\n            savedHopperContents.forEach((hopperItem) => {\r\n                const inventoryItem = inventoryContents.ownedComponents.find((inventoryItem) => inventoryItem.entryId === hopperItem.entryId);\r\n                if (inventoryItem) {\r\n                    inventoryItem.quantity = inventoryItem.quantity - hopperItem.quantity;\r\n                }\r\n            });\r\n            inventoryContents.ownedComponents = inventoryContents.ownedComponents.filter((inventoryItem) => inventoryItem.quantity > 0);\r\n        }\r\n        return inventoryContents;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJEYXRhLnRzPzIxMDIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSXVDO0FBZXZDLE1BQU0sZUFBZTtJQVVqQixZQUFZLGVBQWlDLEVBQUUsU0FBK0IsRUFBRSxLQUFZO1FBQ3hGLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFDeEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxJQUFJLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ25DLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVLLElBQUk7O1lBQ04sSUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFcEcsSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUU7Z0JBQzVDLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQXNCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsS0FBSyxJQUFJLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFFOUosSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxzQkFBc0IsRUFBRSxJQUFJ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QUFDO2lCQUN6RTtZQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ0gsaUJBQWlCLENBQUMsZUFBZSxHQUFHLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxhQUFrQyxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3BKO1FBQ0QsT0FBTyxpQkFBaUIsQ0FBQztJQUM3QixDQUFDO0NBQ0o7QUFFdUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvQ3JhZnRpbmdUYWJEYXRhLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDcmFmdGluZ1N5c3RlbX0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuaW1wb3J0IHtJbnZlbnRvcnl9IGZyb20gXCIuLi9nYW1lL0ludmVudG9yeVwiO1xyXG5pbXBvcnQge1JlY2lwZX0gZnJvbSBcIi4uL2NvcmUvUmVjaXBlXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5UmVjb3JkfSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlSZWNvcmRcIjtcclxuaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtcclxuICAgIENyYWZ0aW5nU3lzdGVtRGF0YSxcclxuICAgIENyYWZ0aW5nU3lzdGVtSW5mbyxcclxuICAgIEludmVudG9yeVJlY29yZERhdGEsXHJcbiAgICBSZWNpcGVDcmFmdGluZ0RhdGEsXHJcbiAgICBSZWNpcGVEYXRhXHJcbn0gZnJvbSBcIi4vSW50ZXJmYWNlRGF0YVR5cGVzXCI7XHJcblxyXG5pbnRlcmZhY2UgSW52ZW50b3J5Q29udGVudHMge1xyXG4gICAgb3duZWRDb21wb25lbnRzOiBJbnZlbnRvcnlSZWNvcmREYXRhW107XHJcbiAgICBwcmVwYXJlZENvbXBvbmVudHM6IEludmVudG9yeVJlY29yZERhdGFbXTtcclxufVxyXG5cclxuY2xhc3MgQ3JhZnRpbmdUYWJEYXRhIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jcmFmdGluZ1N5c3RlbXM6IENyYWZ0aW5nU3lzdGVtW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYWN0b3I6IEFjdG9yO1xyXG5cclxuICAgIHByaXZhdGUgX2NyYWZ0aW5nU3lzdGVtRGF0YTogQ3JhZnRpbmdTeXN0ZW1EYXRhO1xyXG4gICAgcHJpdmF0ZSBfcmVjaXBlRGF0YTogUmVjaXBlQ3JhZnRpbmdEYXRhO1xyXG4gICAgcHJpdmF0ZSBfaW52ZW50b3J5Q29udGVudHM6IEludmVudG9yeUNvbnRlbnRzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNyYWZ0aW5nU3lzdGVtczogQ3JhZnRpbmdTeXN0ZW1bXSwgaW52ZW50b3J5OiBJbnZlbnRvcnk8SXRlbS5EYXRhPiwgYWN0b3I6IEFjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fY3JhZnRpbmdTeXN0ZW1zID0gY3JhZnRpbmdTeXN0ZW1zO1xyXG4gICAgICAgIHRoaXMuX2ludmVudG9yeSA9IGludmVudG9yeTtcclxuICAgICAgICB0aGlzLl9hY3RvciA9IGFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjcmFmdGluZygpOiBDcmFmdGluZ1N5c3RlbURhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmFmdGluZ1N5c3RlbURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlY2lwZUNyYWZ0aW5nKCk6IFJlY2lwZUNyYWZ0aW5nRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2lwZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGludmVudG9yeSgpOiBJbnZlbnRvcnlDb250ZW50cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludmVudG9yeUNvbnRlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhY3RvcigpOiBBY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlQ3JhZnRpbmdTeXN0ZW1EYXRhKHRoaXMuX2NyYWZ0aW5nU3lzdGVtcywgdGhpcy5fYWN0b3IpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY3JhZnRpbmdTeXN0ZW1EYXRhLmhhc0VuYWJsZWRTeXN0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ3JhZnRpbmdTeXN0ZW0gPSB0aGlzLl9jcmFmdGluZ1N5c3RlbXMuZmluZCgoc3lzdGVtOiBDcmFmdGluZ1N5c3RlbSkgPT4gc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5ID09PSB0aGlzLl9jcmFmdGluZ1N5c3RlbURhdGEuc2VsZWN0ZWRTeXN0ZW1JZCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9yZWNpcGVEYXRhID0gYXdhaXQgdGhpcy5wcmVwYXJlUmVjaXBlRGF0YUZvclN5c3RlbShzZWxlY3RlZENyYWZ0aW5nU3lzdGVtLCB0aGlzLl9hY3RvciwgdGhpcy5faW52ZW50b3J5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2ludmVudG9yeUNvbnRlbnRzID0gdGhpcy5wcmVwYXJlSW52ZW50b3J5RGF0YUZvclN5c3RlbShzZWxlY3RlZENyYWZ0aW5nU3lzdGVtLHRoaXMuX2FjdG9yLCB0aGlzLl9pbnZlbnRvcnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwcmVwYXJlQ3JhZnRpbmdTeXN0ZW1EYXRhKGNyYWZ0aW5nU3lzdGVtczogQ3JhZnRpbmdTeXN0ZW1bXSwgYWN0b3I6IEFjdG9yKTogUHJvbWlzZTxDcmFmdGluZ1N5c3RlbURhdGE+IHtcclxuICAgICAgICBsZXQgZW5hYmxlZFN5c3RlbXM6IG51bWJlciA9IDA7XHJcbiAgICAgICAgY29uc3QgY3JhZnRpbmdTeXN0ZW1zSW5mbzogQ3JhZnRpbmdTeXN0ZW1JbmZvW10gPSBbXTtcclxuICAgICAgICBjb25zdCBzdG9yZWRTeXN0ZW1JZCA9IGFjdG9yLmdldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZENyYWZ0aW5nU3lzdGVtKTtcclxuICAgICAgICBjcmFmdGluZ1N5c3RlbXMuZm9yRWFjaCgoc3lzdGVtOiBDcmFmdGluZ1N5c3RlbSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWRTeXN0ZW1zKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3JhZnRpbmdTeXN0ZW1zSW5mby5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhc3lzdGVtLmVuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBjb21wZW5kaXVtUGFja0tleTogc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5LFxyXG4gICAgICAgICAgICAgICAgbmFtZTogc3lzdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogc3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5ID09PSBzdG9yZWRTeXN0ZW1JZFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhhc0VuYWJsZWRTeXN0ZW1zOiBib29sZWFuID0gZW5hYmxlZFN5c3RlbXMgPiAwO1xyXG4gICAgICAgIGlmIChzdG9yZWRTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtczogY3JhZnRpbmdTeXN0ZW1zSW5mbyxcclxuICAgICAgICAgICAgICAgIGhhc0VuYWJsZWRTeXN0ZW1zOiBoYXNFbmFibGVkU3lzdGVtcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3lzdGVtSWQ6IHN0b3JlZFN5c3RlbUlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGhhc0VuYWJsZWRTeXN0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RW5hYmxlZFN5c3RlbSA9IGNyYWZ0aW5nU3lzdGVtc0luZm8uZmluZCgoc3lzdGVtSW5mbzogQ3JhZnRpbmdTeXN0ZW1JbmZvKSA9PiAhc3lzdGVtSW5mby5kaXNhYmxlZCk7XHJcbiAgICAgICAgICAgIGZpcnN0RW5hYmxlZFN5c3RlbS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IGFjdG9yLnNldEZsYWcoUHJvcGVydGllcy5tb2R1bGUubmFtZSwgUHJvcGVydGllcy5mbGFnS2V5cy5hY3Rvci5zZWxlY3RlZENyYWZ0aW5nU3lzdGVtLCBmaXJzdEVuYWJsZWRTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtczogY3JhZnRpbmdTeXN0ZW1zSW5mbyxcclxuICAgICAgICAgICAgICAgIGhhc0VuYWJsZWRTeXN0ZW1zOiBoYXNFbmFibGVkU3lzdGVtcyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3lzdGVtSWQ6IGZpcnN0RW5hYmxlZFN5c3RlbS5jb21wZW5kaXVtUGFja0tleVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHByZXBhcmVSZWNpcGVEYXRhRm9yU3lzdGVtKGNyYWZ0aW5nU3lzdGVtOiBDcmFmdGluZ1N5c3RlbSwgYWN0b3I6IEFjdG9yLCBpbnZlbnRvcnk6IEludmVudG9yeTxJdGVtLkRhdGE+KTogUHJvbWlzZTxSZWNpcGVDcmFmdGluZ0RhdGE+IHtcclxuICAgICAgICBjb25zdCBzdG9yZWRLbm93blJlY2lwZXM6IHN0cmluZ1tdID0gYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLmtub3duUmVjaXBlc0ZvclN5c3RlbShjcmFmdGluZ1N5c3RlbS5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgICAgIGNvbnN0IGtub3duUmVjaXBlczogc3RyaW5nW10gPSBzdG9yZWRLbm93blJlY2lwZXMgPyBzdG9yZWRLbm93blJlY2lwZXMgOiBbXTtcclxuICAgICAgICBjb25zdCBlbmFibGVkUmVjaXBlczogTWFwPHN0cmluZywgUmVjaXBlRGF0YT4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29uc3QgZGlzYWJsZWRSZWNpcGVzOiBSZWNpcGVEYXRhW10gPSBbXTtcclxuICAgICAgICBjcmFmdGluZ1N5c3RlbS5yZWNpcGVzLmZvckVhY2goKHJlY2lwZTogUmVjaXBlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzS25vd246IGJvb2xlYW4gPSBrbm93blJlY2lwZXMuaW5jbHVkZXMocmVjaXBlLnBhcnRJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzT3duZWQ6IGJvb2xlYW4gPSBpbnZlbnRvcnkuY29udGFpbnNQYXJ0KHJlY2lwZS5wYXJ0SWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0NyYWZ0YWJsZTogYm9vbGVhbiA9IChpc0tub3duIHx8IGlzT3duZWQpID8gaW52ZW50b3J5Lmhhc0FsbEluZ3JlZGllbnRzRm9yKHJlY2lwZSkgOiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGlzQ3JhZnRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkUmVjaXBlcy5zZXQocmVjaXBlLnBhcnRJZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlY2lwZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRJZDogcmVjaXBlLnBhcnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBrbm93bjogaXNLbm93bixcclxuICAgICAgICAgICAgICAgICAgICBvd25lZDogaXNPd25lZCxcclxuICAgICAgICAgICAgICAgICAgICBjcmFmdGFibGU6IGlzQ3JhZnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFJlY2lwZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVjaXBlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydElkOiByZWNpcGUucGFydElkLFxyXG4gICAgICAgICAgICAgICAgICAgIGtub3duOiBpc0tub3duLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVkOiBpc093bmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyYWZ0YWJsZTogaXNDcmFmdGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFJlY2lwZUlkOiBzdHJpbmcgPSBhd2FpdCB0aGlzLl9hY3Rvci5nZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRSZWNpcGUpO1xyXG4gICAgICAgIGlmIChlbmFibGVkUmVjaXBlcy5oYXMoc3RvcmVkUmVjaXBlSWQpKSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWRSZWNpcGVzLmdldChzdG9yZWRSZWNpcGVJZCkuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVjaXBlczogQXJyYXkuZnJvbShlbmFibGVkUmVjaXBlcy52YWx1ZXMoKSkuY29uY2F0KGRpc2FibGVkUmVjaXBlcyksXHJcbiAgICAgICAgICAgICAgICBoYXNDcmFmdGFibGVSZWNpcGU6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjdG9yLnVuc2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLnNlbGVjdGVkUmVjaXBlKTtcclxuICAgICAgICAgICAgaWYgKGVuYWJsZWRSZWNpcGVzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBlczogZGlzYWJsZWRSZWNpcGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NyYWZ0YWJsZVJlY2lwZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGFibGVSZWNpcGVzOiBSZWNpcGVEYXRhW10gPSBBcnJheS5mcm9tKGVuYWJsZWRSZWNpcGVzLnZhbHVlcygpKTtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFJlY2lwZTogUmVjaXBlRGF0YSA9IGNyYWZ0YWJsZVJlY2lwZXNbMF07XHJcbiAgICAgICAgICAgIGRlZmF1bHRSZWNpcGUuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3Rvci5zZXRGbGFnKFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuZmxhZ0tleXMuYWN0b3Iuc2VsZWN0ZWRSZWNpcGUsIGRlZmF1bHRSZWNpcGUucGFydElkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlY2lwZXM6IGNyYWZ0YWJsZVJlY2lwZXMuY29uY2F0KGRpc2FibGVkUmVjaXBlcyksXHJcbiAgICAgICAgICAgICAgICBoYXNDcmFmdGFibGVSZWNpcGU6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcmVwYXJlSW52ZW50b3J5RGF0YUZvclN5c3RlbShjcmFmdGluZ1N5c3RlbTogQ3JhZnRpbmdTeXN0ZW0sIGFjdG9yOiBBY3RvciwgaW52ZW50b3J5OiBJbnZlbnRvcnk8SXRlbS5EYXRhPik6IEludmVudG9yeUNvbnRlbnRzIHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlDb250ZW50czogSW52ZW50b3J5Q29udGVudHMgPSB7XHJcbiAgICAgICAgICAgIG93bmVkQ29tcG9uZW50czogW10sXHJcbiAgICAgICAgICAgIHByZXBhcmVkQ29tcG9uZW50czogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgaW52ZW50b3J5LmNvbXBvbmVudHMuZmlsdGVyKChpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IChpbnZlbnRvcnlSZWNvcmQuZmFicmljYXRlSXRlbS5zeXN0ZW1JZCA9PT0gY3JhZnRpbmdTeXN0ZW0uY29tcGVuZGl1bVBhY2tLZXkpXHJcbiAgICAgICAgICAgICAgICAmJiAoaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMgJiYgaW52ZW50b3J5UmVjb3JkLmZhYnJpY2F0ZUl0ZW0uZXNzZW5jZXMubGVuZ3RoID4gMCkpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKChpbnZlbnRvcnlSZWNvcmQ6IEludmVudG9yeVJlY29yZDxDcmFmdGluZ0NvbXBvbmVudD4pID0+IHtcclxuICAgICAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnZlbnRvcnlSZWNvcmQuZmFicmljYXRlSXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5SWQ6IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLnBhcnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogaW52ZW50b3J5UmVjb3JkLnRvdGFsUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VVcmw6IGludmVudG9yeVJlY29yZC5mYWJyaWNhdGVJdGVtLmltYWdlVXJsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRIb3BwZXJDb250ZW50czogSW52ZW50b3J5UmVjb3JkRGF0YVtdID0gYWN0b3IuZ2V0RmxhZyhQcm9wZXJ0aWVzLm1vZHVsZS5uYW1lLCBQcm9wZXJ0aWVzLmZsYWdLZXlzLmFjdG9yLmhvcHBlckZvclN5c3RlbShjcmFmdGluZ1N5c3RlbS5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgICAgIGlmIChzYXZlZEhvcHBlckNvbnRlbnRzKSB7XHJcbiAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLnByZXBhcmVkQ29tcG9uZW50cyA9IHNhdmVkSG9wcGVyQ29udGVudHM7XHJcbiAgICAgICAgICAgIHNhdmVkSG9wcGVyQ29udGVudHMuZm9yRWFjaCgoaG9wcGVySXRlbTogSW52ZW50b3J5UmVjb3JkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52ZW50b3J5SXRlbSA9IGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5maW5kKChpbnZlbnRvcnlJdGVtOiBJbnZlbnRvcnlSZWNvcmREYXRhKSA9PiBpbnZlbnRvcnlJdGVtLmVudHJ5SWQgPT09IGhvcHBlckl0ZW0uZW50cnlJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludmVudG9yeUl0ZW0ucXVhbnRpdHkgPSBpbnZlbnRvcnlJdGVtLnF1YW50aXR5IC0gaG9wcGVySXRlbS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cyA9IGludmVudG9yeUNvbnRlbnRzLm93bmVkQ29tcG9uZW50cy5maWx0ZXIoKGludmVudG9yeUl0ZW06IEludmVudG9yeVJlY29yZERhdGEpID0+IGludmVudG9yeUl0ZW0ucXVhbnRpdHkgPiAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGludmVudG9yeUNvbnRlbnRzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0NyYWZ0aW5nVGFiRGF0YX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/interface/CraftingTabData.ts\n");

/***/ }),

/***/ "./src/scripts/interface/ItemRecipeTab.ts":
/*!************************************************!*\
  !*** ./src/scripts/interface/ItemRecipeTab.ts ***!
  \************************************************/
/*! exports provided: ItemRecipeTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemRecipeTab\", function() { return ItemRecipeTab; });\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass ItemRecipeTab {\r\n    constructor(itemApplication) {\r\n        this._suppressedInNav = false;\r\n        this._sheetApplication = itemApplication;\r\n        this._item = itemApplication.item;\r\n        if (this._item.isOwned) {\r\n            const actorId = this._item.actor.id;\r\n            this._actor = game.actors.get(actorId);\r\n            this._inventory = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].inventories.getFor(this._actor.id);\r\n        }\r\n        const partId = itemApplication.item.data.flags.fabricate.identity.partId;\r\n        this._craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByPartId(partId);\r\n        this._recipe = this._craftingSystem.getRecipeByPartId(partId);\r\n    }\r\n    static bind(itemApplication, sheetHtml) {\r\n        if (!itemApplication.item.data.flags.fabricate) {\r\n            return;\r\n        }\r\n        const fabricateFlags = itemApplication.item.data.flags.fabricate;\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.recipe) {\r\n            let tab = ItemRecipeTab.tabs.get(itemApplication.id);\r\n            if (!tab) {\r\n                tab = new ItemRecipeTab(itemApplication);\r\n                ItemRecipeTab.tabs.set(itemApplication.id, tab);\r\n            }\r\n            tab.init(sheetHtml);\r\n        }\r\n        if (fabricateFlags.type === _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].types.component && fabricateFlags.component.essences && fabricateFlags.component.essences.length > 0) {\r\n            const essences = fabricateFlags.component.essences;\r\n            const craftingSystem = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_1__[\"default\"].systems.getSystemByCompendiumPackKey(fabricateFlags.identity.systemId);\r\n            const essenceDescription = essences.map((essence) => craftingSystem.getEssenceBySlug(essence).icon)\r\n                .join(', ');\r\n            sheetHtml.find('ol.properties-list').append($(`<li>${essenceDescription}</li>`));\r\n        }\r\n    }\r\n    init(sheetHtml) {\r\n        this._sheetHtml = sheetHtml;\r\n        this.addTabToItemSheet(sheetHtml);\r\n        this.render();\r\n    }\r\n    render() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const isCraftable = this._inventory.hasAllIngredientsFor(this._recipe);\r\n            const template = yield renderTemplate(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.templates.recipeTab, { recipe: this._recipe, item: this._item, system: this._craftingSystem, isCraftable: isCraftable });\r\n            const element = this._sheetHtml.find('.recipe-tab-content');\r\n            if (element && element.length) {\r\n                element.replaceWith(template);\r\n            }\r\n            else {\r\n                this._sheetHtml.find('.tab.fabricate-recipe').append(template);\r\n            }\r\n            this.handleItemSheetEvents();\r\n            if (this._suppressedInNav && !this.isActiveInNav()) {\r\n                this._sheetApplication._tabs[0].activate(ItemRecipeTab.tabKey);\r\n                this._suppressedInNav = false;\r\n            }\r\n        });\r\n    }\r\n    addTabToItemSheet(sheetHtml) {\r\n        const tabs = sheetHtml.find(`.tabs[data-group=\"primary\"]`);\r\n        tabs.append($(`<a class=\"item fabricate-recipe\" data-tab=\"${ItemRecipeTab.tabKey}\">Recipe</a>`));\r\n        $(sheetHtml.find(`.sheet-body`)).append($(`<div class=\"tab fabricate-recipe\" data-group=\"primary\" data-tab=\"${ItemRecipeTab.tabKey}\"></div>`));\r\n    }\r\n    handleItemSheetEvents() {\r\n        this._sheetHtml.find('.craft-button').click(() => __awaiter(this, void 0, void 0, function* () {\r\n            yield this._craftingSystem.craft(this._actor, this._inventory, this._recipe);\r\n            this._suppressedInNav = true;\r\n            yield this.render();\r\n        }));\r\n        this._sheetHtml.find('.open-compendium-item').click((event) => __awaiter(this, void 0, void 0, function* () {\r\n            const partId = event.currentTarget.getAttribute('data-part-id');\r\n            const systemId = event.currentTarget.getAttribute('data-system-id');\r\n            const compendium = game.packs.get(systemId);\r\n            const entity = yield compendium.getEntity(partId);\r\n            if (!game.user.isGM && entity.permission === 0) {\r\n                console.warn('You are attempting to view the details of a Crafting Component that you have no ' +\r\n                    'access to. Ask your GM oran administrator to grant you access to the items in the compendium for ' +\r\n                    'the Crafting System \"' + this._craftingSystem.name + '\"');\r\n            }\r\n            entity.sheet.render(true);\r\n        }));\r\n    }\r\n    isActiveInNav() {\r\n        return $(this._sheetHtml).find(`a.fabricate-recipe[data-tab=\"${ItemRecipeTab.tabKey}\"]`).hasClass('active');\r\n    }\r\n}\r\nItemRecipeTab.tabs = new Map();\r\nItemRecipeTab.tabKey = 'fabricate-recipe';\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbnRlcmZhY2UvSXRlbVJlY2lwZVRhYi50cz8wY2I3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFHZ0M7QUFJdkUsTUFBTSxhQUFhO0lBb0NmLFlBQVksZUFBb0I7UUF6QnhCLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQTBCdEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGVBQWUsQ0FBQztRQUN6QyxJQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUM7UUFDbEMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtZQUNwQixNQUFNLE9BQU8sR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDNUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxJQUFJLENBQUMsVUFBVSxHQUFHLHlFQUFvQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUM3RTtRQUNELE1BQU0sTUFBTSxHQUFXLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUNqRixJQUFJLENBQUMsZUFBZSxHQUFHLHlFQUFvQixDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5RSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQWpDTSxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQW9CLEVBQUUsU0FBYztRQUNuRCxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNB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QWUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDeEQsTUFBTSxNQUFNLEdBQVcsTUFBTSxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsVUFBVSxLQUFLLENBQUMsRUFBRTtnQkFDNUMsT0FBTyxDQUFDLElBQUksQ0FBQyxrRkFBa0Y7b0JBQzNGLG1HQUFtRztvQkFDbkcsdUJBQXVCLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7YUFDbEU7WUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QixDQUFDLEVBQUMsQ0FBQztJQUVQLENBQUM7SUFFTyxhQUFhO1FBQ2pCLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLGFBQWEsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoSCxDQUFDOztBQTVHdUIsa0JBQUksR0FBK0IsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQVd0RCxvQkFBTSxHQUFXLGtCQUFrQixDQUFDO0FBb0dqQyIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL2ludGVyZmFjZS9JdGVtUmVjaXBlVGFiLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4uL1Byb3BlcnRpZXNcIjtcclxuaW1wb3J0IHtSZWNpcGV9IGZyb20gXCIuLi9jb3JlL1JlY2lwZVwiO1xyXG5pbXBvcnQge0NyYWZ0aW5nU3lzdGVtfSBmcm9tIFwiLi4vY29yZS9DcmFmdGluZ1N5c3RlbVwiO1xyXG5pbXBvcnQgRmFicmljYXRlQXBwbGljYXRpb24gZnJvbSBcIi4uL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcbmltcG9ydCB7SW52ZW50b3J5fSBmcm9tIFwiLi4vZ2FtZS9JbnZlbnRvcnlcIjtcclxuaW1wb3J0IHtGYWJyaWNhdGVDb21wZW5kaXVtRGF0YX0gZnJvbSBcIi4uL2dhbWUvQ29tcGVuZGl1bURhdGFcIjtcclxuXHJcbmNsYXNzIEl0ZW1SZWNpcGVUYWIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdGFiczogTWFwPHN0cmluZywgSXRlbVJlY2lwZVRhYj4gPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgcHJpdmF0ZSBfc2hlZXRBcHBsaWNhdGlvbjogYW55O1xyXG4gICAgcHJpdmF0ZSBfc2hlZXRIdG1sOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pdGVtOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZWNpcGU6IFJlY2lwZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NyYWZ0aW5nU3lzdGVtOiBDcmFmdGluZ1N5c3RlbTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT47XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5ICBfYWN0b3I6IEFjdG9yO1xyXG4gICAgcHJpdmF0ZSBfc3VwcHJlc3NlZEluTmF2OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0YWJLZXk6IHN0cmluZyA9ICdmYWJyaWNhdGUtcmVjaXBlJztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJpbmQoaXRlbUFwcGxpY2F0aW9uOiBhbnksIHNoZWV0SHRtbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpdGVtQXBwbGljYXRpb24uaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZhYnJpY2F0ZUZsYWdzOiBGYWJyaWNhdGVDb21wZW5kaXVtRGF0YSA9IGl0ZW1BcHBsaWNhdGlvbi5pdGVtLmRhdGEuZmxhZ3MuZmFicmljYXRlO1xyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLnJlY2lwZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFiOiBJdGVtUmVjaXBlVGFiID0gSXRlbVJlY2lwZVRhYi50YWJzLmdldChpdGVtQXBwbGljYXRpb24uaWQpO1xyXG4gICAgICAgICAgICBpZiAoIXRhYikge1xyXG4gICAgICAgICAgICAgICAgdGFiID0gbmV3IEl0ZW1SZWNpcGVUYWIoaXRlbUFwcGxpY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIEl0ZW1SZWNpcGVUYWIudGFicy5zZXQoaXRlbUFwcGxpY2F0aW9uLmlkLCB0YWIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhYi5pbml0KHNoZWV0SHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmYWJyaWNhdGVGbGFncy50eXBlID09PSBQcm9wZXJ0aWVzLnR5cGVzLmNvbXBvbmVudCAmJiBmYWJyaWNhdGVGbGFncy5jb21wb25lbnQuZXNzZW5jZXMgJiYgZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXNzZW5jZXM6IHN0cmluZ1tdID0gZmFicmljYXRlRmxhZ3MuY29tcG9uZW50LmVzc2VuY2VzO1xyXG4gICAgICAgICAgICBjb25zdCBjcmFmdGluZ1N5c3RlbSA9IEZhYnJpY2F0ZUFwcGxpY2F0aW9uLnN5c3RlbXMuZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShmYWJyaWNhdGVGbGFncy5pZGVudGl0eS5zeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVzc2VuY2VEZXNjcmlwdGlvbiA9IGVzc2VuY2VzLm1hcCgoZXNzZW5jZTogc3RyaW5nKSA9PiBjcmFmdGluZ1N5c3RlbS5nZXRFc3NlbmNlQnlTbHVnKGVzc2VuY2UpLmljb24pXHJcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKTtcclxuICAgICAgICAgICAgc2hlZXRIdG1sLmZpbmQoJ29sLnByb3BlcnRpZXMtbGlzdCcpLmFwcGVuZCgkKGA8bGk+JHtlc3NlbmNlRGVzY3JpcHRpb259PC9saT5gKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1BcHBsaWNhdGlvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fc2hlZXRBcHBsaWNhdGlvbiA9IGl0ZW1BcHBsaWNhdGlvbjtcclxuICAgICAgICB0aGlzLl9pdGVtID0gaXRlbUFwcGxpY2F0aW9uLml0ZW07XHJcbiAgICAgICAgaWYgKHRoaXMuX2l0ZW0uaXNPd25lZCkge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RvcklkOiBzdHJpbmcgPSB0aGlzLl9pdGVtLmFjdG9yLmlkO1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLmdldChhY3RvcklkKTtcclxuICAgICAgICAgICAgdGhpcy5faW52ZW50b3J5ID0gRmFicmljYXRlQXBwbGljYXRpb24uaW52ZW50b3JpZXMuZ2V0Rm9yKHRoaXMuX2FjdG9yLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFydElkOiBzdHJpbmcgPSBpdGVtQXBwbGljYXRpb24uaXRlbS5kYXRhLmZsYWdzLmZhYnJpY2F0ZS5pZGVudGl0eS5wYXJ0SWQ7XHJcbiAgICAgICAgdGhpcy5fY3JhZnRpbmdTeXN0ZW0gPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLmdldFN5c3RlbUJ5UGFydElkKHBhcnRJZCk7XHJcbiAgICAgICAgdGhpcy5fcmVjaXBlID0gdGhpcy5fY3JhZnRpbmdTeXN0ZW0uZ2V0UmVjaXBlQnlQYXJ0SWQocGFydElkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXQoc2hlZXRIdG1sOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9zaGVldEh0bWwgPSBzaGVldEh0bWw7XHJcbiAgICAgICAgdGhpcy5hZGRUYWJUb0l0ZW1TaGVldChzaGVldEh0bWwpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgaXNDcmFmdGFibGU6IGJvb2xlYW4gPSB0aGlzLl9pbnZlbnRvcnkuaGFzQWxsSW5ncmVkaWVudHNGb3IodGhpcy5fcmVjaXBlKTtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZTogSFRNTEVsZW1lbnQgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShQcm9wZXJ0aWVzLm1vZHVsZS50ZW1wbGF0ZXMucmVjaXBlVGFiLCB7cmVjaXBlOiB0aGlzLl9yZWNpcGUsIGl0ZW06IHRoaXMuX2l0ZW0sIHN5c3RlbTogdGhpcy5fY3JhZnRpbmdTeXN0ZW0sIGlzQ3JhZnRhYmxlOiBpc0NyYWZ0YWJsZX0pO1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9zaGVldEh0bWwuZmluZCgnLnJlY2lwZS10YWItY29udGVudCcpO1xyXG4gICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVwbGFjZVdpdGgodGVtcGxhdGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCcudGFiLmZhYnJpY2F0ZS1yZWNpcGUnKS5hcHBlbmQodGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVJdGVtU2hlZXRFdmVudHMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3N1cHByZXNzZWRJbk5hdiAmJiAhdGhpcy5pc0FjdGl2ZUluTmF2KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hlZXRBcHBsaWNhdGlvbi5fdGFic1swXS5hY3RpdmF0ZShJdGVtUmVjaXBlVGFiLnRhYktleSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFRhYlRvSXRlbVNoZWV0KHNoZWV0SHRtbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdGFicyA9IHNoZWV0SHRtbC5maW5kKGAudGFic1tkYXRhLWdyb3VwPVwicHJpbWFyeVwiXWApO1xyXG4gICAgICAgIHRhYnMuYXBwZW5kKCQoXHJcbiAgICAgICAgICAgIGA8YSBjbGFzcz1cIml0ZW0gZmFicmljYXRlLXJlY2lwZVwiIGRhdGEtdGFiPVwiJHtJdGVtUmVjaXBlVGFiLnRhYktleX1cIj5SZWNpcGU8L2E+YFxyXG4gICAgICAgICkpO1xyXG5cclxuICAgICAgICAkKHNoZWV0SHRtbC5maW5kKGAuc2hlZXQtYm9keWApKS5hcHBlbmQoJChcclxuICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJ0YWIgZmFicmljYXRlLXJlY2lwZVwiIGRhdGEtZ3JvdXA9XCJwcmltYXJ5XCIgZGF0YS10YWI9XCIke0l0ZW1SZWNpcGVUYWIudGFiS2V5fVwiPjwvZGl2PmBcclxuICAgICAgICApKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUl0ZW1TaGVldEV2ZW50cygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hlZXRIdG1sLmZpbmQoJy5jcmFmdC1idXR0b24nKS5jbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NyYWZ0aW5nU3lzdGVtLmNyYWZ0KHRoaXMuX2FjdG9yLCB0aGlzLl9pbnZlbnRvcnksIHRoaXMuX3JlY2lwZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1cHByZXNzZWRJbk5hdiA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NoZWV0SHRtbC5maW5kKCcub3Blbi1jb21wZW5kaXVtLWl0ZW0nKS5jbGljayhhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXJ0LWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3lzdGVtLWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBlbmRpdW06IENvbXBlbmRpdW0gPSBnYW1lLnBhY2tzLmdldChzeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eTogRW50aXR5ID0gYXdhaXQgY29tcGVuZGl1bS5nZXRFbnRpdHkocGFydElkKTtcclxuICAgICAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSAmJiBlbnRpdHkucGVybWlzc2lvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdZb3UgYXJlIGF0dGVtcHRpbmcgdG8gdmlldyB0aGUgZGV0YWlscyBvZiBhIENyYWZ0aW5nIENvbXBvbmVudCB0aGF0IHlvdSBoYXZlIG5vICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdhY2Nlc3MgdG8uIEFzayB5b3VyIEdNIG9yYW4gYWRtaW5pc3RyYXRvciB0byBncmFudCB5b3UgYWNjZXNzIHRvIHRoZSBpdGVtcyBpbiB0aGUgY29tcGVuZGl1bSBmb3IgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RoZSBDcmFmdGluZyBTeXN0ZW0gXCInICsgdGhpcy5fY3JhZnRpbmdTeXN0ZW0ubmFtZSArICdcIicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudGl0eS5zaGVldC5yZW5kZXIodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNBY3RpdmVJbk5hdigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gJCh0aGlzLl9zaGVldEh0bWwpLmZpbmQoYGEuZmFicmljYXRlLXJlY2lwZVtkYXRhLXRhYj1cIiR7SXRlbVJlY2lwZVRhYi50YWJLZXl9XCJdYCkuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0l0ZW1SZWNpcGVUYWJ9Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/interface/ItemRecipeTab.ts\n");

/***/ }),

/***/ "./src/scripts/module.ts":
/*!*******************************!*\
  !*** ./src/scripts/module.ts ***!
  \*******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Properties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Properties */ \"./src/scripts/Properties.ts\");\n/* harmony import */ var _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./application/FabricateLifecycle */ \"./src/scripts/application/FabricateLifecycle.ts\");\n/* harmony import */ var _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/CraftingSystemFactory */ \"./src/scripts/core/CraftingSystemFactory.ts\");\n/* harmony import */ var _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./application/FabricateApplication */ \"./src/scripts/application/FabricateApplication.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nHooks.once('ready', loadCraftingSystems);\r\nHooks.once('ready', () => {\r\n    _application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].init();\r\n});\r\n/**\r\n * Loads all Crafting Systems with a System Specification declared with the Crafting System Registry.\r\n * */\r\nfunction loadCraftingSystems() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const systemSpecifications = _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.systemSpecifications;\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpecifications.length} crafting systems. `);\r\n        systemSpecifications.forEach(_application_FabricateLifecycle__WEBPACK_IMPORTED_MODULE_1__[\"FabricateLifecycle\"].registerCraftingSystemSettings);\r\n        systemSpecifications.forEach(loadCraftingSystem);\r\n        const systemNames = systemSpecifications.map((systemSpec) => systemSpec.name);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpecifications.length} crafting systems: ${systemNames.join(', ')} `);\r\n    });\r\n}\r\n/**\r\n * Loads a single Crafting System from a System Specification, which must include a Compendium Pack Key. Item data from\r\n * the Compendium Pack is used to load the Recipes and Crafting Components into the system from the compendium. The\r\n * Fabricator, supported systems and name provided in the spec are all preserved.\r\n *\r\n * @param systemSpec `CraftingSystemSpecification` that determines how a system behaves and which compendium pack content\r\n * for the system should be loaded from.\r\n * */\r\nfunction loadCraftingSystem(systemSpec) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loading ${systemSpec.name} from Compendium pack ${systemSpec.compendiumPackKey}. `);\r\n        if (systemSpec.supportedGameSystems.indexOf(game.system.id) < 0) {\r\n            console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | ${systemSpec.name} does not support ${game.system.id}! `);\r\n            return;\r\n        }\r\n        const craftingSystemFactory = new _core_CraftingSystemFactory__WEBPACK_IMPORTED_MODULE_2__[\"CompendiumImportingCraftingSystemFactory\"](systemSpec);\r\n        const craftingSystem = yield craftingSystemFactory.make();\r\n        craftingSystem.enabled = game.settings.get(_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.name, _Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].settingsKeys.craftingSystem.enabled(systemSpec.compendiumPackKey));\r\n        _application_FabricateApplication__WEBPACK_IMPORTED_MODULE_3__[\"default\"].systems.register(craftingSystem);\r\n        console.log(`${_Properties__WEBPACK_IMPORTED_MODULE_0__[\"default\"].module.label} | Loaded ${systemSpec.name}. `);\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tb2R1bGUudHM/NTk0MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzQztBQUM4QjtBQUV5QztBQUN2QztBQUd0RSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3pDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtJQUNyQixrRkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQztBQUVIOztLQUVLO0FBQ0wsU0FBZSxtQkFBbUI7O1FBQzlCLE1BQU0sb0JBQW9CLEdBQUcseUVBQW9CLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDO1FBQy9FLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGNBQWMsb0JBQW9CLENBQUMsTUFBTSxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RHLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrRkFBa0IsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1FBQ2hGLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQXVDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxhQUFhLG9CQUFvQixDQUFDLE1BQU0sc0JBQXNCLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25JLENBQUM7Q0FBQTtBQUVEOzs7Ozs7O0tBT0s7QUFDTCxTQUFlLGtCQUFrQixDQUFDLFVBQXVDOztRQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxjQUFjLFVBQVUsQ0FBQyxJQUFJLHlCQUF5QixVQUFVLENBQUMsaUJBQWlCLElBQUksQ0FBQyxDQUFDO1FBQzlILElBQUksVUFBVSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsbURBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxNQUFNLFVBQVUsQ0FBQyxJQUFJLHFCQUFxQixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEcsT0FBTztTQUNWO1FBQ0QsTUFBTSxxQkFBcUIsR0FBMEIsSUFBSSxvR0FBd0MsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RyxNQUFNLGNBQWMsR0FBRyxNQUFNLHFCQUFxQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELGNBQWMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsbURBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLG1EQUFVLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUNqSix5RUFBb0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxtREFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLGFBQWEsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7SUFDNUUsQ0FBQztDQUFBIiwiZmlsZSI6Ii4vc3JjL3NjcmlwdHMvbW9kdWxlLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BlcnRpZXMgZnJvbSBcIi4vUHJvcGVydGllc1wiO1xyXG5pbXBvcnQge0ZhYnJpY2F0ZUxpZmVjeWNsZX0gZnJvbSBcIi4vYXBwbGljYXRpb24vRmFicmljYXRlTGlmZWN5Y2xlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge0NvbXBlbmRpdW1JbXBvcnRpbmdDcmFmdGluZ1N5c3RlbUZhY3RvcnksIENyYWZ0aW5nU3lzdGVtRmFjdG9yeX0gZnJvbSBcIi4vY29yZS9DcmFmdGluZ1N5c3RlbUZhY3RvcnlcIjtcclxuaW1wb3J0IEZhYnJpY2F0ZUFwcGxpY2F0aW9uIGZyb20gXCIuL2FwcGxpY2F0aW9uL0ZhYnJpY2F0ZUFwcGxpY2F0aW9uXCI7XHJcblxyXG5cclxuSG9va3Mub25jZSgncmVhZHknLCBsb2FkQ3JhZnRpbmdTeXN0ZW1zKTtcclxuSG9va3Mub25jZSgncmVhZHknLCAoKSA9PiB7XHJcbiAgICBGYWJyaWNhdGVMaWZlY3ljbGUuaW5pdCgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBMb2FkcyBhbGwgQ3JhZnRpbmcgU3lzdGVtcyB3aXRoIGEgU3lzdGVtIFNwZWNpZmljYXRpb24gZGVjbGFyZWQgd2l0aCB0aGUgQ3JhZnRpbmcgU3lzdGVtIFJlZ2lzdHJ5LlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW1zKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc3lzdGVtU3BlY2lmaWNhdGlvbnMgPSBGYWJyaWNhdGVBcHBsaWNhdGlvbi5zeXN0ZW1zLnN5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgY29uc29sZS5sb2coYCR7UHJvcGVydGllcy5tb2R1bGUubGFiZWx9IHwgTG9hZGluZyAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtcy4gYCk7XHJcbiAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5mb3JFYWNoKEZhYnJpY2F0ZUxpZmVjeWNsZS5yZWdpc3RlckNyYWZ0aW5nU3lzdGVtU2V0dGluZ3MpO1xyXG4gICAgc3lzdGVtU3BlY2lmaWNhdGlvbnMuZm9yRWFjaChsb2FkQ3JhZnRpbmdTeXN0ZW0pO1xyXG4gICAgY29uc3Qgc3lzdGVtTmFtZXMgPSBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5tYXAoKHN5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbikgPT4gc3lzdGVtU3BlYy5uYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8IExvYWRlZCAke3N5c3RlbVNwZWNpZmljYXRpb25zLmxlbmd0aH0gY3JhZnRpbmcgc3lzdGVtczogJHtzeXN0ZW1OYW1lcy5qb2luKCcsICcpfSBgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGEgc2luZ2xlIENyYWZ0aW5nIFN5c3RlbSBmcm9tIGEgU3lzdGVtIFNwZWNpZmljYXRpb24sIHdoaWNoIG11c3QgaW5jbHVkZSBhIENvbXBlbmRpdW0gUGFjayBLZXkuIEl0ZW0gZGF0YSBmcm9tXHJcbiAqIHRoZSBDb21wZW5kaXVtIFBhY2sgaXMgdXNlZCB0byBsb2FkIHRoZSBSZWNpcGVzIGFuZCBDcmFmdGluZyBDb21wb25lbnRzIGludG8gdGhlIHN5c3RlbSBmcm9tIHRoZSBjb21wZW5kaXVtLiBUaGVcclxuICogRmFicmljYXRvciwgc3VwcG9ydGVkIHN5c3RlbXMgYW5kIG5hbWUgcHJvdmlkZWQgaW4gdGhlIHNwZWMgYXJlIGFsbCBwcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBzeXN0ZW1TcGVjIGBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25gIHRoYXQgZGV0ZXJtaW5lcyBob3cgYSBzeXN0ZW0gYmVoYXZlcyBhbmQgd2hpY2ggY29tcGVuZGl1bSBwYWNrIGNvbnRlbnRcclxuICogZm9yIHRoZSBzeXN0ZW0gc2hvdWxkIGJlIGxvYWRlZCBmcm9tLlxyXG4gKiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ3JhZnRpbmdTeXN0ZW0oc3lzdGVtU3BlYzogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkaW5nICR7c3lzdGVtU3BlYy5uYW1lfSBmcm9tIENvbXBlbmRpdW0gcGFjayAke3N5c3RlbVNwZWMuY29tcGVuZGl1bVBhY2tLZXl9LiBgKTtcclxuICAgIGlmIChzeXN0ZW1TcGVjLnN1cHBvcnRlZEdhbWVTeXN0ZW1zLmluZGV4T2YoZ2FtZS5zeXN0ZW0uaWQpIDwgMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke1Byb3BlcnRpZXMubW9kdWxlLmxhYmVsfSB8ICR7c3lzdGVtU3BlYy5uYW1lfSBkb2VzIG5vdCBzdXBwb3J0ICR7Z2FtZS5zeXN0ZW0uaWR9ISBgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjcmFmdGluZ1N5c3RlbUZhY3Rvcnk6IENyYWZ0aW5nU3lzdGVtRmFjdG9yeSA9IG5ldyBDb21wZW5kaXVtSW1wb3J0aW5nQ3JhZnRpbmdTeXN0ZW1GYWN0b3J5KHN5c3RlbVNwZWMpO1xyXG4gICAgY29uc3QgY3JhZnRpbmdTeXN0ZW0gPSBhd2FpdCBjcmFmdGluZ1N5c3RlbUZhY3RvcnkubWFrZSgpO1xyXG4gICAgY3JhZnRpbmdTeXN0ZW0uZW5hYmxlZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KFByb3BlcnRpZXMubW9kdWxlLm5hbWUsIFByb3BlcnRpZXMuc2V0dGluZ3NLZXlzLmNyYWZ0aW5nU3lzdGVtLmVuYWJsZWQoc3lzdGVtU3BlYy5jb21wZW5kaXVtUGFja0tleSkpO1xyXG4gICAgRmFicmljYXRlQXBwbGljYXRpb24uc3lzdGVtcy5yZWdpc3RlcihjcmFmdGluZ1N5c3RlbSk7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtQcm9wZXJ0aWVzLm1vZHVsZS5sYWJlbH0gfCBMb2FkZWQgJHtzeXN0ZW1TcGVjLm5hbWV9LiBgKTtcclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/module.ts\n");

/***/ }),

/***/ "./src/scripts/registries/CraftingSystemRegistry.ts":
/*!**********************************************************!*\
  !*** ./src/scripts/registries/CraftingSystemRegistry.ts ***!
  \**********************************************************/
/*! exports provided: CraftingSystemRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CraftingSystemRegistry\", function() { return CraftingSystemRegistry; });\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./system_definitions/AlchemistsSuppliesV16 */ \"./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n\r\n\r\n\r\n\r\nclass CraftingSystemRegistry {\r\n    constructor() {\r\n        this._craftingSystemsByCompendiumKey = new Map();\r\n        this._craftingSystemsByPartId = new Map();\r\n        this._systemSpecifications = CraftingSystemRegistry.systemSpecifications();\r\n    }\r\n    register(system) {\r\n        this._craftingSystemsByCompendiumKey.set(system.compendiumPackKey, system);\r\n        this._craftingSystemsByPartId = this.resolvePartsForSystem(system, this._craftingSystemsByPartId);\r\n    }\r\n    resolvePartsForSystem(system, parts) {\r\n        const recipeLinks = new Map(system.recipes.map((recipe) => [recipe.partId, system]));\r\n        const componentLinks = new Map(system.components.map((component) => [component.partId, system]));\r\n        const systemParts = new Map([...recipeLinks, ...componentLinks]);\r\n        if (systemParts.size !== (recipeLinks.size + componentLinks.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} contains duplicate Part IDs. `);\r\n        }\r\n        const mergedParts = new Map([...parts, ...systemParts]);\r\n        if (mergedParts.size !== (systemParts.size + parts.size)) {\r\n            throw new Error(`The Crafting System with ID ${system.compendiumPackKey} shares ${(systemParts.size + parts.size) - mergedParts.size} Part IDs with already registered systems. `);\r\n        }\r\n        return mergedParts;\r\n    }\r\n    getSystemByCompendiumPackKey(id) {\r\n        if (this._craftingSystemsByCompendiumKey.has(id)) {\r\n            return this._craftingSystemsByCompendiumKey.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Compendium Pack Key ${id}. `);\r\n    }\r\n    getSystemByPartId(id) {\r\n        if (this._craftingSystemsByPartId.has(id)) {\r\n            return this._craftingSystemsByPartId.get(id);\r\n        }\r\n        throw new Error(`No Crafting system is registered with Fabricate for the Recipe ${id}. `);\r\n    }\r\n    getAllSystems() {\r\n        return Array.from(this._craftingSystemsByCompendiumKey.values());\r\n    }\r\n    get systemSpecifications() {\r\n        return this._systemSpecifications;\r\n    }\r\n    declareSpecification(spec) {\r\n        this._systemSpecifications.push(spec);\r\n    }\r\n    static systemSpecifications() {\r\n        const systemSpecifications = [];\r\n        const testSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_1__[\"CraftingSystemSpecification\"].builder()\r\n            .withName('Child\\'s Play')\r\n            .withEnableHint('Enable the test Crafting System for Fabricate?')\r\n            .withDescription('A simple tech demo used for the early development of Fabricate. ')\r\n            .withCompendiumPackKey('fabricate.fabricate-test')\r\n            .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_0__[\"GameSystemType\"].DND5E)\r\n            .withFabricator(new _core_Fabricator__WEBPACK_IMPORTED_MODULE_3__[\"Fabricator\"]())\r\n            .build();\r\n        systemSpecifications.push(testSystemSpec);\r\n        systemSpecifications.push(_system_definitions_AlchemistsSuppliesV16__WEBPACK_IMPORTED_MODULE_2__[\"AlchemistsSuppliesSystemSpec\"]);\r\n        return systemSpecifications;\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0NyYWZ0aW5nU3lzdGVtUmVnaXN0cnkudHM/MTlmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBc0Q7QUFDMEI7QUFDUTtBQUUxQztBQUU5QyxNQUFNLHNCQUFzQjtJQUE1QjtRQUVZLG9DQUErQixHQUFnQyxJQUFJLEdBQUcsRUFBMEIsQ0FBQztRQUNqRyw2QkFBd0IsR0FBZ0MsSUFBSSxHQUFHLEVBQTBCLENBQUM7UUFDMUYsMEJBQXFCLEdBQWtDLHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFrRWpILENBQUM7SUFoRVUsUUFBUSxDQUFDLE1BQXNCO1FBQ2xDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQ3RHLENBQUM7SUFFTyxxQkFBcUIsQ0FBQyxNQUFzQixFQUFFLEtBQWtDO1FBQ3BGLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxSCxNQUFNLGNBQWMsR0FBZ0MsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUE0QixFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pKLE1BQU0sV0FBVyxHQUFnQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxFQUFFLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLFdBQVcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUMvRCxNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixNQUFNLENBQUMsaUJBQWlCLGdDQUFnQyxDQUFDLENBQUM7U0FDNUc7UUFDRCxNQUFNLFdBQVcsR0FBZ0MsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEQsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsTUFBTSxDQUFDLGlCQUFpQixXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsV0FBVyxDQUFDLElBQUksNkNBQTZDLENBQUMsQ0FBQztTQUN0TDtRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSw0QkFBNEIsQ0FBQyxFQUFTO1FBQ3pDLElBQUksSUFBSSxDQUFDLCtCQUErQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUM5QyxPQUFPLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDdkQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLCtFQUErRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxFQUFTO1FBQzlCLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUN2QyxPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDaEQ7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtFQUFrRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlGLENBQUM7SUFFTSxhQUFhO1FBQ2hCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsSUFBVyxvQkFBb0I7UUFDM0IsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7SUFDdEMsQ0FBQztJQUVNLG9CQUFvQixDQUFDLElBQWlDO1FBQ3pELElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxvQkFBb0I7UUFFOUIsTUFBTSxvQkFBb0IsR0FBa0MsRUFBRSxDQUFDO1FBRS9ELE1BQU0sY0FBYyxHQUFnQyw2RkFBMkIsQ0FBQyxPQUFPLEVBQUU7YUFDcEYsUUFBUSxDQUFDLGVBQWUsQ0FBQzthQUN6QixjQUFjLENBQUMsZ0RBQWdELENBQUM7YUFDaEUsZUFBZSxDQUFDLGtFQUFrRSxDQUFDO2FBQ25GLHFCQUFxQixDQUFDLDBCQUEwQixDQUFDO2FBQ2pELHVCQUF1QixDQUFDLG1FQUFjLENBQUMsS0FBSyxDQUFDO2FBQzdDLGNBQWMsQ0FBQyxJQUFJLDJEQUFVLEVBQUUsQ0FBQzthQUNoQyxLQUFLLEVBQUUsQ0FBQztRQUNiLG9CQUFvQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUUxQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsc0dBQTRCLENBQUMsQ0FBQztRQUV4RCxPQUFPLG9CQUFvQixDQUFDO0lBQ2hDLENBQUM7Q0FFSjtBQUU4QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvQ3JhZnRpbmdTeXN0ZW1SZWdpc3RyeS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q3JhZnRpbmdTeXN0ZW19IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtXCI7XHJcbmltcG9ydCB7UmVjaXBlfSBmcm9tIFwiLi4vY29yZS9SZWNpcGVcIjtcclxuaW1wb3J0IHtHYW1lU3lzdGVtVHlwZX0gZnJvbSBcIi4uL2NvcmUvR2FtZVN5c3RlbVR5cGVcIjtcclxuaW1wb3J0IHtDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb259IGZyb20gXCIuLi9jb3JlL0NyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvblwiO1xyXG5pbXBvcnQge0FsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWN9IGZyb20gXCIuL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTZcIjtcclxuaW1wb3J0IHtDcmFmdGluZ0NvbXBvbmVudH0gZnJvbSBcIi4uL2NvcmUvQ3JhZnRpbmdDb21wb25lbnRcIjtcclxuaW1wb3J0IHtGYWJyaWNhdG9yfSBmcm9tIFwiLi4vY29yZS9GYWJyaWNhdG9yXCI7XHJcblxyXG5jbGFzcyBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5IHtcclxuXHJcbiAgICBwcml2YXRlIF9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXk6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4oKTtcclxuICAgIHByaXZhdGUgX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwPHN0cmluZywgQ3JhZnRpbmdTeXN0ZW0+KCk7XHJcbiAgICBwcml2YXRlIF9zeXN0ZW1TcGVjaWZpY2F0aW9uczogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10gPSBDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5LnN5c3RlbVNwZWNpZmljYXRpb25zKCk7XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVyKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXkuc2V0KHN5c3RlbS5jb21wZW5kaXVtUGFja0tleSwgc3lzdGVtKTtcclxuICAgICAgICB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeVBhcnRJZCA9IHRoaXMucmVzb2x2ZVBhcnRzRm9yU3lzdGVtKHN5c3RlbSwgdGhpcy5fY3JhZnRpbmdTeXN0ZW1zQnlQYXJ0SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzb2x2ZVBhcnRzRm9yU3lzdGVtKHN5c3RlbTogQ3JhZnRpbmdTeXN0ZW0sIHBhcnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4pOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4ge1xyXG4gICAgICAgIGNvbnN0IHJlY2lwZUxpbmtzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwKHN5c3RlbS5yZWNpcGVzLm1hcCgocmVjaXBlOiBSZWNpcGUpID0+IFtyZWNpcGUucGFydElkLCBzeXN0ZW1dKSk7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50TGlua3M6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoc3lzdGVtLmNvbXBvbmVudHMubWFwKChjb21wb25lbnQ6IENyYWZ0aW5nQ29tcG9uZW50KSA9PiBbY29tcG9uZW50LnBhcnRJZCwgc3lzdGVtXSkpO1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbVBhcnRzOiBNYXA8c3RyaW5nLCBDcmFmdGluZ1N5c3RlbT4gPSBuZXcgTWFwKFsuLi5yZWNpcGVMaW5rcywgLi4uY29tcG9uZW50TGlua3NdKTtcclxuICAgICAgICBpZiAoc3lzdGVtUGFydHMuc2l6ZSAhPT0gKHJlY2lwZUxpbmtzLnNpemUgKyBjb21wb25lbnRMaW5rcy5zaXplKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBDcmFmdGluZyBTeXN0ZW0gd2l0aCBJRCAke3N5c3RlbS5jb21wZW5kaXVtUGFja0tleX0gY29udGFpbnMgZHVwbGljYXRlIFBhcnQgSURzLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWVyZ2VkUGFydHM6IE1hcDxzdHJpbmcsIENyYWZ0aW5nU3lzdGVtPiA9IG5ldyBNYXAoWy4uLnBhcnRzLCAuLi5zeXN0ZW1QYXJ0c10pO1xyXG4gICAgICAgIGlmIChtZXJnZWRQYXJ0cy5zaXplICE9PSAoc3lzdGVtUGFydHMuc2l6ZSArIHBhcnRzLnNpemUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIENyYWZ0aW5nIFN5c3RlbSB3aXRoIElEICR7c3lzdGVtLmNvbXBlbmRpdW1QYWNrS2V5fSBzaGFyZXMgJHsoc3lzdGVtUGFydHMuc2l6ZSArIHBhcnRzLnNpemUpIC0gbWVyZ2VkUGFydHMuc2l6ZX0gUGFydCBJRHMgd2l0aCBhbHJlYWR5IHJlZ2lzdGVyZWQgc3lzdGVtcy4gYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXJnZWRQYXJ0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3lzdGVtQnlDb21wZW5kaXVtUGFja0tleShpZDpzdHJpbmcpOiBDcmFmdGluZ1N5c3RlbSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS5oYXMoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jcmFmdGluZ1N5c3RlbXNCeUNvbXBlbmRpdW1LZXkuZ2V0KGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBDcmFmdGluZyBzeXN0ZW0gaXMgcmVnaXN0ZXJlZCB3aXRoIEZhYnJpY2F0ZSBmb3IgdGhlIENvbXBlbmRpdW0gUGFjayBLZXkgJHtpZH0uIGApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW1CeVBhcnRJZChpZDpzdHJpbmcpOiBDcmFmdGluZ1N5c3RlbSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkLmhhcyhpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5UGFydElkLmdldChpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gQ3JhZnRpbmcgc3lzdGVtIGlzIHJlZ2lzdGVyZWQgd2l0aCBGYWJyaWNhdGUgZm9yIHRoZSBSZWNpcGUgJHtpZH0uIGApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBbGxTeXN0ZW1zKCk6IENyYWZ0aW5nU3lzdGVtW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2NyYWZ0aW5nU3lzdGVtc0J5Q29tcGVuZGl1bUtleS52YWx1ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzeXN0ZW1TcGVjaWZpY2F0aW9ucygpOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWNsYXJlU3BlY2lmaWNhdGlvbihzcGVjOiBDcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9zeXN0ZW1TcGVjaWZpY2F0aW9ucy5wdXNoKHNwZWMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgc3lzdGVtU3BlY2lmaWNhdGlvbnMoKTogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10ge1xyXG5cclxuICAgICAgICBjb25zdCBzeXN0ZW1TcGVjaWZpY2F0aW9uczogQ3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVzdFN5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbiA9IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5idWlsZGVyKClcclxuICAgICAgICAgICAgLndpdGhOYW1lKCdDaGlsZFxcJ3MgUGxheScpXHJcbiAgICAgICAgICAgIC53aXRoRW5hYmxlSGludCgnRW5hYmxlIHRoZSB0ZXN0IENyYWZ0aW5nIFN5c3RlbSBmb3IgRmFicmljYXRlPycpXHJcbiAgICAgICAgICAgIC53aXRoRGVzY3JpcHRpb24oJ0Egc2ltcGxlIHRlY2ggZGVtbyB1c2VkIGZvciB0aGUgZWFybHkgZGV2ZWxvcG1lbnQgb2YgRmFicmljYXRlLiAnKVxyXG4gICAgICAgICAgICAud2l0aENvbXBlbmRpdW1QYWNrS2V5KCdmYWJyaWNhdGUuZmFicmljYXRlLXRlc3QnKVxyXG4gICAgICAgICAgICAud2l0aFN1cHBvcnRlZEdhbWVTeXN0ZW0oR2FtZVN5c3RlbVR5cGUuRE5ENUUpXHJcbiAgICAgICAgICAgIC53aXRoRmFicmljYXRvcihuZXcgRmFicmljYXRvcigpKVxyXG4gICAgICAgICAgICAuYnVpbGQoKTtcclxuICAgICAgICBzeXN0ZW1TcGVjaWZpY2F0aW9ucy5wdXNoKHRlc3RTeXN0ZW1TcGVjKTtcclxuXHJcbiAgICAgICAgc3lzdGVtU3BlY2lmaWNhdGlvbnMucHVzaChBbGNoZW1pc3RzU3VwcGxpZXNTeXN0ZW1TcGVjKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN5c3RlbVNwZWNpZmljYXRpb25zO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDcmFmdGluZ1N5c3RlbVJlZ2lzdHJ5fSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/registries/CraftingSystemRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/InventoryRegistry.ts":
/*!*****************************************************!*\
  !*** ./src/scripts/registries/InventoryRegistry.ts ***!
  \*****************************************************/
/*! exports provided: InventoryRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InventoryRegistry\", function() { return InventoryRegistry; });\nclass InventoryRegistry {\r\n    constructor() {\r\n        this._managedInventories = new Map();\r\n    }\r\n    addFor(actorId, inventory) {\r\n        if (this._managedInventories.has(actorId)) {\r\n            throw new Error(`The Crafting Inventory for Actor ID ${actorId} is already managed by Fabricate and should not be overridden. `);\r\n        }\r\n        this._managedInventories.set(actorId, inventory);\r\n    }\r\n    getFor(actorId) {\r\n        return this._managedInventories.get(actorId);\r\n    }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL0ludmVudG9yeVJlZ2lzdHJ5LnRzPzE4MzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBLE1BQU0saUJBQWlCO0lBQXZCO1FBRVksd0JBQW1CLEdBQXNDLElBQUksR0FBRyxFQUFnQyxDQUFDO0lBYTdHLENBQUM7SUFYVSxNQUFNLENBQUMsT0FBZSxFQUFFLFNBQStCO1FBQzFELElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN2QyxNQUFNLElBQUksS0FBSyxDQUFDLHVDQUF1QyxPQUFPLGlFQUFpRSxDQUFDLENBQUM7U0FDcEk7UUFDRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQWU7UUFDekIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pELENBQUM7Q0FFSjtBQUV5QiIsImZpbGUiOiIuL3NyYy9zY3JpcHRzL3JlZ2lzdHJpZXMvSW52ZW50b3J5UmVnaXN0cnkudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ludmVudG9yeX0gZnJvbSBcIi4uL2dhbWUvSW52ZW50b3J5XCI7XHJcblxyXG5jbGFzcyBJbnZlbnRvcnlSZWdpc3RyeSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfbWFuYWdlZEludmVudG9yaWVzOiBNYXA8c3RyaW5nLCBJbnZlbnRvcnk8SXRlbS5EYXRhPj4gPSBuZXcgTWFwPHN0cmluZywgSW52ZW50b3J5PEl0ZW0uRGF0YT4+KCk7XHJcblxyXG4gICAgcHVibGljIGFkZEZvcihhY3RvcklkOiBzdHJpbmcsIGludmVudG9yeTogSW52ZW50b3J5PEl0ZW0uRGF0YT4pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fbWFuYWdlZEludmVudG9yaWVzLmhhcyhhY3RvcklkKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBDcmFmdGluZyBJbnZlbnRvcnkgZm9yIEFjdG9yIElEICR7YWN0b3JJZH0gaXMgYWxyZWFkeSBtYW5hZ2VkIGJ5IEZhYnJpY2F0ZSBhbmQgc2hvdWxkIG5vdCBiZSBvdmVycmlkZGVuLiBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbWFuYWdlZEludmVudG9yaWVzLnNldChhY3RvcklkLCBpbnZlbnRvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3IoYWN0b3JJZDogc3RyaW5nKTogSW52ZW50b3J5PEl0ZW0uRGF0YT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYW5hZ2VkSW52ZW50b3JpZXMuZ2V0KGFjdG9ySWQpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtJbnZlbnRvcnlSZWdpc3RyeX0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/registries/InventoryRegistry.ts\n");

/***/ }),

/***/ "./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts":
/*!****************************************************************************!*\
  !*** ./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts ***!
  \****************************************************************************/
/*! exports provided: AlchemistsSuppliesSystemSpec */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AlchemistsSuppliesSystemSpec\", function() { return AlchemistsSuppliesSystemSpec; });\n/* harmony import */ var _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/EssenceCombiner */ \"./src/scripts/core/EssenceCombiner.ts\");\n/* harmony import */ var _core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/GameSystemType */ \"./src/scripts/core/GameSystemType.ts\");\n/* harmony import */ var _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/CraftingComponent */ \"./src/scripts/core/CraftingComponent.ts\");\n/* harmony import */ var _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/CraftingSystemSpecification */ \"./src/scripts/core/CraftingSystemSpecification.ts\");\n/* harmony import */ var _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../dnd5e/AlchemicalEffect5E */ \"./src/scripts/dnd5e/AlchemicalEffect5E.ts\");\n/* harmony import */ var _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/Fabricator */ \"./src/scripts/core/Fabricator.ts\");\n/* harmony import */ var _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/CraftingSystem */ \"./src/scripts/core/CraftingSystem.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst blinded = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'earth'], 'Release a burst of stinging dust. Affected targets are blinded for the next round. ');\r\nconst prone = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['water', 'water'], 'Release a puddle of slippery oil. Affected targets immediately fall prone. ');\r\nconst lightningDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['air', 'air'], 'Deal 1d4 lightning damage on contact. Double damage to targets touching a metal surface or using metal weapons or armor. ', { expression: '1d4', type: 'lightning' });\r\nconst fireDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'fire'], 'Deal 1d4 fire damage on contact. Double damage to targets with cloth or leather armor. ', { expression: '1d4', type: 'fire' });\r\nconst persistentDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Condition5e\"](['earth', 'water'], 'Release gel that sticks to targets. Each round, any damage-dealing effects continue to ' +\r\n    'deal 1 damage each until an action is used to remove the gel with a DC 10 Dexterity check .');\r\nconst coldDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['water', 'air'], 'Deal 1d4 cold damage on contact. Reduce target speed by 10 feet for the next round. ', { expression: '1d4', type: 'cold' });\r\nconst aoeExtension = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"AoeExtension5e\"](['air', 'fire'], 'Release concentrated mist in all directions. Increase the radius of all effects by 5 feet. ', { units: 'ft', value: 5 });\r\nconst acidDamage = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"Damage5e\"](['fire', 'earth'], 'Deal 1d8 acid damage on contact. ', { expression: '1d8', type: 'acid' });\r\nconst diceMultiplier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"DiceMultiplier5e\"](['positive-energy'], 'Roll double the number of all damage dice. ', 2);\r\nconst savingThrowModifier = new _dnd5e_AlchemicalEffect5E__WEBPACK_IMPORTED_MODULE_4__[\"SavingThrowModifier5e\"](['negative-energy'], 'Increase the DC to avoid bomb effects by 2. ', 2);\r\nconst essenceCombiner = _core_EssenceCombiner__WEBPACK_IMPORTED_MODULE_0__[\"EssenceCombiner\"].builder()\r\n    .withMaxComponents(6)\r\n    .withMaxEssences(6)\r\n    .withAlchemicalEffect(blinded)\r\n    .withAlchemicalEffect(prone)\r\n    .withAlchemicalEffect(lightningDamage)\r\n    .withAlchemicalEffect(fireDamage)\r\n    .withAlchemicalEffect(persistentDamage)\r\n    .withAlchemicalEffect(coldDamage)\r\n    .withAlchemicalEffect(aoeExtension)\r\n    .withAlchemicalEffect(acidDamage)\r\n    .withAlchemicalEffect(diceMultiplier)\r\n    .withAlchemicalEffect(savingThrowModifier)\r\n    .build();\r\nconst alchemistsSuppliesV16 = 'fabricate.alchemists-supplies-v16';\r\nconst alchemySpecification = new _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"AlchemySpecification\"](essenceCombiner, _core_CraftingComponent__WEBPACK_IMPORTED_MODULE_2__[\"CraftingComponent\"].builder()\r\n    .withName('Alchemical Bomb')\r\n    .withImageUrl('systems/dnd5e/icons/items/inventory/bomb.jpg')\r\n    .withPartId('90z9nOwmGnP4aUUk')\r\n    .withSystemId(alchemistsSuppliesV16)\r\n    .withEssences([])\r\n    .build());\r\nconst fabricator = new _core_Fabricator__WEBPACK_IMPORTED_MODULE_5__[\"Fabricator\"](alchemySpecification);\r\nconst AlchemistsSuppliesSystemSpec = _core_CraftingSystemSpecification__WEBPACK_IMPORTED_MODULE_3__[\"CraftingSystemSpecification\"].builder()\r\n    .withName('Alchemist\\'s Supplies v1.6')\r\n    .withCompendiumPackKey(alchemistsSuppliesV16)\r\n    .withEnableHint('Enable the Alchemist\\'s Supplies v1.6 crafting system by /u/calculusChild?')\r\n    .withDescription('Alchemy is the skill of exploiting unique properties of certain plants, minerals, and ' +\r\n    'creature parts, combining them to produce fantastic substances. This allows even non-spellcasters to mimic ' +\r\n    'minor magical effects, although the creations themselves are nonmagical.')\r\n    .withSupportedGameSystem(_core_GameSystemType__WEBPACK_IMPORTED_MODULE_1__[\"GameSystemType\"].DND5E)\r\n    .withFabricator(fabricator)\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Earth', 'Elemental earth, one of the fundamental forces of nature', 'mountain'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Water', 'Elemental water, one of the fundamental forces of nature', 'tint'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Air', 'Elemental air, one of the fundamental forces of nature', 'wind'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Fire', 'Elemental fire, one of the fundamental forces of nature', 'fire'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Positive Energy', 'Positive Energy - The essence of life and creation', 'sun'))\r\n    .withEssence(new _core_CraftingSystem__WEBPACK_IMPORTED_MODULE_6__[\"EssenceDefinition\"]('Negative Energy', 'Negative Energy - The essence of death and destruction', 'moon'))\r\n    .build();\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTYudHM/YjYyNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBMkQ7QUFDRjtBQUNNO0FBQ29CO0FBTzNDO0FBQytCO0FBQ1g7QUFFNUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxxRUFBVyxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUM5QyxxRkFBcUYsQ0FBQyxDQUFDO0FBRTNGLE1BQU0sS0FBSyxHQUFHLElBQUkscUVBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDNUMsNkVBQTZFLENBQUMsQ0FBQztBQUVuRixNQUFNLGVBQWUsR0FBRyxJQUFJLGtFQUFRLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQy9DLDJIQUEySCxFQUMzSCxFQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBQyxDQUFDLENBQUM7QUFFNUMsTUFBTSxVQUFVLEdBQUcsSUFBSSxrRUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUM1Qyx5RkFBeUYsRUFDekYsRUFBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0FBRXZDLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxxRUFBVyxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUN2RCx5RkFBeUY7SUFDekYsNkZBQTZGLENBQUMsQ0FBQztBQUVuRyxNQUFNLFVBQVUsR0FBRyxJQUFJLGtFQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQzVDLHNGQUFzRixFQUN0RixFQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7QUFFdkMsTUFBTSxZQUFZLEdBQUcsSUFBSSx3RUFBYyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUNuRCw2RkFBNkYsRUFDN0YsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0FBRTdCLE1BQU0sVUFBVSxHQUFHLElBQUksa0VBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFDN0MsbUNBQW1DLEVBQ25DLEVBQUMsVUFBVSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUV2QyxNQUFNLGNBQWMsR0FBRyxJQUFJLDBFQUFnQixDQUFDLENBQUMsaUJBQWlCLENBQUMsRUFDM0QsNkNBQTZDLEVBQzdDLENBQUMsQ0FBQyxDQUFDO0FBRVAsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLCtFQUFxQixDQUFDLENBQUMsaUJBQWlCLENBQUMsRUFDckUsOENBQThDLEVBQzlDLENBQUMsQ0FBQyxDQUFDO0FBRVAsTUFBTSxlQUFlLEdBQWdDLHFFQUFlLENBQUMsT0FBTyxFQUFjO0tBQ3JGLGlCQUFpQixDQUFDLENBQUMsQ0FBQztLQUNwQixlQUFlLENBQUMsQ0FBQyxDQUFDO0tBQ2xCLG9CQUFvQixDQUFDLE9BQU8sQ0FBQztLQUM3QixvQkFBb0IsQ0FBQyxLQUFLLENBQUM7S0FDM0Isb0JBQW9CLENBQUMsZUFBZSxDQUFDO0tBQ3JDLG9CQUFvQixDQUFDLFVBQVUsQ0FBQztLQUNoQyxvQkFBb0IsQ0FBQyxnQkFBZ0IsQ0FBQztLQUN0QyxvQkFBb0IsQ0FBQyxVQUFVLENBQUM7S0FDaEMsb0JBQW9CLENBQUMsWUFBWSxDQUFDO0tBQ2xDLG9CQUFvQixDQUFDLFVBQVUsQ0FBQztLQUNoQyxvQkFBb0IsQ0FBQyxjQUFjLENBQUM7S0FDcEMsb0JBQW9CLENBQUMsbUJBQW1CLENBQUM7S0FDekMsS0FBSyxFQUFFLENBQUM7QUFFYixNQUFNLHFCQUFxQixHQUFHLG1DQUFtQyxDQUFDO0FBRWxFLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxxRUFBb0IsQ0FBQyxlQUFlLEVBQUUseUVBQWlCLENBQUMsT0FBTyxFQUFFO0tBQzdGLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQztLQUMzQixZQUFZLENBQUMsOENBQThDLENBQUM7S0FDNUQsVUFBVSxDQUFDLGtCQUFrQixDQUFDO0tBQzlCLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQztLQUNuQyxZQUFZLENBQUMsRUFBRSxDQUFDO0tBQ2hCLEtBQUssRUFBRSxDQUFDLENBQUM7QUFFZCxNQUFNLFVBQVUsR0FBMkIsSUFBSSwyREFBVSxDQUFhLG9CQUFvQixDQUFDLENBQUM7QUFFNUYsTUFBTSw0QkFBNEIsR0FBZ0MsNkZBQTJCLENBQUMsT0FBTyxFQUFFO0tBQ2xHLFFBQVEsQ0FBQyw0QkFBNEIsQ0FBQztLQUN0QyxxQkFBcUIsQ0FBQyxxQkFBcUIsQ0FBQztLQUM1QyxjQUFjLENBQUMsNEVBQTRFLENBQUM7S0FDNUYsZUFBZSxDQUFDLHdGQUF3RjtJQUNyRyw2R0FBNkc7SUFDN0csMEVBQTBFLENBQUM7S0FDOUUsdUJBQXVCLENBQUMsbUVBQWMsQ0FBQyxLQUFLLENBQUM7S0FDN0MsY0FBYyxDQUFDLFVBQVUsQ0FBQztLQUMxQixXQUFXLENBQUMsSUFBSSxzRUFBaUIsQ0FBQyxPQUFPLEVBQUUsMERBQTBELEVBQUUsVUFBVSxDQUFDLENBQUM7S0FDbkgsV0FBVyxDQUFDLElBQUksc0VBQWlCLENBQUMsT0FBTyxFQUFFLDBEQUEwRCxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQy9HLFdBQVcsQ0FBQyxJQUFJLHNFQUFpQixDQUFDLEtBQUssRUFBRSx3REFBd0QsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUMzRyxXQUFXLENBQUMsSUFBSSxzRUFBaUIsQ0FBQyxNQUFNLEVBQUUseURBQXlELEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDN0csV0FBVyxDQUFDLElBQUksc0VBQWlCLENBQUMsaUJBQWlCLEVBQUUsb0RBQW9ELEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDbEgsV0FBVyxDQUFDLElBQUksc0VBQWlCLENBQUMsaUJBQWlCLEVBQUUsd0RBQXdELEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDdkgsS0FBSyxFQUFFLENBQUM7QUFFeUIiLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9yZWdpc3RyaWVzL3N5c3RlbV9kZWZpbml0aW9ucy9BbGNoZW1pc3RzU3VwcGxpZXNWMTYudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0Vzc2VuY2VDb21iaW5lcn0gZnJvbSBcIi4uLy4uL2NvcmUvRXNzZW5jZUNvbWJpbmVyXCI7XHJcbmltcG9ydCB7R2FtZVN5c3RlbVR5cGV9IGZyb20gXCIuLi8uLi9jb3JlL0dhbWVTeXN0ZW1UeXBlXCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdDb21wb25lbnR9IGZyb20gXCIuLi8uLi9jb3JlL0NyYWZ0aW5nQ29tcG9uZW50XCI7XHJcbmltcG9ydCB7Q3JhZnRpbmdTeXN0ZW1TcGVjaWZpY2F0aW9ufSBmcm9tIFwiLi4vLi4vY29yZS9DcmFmdGluZ1N5c3RlbVNwZWNpZmljYXRpb25cIjtcclxuaW1wb3J0IHtcclxuICAgIEFvZUV4dGVuc2lvbjVlLFxyXG4gICAgQ29uZGl0aW9uNWUsXHJcbiAgICBEYW1hZ2U1ZSxcclxuICAgIERpY2VNdWx0aXBsaWVyNWUsXHJcbiAgICBTYXZpbmdUaHJvd01vZGlmaWVyNWVcclxufSBmcm9tIFwiLi4vLi4vZG5kNWUvQWxjaGVtaWNhbEVmZmVjdDVFXCI7XHJcbmltcG9ydCB7QWxjaGVteVNwZWNpZmljYXRpb24sIEZhYnJpY2F0b3J9IGZyb20gXCIuLi8uLi9jb3JlL0ZhYnJpY2F0b3JcIjtcclxuaW1wb3J0IHtFc3NlbmNlRGVmaW5pdGlvbn0gZnJvbSBcIi4uLy4uL2NvcmUvQ3JhZnRpbmdTeXN0ZW1cIjtcclxuXHJcbmNvbnN0IGJsaW5kZWQgPSBuZXcgQ29uZGl0aW9uNWUoWydlYXJ0aCcsICdlYXJ0aCddLFxyXG4gICAgJ1JlbGVhc2UgYSBidXJzdCBvZiBzdGluZ2luZyBkdXN0LiBBZmZlY3RlZCB0YXJnZXRzIGFyZSBibGluZGVkIGZvciB0aGUgbmV4dCByb3VuZC4gJyk7XHJcblxyXG5jb25zdCBwcm9uZSA9IG5ldyBDb25kaXRpb241ZShbJ3dhdGVyJywgJ3dhdGVyJ10sXHJcbiAgICAnUmVsZWFzZSBhIHB1ZGRsZSBvZiBzbGlwcGVyeSBvaWwuIEFmZmVjdGVkIHRhcmdldHMgaW1tZWRpYXRlbHkgZmFsbCBwcm9uZS4gJyk7XHJcblxyXG5jb25zdCBsaWdodG5pbmdEYW1hZ2UgPSBuZXcgRGFtYWdlNWUoWydhaXInLCAnYWlyJ10sXHJcbiAgICAnRGVhbCAxZDQgbGlnaHRuaW5nIGRhbWFnZSBvbiBjb250YWN0LiBEb3VibGUgZGFtYWdlIHRvIHRhcmdldHMgdG91Y2hpbmcgYSBtZXRhbCBzdXJmYWNlIG9yIHVzaW5nIG1ldGFsIHdlYXBvbnMgb3IgYXJtb3IuICcsXHJcbiAgICB7ZXhwcmVzc2lvbjogJzFkNCcsIHR5cGU6ICdsaWdodG5pbmcnfSk7XHJcblxyXG5jb25zdCBmaXJlRGFtYWdlID0gbmV3IERhbWFnZTVlKFsnZmlyZScsICdmaXJlJ10sXHJcbiAgICAnRGVhbCAxZDQgZmlyZSBkYW1hZ2Ugb24gY29udGFjdC4gRG91YmxlIGRhbWFnZSB0byB0YXJnZXRzIHdpdGggY2xvdGggb3IgbGVhdGhlciBhcm1vci4gJyxcclxuICAgIHtleHByZXNzaW9uOiAnMWQ0JywgdHlwZTogJ2ZpcmUnfSk7XHJcblxyXG5jb25zdCBwZXJzaXN0ZW50RGFtYWdlID0gbmV3IENvbmRpdGlvbjVlKFsnZWFydGgnLCAnd2F0ZXInXSxcclxuICAgICdSZWxlYXNlIGdlbCB0aGF0IHN0aWNrcyB0byB0YXJnZXRzLiBFYWNoIHJvdW5kLCBhbnkgZGFtYWdlLWRlYWxpbmcgZWZmZWN0cyBjb250aW51ZSB0byAnICtcclxuICAgICdkZWFsIDEgZGFtYWdlIGVhY2ggdW50aWwgYW4gYWN0aW9uIGlzIHVzZWQgdG8gcmVtb3ZlIHRoZSBnZWwgd2l0aCBhIERDIDEwIERleHRlcml0eSBjaGVjayAuJyk7XHJcblxyXG5jb25zdCBjb2xkRGFtYWdlID0gbmV3IERhbWFnZTVlKFsnd2F0ZXInLCAnYWlyJ10sXHJcbiAgICAnRGVhbCAxZDQgY29sZCBkYW1hZ2Ugb24gY29udGFjdC4gUmVkdWNlIHRhcmdldCBzcGVlZCBieSAxMCBmZWV0IGZvciB0aGUgbmV4dCByb3VuZC4gJyxcclxuICAgIHtleHByZXNzaW9uOiAnMWQ0JywgdHlwZTogJ2NvbGQnfSk7XHJcblxyXG5jb25zdCBhb2VFeHRlbnNpb24gPSBuZXcgQW9lRXh0ZW5zaW9uNWUoWydhaXInLCAnZmlyZSddLFxyXG4gICAgJ1JlbGVhc2UgY29uY2VudHJhdGVkIG1pc3QgaW4gYWxsIGRpcmVjdGlvbnMuIEluY3JlYXNlIHRoZSByYWRpdXMgb2YgYWxsIGVmZmVjdHMgYnkgNSBmZWV0LiAnLFxyXG4gICAge3VuaXRzOiAnZnQnLCB2YWx1ZTogNX0pO1xyXG5cclxuY29uc3QgYWNpZERhbWFnZSA9IG5ldyBEYW1hZ2U1ZShbJ2ZpcmUnLCAnZWFydGgnXSxcclxuICAgICdEZWFsIDFkOCBhY2lkIGRhbWFnZSBvbiBjb250YWN0LiAnLFxyXG4gICAge2V4cHJlc3Npb246ICcxZDgnLCB0eXBlOiAnYWNpZCd9KTtcclxuXHJcbmNvbnN0IGRpY2VNdWx0aXBsaWVyID0gbmV3IERpY2VNdWx0aXBsaWVyNWUoWydwb3NpdGl2ZS1lbmVyZ3knXSxcclxuICAgICdSb2xsIGRvdWJsZSB0aGUgbnVtYmVyIG9mIGFsbCBkYW1hZ2UgZGljZS4gJyxcclxuICAgIDIpO1xyXG5cclxuY29uc3Qgc2F2aW5nVGhyb3dNb2RpZmllciA9IG5ldyBTYXZpbmdUaHJvd01vZGlmaWVyNWUoWyduZWdhdGl2ZS1lbmVyZ3knXSxcclxuICAgICdJbmNyZWFzZSB0aGUgREMgdG8gYXZvaWQgYm9tYiBlZmZlY3RzIGJ5IDIuICcsXHJcbiAgICAyKTtcclxuXHJcbmNvbnN0IGVzc2VuY2VDb21iaW5lcjogRXNzZW5jZUNvbWJpbmVyPEl0ZW1EYXRhNWU+ID0gRXNzZW5jZUNvbWJpbmVyLmJ1aWxkZXI8SXRlbURhdGE1ZT4oKVxyXG4gICAgLndpdGhNYXhDb21wb25lbnRzKDYpXHJcbiAgICAud2l0aE1heEVzc2VuY2VzKDYpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoYmxpbmRlZClcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChwcm9uZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChsaWdodG5pbmdEYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoZmlyZURhbWFnZSlcclxuICAgIC53aXRoQWxjaGVtaWNhbEVmZmVjdChwZXJzaXN0ZW50RGFtYWdlKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KGNvbGREYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoYW9lRXh0ZW5zaW9uKVxyXG4gICAgLndpdGhBbGNoZW1pY2FsRWZmZWN0KGFjaWREYW1hZ2UpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3QoZGljZU11bHRpcGxpZXIpXHJcbiAgICAud2l0aEFsY2hlbWljYWxFZmZlY3Qoc2F2aW5nVGhyb3dNb2RpZmllcilcclxuICAgIC5idWlsZCgpO1xyXG5cclxuY29uc3QgYWxjaGVtaXN0c1N1cHBsaWVzVjE2ID0gJ2ZhYnJpY2F0ZS5hbGNoZW1pc3RzLXN1cHBsaWVzLXYxNic7XHJcblxyXG5jb25zdCBhbGNoZW15U3BlY2lmaWNhdGlvbiA9IG5ldyBBbGNoZW15U3BlY2lmaWNhdGlvbihlc3NlbmNlQ29tYmluZXIsIENyYWZ0aW5nQ29tcG9uZW50LmJ1aWxkZXIoKVxyXG4gICAgLndpdGhOYW1lKCdBbGNoZW1pY2FsIEJvbWInKVxyXG4gICAgLndpdGhJbWFnZVVybCgnc3lzdGVtcy9kbmQ1ZS9pY29ucy9pdGVtcy9pbnZlbnRvcnkvYm9tYi5qcGcnKVxyXG4gICAgLndpdGhQYXJ0SWQoJzkwejluT3dtR25QNGFVVWsnKVxyXG4gICAgLndpdGhTeXN0ZW1JZChhbGNoZW1pc3RzU3VwcGxpZXNWMTYpXHJcbiAgICAud2l0aEVzc2VuY2VzKFtdKVxyXG4gICAgLmJ1aWxkKCkpO1xyXG5cclxuY29uc3QgZmFicmljYXRvcjogRmFicmljYXRvcjxJdGVtRGF0YTVlPiA9IG5ldyBGYWJyaWNhdG9yPEl0ZW1EYXRhNWU+KGFsY2hlbXlTcGVjaWZpY2F0aW9uKTtcclxuXHJcbmNvbnN0IEFsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWM6IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbiA9IENyYWZ0aW5nU3lzdGVtU3BlY2lmaWNhdGlvbi5idWlsZGVyKClcclxuICAgIC53aXRoTmFtZSgnQWxjaGVtaXN0XFwncyBTdXBwbGllcyB2MS42JylcclxuICAgIC53aXRoQ29tcGVuZGl1bVBhY2tLZXkoYWxjaGVtaXN0c1N1cHBsaWVzVjE2KVxyXG4gICAgLndpdGhFbmFibGVIaW50KCdFbmFibGUgdGhlIEFsY2hlbWlzdFxcJ3MgU3VwcGxpZXMgdjEuNiBjcmFmdGluZyBzeXN0ZW0gYnkgL3UvY2FsY3VsdXNDaGlsZD8nKVxyXG4gICAgLndpdGhEZXNjcmlwdGlvbignQWxjaGVteSBpcyB0aGUgc2tpbGwgb2YgZXhwbG9pdGluZyB1bmlxdWUgcHJvcGVydGllcyBvZiBjZXJ0YWluIHBsYW50cywgbWluZXJhbHMsIGFuZCAnICtcclxuICAgICAgICAnY3JlYXR1cmUgcGFydHMsIGNvbWJpbmluZyB0aGVtIHRvIHByb2R1Y2UgZmFudGFzdGljIHN1YnN0YW5jZXMuIFRoaXMgYWxsb3dzIGV2ZW4gbm9uLXNwZWxsY2FzdGVycyB0byBtaW1pYyAnICtcclxuICAgICAgICAnbWlub3IgbWFnaWNhbCBlZmZlY3RzLCBhbHRob3VnaCB0aGUgY3JlYXRpb25zIHRoZW1zZWx2ZXMgYXJlIG5vbm1hZ2ljYWwuJylcclxuICAgIC53aXRoU3VwcG9ydGVkR2FtZVN5c3RlbShHYW1lU3lzdGVtVHlwZS5ETkQ1RSlcclxuICAgIC53aXRoRmFicmljYXRvcihmYWJyaWNhdG9yKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignRWFydGgnLCAnRWxlbWVudGFsIGVhcnRoLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAnbW91bnRhaW4nKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ1dhdGVyJywgJ0VsZW1lbnRhbCB3YXRlciwgb25lIG9mIHRoZSBmdW5kYW1lbnRhbCBmb3JjZXMgb2YgbmF0dXJlJywgJ3RpbnQnKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ0FpcicsICdFbGVtZW50YWwgYWlyLCBvbmUgb2YgdGhlIGZ1bmRhbWVudGFsIGZvcmNlcyBvZiBuYXR1cmUnLCAnd2luZCcpKVxyXG4gICAgLndpdGhFc3NlbmNlKG5ldyBFc3NlbmNlRGVmaW5pdGlvbignRmlyZScsICdFbGVtZW50YWwgZmlyZSwgb25lIG9mIHRoZSBmdW5kYW1lbnRhbCBmb3JjZXMgb2YgbmF0dXJlJywgJ2ZpcmUnKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ1Bvc2l0aXZlIEVuZXJneScsICdQb3NpdGl2ZSBFbmVyZ3kgLSBUaGUgZXNzZW5jZSBvZiBsaWZlIGFuZCBjcmVhdGlvbicsICdzdW4nKSlcclxuICAgIC53aXRoRXNzZW5jZShuZXcgRXNzZW5jZURlZmluaXRpb24oJ05lZ2F0aXZlIEVuZXJneScsICdOZWdhdGl2ZSBFbmVyZ3kgLSBUaGUgZXNzZW5jZSBvZiBkZWF0aCBhbmQgZGVzdHJ1Y3Rpb24nLCAnbW9vbicpKVxyXG4gICAgLmJ1aWxkKCk7XHJcblxyXG5leHBvcnQge0FsY2hlbWlzdHNTdXBwbGllc1N5c3RlbVNwZWN9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/registries/system_definitions/AlchemistsSuppliesV16.ts\n");

/***/ })

/******/ });